shadow$provide[72]=function(Nc,Vb,pc,wb){function p(){if("function"!==typeof WeakMap)return null;var N=new WeakMap;p=function(){return N};return N}function ma(N){return N&&N.__esModule?N:{"default":N}}function Ma(N,a,e){Ma="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(h,u,C){for(;!Object.prototype.hasOwnProperty.call(h,u)&&(h=la(h),null!==h););if(h)return u=Object.getOwnPropertyDescriptor(h,u),u.get?u.get.call(C):u.value};return Ma(N,a,e||N)}function y(N,a){var e=Object.keys(N);if(Object.getOwnPropertySymbols){var h=
Object.getOwnPropertySymbols(N);a&&(h=h.filter(function(u){return Object.getOwnPropertyDescriptor(N,u).enumerable}));e.push.apply(e,h)}return e}function O(N){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?y(e,!0).forEach(function(h){var u=e[h];h in N?Object.defineProperty(N,h,{value:u,enumerable:!0,configurable:!0,writable:!0}):N[h]=u}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(e)):y(e).forEach(function(h){Object.defineProperty(N,
h,Object.getOwnPropertyDescriptor(e,h))})}return N}function X(N,a){if(a&&("object"===ka(a)||"function"===typeof a))return a;if(void 0===N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N}function la(N){la=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)};return la(N)}function ua(N,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function");N.prototype=
Object.create(a&&a.prototype,{constructor:{value:N,writable:!0,configurable:!0}});a&&Ea(N,a)}function Ea(N,a){Ea=Object.setPrototypeOf||function(e,h){e.__proto__=h;return e};return Ea(N,a)}function ka(N){ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"===typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};return ka(N)}function P(N,a){if(!(N instanceof a))throw new TypeError("Cannot call a class as a function");
}function ca(N,a){for(var e=0;e<a.length;e++){var h=a[e];h.enumerable=h.enumerable||!1;h.configurable=!0;"value"in h&&(h.writable=!0);Object.defineProperty(N,h.key,h)}}function va(N,a,e){a&&ca(N.prototype,a);e&&ca(N,e);return N}function ra(N,a){var e=Array.isArray(N)?N:void 0;if(!e)if(Symbol.iterator in Object(N)||"[object Arguments]"===Object.prototype.toString.call(N)){e=[];var h=!0,u=!1,C=void 0;try{for(var W=N[Symbol.iterator](),za;!(h=(za=W.next()).done)&&(e.push(za.value),!a||e.length!==a);h=
!0);}catch(eb){u=!0,C=eb}finally{try{if(!h&&null!=W["return"])W["return"]()}finally{if(u)throw C;}}}else e=void 0;if(!(N=e))throw new TypeError("Invalid attempt to destructure non-iterable instance");return N}function Y(N,a,e,h){N.beginPath();N.arc(a,e,h,0,2*Math.PI,!1);N.closePath()}function qa(N,a,e,h,u,C){var W=Math.PI/180;0>h-2*C&&(C=h/2);0>u-2*C&&(C=u/2);N.beginPath();N.moveTo(a+C,e);N.lineTo(a+h-C,e);N.arc(a+h-C,e+C,C,270*W,360*W,!1);N.lineTo(a+h,e+u-C);N.arc(a+h-C,e+u-C,C,0,90*W,!1);N.lineTo(a+
C,e+u);N.arc(a+C,e+u-C,C,90*W,180*W,!1);N.lineTo(a,e+C);N.arc(a+C,e+C,C,180*W,270*W,!1);N.closePath()}function ya(N,a,e,h,u){var C=h/2*.5522848,W=u/2*.5522848,za=a+h,eb=e+u;h=a+h/2;u=e+u/2;N.beginPath();N.moveTo(a,u);N.bezierCurveTo(a,u-W,h-C,e,h,e);N.bezierCurveTo(h+C,e,za,u-W,za,u);N.bezierCurveTo(za,u+W,h+C,eb,h,eb);N.bezierCurveTo(h-C,eb,a,u+W,a,u);N.closePath()}function ia(N,a,e,h,u){var C=1/3*u,W=h/2*.5522848,za=C/2*.5522848,eb=a+h,Eb=e+C;h=a+h/2;var $b=e+C/2;C=e+(u-C/2);u=e+u;N.beginPath();
N.moveTo(eb,$b);N.bezierCurveTo(eb,$b+za,h+W,Eb,h,Eb);N.bezierCurveTo(h-W,Eb,a,$b+za,a,$b);N.bezierCurveTo(a,$b-za,h-W,e,h,e);N.bezierCurveTo(h+W,e,eb,$b-za,eb,$b);N.lineTo(eb,C);N.bezierCurveTo(eb,C+za,h+W,u,h,u);N.bezierCurveTo(h-W,u,a,C+za,a,C);N.lineTo(a,$b)}function ea(N,a,e,h,u,C){N.beginPath();N.moveTo(a,e);var W=C.length;h-=a;var za=u-e;u=za/h;za=Math.sqrt(h*h+za*za);for(var eb=0,Eb=!0,$b,jc;.1<=za;)jc=+C[eb++%W],jc>za&&(jc=za),$b=Math.sqrt(jc*jc/(1+u*u)),$b=0>h?-$b:$b,a+=$b,e+=u*$b,!0===
Eb?N.lineTo(a,e):N.moveTo(a,e),za-=jc,Eb=!Eb}function Ha(N){return Object.prototype.hasOwnProperty.call(nb,N)?nb[N]:function(a){for(var e=arguments.length,h=Array(1<e?e-1:0),u=1;u<e;u++)h[u-1]=arguments[u];CanvasRenderingContext2D.prototype[N].call(a,h)}}function aa(N){nc=N;N={};Fc=0;oc=nc.charAt(0);l();"strict"===ec&&(N.strict=!0,l());if("graph"===ec||"digraph"===ec)N.type=ec,l();lb===Nb.IDENTIFIER&&(N.id=ec,l());if("{"!=ec)throw R("Angle bracket { expected");l();q(N);if("}"!=ec)throw R("Angle bracket } expected");
l();if(""!==ec)throw R("End of file expected");l();delete N.node;delete N.edge;delete N.graph;return N}function Ba(){Fc++;oc=nc.charAt(Fc)}function Va(){return nc.charAt(Fc+1)}function Ya(N,a){N||(N={});if(a)for(var e in a)a.hasOwnProperty(e)&&(N[e]=a[e]);return N}function d(N,a){for(var e,h,u=null,C=[N],W=N;W.parent;)C.push(W.parent),W=W.parent;if(W.nodes)for(e=0,h=W.nodes.length;e<h;e++)if(a.id===W.nodes[e].id){u=W.nodes[e];break}u||(u={id:a.id},N.node&&(u.attr=Ya(u.attr,N.node)));for(e=C.length-
1;0<=e;e--)N=C[e],N.nodes||(N.nodes=[]),-1===N.nodes.indexOf(u)&&N.nodes.push(u);a.attr&&(u.attr=Ya(u.attr,a.attr))}function f(N,a,e,h,u){a={from:a,to:e,type:h};N.edge&&(a.attr=Ya({},N.edge));a.attr=Ya(a.attr||{},u);null!=u&&u.hasOwnProperty("arrows")&&null!=u.arrows&&(a.arrows={to:{enabled:!0,type:u.arrows.type}},u.arrows=null);return a}function l(){lb=Nb.NULL;for(ec="";" "===oc||"\t"===oc||"\n"===oc||"\r"===oc;)Ba();do{var N=!1;if("#"===oc){for(var a=Fc-1;" "===nc.charAt(a)||"\t"===nc.charAt(a);)a--;
if("\n"===nc.charAt(a)||""===nc.charAt(a)){for(;""!=oc&&"\n"!=oc;)Ba();N=!0}}if("/"===oc&&"/"===Va()){for(;""!=oc&&"\n"!=oc;)Ba();N=!0}if("/"===oc&&"*"===Va()){for(;""!=oc;)if("*"===oc&&"/"===Va()){Ba();Ba();break}else Ba();N=!0}for(;" "===oc||"\t"===oc||"\n"===oc||"\r"===oc;)Ba()}while(N);if(""===oc)lb=Nb.DELIMITER;else if(N=oc+Va(),cc[N])lb=Nb.DELIMITER,ec=N,Ba(),Ba();else if(cc[oc])lb=Nb.DELIMITER,ec=oc,Ba();else if(Gb.test(oc)||"-"===oc){ec+=oc;for(Ba();Gb.test(oc);)ec+=oc,Ba();"false"===ec?ec=
!1:"true"===ec?ec=!0:isNaN(Number(ec))||(ec=Number(ec));lb=Nb.IDENTIFIER}else if('"'===oc){for(Ba();""!=oc&&('"'!=oc||'"'===oc&&'"'===Va());)'"'===oc?(ec+=oc,Ba()):"\\"===oc&&"n"===Va()?(ec+="\n",Ba()):ec+=oc,Ba();if('"'!=oc)throw R('End of string " expected');Ba();lb=Nb.IDENTIFIER}else{for(lb=Nb.UNKNOWN;""!=oc;)ec+=oc,Ba();throw new SyntaxError('Syntax error in part "'+(30>=ec.length?ec:ec.substr(0,27)+"...")+'"');}}function q(N){for(;""!==ec&&"}"!=ec;){var a=N,e=w(a);if(e)G(a,e);else if(!z(a)){if(lb!=
Nb.IDENTIFIER)throw R("Identifier expected");e=ec;l();if("\x3d"===ec){l();if(lb!=Nb.IDENTIFIER)throw R("Identifier expected");a[e]=ec;l()}else{var h={id:e},u=H();u&&(h.attr=u);d(a,h);G(a,e)}}";"===ec&&l()}}function w(N){var a=null;"subgraph"===ec&&(a={type:"subgraph"},l(),lb===Nb.IDENTIFIER&&(a.id=ec,l()));if("{"===ec){l();a||(a={});a.parent=N;a.node=N.node;a.edge=N.edge;a.graph=N.graph;q(a);if("}"!=ec)throw R("Angle bracket } expected");l();delete a.node;delete a.edge;delete a.graph;delete a.parent;
N.subgraphs||(N.subgraphs=[]);N.subgraphs.push(a)}return a}function z(N){return"node"===ec?(l(),N.node=H(),"node"):"edge"===ec?(l(),N.edge=H(),"edge"):"graph"===ec?(l(),N.graph=H(),"graph"):null}function G(N,a){for(;"-\x3e"===ec||"--"===ec;){var e=ec;l();var h=w(N);if(!h){if(lb!=Nb.IDENTIFIER)throw R("Identifier or subgraph expected");h=ec;d(N,{id:h});l()}var u=H();e=f(N,a,h,e,u);a=N;a.edges||(a.edges=[]);a.edges.push(e);a.edge&&(a=Ya({},a.edge),e.attr=Ya(a,e.attr));a=h}}function H(){var N=null;var a=
{dashed:!0,solid:!1,dotted:[1,5]};var e={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"};for(var h=[],u=[];"["===ec;){l();for(N={};""!==ec&&"]"!=ec;){if(lb!=Nb.IDENTIFIER)throw R("Attribute name expected");var C=ec;l();if("\x3d"!=ec)throw R("Equal sign \x3d expected");l();if(lb!=Nb.IDENTIFIER)throw R("Attribute value expected");var W=ec;"style"===C&&(W=a[W]);"arrowhead"===C&&(W=e[W],C="arrows",W={to:{enabled:!0,
type:W}});"arrowtail"===C&&(W=e[W],C="arrows",W={from:{enabled:!0,type:W}});h.push({attr:N,name:C,value:W});u.push(C);l();","==ec&&l()}if("]"!=ec)throw R("Bracket ] expected");l()}if(u.includes("dir")){var za;C=e=void 0;for(a=0;a<h.length;a++)if("arrows"===h[a].name)if(null!=h[a].value.to)e=a;else if(null!=h[a].value.from)C=a;else throw R("Invalid value of arrows");else"dir"===h[a].name&&(za=a);a=h[za].value;if(!u.includes("arrows"))if("both"===a)h.push({attr:h[za].attr,name:"arrows",value:{to:{enabled:!0}}}),
e=h.length-1,h.push({attr:h[za].attr,name:"arrows",value:{from:{enabled:!0}}}),C=h.length-1;else if("forward"===a)h.push({attr:h[za].attr,name:"arrows",value:{to:{enabled:!0}}}),e=h.length-1;else if("back"===a)h.push({attr:h[za].attr,name:"arrows",value:{from:{enabled:!0}}}),C=h.length-1;else if("none"===a)h.push({attr:h[za].attr,name:"arrows",value:""}),e=h.length-1;else throw R('Invalid dir type "'+a+'"');if("both"===a)e&&C?(W=h[e].value.to.type,a=h[C].value.from.type,h[e]={attr:h[e].attr,name:h[e].name,
value:{to:{enabled:!0,type:W},from:{enabled:!0,type:a}}},h.splice(C,1)):e?(W=h[e].value.to.type,h[e]={attr:h[e].attr,name:h[e].name,value:{to:{enabled:!0,type:W},from:{enabled:!0,type:"arrow"}}}):C&&(a=h[C].value.from.type,h[C]={attr:h[C].attr,name:h[C].name,value:{to:{enabled:!0,type:"arrow"},from:{enabled:!0,type:a}}});else if("back"===a)e&&C?(a=h[C].value.from.type,h[C]={attr:h[C].attr,name:h[C].name,value:{to:{enabled:!0,type:""},from:{enabled:!0,type:a}}}):e?(C=e,h[C]={attr:h[C].attr,name:h[C].name,
value:{to:{enabled:!0,type:""},from:{enabled:!0,type:"arrow"}}}):C&&(a=h[C].value.from.type,h[e]={attr:h[C].attr,name:h[C].name,value:{to:{enabled:!0,type:""},from:{enabled:!0,type:a}}}),h[C]={attr:h[C].attr,name:h[C].name,value:{from:{enabled:!0,type:h[C].value.from.type}}};else if("none"===a)a=e?e:C,h[a]={attr:h[a].attr,name:h[a].name,value:""};else if("forward"===a)e&&C?(W=h[e].value.to.type,h[e]={attr:h[e].attr,name:h[e].name,value:{to:{enabled:!0,type:W},from:{enabled:!0,type:""}}}):e?(W=h[e].value.to.type,
h[e]={attr:h[e].attr,name:h[e].name,value:{to:{enabled:!0,type:W},from:{enabled:!0,type:""}}}):C&&(e=C,h[e]={attr:h[e].attr,name:h[e].name,value:{to:{enabled:!0,type:"arrow"},from:{enabled:!0,type:""}}}),h[e]={attr:h[e].attr,name:h[e].name,value:{to:{enabled:!0,type:h[e].value.to.type}}};else throw R('Invalid dir type "'+a+'"');h.splice(za,1)}if(u.includes("penwidth")){za=[];u=h.length;for(a=0;a<u;a++)"width"!==h[a].name&&("penwidth"===h[a].name&&(h[a].name="width"),za.push(h[a]));h=za}u=h.length;
for(a=0;a<u;a++)for(C=h[a].attr,za=h[a].value,e=h[a].name.split(".");e.length;)W=e.shift(),e.length?(C[W]||(C[W]={}),C=C[W]):C[W]=za;return N}function R(N){return new SyntaxError(N+', got "'+(30>=ec.length?ec:ec.substr(0,27)+"...")+'" (char '+Fc+")")}function ha(N,a,e){Array.isArray(N)?N.forEach(function(h){Array.isArray(a)?a.forEach(function(u){e(h,u)}):e(h,a)}):Array.isArray(a)?a.forEach(function(h){e(N,h)}):e(N,a)}function Ja(N,a,e){a=a.split(".");for(var h=a.pop(),u=N,C=0;C<a.length;C++){var W=
a[C];W in u||(u[W]={});u=u[W]}u[h]=e;return N}function D(N,a){var e={},h;for(h in N)if(N.hasOwnProperty(h)){var u=a[h];Array.isArray(u)?u.forEach(function(C){Ja(e,C,N[h])}):"string"===typeof u?Ja(e,u,N[h]):Ja(e,h,N[h])}return e}function Q(N){N=aa(N);var a={nodes:[],edges:[],options:{}};N.nodes&&N.nodes.forEach(function(h){var u={id:h.id,label:String(h.label||h.id)};Ya(u,D(h.attr,sb));u.image&&(u.shape="image");a.nodes.push(u)});if(N.edges){var e=function(h){var u={from:h.from,to:h.to};Ya(u,D(h.attr,
hc));null==u.arrows&&"-\x3e"===h.type&&(u.arrows="to");return u};N.edges.forEach(function(h){var u=h.from instanceof Object?h.from.nodes:{id:h.from};var C=h.to instanceof Object?h.to.nodes:{id:h.to};h.from instanceof Object&&h.from.edges&&h.from.edges.forEach(function(W){W=e(W);a.edges.push(W)});ha(u,C,function(W,za){W=f(a,W.id,za.id,h.type,h.attr);W=e(W);a.edges.push(W)});h.to instanceof Object&&h.to.edges&&h.to.edges.forEach(function(W){W=e(W);a.edges.push(W)})})}N.attr&&(a.options=N.attr);return a}
function oa(N,a){var e=!1,h=!1,u=!1;null!=a&&(null!=a.fixed&&(h=a.fixed),null!=a.parseColor&&(u=a.parseColor),null!=a.inheritColor&&(e=a.inheritColor));a=N.edges.map(function(C){var W={from:C.source,id:C.id,to:C.target};null!=C.attributes&&(W.attributes=C.attributes);null!=C.label&&(W.label=C.label);null!=C.attributes&&null!=C.attributes.title&&(W.title=C.attributes.title);"Directed"===C.type&&(W.arrows="to");C.color&&!1===e&&(W.color=C.color);return W});return{nodes:N.nodes.map(function(C){var W=
{id:C.id,fixed:h&&null!=C.x&&null!=C.y};null!=C.attributes&&(W.attributes=C.attributes);null!=C.label&&(W.label=C.label);null!=C.size&&(W.size=C.size);null!=C.attributes&&null!=C.attributes.title&&(W.title=C.attributes.title);null!=C.title&&(W.title=C.title);null!=C.x&&(W.x=C.x);null!=C.y&&(W.y=C.y);null!=C.color&&(W.color=!0===u?C.color:{background:C.color,border:C.color,highlight:{background:C.color,border:C.color},hover:{background:C.color,border:C.color}});return W}),edges:a}}function Fa(N){var a=
this;this.active=!1;this.dom={container:N};this.dom.overlay=document.createElement("div");this.dom.overlay.className="vis-overlay";this.dom.container.appendChild(this.dom.overlay);this.hammer=hb(this.dom.overlay);this.hammer.on("tap",this._onTapOverlay.bind(this));"tap doubletap press pinch pan panstart panmove panend".split(" ").forEach(function(e){a.hammer.on(e,function(h){h.srcEvent.stopPropagation()})});document&&document.body&&(this.onClick=function(e){a:{for(e=e.target;e;){if(e===N){e=!0;break a}e=
e.parentNode}e=!1}e||a.deactivate()},document.body.addEventListener("click",this.onClick));void 0!==this.keycharm&&this.keycharm.destroy();this.keycharm=(0,Na["default"])();this.escListener=this.deactivate.bind(this)}function Ga(N,a){try{var e=a.split(/[-_ \/]/,2),h=ra(e,2),u=h[0],C=h[1],W=null!=u?u.toLowerCase():null,za=null!=C?C.toUpperCase():null;if(W&&za){e=W+"-"+za;if(Object.prototype.hasOwnProperty.call(N,e))return e;console.warn("Unknown variant ".concat(za," of language ").concat(W,"."))}if(W){if(Object.prototype.hasOwnProperty.call(N,
W))return W;console.warn("Unknown language ".concat(W))}console.warn("Unknown locale ".concat(a,", falling back to English."));return"en"}catch(eb){return console.error(eb),console.warn("Unexpected error while normalizing locale ".concat(a,", falling back to English.")),"en"}}function xb(N,a){var e=["node","edge","label"],h=!0,u=(0,La.topMost)(a,"chosen");if("boolean"===typeof u)h=u;else if("object"===ka(u)){if(-1===e.indexOf(N))throw Error("choosify: subOption '"+N+"' should be one of '"+e.join("', '")+
"'");N=(0,La.topMost)(a,["chosen",N]);if("boolean"===typeof N||"function"===typeof N)h=N}return h}function Hb(N,a,e){if(0>=N.width||0>=N.height)return!1;void 0!==e&&(a={x:a.x-e.x,y:a.y-e.y},0!==e.angle&&(e=-e.angle,a={x:Math.cos(e)*a.x-Math.sin(e)*a.y,y:Math.sin(e)*a.x+Math.cos(e)*a.y}));e=N.x+N.width;var h=N.y+N.width;return N.left<a.x&&e>a.x&&N.top<a.y&&h>a.y}function Kb(N){return"string"===typeof N&&""!==N}function Cb(N,a,e,h){var u=h.x,C=h.y;"function"===typeof h.distanceToBorder?(N=h.distanceToBorder(N,
a),e=Math.sin(a)*N,a=Math.cos(a)*N,a===N?(u+=N,C=h.y):e===N?(u=h.x,C-=N):(u+=a,C-=e)):h.shape.width>h.shape.height?(u=h.x+.5*h.shape.width,C=h.y-e):(u=h.x+e,C=h.y-.5*h.shape.height);return{x:u,y:C}}function ib(){var N;void 0!==window&&(N=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame);window.requestAnimationFrame=void 0===N?function(a){a()}:N}function Ib(N,a){a.inputHandler=function(e){e.isFirst&&a(e)};N.on("hammer.input",
a.inputHandler)}function Oa(N,a){a.inputHandler=function(e){e.isFinal&&a(e)};return N.on("hammer.input",a.inputHandler)}function Ua(N,a){var e=new Set;N.forEach(function(h){h.edges.forEach(function(u){u.connected&&e.add(u)})});e.forEach(function(h){var u=h.from.id;h=h.to.id;null==a[u]&&(a[u]=0);if(null==a[h]||a[u]>=a[h])a[h]=a[u]+1});return a}function Pa(N){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Object.create(null);return Qa(function(e){return e.edges.filter(function(h){return N.has(h.toId)}).every(function(h){return h.to===
e})},function(e,h){return h>e},"from",N,a)}function ja(N){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Object.create(null);return Qa(function(e){return e.edges.filter(function(h){return N.has(h.toId)}).every(function(h){return h.from===e})},function(e,h){return h<e},"to",N,a)}function Qa(N,a,e,h,u){var C=h.size,W=e+"Id",za="to"===e?1:-1,eb=!0,Eb=!1,$b=void 0;try{for(var jc=function(){var Lc=ra(zc.value,2),Rc=Lc[0];Lc=Lc[1];if(!h.has(Rc)||!N(Lc))return"continue";u[Rc]=0;var Tc=[Lc],
Zc=0,jd=void 0;for(Lc=function(){if(!h.has(Rc))return"continue";var fd=u[jd.id]+za;jd.edges.filter(function(ed){return ed.connected&&ed.to!==ed.from&&ed[e]!==jd&&h.has(ed.toId)&&h.has(ed.fromId)}).forEach(function(ed){var Dc=ed[W],$c=u[Dc];if(null==$c||a(fd,$c))u[Dc]=fd,Tc.push(ed[e])});if(Zc>C)return{v:{v:Ua(h,u)}};++Zc};jd=Tc.pop();){var ld=Lc();switch(ld){case "continue":continue;default:if("object"===ka(ld))return ld.v}}},uc=h[Symbol.iterator](),zc;!(eb=(zc=uc.next()).done);eb=!0){var Ic=jc();
switch(Ic){case "continue":continue;default:if("object"===ka(Ic))return Ic.v}}}catch(Lc){Eb=!0,$b=Lc}finally{try{if(!eb&&null!=uc["return"])uc["return"]()}finally{if(Eb)throw $b;}}return u}function Za(N,a,e){var h=this;if(!(this instanceof Za))throw new SyntaxError("Constructor must be called with the new operator");this.options={};this.defaultOptions={locale:"en",locales:Mb,clickToUse:!1};Object.assign(this.options,this.defaultOptions);this.body={container:N,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],
emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this),once:this.once.bind(this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},
modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}};this.bindEventListeners();this.images=new Ub(function(){return h.body.emitter.emit("_requestRedraw")});this.groups=new lc;this.canvas=new me(this.body);this.selectionHandler=new vd(this.body,this.canvas);this.interactionHandler=new Md(this.body,this.canvas,this.selectionHandler);this.view=new Sd(this.body,this.canvas);this.renderer=new le(this.body,this.canvas);this.physics=new Hc(this.body);
this.layoutEngine=new qe(this.body);this.clustering=new cd(this.body);this.manipulation=new Nd(this.body,this.canvas,this.selectionHandler,this.interactionHandler);this.nodesHandler=new vc(this.body,this.images,this.groups,this.layoutEngine);this.edgesHandler=new Z(this.body,this.images,this.groups);this.body.modules.kamadaKawai=new ob(this.body,150,.05);this.body.modules.clustering=this.clustering;this.canvas._create();this.setOptions(e);this.setData(a)}Object.defineProperty(wb,"__esModule",{value:!0});
wb.Network=Za;wb.parseGephiNetwork=oa;wb.parseDOTNetwork=wb.networkOptions=wb.networkGephiParser=wb.networkDOTParser=wb.NetworkImages=void 0;var qb=ma(Vb(67)),La=Vb(62),Na=ma(Vb(68)),kb=ma(Vb(69)),Sa=Vb(64),vb=Vb(61),jb=function(N){if(N&&N.__esModule)return N;if(null===N||"object"!==ka(N)&&"function"!==typeof N)return{"default":N};var a=p();if(a&&a.has(N))return a.get(N);var e={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor,u;for(u in N)if(Object.prototype.hasOwnProperty.call(N,u)){var C=
h?Object.getOwnPropertyDescriptor(N,u):null;C&&(C.get||C.set)?Object.defineProperty(e,u,C):e[u]=N[u]}e["default"]=N;a&&a.set(N,e);return e}(Vb(71)),nb={circle:Y,dashedLine:ea,database:ia,diamond:function(N,a,e,h){N.beginPath();N.lineTo(a,e+h);N.lineTo(a+h,e);N.lineTo(a,e-h);N.lineTo(a-h,e);N.closePath()},ellipse:ya,ellipse_vis:ya,hexagon:function(N,a,e,h){N.beginPath();var u=2*Math.PI/6;N.moveTo(a+h,e);for(var C=1;6>C;C++)N.lineTo(a+h*Math.cos(u*C),e+h*Math.sin(u*C));N.closePath()},roundRect:qa,square:function(N,
a,e,h){N.beginPath();N.rect(a-h,e-h,2*h,2*h);N.closePath()},star:function(N,a,e,h){N.beginPath();h*=.82;e+=.1*h;for(var u=0;10>u;u++){var C=0===u%2?1.3*h:.5*h;N.lineTo(a+C*Math.sin(2*u*Math.PI/10),e-C*Math.cos(2*u*Math.PI/10))}N.closePath()},triangle:function(N,a,e,h){N.beginPath();h*=1.15;e+=.275*h;var u=2*h;h=u/2;var C=Math.sqrt(3)/6*u;u=Math.sqrt(u*u-h*h);N.moveTo(a,e-(u-C));N.lineTo(a+h,e+C);N.lineTo(a-h,e+C);N.lineTo(a,e-(u-C));N.closePath()},triangleDown:function(N,a,e,h){N.beginPath();h*=1.15;
e-=.275*h;var u=2*h;h=u/2;var C=Math.sqrt(3)/6*u;u=Math.sqrt(u*u-h*h);N.moveTo(a,e+(u-C));N.lineTo(a+h,e-C);N.lineTo(a-h,e-C);N.lineTo(a,e+(u-C));N.closePath()}},sb={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},hc=Object.create(sb);hc.color="color.color";hc.style="dashes";var Nb={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},cc={"{":!0,"}":!0,"[":!0,
"]":!0,";":!0,"\x3d":!0,",":!0,"-\x3e":!0,"--":!0},nc="",Fc=0,oc="",ec="",lb=Nb.NULL,Gb=/[a-zA-Z_0-9.:#]/,kc=Object.freeze({__proto__:null,parseDOT:aa,DOTToGraph:Q});wb.networkDOTParser=kc;var V=Object.freeze({__proto__:null,parseGephi:oa});wb.networkGephiParser=V;var hb=function(N,a,e){return e={path:a,exports:{},require:function(h,u){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}},N(e,e.exports),e.exports}(function(N){function a(){var e=function(){};return{on:e,
off:e,destroy:e,emit:e,get:function(h){return{set:e}}}}N.exports="undefined"!==typeof window?window.Hammer||kb["default"]:function(){return a()}});(0,qb["default"])(Fa.prototype);Fa.current=null;Fa.prototype.destroy=function(){this.deactivate();this.dom.overlay.parentNode.removeChild(this.dom.overlay);this.onClick&&document.body.removeEventListener("click",this.onClick);void 0!==this.keycharm&&this.keycharm.destroy();this.keycharm=null;this.hammer.destroy();this.hammer=null};Fa.prototype.activate=
function(){Fa.current&&Fa.current.deactivate();Fa.current=this;this.active=!0;this.dom.overlay.style.display="none";(0,La.addClassName)(this.dom.container,"vis-active");this.emit("change");this.emit("activate");this.keycharm.bind("esc",this.escListener)};Fa.prototype.deactivate=function(){this.active=!1;this.dom.overlay.style.display="block";(0,La.removeClassName)(this.dom.container,"vis-active");this.keycharm.unbind("esc",this.escListener);this.emit("change");this.emit("deactivate")};Fa.prototype._onTapOverlay=
function(N){this.activate();N.srcEvent.stopPropagation()};var Mb=Object.freeze({__proto__:null,en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",
editNode:"Edit Node"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufügen",addNode:"Knoten hinzufügen",back:"Zurück",createEdgeError:"Es ist nicht möglich, Kanten mit Clustern zu verbinden.",del:"Lösche Auswahl",deleteClusterError:"Cluster können nicht gelöscht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster können nicht editiert werden.",
editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},es:{addDescription:"Haga clic en un lugar vacío para colocar un nuevo nodo.",addEdge:"Añadir arista",addNode:"Añadir nodo",back:"Atrás",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selección",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",
edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",
edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",
edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espaço em branco para adicionar um novo nó",addEdge:"Adicionar aresta",addNode:"Adicionar nó",back:"Voltar",createEdgeError:"Não foi possível linkar arestas a um cluster.",
del:"Remover selecionado",deleteClusterError:"Clusters não puderam ser removidos.",edgeDescription:"Clique em um nó e arraste a aresta até outro nó para conectá-los",edit:"Editar",editClusterError:"Clusters não puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nó para conectá-los",editNode:"Editar nó"},ru:{addDescription:"Кликните в свободное место, чтобы добавить новый узел.",addEdge:"Добавить ребро",addNode:"Добавить узел",back:"Назад",
createEdgeError:"Невозможно соединить ребра в кластер.",del:"Удалить выбранное",deleteClusterError:"Кластеры не могут быть удалены",edgeDescription:"Кликните на узел и протяните ребро к другому узлу, чтобы соединить их.",edit:"Редактировать",editClusterError:"Кластеры недоступны для редактирования.",editEdge:"Редактировать ребро",editEdgeDescription:"Кликните на контрольные точки и перетащите их в узел, чтобы подключиться к нему.",editNode:"Редактировать узел"},cn:{addDescription:"单击空白处放置新节点。",addEdge:"添加连接线",
addNode:"添加节点",back:"返回",createEdgeError:"无法将连接线连接到群集。",del:"删除选定",deleteClusterError:"无法删除群集。",edgeDescription:"单击某个节点并将该连接线拖动到另一个节点以连接它们。",edit:"编辑",editClusterError:"无法编辑群集。",editEdge:"编辑连接线",editEdgeDescription:"单击控制节点并将它们拖到节点上连接。",editNode:"编辑节点"},uk:{addDescription:"Kлікніть на вільне місце, щоб додати новий вузол.",addEdge:"Додати край",addNode:"Додати вузол",back:"Назад",createEdgeError:"Не можливо об'єднати краї в групу.",del:"Видалити обране",deleteClusterError:"Групи не можуть бути видалені.",
edgeDescription:"Клікніть на вузол і перетягніть край до іншого вузла, щоб їх з'єднати.",edit:"Редагувати",editClusterError:"Групи недоступні для редагування.",editEdge:"Редагувати край",editEdgeDescription:"Клікніть на контрольні точки і перетягніть їх у вузол, щоб підключитися до нього.",editNode:"Редагувати вузол"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un nœud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nœud",back:"Retour",createEdgeError:"Impossible de créer un lien vers un cluster.",
del:"Effacer la sélection",deleteClusterError:"Les clusters ne peuvent pas être effacés.",edgeDescription:"Cliquez sur un nœud et glissez le lien vers un autre nœud pour les connecter.",edit:"Éditer",editClusterError:"Les clusters ne peuvent pas être édités.",editEdge:"Éditer le lien",editEdgeDescription:"Cliquez sur les points de contrôle et glissez-les pour connecter un nœud.",editNode:"Éditer le nœud"},cs:{addDescription:"Kluknutím do prázdného prostoru můžete přidat nový vrchol.",addEdge:"Přidat hranu",
addNode:"Přidat vrchol",back:"Zpět",createEdgeError:"Nelze připojit hranu ke shluku.",del:"Smazat výběr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"Přetažením z jednoho vrcholu do druhého můžete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"Přetažením kontrolního vrcholu hrany ji můžete připojit k jinému vrcholu.",editNode:"Upravit vrchol"}}),Wb=function(){function N(){P(this,N);this.NUM_ITERATIONS=
4;this.image=new Image;this.canvas=document.createElement("canvas")}va(N,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var a=this.image.width,e=this.image.height;this.width=a;this.height=e;var h=Math.floor(e/2),u=Math.floor(e/4),C=Math.floor(e/8);e=Math.floor(e/16);var W=Math.floor(a/2),za=Math.floor(a/4),eb=Math.floor(a/8);a=Math.floor(a/16);this.canvas.width=3*za;this.canvas.height=h;this.coordinates=[[0,0,W,h],[W,0,za,u],[W,u,eb,C],[5*eb,u,a,e]];this._fillMipMap()}}},
{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var a=this.canvas.getContext("2d"),e=this.coordinates[0];a.drawImage(this.image,e[0],e[1],e[2],e[3]);for(e=1;e<this.NUM_ITERATIONS;e++){var h=this.coordinates[e-1],u=this.coordinates[e];a.drawImage(this.canvas,h[0],h[1],h[2],h[3],u[0],u[1],u[2],u[3])}}},{key:"drawImageAtPosition",value:function(a,e,h,u,C,W){if(this.initialized())if(2<e){e*=.5;for(var za=0;2<e&&za<this.NUM_ITERATIONS;)e*=.5,za+=
1;za>=this.NUM_ITERATIONS&&(za=this.NUM_ITERATIONS-1);e=this.coordinates[za];a.drawImage(this.canvas,e[0],e[1],e[2],e[3],h,u,C,W)}else a.drawImage(this.image,h,u,C,W)}}]);return N}(),Ub=function(){function N(a){P(this,N);this.images={};this.imageBroken={};this.callback=a}va(N,[{key:"_tryloadBrokenUrl",value:function(a,e,h){void 0!==a&&void 0!==h&&(void 0===e?console.warn("No broken url image defined"):(h.image.onerror=function(){console.error("Could not load brokenImage:",e)},h.image.src=e))}},{key:"_redrawWithImage",
value:function(a){this.callback&&this.callback(a)}},{key:"load",value:function(a,e){var h=this,u=this.images[a];if(u)return u;var C=new Wb;this.images[a]=C;C.image.onload=function(){h._fixImageCoordinates(C.image);C.init();h._redrawWithImage(C)};C.image.onerror=function(){console.error("Could not load image:",a);h._tryloadBrokenUrl(a,e,C)};C.image.src=a;return C}},{key:"_fixImageCoordinates",value:function(a){0===a.width&&(document.body.appendChild(a),a.width=a.offsetWidth,a.height=a.offsetHeight,
document.body.removeChild(a))}}]);return N}();wb.NetworkImages=Ub;var lc=function(){function N(){P(this,N);this.clear();this.defaultIndex=0;this.groupsArray=[];this.groupIndex=0;this.defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",
highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},
{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",
background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},
hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",
background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}];this.options={};this.defaultOptions={useDefaultGroups:!0};Object.assign(this.options,this.defaultOptions)}va(N,[{key:"setOptions",value:function(a){var e=["useDefaultGroups"];
if(void 0!==a)for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&-1===e.indexOf(h)&&this.add(h,a[h])}},{key:"clear",value:function(){this.groups={};this.groupsArray=[]}},{key:"get",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,h=this.groups[a];void 0===h&&e&&(!1===this.options.useDefaultGroups&&0<this.groupsArray.length?(e=this.groupIndex%this.groupsArray.length,this.groupIndex++,h={},h.color=this.groups[this.groupsArray[e]]):(e=this.defaultIndex%this.defaultGroups.length,
this.defaultIndex++,h={},h.color=this.defaultGroups[e]),this.groups[a]=h);return h}},{key:"add",value:function(a,e){this.groups[a]=e;this.groupsArray.push(a);return e}}]);return N}(),gb=function(){function N(a){P(this,N);this.measureText=a;this.height=this.width=this.current=0;this.lines=[]}va(N,[{key:"_add",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[a]&&(this.lines[a]={width:0,height:0,blocks:[]});var u=e;if(void 0===e||""===e)u=
" ";u=this.measureText(u,h);var C=Object.assign({},u.values);C.text=e;C.width=u.width;C.mod=h;if(void 0===e||""===e)C.width=0;this.lines[a].blocks.push(C);this.lines[a].width+=C.width}},{key:"curWidth",value:function(){var a=this.lines[this.current];return void 0===a?0:a.width}},{key:"append",value:function(a){this._add(this.current,a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal")}},{key:"newLine",value:function(a){this._add(this.current,a,1<arguments.length&&void 0!==arguments[1]?
arguments[1]:"normal");this.current++}},{key:"determineLineHeights",value:function(){for(var a=0;a<this.lines.length;a++){var e=this.lines[a],h=0;if(void 0!==e.blocks)for(var u=0;u<e.blocks.length;u++){var C=e.blocks[u];h<C.height&&(h=C.height)}e.height=h}}},{key:"determineLabelSize",value:function(){for(var a=0,e=0,h=0;h<this.lines.length;h++){var u=this.lines[h];u.width>a&&(a=u.width);e+=u.height}this.width=a;this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var a=[],e=0;e<this.lines.length;e++){var h=
this.lines[e];if(0!==h.blocks.length&&(e!==this.lines.length-1||0!==h.width)){var u={};Object.assign(u,h);u.blocks=[];for(var C=void 0,W=[],za=0;za<h.blocks.length;za++){var eb=h.blocks[za];0!==eb.width?W.push(eb):void 0===C&&(C=eb)}0===W.length&&void 0!==C&&W.push(C);u.blocks=W;a.push(u)}}return a}},{key:"finalize",value:function(){this.determineLineHeights();this.determineLabelSize();var a=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:a}}}]);return N}(),xa={"\x3cb\x3e":/<b>/,
"\x3ci\x3e":/<i>/,"\x3ccode\x3e":/<code>/,"\x3c/b\x3e":/<\/b>/,"\x3c/i\x3e":/<\/i>/,"\x3c/code\x3e":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^\*]/,afterItal:/[^_]/,afterMono:/[^`]/},cb=function(){function N(a){P(this,N);this.text=a;this.spacing=this.mono=this.ital=this.bold=!1;this.position=0;this.buffer="";this.modStack=[];this.blocks=[]}va(N,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){if(0===this.modStack.length)return"normal";
if("mono"===this.modStack[0])return"mono";if(this.bold&&this.ital)return"boldital";if(this.bold)return"bold";if(this.ital)return"ital"}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1);0<this.buffer.length&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(a){" "===a&&(this.spacing=!0);this.spacing&&(this.buffer+=" ",this.spacing=!1);" "!=a&&(this.buffer+=a)}},{key:"parseWS",value:function(a){return/[ \t]/.test(a)?
(this.mono?this.add(a):this.spacing=!0,!0):!1}},{key:"setTag",value:function(a){this.emitBlock();this[a]=!0;this.modStack.unshift(a)}},{key:"unsetTag",value:function(a){this.emitBlock();this[a]=!1;this.modStack.shift()}},{key:"parseStartTag",value:function(a,e){return this.mono||this[a]||!this.match(e)?!1:(this.setTag(a),!0)}},{key:"match",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,h=this.prepareRegExp(a),u=ra(h,2);h=u[1];(u=u[0].test(this.text.substr(this.position,
h)))&&e&&(this.position+=h-1);return u}},{key:"parseEndTag",value:function(a,e,h){var u=this.mod()===a;return(u="mono"===a?u&&this.mono:u&&!this.mono)&&this.match(e)?(void 0!==h?(this.position===this.text.length-1||this.match(h,!1))&&this.unsetTag(a):this.unsetTag(a),!0):!1}},{key:"replace",value:function(a,e){return this.match(a)?(this.add(e),this.position+=length-1,!0):!1}},{key:"prepareRegExp",value:function(a){if(a instanceof RegExp){var e=a;a=1}else e=xa[a],e=void 0!==e?e:new RegExp(a),a=a.length;
return[e,a]}}]);return N}(),Ia=function(){function N(a,e,h,u){var C=this;P(this,N);this.ctx=a;this.parent=e;this.selected=h;this.hover=u;this.lines=new gb(function(W,za){if(void 0===W)return 0;za=C.parent.getFormattingValues(a,h,u,za);var eb=0;""!==W&&(eb=C.ctx.measureText(W).width);return{width:eb,values:za}})}va(N,[{key:"process",value:function(a){if(!Kb(a))return this.lines.finalize();var e=this.parent.fontOptions;a=a.replace(/\r\n/g,"\n");a=a.replace(/\r/g,"\n");a=String(a).split("\n");var h=
a.length;if(e.multi)for(var u=0;u<h;u++){var C=this.splitBlocks(a[u],e.multi);if(void 0!==C)if(0===C.length)this.lines.newLine("");else{if(0<e.maxWdt)for(var W=0;W<C.length;W++)this.splitStringIntoLines(C[W].text,C[W].mod,!0);else for(W=0;W<C.length;W++)this.lines.append(C[W].text,C[W].mod);this.lines.newLine()}}else if(0<e.maxWdt)for(e=0;e<h;e++)this.splitStringIntoLines(a[e]);else for(e=0;e<h;e++)this.lines.newLine(a[e]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(a){var e=
"none";if("markdown"===a||"md"===a)e="markdown";else if(!0===a||"html"===a)e="html";return e}},{key:"splitHtmlBlocks",value:function(a){for(a=new cb(a);a.position<a.text.length;){var e=a.text.charAt(a.position),h;(h=a.parseWS(e)||/</.test(e)&&(a.parseStartTag("bold","\x3cb\x3e")||a.parseStartTag("ital","\x3ci\x3e")||a.parseStartTag("mono","\x3ccode\x3e")||a.parseEndTag("bold","\x3c/b\x3e")||a.parseEndTag("ital","\x3c/i\x3e")||a.parseEndTag("mono","\x3c/code\x3e")))||(/&/.test(e)?(a.replace(a.text,
"\x26lt;","\x3c")||a.replace(a.text,"\x26amp;","\x26")||a.add("\x26"),h=!0):h=!1);h||a.add(e);a.position++}a.emitBlock();return a.blocks}},{key:"splitMarkdownBlocks",value:function(a){a=new cb(a);for(var e=!0;a.position<a.text.length;){var h=a.text.charAt(a.position),u;(u=a.parseWS(h))||(u=h,/\\/.test(u)?(a.position<this.text.length+1&&(a.position++,u=this.text.charAt(a.position),/ \t/.test(u)?a.spacing=!0:(a.add(u),e=!1)),u=!0):u=!1);u||(e||a.spacing)&&(a.parseStartTag("bold","*")||a.parseStartTag("ital",
"_")||a.parseStartTag("mono","`"))||a.parseEndTag("bold","*","afterBold")||a.parseEndTag("ital","_","afterItal")||a.parseEndTag("mono","`","afterMono")||(a.add(h),e=!1);a.position++}a.emitBlock();return a.blocks}},{key:"splitBlocks",value:function(a,e){e=this.decodeMarkupSystem(e);if("none"===e)return[{text:a,mod:"normal"}];if("markdown"===e)return this.splitMarkdownBlocks(a);if("html"===e)return this.splitHtmlBlocks(a)}},{key:"overMaxWidth",value:function(a){a=this.ctx.measureText(a).width;return this.lines.curWidth()+
a>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(a){for(var e="",h=0;h<a.length;){e=e+(""===e?"":" ")+a[h];if(this.overMaxWidth(e))break;h++}return h}},{key:"getLongestFitWord",value:function(a){for(var e=0;e<a.length&&!this.overMaxWidth(a.slice(0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"normal",h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;this.parent.getFormattingValues(this.ctx,
this.selected,this.hover,e);a=a.replace(/^( +)/g,"$1\r");a=a.replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r");for(var u=a.split("\r");0<u.length;){var C=this.getLongestFit(u);if(0===C){C=u[0];var W=this.getLongestFitWord(C);this.lines.newLine(C.slice(0,W),e);u[0]=C.slice(W)}else{W=C;" "===u[C-1]?C--:" "===u[W]&&W++;var za=u.slice(0,C).join("");C==u.length&&h?this.lines.append(za,e):this.lines.newLine(za,e);u=u.slice(W)}}}}]);return N}(),mb=["bold","ital","boldital","mono"],Sb=function(){function N(a,e){var h=
2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1;P(this,N);this.body=a;this.pointToSelf=!1;this.baseSize=void 0;this.fontOptions={};this.setOptions(e);this.size={top:0,left:0,width:0,height:0,yLine:0};this.isEdgeLabel=h}va(N,[{key:"setOptions",value:function(a){this.elementOptions=a;this.initFontOptions(a.font);Kb(a.label)?this.labelDirty=!0:a.label=void 0;void 0!==a.font&&null!==a.font&&("string"===typeof a.font?this.baseSize=this.fontOptions.size:"object"===ka(a.font)&&(a=a.font.size,void 0!==
a&&(this.baseSize=a)))}},{key:"initFontOptions",value:function(a){var e=this;(0,La.forEach)(mb,function(h){e.fontOptions[h]={}});N.parseFontString(this.fontOptions,a)?this.fontOptions.vadjust=0:(0,La.forEach)(a,function(h,u){void 0!==h&&null!==h&&"object"!==ka(h)&&(e.fontOptions[u]=h)})}},{key:"constrain",value:function(a){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},h=(0,La.topMost)(a,"widthConstraint");"number"===typeof h?(e.maxWdt=Number(h),e.minWdt=
Number(h)):"object"===ka(h)&&(h=(0,La.topMost)(a,["widthConstraint","maximum"]),"number"===typeof h&&(e.maxWdt=Number(h)),h=(0,La.topMost)(a,["widthConstraint","minimum"]),"number"===typeof h&&(e.minWdt=Number(h)));h=(0,La.topMost)(a,"heightConstraint");"number"===typeof h?e.minHgt=Number(h):"object"===ka(h)&&(h=(0,La.topMost)(a,["heightConstraint","minimum"]),"number"===typeof h&&(e.minHgt=Number(h)),a=(0,La.topMost)(a,["heightConstraint","valign"]),"string"!==typeof a||"top"!==a&&"bottom"!==a||
(e.valign=a));return e}},{key:"update",value:function(a,e){this.setOptions(a,!0);this.propagateFonts(e);(0,La.deepExtend)(this.fontOptions,this.constrain(e));this.fontOptions.chooser=xb("label",e)}},{key:"adjustSizes",value:function(a){var e=a?a.right+a.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);a=a?a.top+a.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=a)}},{key:"addFontOptionsToPile",value:function(a,e){for(var h=0;h<e.length;++h)this.addFontToPile(a,
e[h])}},{key:"addFontToPile",value:function(a,e){void 0!==e&&void 0!==e.font&&null!==e.font&&a.push(e.font)}},{key:"getBasicOptions",value:function(a){for(var e={},h=0;h<a.length;++h){var u=a[h],C={};N.parseFontString(C,u)&&(u=C);(0,La.forEach)(u,function(W,za){void 0!==W&&(Object.prototype.hasOwnProperty.call(e,za)||(-1!==mb.indexOf(za)?e[za]={}:e[za]=W))})}return e}},{key:"getFontOption",value:function(a,e,h){for(var u,C=0;C<a.length;++C)if(u=a[C],Object.prototype.hasOwnProperty.call(u,e)&&(u=u[e],
void 0!==u&&null!==u)){var W={};N.parseFontString(W,u)&&(u=W);if(Object.prototype.hasOwnProperty.call(u,h))return u[h]}if(Object.prototype.hasOwnProperty.call(this.fontOptions,h))return this.fontOptions[h];throw Error("Did not find value for multi-font for property: '"+h+"'");}},{key:"getFontOptions",value:function(a,e){for(var h={},u=["color","size","face","mod","vadjust"],C=0;C<u.length;++C){var W=u[C];h[W]=this.getFontOption(a,e,W)}return h}},{key:"propagateFonts",value:function(a){var e=this,
h=[];this.addFontOptionsToPile(h,a);this.fontOptions=this.getBasicOptions(h);a=function(C){C=mb[C];var W=e.fontOptions[C];C=e.getFontOptions(h,C);(0,La.forEach)(C,function(za,eb){W[eb]=za});W.size=Number(W.size);W.vadjust=Number(W.vadjust)};for(var u=0;u<mb.length;++u)a(u)}},{key:"draw",value:function(a,e,h,u,C){var W=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var za=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&za<
this.elementOptions.scaling.label.drawThreshold-1||(za>=this.elementOptions.scaling.label.maxVisible&&(za=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(a,u,C,e,h,W),this._drawBackground(a),this._drawText(a,e,this.size.yLine,W,za))}}},{key:"_drawBackground",value:function(a){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){a.fillStyle=this.fontOptions.background;var e=this.getSize();a.fillRect(e.left,e.top,e.width,e.height)}}},
{key:"_drawText",value:function(a,e,h){var u=4<arguments.length?arguments[4]:void 0,C=this._setAlignment(a,e,h,3<arguments.length&&void 0!==arguments[3]?arguments[3]:"middle");C=ra(C,2);e=C[0];h=C[1];a.textAlign="left";e-=this.size.width/2;this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(h-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(h+=(this.size.height-this.size.labelHeight)/2));for(C=0;C<this.lineCount;C++){var W=
this.lines[C];if(W&&W.blocks){var za=0;this.isEdgeLabel||"center"===this.fontOptions.align?za+=(this.size.width-W.width)/2:"right"===this.fontOptions.align&&(za+=this.size.width-W.width);for(var eb=0;eb<W.blocks.length;eb++){var Eb=W.blocks[eb];a.font=Eb.font;var $b=this._getColor(Eb.color,u,Eb.strokeColor),jc=ra($b,2);$b=jc[0];jc=jc[1];0<Eb.strokeWidth&&(a.lineWidth=Eb.strokeWidth,a.strokeStyle=jc,a.lineJoin="round");a.fillStyle=$b;0<Eb.strokeWidth&&a.strokeText(Eb.text,e+za,h+Eb.vadjust);a.fillText(Eb.text,
e+za,h+Eb.vadjust);za+=Eb.width}h+=W.height}}}},{key:"_setAlignment",value:function(a,e,h,u){this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(h=e=0,"top"===this.fontOptions.align?(a.textBaseline="alphabetic",h-=4):"bottom"===this.fontOptions.align?(a.textBaseline="hanging",h+=4):a.textBaseline="middle"):a.textBaseline=u;return[e,h]}},{key:"_getColor",value:function(a,e,h){a=a||"#000000";h=h||"#ffffff";e<=this.elementOptions.scaling.label.drawThreshold&&(e=Math.max(0,
Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e))),a=(0,La.overrideOpacity)(a,e),h=(0,La.overrideOpacity)(h,e));return[a,h]}},{key:"getTextSize",value:function(a){this._processLabel(a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1);return{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var a=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var h=.5*-this.size.width;
switch(this.fontOptions.align){case "middle":a=h;e=.5*-this.size.height;break;case "top":a=h;e=-(this.size.height+2);break;case "bottom":a=h,e=2}}return{left:a,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(a,e,h){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,C=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,W=5<arguments.length&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(a,e,h);this.size.left=u-.5*this.size.width;
this.size.top=C-.5*this.size.height;this.size.yLine=C+.5*(1-this.lineCount)*this.fontOptions.size;"hanging"===W&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(a,e,h,u){var C=function(W,za,eb){return"normal"===za?"mod"===eb?"":W[eb]:void 0!==W[za][eb]?W[za][eb]:W[eb]};C={color:C(this.fontOptions,u,"color"),size:C(this.fontOptions,u,"size"),face:C(this.fontOptions,u,"face"),mod:C(this.fontOptions,u,"mod"),vadjust:C(this.fontOptions,
u,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};if(e||h)"normal"===u&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?C.mod="bold":"function"===typeof this.fontOptions.chooser&&this.fontOptions.chooser(C,this.elementOptions.id,e,h);e="";void 0!==C.mod&&""!==C.mod&&(e+=C.mod+" ");e+=C.size+"px "+C.face;a.font=e.replace(/"/g,"");C.font=a.font;C.height=C.size;return C}},{key:"differentState",value:function(a,e){return a!==this.selectedState||
e!==this.hoverState}},{key:"_processLabelText",value:function(a,e,h,u){return(new Ia(a,this,e,h)).process(u)}},{key:"_processLabel",value:function(a,e,h){if(!1!==this.labelDirty||this.differentState(e,h))a=this._processLabelText(a,e,h,this.elementOptions.label),0<this.fontOptions.minWdt&&a.width<this.fontOptions.minWdt&&(a.width=this.fontOptions.minWdt),this.size.labelHeight=a.height,0<this.fontOptions.minHgt&&a.height<this.fontOptions.minHgt&&(a.height=this.fontOptions.minHgt),this.lines=a.lines,
this.lineCount=a.lines.length,this.size.width=a.width,this.size.height=a.height,this.selectedState=e,this.hoverState=h,this.labelDirty=!1}},{key:"visible",value:function(){return 0===this.size.width||0===this.size.height||void 0===this.elementOptions.label||this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1?!1:!0}}],[{key:"parseFontString",value:function(a,e){if(!e||"string"!==typeof e)return!1;e=e.split(" ");a.size=+e[0].replace("px","");a.face=e[1];a.color=
e[2];return!0}}]);return N}(),Xb=function(){function N(a,e,h){P(this,N);this.body=e;this.labelModule=h;this.setOptions(a);this.margin=this.radius=this.width=this.height=this.left=this.top=void 0;this.refreshNeeded=!0;this.boundingBox={top:0,left:0,right:0,bottom:0}}va(N,[{key:"setOptions",value:function(a){this.options=a}},{key:"_setMargins",value:function(a){this.margin={};this.options.margin&&("object"==ka(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,
this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin));a.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(a,e){var h=this.options.borderWidth;a&&this.resize(a);return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+h}},{key:"enableShadow",value:function(a,e){e.shadow&&
(a.shadowColor=e.shadowColor,a.shadowBlur=e.shadowSize,a.shadowOffsetX=e.shadowX,a.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(a,e){e.shadow&&(a.shadowColor="rgba(0,0,0,0)",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(a,e){!1!==e.borderDashes&&(void 0!==a.setLineDash?(e=e.borderDashes,!0===e&&(e=[5,15]),a.setLineDash(e)):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=
!1,e.borderDashes=!1))}},{key:"disableBorderDashes",value:function(a,e){!1!==e.borderDashes&&(void 0!==a.setLineDash?a.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(a,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(a,e)}},{key:"initContextForDraw",value:function(a,
e){a.lineWidth=Math.min(this.width,e.borderWidth/this.body.view.scale);a.strokeStyle=e.borderColor;a.fillStyle=e.color}},{key:"performStroke",value:function(a,e){var h=e.borderWidth/this.body.view.scale;a.save();0<h&&(this.enableBorderDashes(a,e),a.stroke(),this.disableBorderDashes(a,e));a.restore()}},{key:"performFill",value:function(a,e){a.save();a.fillStyle=e.color;this.enableShadow(a,e);a.fill();this.disableShadow(a,e);a.restore();this.performStroke(a,e)}},{key:"_addBoundingBoxMargin",value:function(a){this.boundingBox.left-=
a;this.boundingBox.top-=a;this.boundingBox.bottom+=a;this.boundingBox.right+=a}},{key:"_updateBoundingBox",value:function(a,e,h,u,C){void 0!==h&&this.resize(h,u,C);this.left=a-this.width/2;this.top=e-this.height/2;this.boundingBox.left=this.left;this.boundingBox.top=this.top;this.boundingBox.bottom=this.top+this.height;this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(a,e,h,u,C){this._updateBoundingBox(a,e,h,u,C)}},{key:"getDimensionsFromLabel",value:function(a,
e,h){this.textSize=this.labelModule.getTextSize(a,e,h);a=this.textSize.width;e=this.textSize.height;0===a&&(e=a=14);return{width:a,height:e}}}]);return N}(),tc=function(N){function a(e,h,u){P(this,a);e=X(this,la(a).call(this,e,h,u));e._setMargins(u);return e}ua(a,N);va(a,[{key:"resize",value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;this.needsRefresh(h,u)&&(h=this.getDimensionsFromLabel(e,
h,u),this.width=h.width+this.margin.right+this.margin.left,this.height=h.height+this.margin.top+this.margin.bottom,this.radius=this.width/2)}},{key:"draw",value:function(e,h,u,C,W,za){this.resize(e,C,W);this.left=h-this.width/2;this.top=u-this.height/2;this.initContextForDraw(e,za);qa(e,this.left,this.top,this.width,this.height,za.borderRadius);this.performFill(e,za);this.updateBoundingBox(h,u,e,C,W);this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/
2+this.margin.top,C,W)}},{key:"updateBoundingBox",value:function(e,h,u,C,W){this._updateBoundingBox(e,h,u,C,W);this._addBoundingBoxMargin(this.options.shapeProperties.borderRadius)}},{key:"distanceToBorder",value:function(e,h){e&&this.resize(e);return Math.min(Math.abs(this.width/2/Math.cos(h)),Math.abs(this.height/2/Math.sin(h)))+this.options.borderWidth}}]);return a}(Xb),Ec=function(N){function a(e,h,u){P(this,a);e=X(this,la(a).call(this,e,h,u));e.labelOffset=0;e.selected=!1;return e}ua(a,N);va(a,
[{key:"setOptions",value:function(e,h,u){this.options=e;void 0===h&&void 0===u||this.setImages(h,u)}},{key:"setImages",value:function(e,h){h&&this.selected?(this.imageObj=h,this.imageObjAlt=e):(this.imageObj=e,this.imageObjAlt=h)}},{key:"switchImages",value:function(e){var h=e&&!this.selected||!e&&this.selected;this.selected=e;void 0!==this.imageObjAlt&&h&&(e=this.imageObj,this.imageObj=this.imageObjAlt,this.imageObjAlt=e)}},{key:"_getImagePadding",value:function(){var e={top:0,right:0,bottom:0,left:0};
if(this.options.imagePadding){var h=this.options.imagePadding;"object"==ka(h)?(e.top=h.top,e.right=h.right,e.bottom=h.bottom,e.left=h.left):(e.top=h,e.right=h,e.bottom=h,e.left=h)}return e}},{key:"_resizeImage",value:function(){var e;if(!1===this.options.shapeProperties.useImageSize){var h=e=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?e=this.imageObj.width/this.imageObj.height:h=this.imageObj.height/this.imageObj.width);e*=2*this.options.size;h*=2*this.options.size}else h=
this._getImagePadding(),e=this.imageObj.width+h.left+h.right,h=this.imageObj.height+h.top+h.bottom;this.width=e;this.height=h;this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(e,h,u,C){this.initContextForDraw(e,C);Y(e,h,u,C.size);this.performFill(e,C)}},{key:"_drawImageAtPosition",value:function(e,h){if(0!=this.imageObj.width){e.globalAlpha=void 0!==h.opacity?h.opacity:1;this.enableShadow(e,h);var u=1;!0===this.options.shapeProperties.interpolation&&(u=this.imageObj.width/this.width/
this.body.view.scale);var C=this._getImagePadding();this.imageObj.drawImageAtPosition(e,u,this.left+C.left,this.top+C.top,this.width-C.left-C.right,this.height-C.top-C.bottom);this.disableShadow(e,h)}}},{key:"_drawImageLabel",value:function(e,h,u,C,W){var za=0;if(void 0!==this.height){za=.5*this.height;var eb=this.labelModule.getTextSize(e,C,W);1<=eb.lineCount&&(za+=eb.height/2)}this.options.label&&(this.labelOffset=za);this.labelModule.draw(e,h,u+za,C,W,"hanging")}}]);return a}(Xb),dd=function(N){function a(e,
h,u){P(this,a);e=X(this,la(a).call(this,e,h,u));e._setMargins(u);return e}ua(a,N);va(a,[{key:"resize",value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;this.needsRefresh(h,u)&&(h=this.getDimensionsFromLabel(e,h,u),h=Math.max(h.width+this.margin.right+this.margin.left,h.height+this.margin.top+this.margin.bottom),this.options.size=h/2,this.height=this.width=h,this.radius=this.width/2)}},{key:"draw",
value:function(e,h,u,C,W,za){this.resize(e,C,W);this.left=h-this.width/2;this.top=u-this.height/2;this._drawRawCircle(e,h,u,za);this.updateBoundingBox(h,u);this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,u,C,W)}},{key:"updateBoundingBox",value:function(e,h){this.boundingBox.top=h-this.options.size;this.boundingBox.left=e-this.options.size;this.boundingBox.right=e+this.options.size;this.boundingBox.bottom=h+this.options.size}},{key:"distanceToBorder",value:function(e,h){e&&
this.resize(e);return.5*this.width}}]);return a}(Ec),ud=function(N){function a(e,h,u,C,W){P(this,a);e=X(this,la(a).call(this,e,h,u));e.setImages(C,W);return e}ua(a,N);va(a,[{key:"resize",value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height?(this.height=this.width=h=2*this.options.size,this.radius=.5*this.width):
this.needsRefresh(h,u)&&this._resizeImage()}},{key:"draw",value:function(e,h,u,C,W,za){this.switchImages(C);this.resize();var eb=h,Eb=u;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=h,this.top=u,eb+=this.width/2,Eb+=this.height/2):(this.left=h-this.width/2,this.top=u-this.height/2);this._drawRawCircle(e,eb,Eb,za);e.save();e.clip();this._drawImageAtPosition(e,za);e.restore();this._drawImageLabel(e,eb,Eb,C,W);this.updateBoundingBox(h,u)}},{key:"updateBoundingBox",value:function(e,
h){"top-left"===this.options.shapeProperties.coordinateOrigin?(this.boundingBox.top=h,this.boundingBox.left=e,this.boundingBox.right=e+2*this.options.size,this.boundingBox.bottom=h+2*this.options.size):(this.boundingBox.top=h-this.options.size,this.boundingBox.left=e-this.options.size,this.boundingBox.right=e+this.options.size,this.boundingBox.bottom=h+this.options.size);this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left);this.boundingBox.right=Math.max(this.boundingBox.right,
this.labelModule.size.left+this.labelModule.size.width);this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(e,h){e&&this.resize(e);return.5*this.width}}]);return a}(Ec),Yc=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"resize",value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,u=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:this.hover,C=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};this.needsRefresh(h,u)&&(this.labelModule.getTextSize(e,h,u),this.height=this.width=h=2*C.size,this.radius=.5*this.width)}},{key:"_drawShape",value:function(e,h,u,C,W,za,eb,Eb,$b){this.resize(e,za,eb,Eb);this.left=C-this.width/2;this.top=W-this.height/2;"custom"===h?(e.save(),$b({ctx:e,x:C,y:W,state:{selected:za,hover:eb},style:O({},Eb),label:this.options.label}),e.restore()):(this.initContextForDraw(e,
Eb),Ha(h)(e,C,W,Eb.size),this.performFill(e,Eb),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(e.font=(za?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",e.fillText(this.options.icon.code,C,W)),void 0!==this.options.label&&(this.labelModule.calculateLabelSize(e,za,eb,C,W,"hanging"),this.labelModule.draw(e,C,W+.5*this.height+.5*this.labelModule.size.height,za,eb,"hanging")),
this.updateBoundingBox(C,W))}},{key:"updateBoundingBox",value:function(e,h){this.boundingBox.top=h-this.options.size;this.boundingBox.left=e-this.options.size;this.boundingBox.right=e+this.options.size;this.boundingBox.bottom=h+this.options.size;void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=
Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]);return a}(Xb),Id=function(N){function a(e,h,u,C){P(this,a);e=X(this,la(a).call(this,e,h,u,C));e.ctxRenderer=C;return e}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,"custom",4,h,u,C,W,za,this.ctxRenderer)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Yc),Wd=function(N){function a(e,h,u){P(this,a);e=X(this,la(a).call(this,e,h,u));e._setMargins(u);
return e}ua(a,N);va(a,[{key:"resize",value:function(e,h,u){this.needsRefresh(h,u)&&(this.height=this.width=e=this.getDimensionsFromLabel(e,h,u).width+this.margin.right+this.margin.left,this.radius=this.width/2)}},{key:"draw",value:function(e,h,u,C,W,za){this.resize(e,C,W);this.left=h-this.width/2;this.top=u-this.height/2;this.initContextForDraw(e,za);ia(e,h-this.width/2,u-this.height/2,this.width,this.height);this.performFill(e,za);this.updateBoundingBox(h,u,e,C,W);this.labelModule.draw(e,this.left+
this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,C,W)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Xb),ge=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,"diamond",4,h,u,C,W,za)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Yc),Ld=function(N){function a(e,h,u){P(this,
a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,"circle",2,h,u,C,W,za)}},{key:"distanceToBorder",value:function(e,h){e&&this.resize(e);return this.options.size}}]);return a}(Yc),Qd=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"resize",value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
this.hover;this.needsRefresh(h,u)&&(h=this.getDimensionsFromLabel(e,h,u),this.height=2*h.height,this.width=h.width+h.height,this.radius=.5*this.width)}},{key:"draw",value:function(e,h,u,C,W,za){this.resize(e,C,W);this.left=h-.5*this.width;this.top=u-.5*this.height;this.initContextForDraw(e,za);ya(e,this.left,this.top,this.width,this.height);this.performFill(e,za);this.updateBoundingBox(h,u,e,C,W);this.labelModule.draw(e,h,u,C,W)}},{key:"distanceToBorder",value:function(e,h){e&&this.resize(e);e=.5*
this.width;var u=.5*this.height,C=Math.sin(h)*e;h=Math.cos(h)*u;return e*u/Math.sqrt(C*C+h*h)}}]);return a}(Xb),Dd=function(N){function a(e,h,u){P(this,a);e=X(this,la(a).call(this,e,h,u));e._setMargins(u);return e}ua(a,N);va(a,[{key:"resize",value:function(e,h,u){this.needsRefresh(h,u)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,
this.radius=.5*this.width)}},{key:"draw",value:function(e,h,u,C,W,za){this.resize(e,C,W);this.options.icon.size=this.options.icon.size||50;this.left=h-this.width/2;this.top=u-this.height/2;this._icon(e,h,u,C,W,za);void 0!==this.options.label&&this.labelModule.draw(e,this.left+this.iconSize.width/2+this.margin.left,u+this.height/2+5,C);this.updateBoundingBox(h,u)}},{key:"updateBoundingBox",value:function(e,h){this.boundingBox.top=h-.5*this.options.icon.size;this.boundingBox.left=e-.5*this.options.icon.size;
this.boundingBox.right=e+.5*this.options.icon.size;this.boundingBox.bottom=h+.5*this.options.icon.size;void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(e,
h,u,C,W,za){W=Number(this.options.icon.size);void 0!==this.options.icon.code?(e.font=[null!=this.options.icon.weight?this.options.icon.weight:C?"bold":"",(null!=this.options.icon.weight&&C?5:0)+W+"px",this.options.icon.face].join(" "),e.fillStyle=this.options.icon.color||"black",e.textAlign="center",e.textBaseline="middle",this.enableShadow(e,za),e.fillText(this.options.icon.code,h,u),this.disableShadow(e,za)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},
{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Xb),Gc=function(N){function a(e,h,u,C,W){P(this,a);e=X(this,la(a).call(this,e,h,u));e.setImages(C,W);return e}ua(a,N);va(a,[{key:"resize",value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.selected,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.hover;void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height?this.height=this.width=
h=2*this.options.size:this.needsRefresh(h,u)&&this._resizeImage()}},{key:"draw",value:function(e,h,u,C,W,za){e.save();this.switchImages(C);this.resize();var eb=h,Eb=u;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=h,this.top=u,eb+=this.width/2,Eb+=this.height/2):(this.left=h-this.width/2,this.top=u-this.height/2);if(!0===this.options.shapeProperties.useBorderWithImage){var $b=this.options.borderWidth,jc=this.options.borderWidthSelected||2*this.options.borderWidth;e.lineWidth=
Math.min(this.width,(C?jc:$b)/this.body.view.scale);e.beginPath();$b=C?this.options.color.highlight.border:W?this.options.color.hover.border:this.options.color.border;jc=C?this.options.color.highlight.background:W?this.options.color.hover.background:this.options.color.background;void 0!==za.opacity&&($b=(0,La.overrideOpacity)($b,za.opacity),jc=(0,La.overrideOpacity)(jc,za.opacity));e.strokeStyle=$b;e.fillStyle=jc;e.rect(this.left-.5*e.lineWidth,this.top-.5*e.lineWidth,this.width+e.lineWidth,this.height+
e.lineWidth);e.fill();this.performStroke(e,za);e.closePath()}this._drawImageAtPosition(e,za);this._drawImageLabel(e,eb,Eb,C,W);this.updateBoundingBox(h,u);e.restore()}},{key:"updateBoundingBox",value:function(e,h){this.resize();"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=h):(this.left=e-this.width/2,this.top=h-this.height/2);this.boundingBox.left=this.left;this.boundingBox.top=this.top;this.boundingBox.bottom=this.top+this.height;this.boundingBox.right=this.left+
this.width;void 0!==this.options.label&&0<this.labelModule.size.width&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Ec),fb=function(N){function a(e,h,u){P(this,
a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,"square",2,h,u,C,W,za)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Yc),Db=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,"hexagon",4,h,u,C,W,za)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Yc),
gc=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,"star",4,h,u,C,W,za)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Yc),sc=function(N){function a(e,h,u){P(this,a);e=X(this,la(a).call(this,e,h,u));e._setMargins(u);return e}ua(a,N);va(a,[{key:"resize",value:function(e,h,u){this.needsRefresh(h,u)&&(this.textSize=this.labelModule.getTextSize(e,h,u),
this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(e,h,u,C,W,za){this.resize(e,C,W);this.left=h-this.width/2;this.top=u-this.height/2;this.enableShadow(e,za);this.labelModule.draw(e,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,C,W);this.disableShadow(e,za);this.updateBoundingBox(h,u,e,C,W)}},{key:"distanceToBorder",
value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Xb),wc=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,"triangle",3,h,u,C,W,za)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Yc),Mc=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"draw",value:function(e,h,u,C,W,za){this._drawShape(e,
"triangleDown",3,h,u,C,W,za)}},{key:"distanceToBorder",value:function(e,h){return this._distanceToBorder(e,h)}}]);return a}(Yc),ic=!1,zb,fc=function(){function N(){P(this,N)}va(N,null,[{key:"validate",value:function(a,e,h){ic=!1;var u=zb=e;void 0!==h&&(u=e[h]);N.parse(a,u,[]);return ic}},{key:"parse",value:function(a,e,h){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&N.check(u,a,e,h)}},{key:"check",value:function(a,e,h,u){if(void 0===h[a]&&void 0===h.__any__)N.getSuggestion(a,h,u);else{var C=
a,W=!0;void 0===h[a]&&void 0!==h.__any__&&(C="__any__",W="object"===N.getType(e[a]));var za=h[C];W&&void 0!==za.__type__&&(za=za.__type__);N.checkFields(a,e,h,C,za,u)}}},{key:"checkFields",value:function(a,e,h,u,C,W){var za=function($b){console.log("%c"+$b+N.printLocation(W,a),"background: #FFeeee; color: #dd0000")},eb=N.getType(e[a]),Eb=C[eb];void 0!==Eb?"array"===N.getType(Eb)&&-1===Eb.indexOf(e[a])?(za('Invalid option detected in "'+a+'". Allowed values are:'+N.print(Eb)+' not "'+e[a]+'". '),ic=
!0):"object"===eb&&"__any__"!==u&&(W=(0,La.copyAndExtendArray)(W,a),N.parse(e[a],h[u],W)):void 0===C.any&&(za('Invalid type received for "'+a+'". Expected: '+N.print(Object.keys(C))+". Received ["+eb+'] "'+e[a]+'"'),ic=!0)}},{key:"getType",value:function(a){var e=ka(a);return"object"===e?null===a?"null":a instanceof Boolean?"boolean":a instanceof Number?"number":a instanceof String?"string":Array.isArray(a)?"array":a instanceof Date?"date":void 0!==a.nodeType?"dom":!0===a._isAMomentObject?"moment":
"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(a,e,h){var u=N.findInOptions(a,e,h,!1),C=N.findInOptions(a,zb,[],!0);e=void 0!==u.indexMatch?" in "+N.printLocation(u.path,a,"")+'Perhaps it was incomplete? Did you mean: "'+u.indexMatch+'"?\n\n':4>=C.distance&&u.distance>C.distance?" in "+N.printLocation(u.path,a,"")+"Perhaps it was misplaced? Matching option found at: "+N.printLocation(C.path,C.closestMatch,
""):8>=u.distance?'. Did you mean "'+u.closestMatch+'"?'+N.printLocation(u.path,a):". Did you mean one of these: "+N.print(Object.keys(e))+N.printLocation(h,a);console.log('%cUnknown option detected: "'+a+'"'+e,"background: #FFeeee; color: #dd0000");ic=!0}},{key:"findInOptions",value:function(a,e,h){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,C=1E9,W="",za=[],eb=a.toLowerCase(),Eb=void 0,$b;for($b in e)if(void 0!==e[$b].__type__&&!0===u){var jc=N.findInOptions(a,e[$b],(0,La.copyAndExtendArray)(h,
$b));C>jc.distance&&(W=jc.closestMatch,za=jc.path,C=jc.distance,Eb=jc.indexMatch)}else-1!==$b.toLowerCase().indexOf(eb)&&(Eb=$b),jc=N.levenshteinDistance(a,$b),C>jc&&(W=$b,za=(0,La.copyArray)(h),C=jc);return{closestMatch:W,path:za,distance:C,indexMatch:Eb}}},{key:"printLocation",value:function(a,e){for(var h="\n\n"+(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options \x3d {\n",u=0;u<a.length;u++){for(var C=0;C<u+1;C++)h+="  ";h+=a[u]+": {\n"}for(u=0;u<a.length+
1;u++)h+="  ";h+=e+"\n";for(u=0;u<a.length+1;u++){for(C=0;C<a.length-u;C++)h+="  ";h+="}\n"}return h+"\n\n"}},{key:"print",value:function(a){return JSON.stringify(a).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(a,e){if(0===a.length)return e.length;if(0===e.length)return a.length;var h=[],u;for(u=0;u<=e.length;u++)h[u]=[u];var C;for(C=0;C<=a.length;C++)h[0][C]=C;for(u=1;u<=e.length;u++)for(C=1;C<=a.length;C++)e.charAt(u-1)==a.charAt(C-
1)?h[u][C]=h[u-1][C-1]:h[u][C]=Math.min(h[u-1][C-1]+1,Math.min(h[u][C-1]+1,h[u-1][C]+1));return h[e.length][a.length]}}]);return N}(),dc=function(){function N(a,e,h,u,C,W){P(this,N);this.options=(0,La.bridgeObject)(C);this.globalOptions=C;this.defaultOptions=W;this.body=e;this.edges=[];this.id=void 0;this.imagelist=h;this.grouplist=u;this.y=this.x=void 0;this.baseSize=this.options.size;this.baseFontSize=this.options.font.size;this.hover=this.selected=this.predefinedPosition=!1;this.labelModule=new Sb(this.body,
this.options,!1);this.setOptions(a)}va(N,[{key:"attachEdge",value:function(a){-1===this.edges.indexOf(a)&&this.edges.push(a)}},{key:"detachEdge",value:function(a){a=this.edges.indexOf(a);-1!=a&&this.edges.splice(a,1)}},{key:"setOptions",value:function(a){var e=this.options.shape;if(a){"undefined"!==typeof a.color&&(this._localColor=a.color);void 0!==a.id&&(this.id=a.id);if(void 0===this.id)throw Error("Node must have an id");N.checkMass(a,this.id);void 0!==a.x&&(null===a.x?(this.x=void 0,this.predefinedPosition=
!1):(this.x=parseInt(a.x),this.predefinedPosition=!0));void 0!==a.y&&(null===a.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=parseInt(a.y),this.predefinedPosition=!0));void 0!==a.size&&(this.baseSize=a.size);void 0!==a.value&&(a.value=parseFloat(a.value));N.parseOptions(this.options,a,!0,this.globalOptions,this.grouplist);this.chooser=xb("node",[a,this.options,this.defaultOptions]);this._load_images();this.updateLabelModule(a);void 0!==a.opacity&&N.checkOpacity(a.opacity)&&(this.options.opacity=
a.opacity);this.updateShape(e);return void 0!==a.hidden||void 0!==a.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw Error("Internal Error: No images provided");if("string"===typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,
this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id);this.imageObjAlt=void 0!==this.options.image.selected?this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):void 0}}}},{key:"getFormattingValues",value:function(){var a={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,
borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};this.selected||this.hover?!0===this.chooser?this.selected?(a.borderWidth*=2,a.color=this.options.color.highlight.background,a.borderColor=this.options.color.highlight.border,
a.shadow=this.options.shadow.enabled):this.hover&&(a.color=this.options.color.hover.background,a.borderColor=this.options.color.hover.border,a.shadow=this.options.shadow.enabled):"function"===typeof this.chooser&&(this.chooser(a,this.options.id,this.selected,this.hover),!1!==a.shadow||a.shadowColor===this.options.shadow.color&&a.shadowSize===this.options.shadow.size&&a.shadowX===this.options.shadow.x&&a.shadowY===this.options.shadow.y||(a.shadow=!0)):a.shadow=this.options.shadow.enabled;if(void 0!==
this.options.opacity){var e=this.options.opacity;a.borderColor=(0,La.overrideOpacity)(a.borderColor,e);a.color=(0,La.overrideOpacity)(a.color,e);a.shadowColor=(0,La.overrideOpacity)(a.shadowColor,e)}return a}},{key:"updateLabelModule",value:function(a){if(void 0===this.options.label||null===this.options.label)this.options.label="";N.updateGroupOptions(this.options,O({},a,{color:a&&a.color||this._localColor||void 0}),this.grouplist);var e=this.grouplist.get(this.options.group,!1);this.labelModule.update(this.options,
[a,this.options,e,this.globalOptions,this.defaultOptions]);void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(a){if(a===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case "box":this.shape=new tc(this.options,this.body,this.labelModule);break;case "circle":this.shape=new dd(this.options,this.body,this.labelModule);break;case "circularImage":this.shape=
new ud(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case "custom":this.shape=new Id(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case "database":this.shape=new Wd(this.options,this.body,this.labelModule);break;case "diamond":this.shape=new ge(this.options,this.body,this.labelModule);break;case "dot":this.shape=new Ld(this.options,this.body,this.labelModule);break;case "ellipse":this.shape=new Qd(this.options,this.body,this.labelModule);break;
case "icon":this.shape=new Dd(this.options,this.body,this.labelModule);break;case "image":this.shape=new Gc(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case "square":this.shape=new fb(this.options,this.body,this.labelModule);break;case "hexagon":this.shape=new Db(this.options,this.body,this.labelModule);break;case "star":this.shape=new gc(this.options,this.body,this.labelModule);break;case "text":this.shape=new sc(this.options,this.body,this.labelModule);break;case "triangle":this.shape=
new wc(this.options,this.body,this.labelModule);break;case "triangleDown":this.shape=new Mc(this.options,this.body,this.labelModule);break;default:this.shape=new Qd(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0;this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1;this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",
value:function(a,e){return this.shape.distanceToBorder(a,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(a,e,h){void 0!==this.options.value?(a=this.options.scaling.customScalingFunction(a,e,h,this.options.value),e=this.options.scaling.max-
this.options.scaling.min,!0===this.options.scaling.label.enabled&&(this.options.font.size=this.options.scaling.label.min+a*(this.options.scaling.label.max-this.options.scaling.label.min)),this.options.size=this.options.scaling.min+a*e):(this.options.size=this.baseSize,this.options.font.size=this.baseFontSize);this.updateLabelModule()}},{key:"draw",value:function(a){var e=this.getFormattingValues();this.shape.draw(a,this.x,this.y,this.selected,this.hover,e)}},{key:"updateBoundingBox",value:function(a){this.shape.updateBoundingBox(this.x,
this.y,a)}},{key:"resize",value:function(a){var e=this.getFormattingValues();this.shape.resize(a,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(a){var e=[];this.labelModule.visible()&&Hb(this.labelModule.getSize(),a)&&e.push({nodeId:this.id,labelId:0});Hb(this.shape.boundingBox,a)&&e.push({nodeId:this.id});return e}},{key:"isOverlappingWith",value:function(a){return this.shape.left<a.right&&this.shape.left+this.shape.width>a.left&&this.shape.top<a.bottom&&this.shape.top+this.shape.height>
a.top}},{key:"isBoundingBoxOverlappingWith",value:function(a){return this.shape.boundingBox.left<a.right&&this.shape.boundingBox.right>a.left&&this.shape.boundingBox.top<a.bottom&&this.shape.boundingBox.bottom>a.top}}],[{key:"checkOpacity",value:function(a){return 0<=a&&1>=a}},{key:"checkCoordinateOrigin",value:function(a){return void 0===a||"center"===a||"top-left"===a}},{key:"updateGroupOptions",value:function(a,e,h){if(void 0!==h){var u=a.group;if(void 0!==e&&void 0!==e.group&&u!==e.group)throw Error("updateGroupOptions: group values in options don't match.");
if("number"===typeof u||"string"===typeof u&&""!=u)h=h.get(u),void 0===h.opacity||void 0!==e.opacity||N.checkOpacity(h.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+h.opacity),h.opacity=void 0),u=Object.getOwnPropertyNames(e).filter(function(C){return null!=e[C]}),u.push("font"),(0,La.selectiveNotDeepExtend)(u,a,h),a.color=(0,La.parseColor)(a.color)}}},{key:"parseOptions",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
!1,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},C=4<arguments.length?arguments[4]:void 0;(0,La.selectiveNotDeepExtend)(["color","fixed","shadow"],a,e,h);N.checkMass(e);void 0===a.opacity||N.checkOpacity(a.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity),a.opacity=void 0);void 0===e.opacity||N.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=
void 0);e.shapeProperties&&!N.checkCoordinateOrigin(e.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+e.shapeProperties.coordinateOrigin);(0,La.mergeOptions)(a,e,"shadow",u);if(void 0!==e.color&&null!==e.color){var W=(0,La.parseColor)(e.color);(0,La.fillIfDefined)(a.color,W)}else!0===h&&null===e.color&&(a.color=(0,La.bridgeObject)(u.color));void 0!==e.fixed&&null!==e.fixed&&("boolean"===typeof e.fixed?(a.fixed.x=e.fixed,a.fixed.y=e.fixed):(void 0!==
e.fixed.x&&"boolean"===typeof e.fixed.x&&(a.fixed.x=e.fixed.x),void 0!==e.fixed.y&&"boolean"===typeof e.fixed.y&&(a.fixed.y=e.fixed.y)));!0===h&&null===e.font&&(a.font=(0,La.bridgeObject)(u.font));N.updateGroupOptions(a,e,C);void 0!==e.scaling&&(0,La.mergeOptions)(a.scaling,e.scaling,"label",u.scaling)}},{key:"checkMass",value:function(a,e){if(void 0!==a.mass&&0>=a.mass){var h="";void 0!==e&&(h=" in node id: "+e);console.log("%cNegative or zero mass disallowed"+h+", setting mass to 1.","background: #FFeeee; color: #dd0000");
a.mass=1}}}]);return N}(),vc=function(){function N(a,e,h,u){var C=this;P(this,N);this.body=a;this.images=e;this.groups=h;this.layoutEngine=u;this.body.functions.createNode=this.create.bind(this);this.nodesListeners={add:function(W,za){C.add(za.items)},update:function(W,za){C.update(za.items,za.data,za.oldData)},remove:function(W,za){C.remove(za.items)}};this.defaultOptions={borderWidth:1,borderWidthSelected:2,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",
background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,
labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(W,za,eb,Eb){return za===W?.5:Math.max(0,1/(za-W)*(Eb-W))}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,
x:void 0,y:void 0};if(0>=this.defaultOptions.mass)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=(0,La.bridgeObject)(this.defaultOptions);this.bindEventListeners()}va(N,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.on("refreshNodes",this.refresh.bind(this));this.body.emitter.on("refresh",this.refresh.bind(this));this.body.emitter.on("destroy",function(){(0,La.forEach)(a.nodesListeners,function(e,h){a.body.data.nodes&&
a.body.data.nodes.off(h,e)});delete a.body.functions.createNode;delete a.nodesListeners.add;delete a.nodesListeners.update;delete a.nodesListeners.remove;delete a.nodesListeners})}},{key:"setOptions",value:function(a){if(void 0!==a){dc.parseOptions(this.options,a);void 0!==a.opacity&&(Number.isNaN(a.opacity)||!Number.isFinite(a.opacity)||0>a.opacity||1<a.opacity?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+a.opacity):this.options.opacity=a.opacity);if(void 0!==
a.shape)for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].updateShape();if("undefined"!==typeof a.font||"undefined"!==typeof a.widthConstraint||"undefined"!==typeof a.heightConstraint){e=0;for(var h=Object.keys(this.body.nodes);e<h.length;e++){var u=h[e];this.body.nodes[u].updateLabelModule();this.body.nodes[u].needsRefresh()}}if(void 0!==a.size)for(var C in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,C)&&this.body.nodes[C].needsRefresh();
void 0===a.hidden&&void 0===a.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,h=this.body.data.nodes;if(a instanceof Sa.DataSet||a instanceof Sa.DataView)this.body.data.nodes=a;else if(Array.isArray(a))this.body.data.nodes=new Sa.DataSet,this.body.data.nodes.add(a);else{if(a)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new Sa.DataSet}h&&(0,La.forEach)(this.nodesListeners,function(W,
za){h.off(za,W)});this.body.nodes={};if(this.body.data.nodes){var u=this;(0,La.forEach)(this.nodesListeners,function(W,za){u.body.data.nodes.on(za,W)});var C=this.body.data.nodes.getIds();this.add(C,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(a){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,h,u=[],C=0;C<a.length;C++){h=a[C];var W=this.body.data.nodes.get(h);W=this.create(W);u.push(W);this.body.nodes[h]=W}this.layoutEngine.positionInitially(u);
!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(a,e,h){for(var u=this.body.nodes,C=!1,W=0;W<a.length;W++){var za=a[W],eb=u[za],Eb=e[W];void 0!==eb?eb.setOptions(Eb)&&(C=!0):(C=!0,eb=this.create(Eb),u[za]=eb)}C||void 0===h||(C=e.some(function($b,jc){return(jc=h[jc])&&jc.level!==$b.level}));!0===C?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(a){for(var e=this.body.nodes,h=0;h<a.length;h++)delete e[a[h]];this.body.emitter.emit("_dataChanged")}},
{key:"create",value:function(a){return new (1<arguments.length&&void 0!==arguments[1]?arguments[1]:dc)(a,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var a=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;(0,La.forEach)(this.body.nodes,function(h,u){u=a.body.data.nodes.get(u);void 0!==u&&(!0===e&&h.setOptions({x:null,y:null}),h.setOptions({fixed:!1}),h.setOptions(u))})}},{key:"getPositions",value:function(a){var e={};if(void 0!==
a)if(!0===Array.isArray(a))for(var h=0;h<a.length;h++){if(void 0!==this.body.nodes[a[h]]){var u=this.body.nodes[a[h]];e[a[h]]={x:Math.round(u.x),y:Math.round(u.y)}}}else void 0!==this.body.nodes[a]&&(h=this.body.nodes[a],e[a]={x:Math.round(h.x),y:Math.round(h.y)});else for(a=0;a<this.body.nodeIndices.length;a++)h=this.body.nodes[this.body.nodeIndices[a]],e[this.body.nodeIndices[a]]={x:Math.round(h.x),y:Math.round(h.y)};return e}},{key:"getPosition",value:function(a){if(void 0==a)throw new TypeError("No id was specified for getPosition method.");
if(void 0==this.body.nodes[a])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(a));return{x:Math.round(this.body.nodes[a].x),y:Math.round(this.body.nodes[a].y)}}},{key:"storePositions",value:function(){var a=[],e=this.body.data.nodes.getDataSet(),h=!0,u=!1,C=void 0;try{for(var W=e.get()[Symbol.iterator](),za;!(h=(za=W.next()).done);h=!0){var eb=za.value,Eb=eb.id,$b=this.body.nodes[Eb],jc=Math.round($b.x),uc=Math.round($b.y);eb.x===jc&&eb.y===uc||a.push({id:Eb,
x:jc,y:uc})}}catch(zc){u=!0,C=zc}finally{try{if(!h&&null!=W["return"])W["return"]()}finally{if(u)throw C;}}e.update(a)}},{key:"getBoundingBox",value:function(a){if(void 0!==this.body.nodes[a])return this.body.nodes[a].shape.boundingBox}},{key:"getConnectedNodes",value:function(a,e){var h=[];if(void 0!==this.body.nodes[a]){a=this.body.nodes[a];for(var u={},C=0;C<a.edges.length;C++){var W=a.edges[C];"to"!==e&&W.toId==a.id?void 0===u[W.fromId]&&(h.push(W.fromId),u[W.fromId]=!0):"from"!==e&&W.fromId==
a.id&&void 0===u[W.toId]&&(h.push(W.toId),u[W.toId]=!0)}}return h}},{key:"getConnectedEdges",value:function(a){var e=[];if(void 0!==this.body.nodes[a]){a=this.body.nodes[a];for(var h=0;h<a.edges.length;h++)e.push(a.edges[h].id)}else console.log("NodeId provided for getConnectedEdges does not exist. Provided: ",a);return e}},{key:"moveNode",value:function(a,e,h){var u=this;void 0!==this.body.nodes[a]?(this.body.nodes[a].x=Number(e),this.body.nodes[a].y=Number(h),setTimeout(function(){u.body.emitter.emit("startSimulation")},
0)):console.log("Node id supplied to moveNode does not exist. Provided: ",a)}}]);return N}(),xc=function(){function N(){P(this,N)}va(N,null,[{key:"transform",value:function(a,e){Array.isArray(a)||(a=[a]);var h=e.point.x,u=e.point.y,C=e.angle;e=e.length;for(var W=0;W<a.length;++W){var za=a[W],eb=za.x*Math.sin(C)+za.y*Math.cos(C);za.x=h+e*(za.x*Math.cos(C)-za.y*Math.sin(C));za.y=u+e*eb}}},{key:"drawPath",value:function(a,e){a.beginPath();a.moveTo(e[0].x,e[0].y);for(var h=1;h<e.length;++h)a.lineTo(e[h].x,
e[h].y);a.closePath()}}]);return N}(),Vc=function(N){function a(){P(this,a);return X(this,la(a).apply(this,arguments))}ua(a,N);va(a,null,[{key:"draw",value:function(e,h){if(h.image){e.save();e.translate(h.point.x,h.point.y);e.rotate(Math.PI/2+h.angle);var u=null!=h.imageWidth?h.imageWidth:h.image.width;h.image.drawImageAtPosition(e,1,-u/2,0,u,null!=h.imageHeight?h.imageHeight:h.image.height);e.restore()}return!1}}]);return a}(xc),bd=function(N){function a(){P(this,a);return X(this,la(a).apply(this,
arguments))}ua(a,N);va(a,null,[{key:"draw",value:function(e,h){var u=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];xc.transform(u,h);xc.drawPath(e,u);return!0}}]);return a}(xc),Uc=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];xc.transform(h,e);xc.drawPath(a,h);return!0}}]);return N}(),F=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h={x:-.4,y:0};xc.transform(h,e);a.strokeStyle=
a.fillStyle;a.fillStyle="rgba(0, 0, 0, 0)";var u=Math.PI,C=e.angle-u/2;u=e.angle+u/2;a.beginPath();a.arc(h.x,h.y,.4*e.length,C,u,!1);a.stroke();return!0}}]);return N}(),M=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h={x:-.3,y:0};xc.transform(h,e);a.strokeStyle=a.fillStyle;a.fillStyle="rgba(0, 0, 0, 0)";var u=Math.PI,C=e.angle+u/2;u=e.angle+3*u/2;a.beginPath();a.arc(h.x,h.y,.4*e.length,C,u,!1);a.stroke();return!0}}]);return N}(),da=function(){function N(){P(this,
N)}va(N,null,[{key:"draw",value:function(a,e){var h=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];xc.transform(h,e);xc.drawPath(a,h);return!0}}]);return N}(),Aa=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];xc.transform(h,e);xc.drawPath(a,h);return!0}}]);return N}(),Wa=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h={x:-.4,y:0};xc.transform(h,e);Y(a,h.x,h.y,.4*e.length);return!0}}]);return N}(),Ra=
function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];xc.transform(h,e);xc.drawPath(a,h);return!0}}]);return N}(),Bb=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];xc.transform(h,e);xc.drawPath(a,h);return!0}}]);return N}(),Ob=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h=[{x:0,y:0},{x:-.5,y:-.3},
{x:-1,y:0},{x:-.5,y:.3}];xc.transform(h,e);xc.drawPath(a,h);return!0}}]);return N}(),tb=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];xc.transform(h,e);xc.drawPath(a,h);return!0}}]);return N}(),Tb=function(){function N(){P(this,N)}va(N,null,[{key:"draw",value:function(a,e){var h;e.type&&(h=e.type.toLowerCase());switch(h){case "image":return Vc.draw(a,e);case "circle":return Wa.draw(a,e);case "box":return Bb.draw(a,
e);case "crow":return Uc.draw(a,e);case "curve":return F.draw(a,e);case "diamond":return Ob.draw(a,e);case "inv_curve":return M.draw(a,e);case "triangle":return da.draw(a,e);case "inv_triangle":return Aa.draw(a,e);case "bar":return Ra.draw(a,e);case "vee":return tb.draw(a,e);default:return bd.draw(a,e)}}}]);return N}(),mc=function(){function N(a,e,h){P(this,N);this._body=e;this._labelModule=h;this.color={};this.colorDirty=!0;this.hoverWidth=1.5;this.selectionWidth=2;this.setOptions(a);this.fromPoint=
this.from;this.toPoint=this.to}va(N,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from];this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(a){this.options=a;this.from=this._body.nodes[this.options.from];this.to=this._body.nodes[this.options.to];this.id=this.options.id}},{key:"drawLine",value:function(a,e,h,u){var C=4<arguments.length&&void 0!==arguments[4]?arguments[4]:this.getViaNode();a.strokeStyle=this.getColor(a,
e);a.lineWidth=e.width;!1!==e.dashes?this._drawDashedLine(a,e,C):this._drawLine(a,e,C)}},{key:"_drawLine",value:function(a,e,h,u,C){this.from!=this.to?this._line(a,e,h,u,C):(h=this._getCircleData(a),h=ra(h,3),this._circle(a,e,h[0],h[1],h[2]))}},{key:"_drawDashedLine",value:function(a,e,h,u,C){a.lineCap="round";u=Array.isArray(e.dashes)?e.dashes:[5,5];void 0!==a.setLineDash?(a.save(),a.setLineDash(u),a.lineDashOffset=0,this.from!=this.to?this._line(a,e,h):(h=this._getCircleData(a),h=ra(h,3),this._circle(a,
e,h[0],h[1],h[2])),a.setLineDash([0]),a.lineDashOffset=0,a.restore()):(this.from!=this.to?ea(a,this.from.x,this.from.y,this.to.x,this.to.y,u):(h=this._getCircleData(a),h=ra(h,3),this._circle(a,e,h[0],h[1],h[2])),this.enableShadow(a,e),a.stroke(),this.disableShadow(a,e))}},{key:"findBorderPosition",value:function(a,e,h){return this.from!=this.to?this._findBorderPosition(a,e,h):this._findBorderPositionCircle(a,e,h)}},{key:"findBorderPositions",value:function(a){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,
a),to:this._findBorderPosition(this.to,a)};var e=this._getCircleData(a).slice(0,2),h=ra(e,2);e=h[0];h=h[1];return{from:this._findBorderPositionCircle(this.from,a,{x:e,y:h,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,a,{x:e,y:h,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(a){var e=this.options.selfReference.size;void 0!==a&&void 0===this.from.shape.width&&this.from.shape.resize(a);a=Cb(a,this.options.selfReference.angle,e,this.from);return[a.x,
a.y,e]}},{key:"_pointOnCircle",value:function(a,e,h,u){u=2*u*Math.PI;return{x:a+h*Math.cos(u),y:e-h*Math.sin(u)}}},{key:"_findBorderPositionCircle",value:function(a,e,h){var u=h.x,C=h.y,W=h.low,za=h.high;h=h.direction;var eb=this.options.selfReference.size,Eb=0;!0===this.options.arrowStrikethrough&&(-1===h?Eb=this.options.endPointOffset.from:1===h&&(Eb=this.options.endPointOffset.to));var $b=0;do{var jc=.5*(W+za);var uc=this._pointOnCircle(u,C,eb,jc);var zc=a.distanceToBorder(e,Math.atan2(a.y-uc.y,
a.x-uc.x))+Eb-Math.sqrt(Math.pow(uc.x-a.x,2)+Math.pow(uc.y-a.y,2));if(.05>Math.abs(zc))break;else 0<zc?0<h?W=jc:za=jc:0<h?za=jc:W=jc;++$b}while(W<=za&&10>$b);return O({},uc,{t:jc})}},{key:"getLineWidth",value:function(a,e){return!0===a?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(a,e){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==
this.to.id){a=a.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y);var h=this.from.options.color.highlight.border,u=this.to.options.color.highlight.border;!1===this.from.selected&&!1===this.to.selected?(h=(0,La.overrideOpacity)(this.from.options.color.border,e.opacity),u=(0,La.overrideOpacity)(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?u=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(h=this.from.options.color.border);
a.addColorStop(0,h);a.addColorStop(1,u);return a}return"to"===e.inheritsColor?(0,La.overrideOpacity)(this.to.options.color.border,e.opacity):(0,La.overrideOpacity)(this.from.options.color.border,e.opacity)}return(0,La.overrideOpacity)(e.color,e.opacity)}},{key:"_circle",value:function(a,e,h,u,C){this.enableShadow(a,e);var W=0,za=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){za=this.options.selfReference.angle;var eb=this.options.selfReference.angle+Math.PI;W=this._findBorderPositionCircle(this.from,
a,{x:h,y:u,low:za,high:eb,direction:-1});za=this._findBorderPositionCircle(this.from,a,{x:h,y:u,low:za,high:eb,direction:1});W=Math.atan2(W.y-u,W.x-h);za=Math.atan2(za.y-u,za.x-h)}a.beginPath();a.arc(h,u,C,W,za,!1);a.stroke();this.disableShadow(a,e)}},{key:"getDistanceToEdge",value:function(a,e,h,u,C,W){if(this.from!=this.to)return this._getDistanceToEdge(a,e,h,u,C,W);a=this._getCircleData(void 0);a=ra(a,3);C=a[0]-C;W=a[1]-W;return Math.abs(Math.sqrt(C*C+W*W)-a[2])}},{key:"_getDistanceToLine",value:function(a,
e,h,u,C,W){h-=a;u-=e;var za=((C-a)*h+(W-e)*u)/(h*h+u*u);1<za?za=1:0>za&&(za=0);a=a+za*h-C;e=e+za*u-W;return Math.sqrt(a*a+e*e)}},{key:"getArrowData",value:function(a,e,h,u,C,W){var za=W.width;if("from"===e){C=this.from;var eb=this.to;var Eb=0>W.fromArrowScale;u=Math.abs(W.fromArrowScale);W=W.fromArrowType}else"to"===e?(C=this.to,eb=this.from,Eb=0>W.toArrowScale,u=Math.abs(W.toArrowScale),W=W.toArrowType):(C=this.to,eb=this.from,Eb=0>W.middleArrowScale,u=Math.abs(W.middleArrowScale),W=W.middleArrowType);
u=15*u+3*za;C!=eb?(za=u/Math.hypot(C.x-eb.x,C.y-eb.y),"middle"!==e?!0===this.options.smooth.enabled?(a=this._findBorderPosition(C,a,{via:h}),e=this.getPoint(a.t+za*("from"===e?1:-1),h),e=Math.atan2(a.y-e.y,a.x-e.x),h=a):(e=Math.atan2(C.y-eb.y,C.x-eb.x),h=this._findBorderPosition(C,a)):(e=(Eb?-za:za)/2,a=this.getPoint(.5+e,h),e=this.getPoint(.5-e,h),e=Math.atan2(a.y-e.y,a.x-e.x),h=this.getPoint(.5,h))):(h=this._getCircleData(a),eb=ra(h,3),h=eb[0],C=eb[1],eb=eb[2],"from"===e?(a=this._findBorderPositionCircle(this.from,
a,{x:h,y:C,low:this.options.selfReference.angle,high:this.options.selfReference.angle+Math.PI,direction:-1}),e=-2*a.t*Math.PI+1.5*Math.PI+.1*Math.PI,h=a):"to"===e?(a=this._findBorderPositionCircle(this.from,a,{x:h,y:C,low:this.options.selfReference.angle,high:this.options.selfReference.angle+Math.PI,direction:1}),e=-2*a.t*Math.PI+1.5*Math.PI-1.1*Math.PI,h=a):(a=this.options.selfReference.angle/(2*Math.PI),h=this._pointOnCircle(h,C,eb,a),e=-2*a*Math.PI+1.5*Math.PI+.1*Math.PI));return{point:h,core:{x:h.x-
.9*u*Math.cos(e),y:h.y-.9*u*Math.sin(e)},angle:e,length:u,type:W}}},{key:"drawArrowHead",value:function(a,e,h,u,C){a.strokeStyle=this.getColor(a,e);a.fillStyle=a.strokeStyle;a.lineWidth=e.width;Tb.draw(a,C)&&(this.enableShadow(a,e),a.fill(),this.disableShadow(a,e))}},{key:"enableShadow",value:function(a,e){!0===e.shadow&&(a.shadowColor=e.shadowColor,a.shadowBlur=e.shadowSize,a.shadowOffsetX=e.shadowX,a.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(a,e){!0===e.shadow&&(a.shadowColor=
"rgba(0,0,0,0)",a.shadowBlur=0,a.shadowOffsetX=0,a.shadowOffsetY=0)}},{key:"drawBackground",value:function(a,e){if(!1!==e.background){var h=a.strokeStyle,u=a.lineWidth,C=a.dashes;a.strokeStyle=e.backgroundColor;a.lineWidth=e.backgroundSize;this.setStrokeDashed(a,e.backgroundDashes);a.stroke();a.strokeStyle=h;a.lineWidth=u;a.dashes=C;this.setStrokeDashed(a,e.dashes)}}},{key:"setStrokeDashed",value:function(a,e){!1!==e?void 0!==a.setLineDash?(e=Array.isArray(e)?e:[5,5],a.setLineDash(e)):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used."):
void 0!==a.setLineDash?a.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]);return N}(),K=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"_findBorderPositionBezier",value:function(e,h){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),C=!1,W=1,za=0,eb=this.to,Eb=this.options.endPointOffset?this.options.endPointOffset.to:0;e.id===this.from.id&&(eb=
this.from,C=!0,Eb=this.options.endPointOffset?this.options.endPointOffset.from:0);!1===this.options.arrowStrikethrough&&(Eb=0);var $b=0;do{var jc=.5*(za+W);var uc=this.getPoint(jc,u);var zc=eb.distanceToBorder(h,Math.atan2(eb.y-uc.y,eb.x-uc.x))+Eb-Math.sqrt(Math.pow(uc.x-eb.x,2)+Math.pow(uc.y-eb.y,2));if(.2>Math.abs(zc))break;else 0>zc?!1===C?za=jc:W=jc:!1===C?W=jc:za=jc;++$b}while(za<=W&&10>$b);return O({},uc,{t:jc})}},{key:"_getDistanceToBezierEdge",value:function(e,h,u,C,W,za,eb){var Eb=1E9,$b;
var jc=e;var uc=h;for($b=1;10>$b;$b++){var zc=.1*$b;var Ic=Math.pow(1-zc,2)*e+2*zc*(1-zc)*eb.x+Math.pow(zc,2)*u;zc=Math.pow(1-zc,2)*h+2*zc*(1-zc)*eb.y+Math.pow(zc,2)*C;0<$b&&(jc=this._getDistanceToLine(jc,uc,Ic,zc,W,za),Eb=jc<Eb?jc:Eb);jc=Ic;uc=zc}return Eb}},{key:"_bezierCurve",value:function(e,h,u,C){e.beginPath();e.moveTo(this.fromPoint.x,this.fromPoint.y);null!=u&&null!=u.x?null!=C&&null!=C.x?e.bezierCurveTo(u.x,u.y,C.x,C.y,this.toPoint.x,this.toPoint.y):e.quadraticCurveTo(u.x,u.y,this.toPoint.x,
this.toPoint.y):e.lineTo(this.toPoint.x,this.toPoint.y);this.drawBackground(e,h);this.enableShadow(e,h);e.stroke();this.disableShadow(e,h)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]);return a}(mc),m=function(N){function a(e,h,u){P(this,a);var C=X(this,la(a).call(this,e,h,u));C.via=C.via;C._boundFunction=function(){C.positionBezierNode()};C._body.emitter.on("_repositionBezierNodes",C._boundFunction);return C}ua(a,N);va(a,[{key:"setOptions",value:function(e){Ma(la(a.prototype),
"setOptions",this).call(this,e);var h=!1;this.options.physics!==e.physics&&(h=!0);this.options=e;this.id=this.options.id;this.from=this._body.nodes[this.options.from];this.to=this._body.nodes[this.options.to];this.setupSupportNode();this.connect();!0===h&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from];this.to=this._body.nodes[this.options.to];void 0===this.from||void 0===this.to||!1===
this.options.physics?this.via.setOptions({physics:!1}):this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){this._body.emitter.off("_repositionBezierNodes",this._boundFunction);return void 0!==this.via?(delete this._body.nodes[this.via.id],this.via=void 0,!0):!1}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var e="edgeId:"+this.id,h=this._body.functions.createNode({id:e,shape:"circle",physics:!0,hidden:!0});
this.via=this._body.nodes[e]=h;this.via.parentEdgeId=this.id;this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(e,h,u){this._bezierCurve(e,h,u)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",
value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){h=this._getCircleData();h=ra(h,3);var u=h[2],C=2*Math.PI*(1-e);return{x:h[0]+u*Math.sin(C),y:h[1]+u-u*(1-Math.cos(C))}}return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*h.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*h.y+Math.pow(e,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,h){return this._findBorderPositionBezier(e,h,this.via)}},{key:"_getDistanceToEdge",
value:function(e,h,u,C,W,za){return this._getDistanceToBezierEdge(e,h,u,C,W,za,this.via)}}]);return a}(K),k=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"_line",value:function(e,h,u){this._bezierCurve(e,h,u)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var e=this.options.smooth.roundness,h=this.options.smooth.type,u=Math.abs(this.from.x-this.to.x),C=Math.abs(this.from.y-this.to.y);
if("discrete"===h||"diagonalCross"===h){var W;var za=u<=C?W=e*C:W=e*u;this.from.x>this.to.x&&(za=-za);this.from.y>=this.to.y&&(W=-W);za=this.from.x+za;W=this.from.y+W;"discrete"===h&&(u<=C?za=u<e*C?this.from.x:za:W=C<e*u?this.from.y:W);return{x:za,y:W}}if("straightCross"===h)return h=(1-e)*u,e=(1-e)*C,u<=C?(h=0,this.from.y<this.to.y&&(e=-e)):(this.from.x<this.to.x&&(h=-h),e=0),{x:this.to.x+h,y:this.to.y+e};if("horizontal"===h)return u*=1-e,this.from.x<this.to.x&&(u=-u),{x:this.to.x+u,y:this.from.y};
if("vertical"===h)return u=(1-e)*C,this.from.y<this.to.y&&(u=-u),{x:this.from.x,y:this.to.y+u};if("curvedCW"===h)return u=this.to.x-this.from.x,C=this.from.y-this.to.y,h=Math.sqrt(u*u+C*C),W=Math.PI,u=(Math.atan2(C,u)+(.5*e+.5)*W)%(2*W),{x:this.from.x+(.5*e+.5)*h*Math.sin(u),y:this.from.y+(.5*e+.5)*h*Math.cos(u)};if("curvedCCW"===h)return u=this.to.x-this.from.x,C=this.from.y-this.to.y,h=Math.sqrt(u*u+C*C),W=Math.PI,u=(Math.atan2(C,u)+(.5*-e+.5)*W)%(2*W),{x:this.from.x+(.5*e+.5)*h*Math.sin(u),y:this.from.y+
(.5*e+.5)*h*Math.cos(u)};e=u<=C?za=e*C:za=e*u;this.from.x>this.to.x&&(e=-e);this.from.y>=this.to.y&&(za=-za);e=this.from.x+e;h=this.from.y+za;u<=C?e=this.from.x<=this.to.x?this.to.x<e?this.to.x:e:this.to.x>e?this.to.x:e:h=this.from.y>=this.to.y?this.to.y>h?this.to.y:h:this.to.y<h?this.to.y:h;return{x:e,y:h}}},{key:"_findBorderPosition",value:function(e,h){return this._findBorderPositionBezier(e,h,(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).via)}},{key:"_getDistanceToEdge",value:function(e,
h,u,C,W,za){var eb=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(e,h,u,C,W,za,eb)}},{key:"getPoint",value:function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates();return{x:Math.pow(1-e,2)*this.fromPoint.x+2*e*(1-e)*h.x+Math.pow(e,2)*this.toPoint.x,y:Math.pow(1-e,2)*this.fromPoint.y+2*e*(1-e)*h.y+Math.pow(e,2)*this.toPoint.y}}}]);return a}(K),r=function(N){function a(e,h,u){P(this,a);return X(this,
la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"_line",value:function(e,h,u){this._bezierCurve(e,h,u[0],u[1])}},{key:"_getViaCoordinates",value:function(){var e=this.from.x-this.to.x,h=this.from.y-this.to.y,u=this.options.smooth.roundness;if((Math.abs(e)>Math.abs(h)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection){var C=this.from.y;var W=this.to.y;h=this.from.x-u*e;e=this.to.x+u*e}else C=this.from.y-u*h,W=this.to.y+
u*h,h=this.from.x,e=this.to.x;return[{x:h,y:C},{x:e,y:W}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(e,h){return this._findBorderPositionBezier(e,h)}},{key:"_getDistanceToEdge",value:function(e,h,u,C,W,za){var eb=6<arguments.length&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();eb=ra(eb,2);return this._getDistanceToBezierEdge2(e,h,u,C,W,za,eb[0],eb[1])}},{key:"getPoint",value:function(e){var h=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),u=ra(h,2);h=u[0];u=u[1];var C=[Math.pow(1-e,3),3*e*Math.pow(1-e,2),3*Math.pow(e,2)*(1-e),Math.pow(e,3)];return{x:C[0]*this.fromPoint.x+C[1]*h.x+C[2]*u.x+C[3]*this.toPoint.x,y:C[0]*this.fromPoint.y+C[1]*h.y+C[2]*u.y+C[3]*this.toPoint.y}}}]);return a}(function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"_getDistanceToBezierEdge2",value:function(e,h,u,C,W,za,eb,Eb){for(var $b=1E9,jc=e,uc=h,zc=[0,
0,0,0],Ic=1;10>Ic;Ic++){var Lc=.1*Ic;zc[0]=Math.pow(1-Lc,3);zc[1]=3*Lc*Math.pow(1-Lc,2);zc[2]=3*Math.pow(Lc,2)*(1-Lc);zc[3]=Math.pow(Lc,3);Lc=zc[0]*e+zc[1]*eb.x+zc[2]*Eb.x+zc[3]*u;var Rc=zc[0]*h+zc[1]*eb.y+zc[2]*Eb.y+zc[3]*C;0<Ic&&(jc=this._getDistanceToLine(jc,uc,Lc,Rc,W,za),$b=jc<$b?jc:$b);jc=Lc;uc=Rc}return $b}}]);return a}(K)),x=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"_line",value:function(e,h){e.beginPath();e.moveTo(this.fromPoint.x,this.fromPoint.y);
e.lineTo(this.toPoint.x,this.toPoint.y);this.enableShadow(e,h);e.stroke();this.disableShadow(e,h)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(e){return{x:(1-e)*this.fromPoint.x+e*this.toPoint.x,y:(1-e)*this.fromPoint.y+e*this.toPoint.y}}},{key:"_findBorderPosition",value:function(e,h){var u=this.to,C=this.from;e.id===this.from.id&&(u=this.from,C=this.to);var W=u.x-C.x,za=u.y-C.y;W=Math.sqrt(W*W+za*za);e=e.distanceToBorder(h,Math.atan2(u.y-C.y,u.x-C.x));e=(W-e)/W;return{x:(1-
e)*C.x+e*u.x,y:(1-e)*C.y+e*u.y,t:0}}},{key:"_getDistanceToEdge",value:function(e,h,u,C,W,za){return this._getDistanceToLine(e,h,u,C,W,za)}}]);return a}(mc),J=function(){function N(a,e,h,u,C){P(this,N);if(void 0===e)throw Error("No body provided");this.options=(0,La.bridgeObject)(u);this.globalOptions=u;this.defaultOptions=C;this.body=e;this.imagelist=h;this.toId=this.fromId=this.id=void 0;this.hover=this.selected=!1;this.labelDirty=!0;this.baseWidth=this.options.width;this.baseFontSize=this.options.font.size;
this.edgeType=this.to=this.from=void 0;this.connected=!1;this.labelModule=new Sb(this.body,this.options,!0);this.setOptions(a)}va(N,[{key:"setOptions",value:function(a){if(a){var e="undefined"!==typeof a.physics&&this.options.physics!==a.physics||"undefined"!==typeof a.hidden&&(this.options.hidden||!1)!==(a.hidden||!1)||"undefined"!==typeof a.from&&this.options.from!==a.from||"undefined"!==typeof a.to&&this.options.to!==a.to;N.parseOptions(this.options,a,!0,this.globalOptions);void 0!==a.id&&(this.id=
a.id);void 0!==a.from&&(this.fromId=a.from);void 0!==a.to&&(this.toId=a.to);void 0!==a.title&&(this.title=a.title);void 0!==a.value&&(a.value=parseFloat(a.value));this.chooser=xb("edge",[a,this.options,this.defaultOptions]);this.updateLabelModule(a);e=this.updateEdgeType()||e;this._setInteractionWidths();this.connect();return e}}},{key:"getFormattingValues",value:function(){var a=this.options.color.inherit;a={toArrow:!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,toArrowScale:this.options.arrows.to.scaleFactor,
toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,
fromArrow:!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:a?void 0:this.options.color.color,inheritsColor:a,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,
shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser)if(this.selected){var e=this.options.selectionWidth;
"function"===typeof e?a.width=e(a.width):"number"===typeof e&&(a.width+=e);a.width=Math.max(a.width,.3/this.body.view.scale);a.color=this.options.color.highlight;a.shadow=this.options.shadow.enabled}else this.hover&&(e=this.options.hoverWidth,"function"===typeof e?a.width=e(a.width):"number"===typeof e&&(a.width+=e),a.width=Math.max(a.width,.3/this.body.view.scale),a.color=this.options.color.hover,a.shadow=this.options.shadow.enabled);else"function"===typeof this.chooser&&(this.chooser(a,this.options.id,
this.selected,this.hover),void 0!==a.color&&(a.inheritsColor=!1),!1!==a.shadow||a.shadowColor===this.options.shadow.color&&a.shadowSize===this.options.shadow.size&&a.shadowX===this.options.shadow.x&&a.shadowY===this.options.shadow.y||(a.shadow=!0));else a.shadow=this.options.shadow.enabled,a.width=Math.max(a.width,.3/this.body.view.scale);return a}},{key:"updateLabelModule",value:function(a){this.labelModule.update(this.options,[a,this.options,this.globalOptions,this.defaultOptions]);void 0!==this.labelModule.baseSize&&
(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var a=this.options.smooth,e=!1,h=!0;if(void 0!==this.edgeType){if(this.edgeType instanceof m&&!0===a.enabled&&"dynamic"===a.type||this.edgeType instanceof r&&!0===a.enabled&&"cubicBezier"===a.type||this.edgeType instanceof k&&!0===a.enabled&&"dynamic"!==a.type&&"cubicBezier"!==a.type||this.edgeType instanceof x&&!1===a.type.enabled)h=!1;!0===h&&(e=this.cleanup())}!0===h?!0===a.enabled?"dynamic"===a.type?(e=!0,this.edgeType=
new m(this.options,this.body,this.labelModule)):this.edgeType="cubicBezier"===a.type?new r(this.options,this.body,this.labelModule):new k(this.options,this.body,this.labelModule):this.edgeType=new x(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options);return e}},{key:"connect",value:function(){this.disconnect();this.from=this.body.nodes[this.fromId]||void 0;this.to=this.body.nodes[this.toId]||void 0;this.connected=void 0!==this.from&&void 0!==this.to;!0===this.connected?
(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this));this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0);this.to&&(this.to.detachEdge(this),this.to=void 0);this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",
value:function(a,e,h){void 0!==this.options.value?(a=this.options.scaling.customScalingFunction(a,e,h,this.options.value),e=this.options.scaling.max-this.options.scaling.min,!0===this.options.scaling.label.enabled&&(this.options.font.size=this.options.scaling.label.min+a*(this.options.scaling.label.max-this.options.scaling.label.min)),this.options.width=this.options.scaling.min+a*e):(this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize);this._setInteractionWidths();this.updateLabelModule()}},
{key:"_setInteractionWidths",value:function(){this.edgeType.hoverWidth="function"===typeof this.options.hoverWidth?this.options.hoverWidth(this.options.width):this.options.hoverWidth+this.options.width;this.edgeType.selectionWidth="function"===typeof this.options.selectionWidth?this.options.selectionWidth(this.options.width):this.options.selectionWidth+this.options.width}},{key:"draw",value:function(a){var e=this.getFormattingValues();if(!e.hidden){var h=this.edgeType.getViaNode();this.edgeType.drawLine(a,
e,this.selected,this.hover,h);this.drawLabel(a,h)}}},{key:"drawArrows",value:function(a){var e=this.getFormattingValues();if(!e.hidden){var h=this.edgeType.getViaNode();this.edgeType.fromPoint=this.edgeType.from;this.edgeType.toPoint=this.edgeType.to;if(e.fromArrow){var u=this.edgeType.getArrowData(a,"from",h,this.selected,this.hover,e);!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=u.core);e.fromArrowSrc&&(u.image=this.imagelist.load(e.fromArrowSrc));e.fromArrowImageWidth&&(u.imageWidth=e.fromArrowImageWidth);
e.fromArrowImageHeight&&(u.imageHeight=e.fromArrowImageHeight)}if(e.toArrow){var C=this.edgeType.getArrowData(a,"to",h,this.selected,this.hover,e);!1===e.arrowStrikethrough&&(this.edgeType.toPoint=C.core);e.toArrowSrc&&(C.image=this.imagelist.load(e.toArrowSrc));e.toArrowImageWidth&&(C.imageWidth=e.toArrowImageWidth);e.toArrowImageHeight&&(C.imageHeight=e.toArrowImageHeight)}if(e.middleArrow){var W=this.edgeType.getArrowData(a,"middle",h,this.selected,this.hover,e);e.middleArrowSrc&&(W.image=this.imagelist.load(e.middleArrowSrc));
e.middleArrowImageWidth&&(W.imageWidth=e.middleArrowImageWidth);e.middleArrowImageHeight&&(W.imageHeight=e.middleArrowImageHeight)}e.fromArrow&&this.edgeType.drawArrowHead(a,e,this.selected,this.hover,u);e.middleArrow&&this.edgeType.drawArrowHead(a,e,this.selected,this.hover,W);e.toArrow&&this.edgeType.drawArrowHead(a,e,this.selected,this.hover,C)}}},{key:"drawLabel",value:function(a,e){if(void 0!==this.options.label){var h=this.from,u=this.to;this.labelModule.differentState(this.selected,this.hover)&&
this.labelModule.getTextSize(a,this.selected,this.hover);h.id!=u.id?(this.labelModule.pointToSelf=!1,e=this.edgeType.getPoint(.5,e),a.save(),h=this._getRotation(a),0!=h.angle&&(a.translate(h.x,h.y),a.rotate(h.angle)),this.labelModule.draw(a,e.x,e.y,this.selected,this.hover),a.restore()):(this.labelModule.pointToSelf=!0,e=Cb(a,this.options.selfReference.angle,this.options.selfReference.size,h),e=this._pointOnCircle(e.x,e.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(a,
e.x,e.y,this.selected,this.hover))}}},{key:"getItemsOnPoint",value:function(a){var e=[];if(this.labelModule.visible()){var h=this._getRotation();Hb(this.labelModule.getSize(),a,h)&&e.push({edgeId:this.id,labelId:0})}this.isOverlappingWith({left:a.x,top:a.y})&&e.push({edgeId:this.id});return e}},{key:"isOverlappingWith",value:function(a){return this.connected?10>this.edgeType.getDistanceToEdge(this.from.x,this.from.y,this.to.x,this.to.y,a.left,a.top):!1}},{key:"_getRotation",value:function(a){var e=
this.edgeType.getViaNode();e=this.edgeType.getPoint(.5,e);void 0!==a&&this.labelModule.calculateLabelSize(a,this.selected,this.hover,e.x,e.y);a={x:e.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible()||"horizontal"===this.options.font.align)return a;e=this.from.x-this.to.x;var h=Math.atan2(this.from.y-this.to.y,e);if(-1>h&&0>e||0<h&&0>e)h+=Math.PI;a.angle=h;return a}},{key:"_pointOnCircle",value:function(a,e,h,u){return{x:a+h*Math.cos(u),y:e-h*Math.sin(u)}}},{key:"select",value:function(){this.selected=
!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup();this.disconnect();delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
{},C=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1;(0,La.selectiveDeepExtend)("endPointOffset arrowStrikethrough id from hidden hoverWidth labelHighlightBold length line opacity physics scaling selectionWidth selfReferenceSize selfReference to title value width font chosen widthConstraint".split(" "),a,e,h);void 0!==e.endPointOffset&&void 0!==e.endPointOffset.from&&(Number.isFinite(e.endPointOffset.from)?a.endPointOffset.from=e.endPointOffset.from:(a.endPointOffset.from=void 0!==u.endPointOffset.from?
u.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number")));void 0!==e.endPointOffset&&void 0!==e.endPointOffset.to&&(Number.isFinite(e.endPointOffset.to)?a.endPointOffset.to=e.endPointOffset.to:(a.endPointOffset.to=void 0!==u.endPointOffset.to?u.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number")));Kb(e.label)?a.label=e.label:Kb(a.label)||(a.label=void 0);(0,La.mergeOptions)(a,e,"smooth",u);(0,La.mergeOptions)(a,e,"shadow",u);(0,La.mergeOptions)(a,
e,"background",u);void 0!==e.dashes&&null!==e.dashes?a.dashes=e.dashes:!0===h&&null===e.dashes&&(a.dashes=Object.create(u.dashes));void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(a.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(a.scaling.max=e.scaling.max),(0,La.mergeOptions)(a.scaling,e.scaling,"label",u.scaling)):!0===h&&null===e.scaling&&(a.scaling=Object.create(u.scaling));if(void 0!==e.arrows&&null!==e.arrows)if("string"===typeof e.arrows){var W=e.arrows.toLowerCase();a.arrows.to.enabled=
-1!=W.indexOf("to");a.arrows.middle.enabled=-1!=W.indexOf("middle");a.arrows.from.enabled=-1!=W.indexOf("from")}else if("object"===ka(e.arrows))(0,La.mergeOptions)(a.arrows,e.arrows,"to",u.arrows),(0,La.mergeOptions)(a.arrows,e.arrows,"middle",u.arrows),(0,La.mergeOptions)(a.arrows,e.arrows,"from",u.arrows);else throw Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+JSON.stringify(e.arrows));else!0===h&&null===e.arrows&&(a.arrows=Object.create(u.arrows));
if(void 0!==e.color&&null!==e.color){W=(0,La.isString)(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color;var za=a.color;if(C)(0,La.deepExtend)(za,u.color,!1,h);else for(var eb in za)Object.prototype.hasOwnProperty.call(za,eb)&&delete za[eb];(0,La.isString)(za)?(za.color=za,za.highlight=za,za.hover=za,za.inherit=!1,void 0===W.opacity&&(za.opacity=1)):(C=!1,void 0!==W.color&&(za.color=W.color,C=!0),void 0!==W.highlight&&(za.highlight=W.highlight,C=!0),void 0!==W.hover&&
(za.hover=W.hover,C=!0),void 0!==W.inherit&&(za.inherit=W.inherit),void 0!==W.opacity&&(za.opacity=Math.min(1,Math.max(0,W.opacity))),!0===C?za.inherit=!1:void 0===za.inherit&&(za.inherit="from"))}else!0===h&&null===e.color&&(a.color=(0,La.bridgeObject)(u.color));!0===h&&null===e.font&&(a.font=(0,La.bridgeObject)(u.font));Object.prototype.hasOwnProperty.call(e,"selfReferenceSize")&&(console.log("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),
a.selfReference.size=e.selfReferenceSize)}}]);return N}(),Z=function(){function N(a,e,h){var u=this;P(this,N);this.body=a;this.images=e;this.groups=h;this.body.functions.createEdge=this.create.bind(this);this.edgesListeners={add:function(C,W){u.add(W.items)},update:function(C,W){u.update(W.items)},remove:function(C,W){u.remove(W.items)}};this.options={};this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,
type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,
max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(C,W,za,eb){return W===C?.5:Math.max(0,1/(W-C)*(eb-C))}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0};(0,La.deepExtend)(this.options,
this.defaultOptions);this.bindEventListeners()}va(N,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.on("_forceDisableDynamicCurves",function(e){var h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;"dynamic"===e&&(e="continuous");var u=!1,C;for(C in a.body.edges)if(Object.prototype.hasOwnProperty.call(a.body.edges,C)){var W=a.body.edges[C],za=a.body.data.edges.get(C);null!=za&&(za=za.smooth,void 0!==za&&!0===za.enabled&&"dynamic"===za.type&&(void 0===e?W.setOptions({smooth:!1}):
W.setOptions({smooth:{type:e}}),u=!0))}!0===h&&!0===u&&a.body.emitter.emit("_dataChanged")});this.body.emitter.on("_dataUpdated",function(){a.reconnectEdges()});this.body.emitter.on("refreshEdges",this.refresh.bind(this));this.body.emitter.on("refresh",this.refresh.bind(this));this.body.emitter.on("destroy",function(){(0,La.forEach)(a.edgesListeners,function(e,h){a.body.data.edges&&a.body.data.edges.off(h,e)});delete a.body.functions.createEdge;delete a.edgesListeners.add;delete a.edgesListeners.update;
delete a.edgesListeners.remove;delete a.edgesListeners})}},{key:"setOptions",value:function(a){if(void 0!==a){J.parseOptions(this.options,a,!0,this.defaultOptions,!0);var e=!1;if(void 0!==a.smooth)for(var h in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,h)&&(e=this.body.edges[h].updateEdgeType()||e);if(void 0!==a.font)for(var u in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,u)&&this.body.edges[u].updateLabelModule();void 0===a.hidden&&void 0===a.physics&&
!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(a){var e=this,h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,u=this.body.data.edges;if(a instanceof Sa.DataSet||a instanceof Sa.DataView)this.body.data.edges=a;else if(Array.isArray(a))this.body.data.edges=new Sa.DataSet,this.body.data.edges.add(a);else{if(a)throw new TypeError("Array or DataSet expected");this.body.data.edges=new Sa.DataSet}u&&(0,La.forEach)(this.edgesListeners,function(W,za){u.off(za,W)});
this.body.edges={};if(this.body.data.edges){(0,La.forEach)(this.edgesListeners,function(W,za){e.body.data.edges.on(za,W)});var C=this.body.data.edges.getIds();this.add(C,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout");!1===h&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(a){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,h=this.body.edges,u=this.body.data.edges,C=0;C<a.length;C++){var W=a[C],za=h[W];za&&za.disconnect();za=u.get(W,{showInternalIds:!0});
h[W]=this.create(za)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout");!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(a){for(var e=this.body.edges,h=this.body.data.edges,u=!1,C=0;C<a.length;C++){var W=a[C],za=h.get(W),eb=e[W];void 0!==eb?(eb.disconnect(),u=eb.setOptions(za)||u,eb.connect()):(this.body.edges[W]=this.create(za),u=!0)}!0===u?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},
{key:"remove",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(0!==a.length){var h=this.body.edges;(0,La.forEach)(a,function(u){u=h[u];void 0!==u&&u.remove()});e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var a=this;(0,La.forEach)(this.body.edges,function(e,h){h=a.body.data.edges.get(h);void 0!==h&&e.setOptions(h)})}},{key:"create",value:function(a){return new J(a,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",
value:function(){var a,e=this.body.nodes,h=this.body.edges;for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&(e[a].edges=[]);for(a in h)Object.prototype.hasOwnProperty.call(h,a)&&(e=h[a],e.from=null,e.to=null,e.connect())}},{key:"getConnectedNodes",value:function(a){var e=[];void 0!==this.body.edges[a]&&(a=this.body.edges[a],void 0!==a.fromId&&e.push(a.fromId),void 0!==a.toId&&e.push(a.toId));return e}},{key:"_updateState",value:function(){this._addMissingEdges();this._removeInvalidEdges()}},
{key:"_removeInvalidEdges",value:function(){var a=this,e=[];(0,La.forEach)(this.body.edges,function(h,u){var C=a.body.nodes[h.toId];h=a.body.nodes[h.fromId];void 0!==C&&!0===C.isCluster||void 0!==h&&!0===h.isCluster||void 0!==C&&void 0!==h||e.push(u)});this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var a=this.body.data.edges;if(void 0!==a&&null!==a){var e=this.body.edges,h=[];a.forEach(function(u,C){void 0===e[C]&&h.push(C)});this.add(h,!0)}}}]);return N}(),sa=function(){function N(a,
e,h){P(this,N);this.body=a;this.physicsBody=e;this.barnesHutTree;this.setOptions(h);this._rng=(0,La.Alea)("BARNES HUT SOLVER")}va(N,[{key:"setOptions",value:function(a){this.options=a;this.thetaInversed=1/this.options.theta;this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&0<this.physicsBody.physicsNodeIndices.length){var a=this.body.nodes,e=this.physicsBody.physicsNodeIndices,h=e.length,u=this._formBarnesHutTree(a,
e);this.barnesHutTree=u;for(var C=0;C<h;C++){var W=a[e[C]];0<W.options.mass&&this._getForceContributions(u.root,W)}}}},{key:"_getForceContributions",value:function(a,e){this._getForceContribution(a.children.NW,e);this._getForceContribution(a.children.NE,e);this._getForceContribution(a.children.SW,e);this._getForceContribution(a.children.SE,e)}},{key:"_getForceContribution",value:function(a,e){if(0<a.childrenCount){var h=a.centerOfMass.x-e.x,u=a.centerOfMass.y-e.y,C=Math.sqrt(h*h+u*u);C*a.calcSize>
this.thetaInversed?this._calculateForces(C,h,u,e,a):4===a.childrenCount?this._getForceContributions(a,e):a.children.data.id!=e.id&&this._calculateForces(C,h,u,e,a)}}},{key:"_calculateForces",value:function(a,e,h,u,C){0===a&&(e=a=.1);1>this.overlapAvoidanceFactor&&u.shape.radius&&(a=Math.max(.1+this.overlapAvoidanceFactor*u.shape.radius,a-u.shape.radius));a=this.options.gravitationalConstant*C.mass*u.options.mass/Math.pow(a,3);this.physicsBody.forces[u.id].x+=e*a;this.physicsBody.forces[u.id].y+=h*
a}},{key:"_formBarnesHutTree",value:function(a,e){var h=e.length,u=a[e[0]].x;var C=a[e[0]].y;for(var W=a[e[0]].x,za=a[e[0]].y,eb=1;eb<h;eb++){var Eb=a[e[eb]],$b=Eb.x,jc=Eb.y;0<Eb.options.mass&&($b<u&&(u=$b),$b>W&&(W=$b),jc<C&&(C=jc),jc>za&&(za=jc))}eb=Math.abs(W-u)-Math.abs(za-C);0<eb?(C-=.5*eb,za+=.5*eb):(u+=.5*eb,W-=.5*eb);eb=Math.max(1E-5,Math.abs(W-u));Eb=.5*eb;u=.5*(u+W);C=.5*(C+za);za={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:u-Eb,maxX:u+Eb,minY:C-Eb,maxY:C+Eb},size:eb,calcSize:1/eb,
children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(za.root);for(u=0;u<h;u++)C=a[e[u]],0<C.options.mass&&this._placeInTree(za.root,C);return za}},{key:"_updateBranchMass",value:function(a,e){var h=a.centerOfMass,u=a.mass+e.options.mass,C=1/u;h.x=h.x*a.mass+e.x*e.options.mass;h.x*=C;h.y=h.y*a.mass+e.y*e.options.mass;h.y*=C;a.mass=u;e=Math.max(Math.max(e.height,e.radius),e.width);a.maxWidth=a.maxWidth<e?e:a.maxWidth}},{key:"_placeInTree",value:function(a,e,h){1==h&&void 0!==
h||this._updateBranchMass(a,e);h=a.children.NW.range;this._placeInRegion(a,e,h.maxX>e.x?h.maxY>e.y?"NW":"SW":h.maxY>e.y?"NE":"SE")}},{key:"_placeInRegion",value:function(a,e,h){a=a.children[h];switch(a.childrenCount){case 0:a.children.data=e;a.childrenCount=1;this._updateBranchMass(a,e);break;case 1:a.children.data.x===e.x&&a.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(a),this._placeInTree(a,e));break;case 4:this._placeInTree(a,e)}}},{key:"_splitBranch",value:function(a){var e=
null;1===a.childrenCount&&(e=a.children.data,a.mass=0,a.centerOfMass.x=0,a.centerOfMass.y=0);a.childrenCount=4;a.children.data=null;this._insertRegion(a,"NW");this._insertRegion(a,"NE");this._insertRegion(a,"SW");this._insertRegion(a,"SE");null!=e&&this._placeInTree(a,e)}},{key:"_insertRegion",value:function(a,e){var h=.5*a.size;switch(e){case "NW":var u=a.range.minX;var C=a.range.minX+h;var W=a.range.minY;var za=a.range.minY+h;break;case "NE":u=a.range.minX+h;C=a.range.maxX;W=a.range.minY;za=a.range.minY+
h;break;case "SW":u=a.range.minX;C=a.range.minX+h;W=a.range.minY+h;za=a.range.maxY;break;case "SE":u=a.range.minX+h,C=a.range.maxX,W=a.range.minY+h,za=a.range.maxY}a.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:u,maxX:C,minY:W,maxY:za},size:.5*a.size,calcSize:2*a.calcSize,children:{data:null},maxWidth:0,level:a.level+1,childrenCount:0}}},{key:"_debug",value:function(a,e){void 0!==this.barnesHutTree&&(a.lineWidth=1,this._drawBranch(this.barnesHutTree.root,a,e))}},{key:"_drawBranch",value:function(a,
e,h){void 0===h&&(h="#FF0000");4===a.childrenCount&&(this._drawBranch(a.children.NW,e),this._drawBranch(a.children.NE,e),this._drawBranch(a.children.SE,e),this._drawBranch(a.children.SW,e));e.strokeStyle=h;e.beginPath();e.moveTo(a.range.minX,a.range.minY);e.lineTo(a.range.maxX,a.range.minY);e.stroke();e.beginPath();e.moveTo(a.range.maxX,a.range.minY);e.lineTo(a.range.maxX,a.range.maxY);e.stroke();e.beginPath();e.moveTo(a.range.maxX,a.range.maxY);e.lineTo(a.range.minX,a.range.maxY);e.stroke();e.beginPath();
e.moveTo(a.range.minX,a.range.maxY);e.lineTo(a.range.minX,a.range.minY);e.stroke()}}]);return N}(),bb=function(){function N(a,e,h){P(this,N);this._rng=(0,La.Alea)("REPULSION SOLVER");this.body=a;this.physicsBody=e;this.setOptions(h)}va(N,[{key:"setOptions",value:function(a){this.options=a}},{key:"solve",value:function(){for(var a,e,h,u,C,W,za=this.body.nodes,eb=this.physicsBody.physicsNodeIndices,Eb=this.physicsBody.forces,$b=this.options.nodeDistance,jc=-2/3/$b,uc=4/3,zc=0;zc<eb.length-1;zc++){C=
za[eb[zc]];for(var Ic=zc+1;Ic<eb.length;Ic++)W=za[eb[Ic]],a=W.x-C.x,e=W.y-C.y,h=Math.sqrt(a*a+e*e),0===h&&(a=h=.1*this._rng()),h<2*$b&&(u=h<.5*$b?1:jc*h+uc,u/=h,a*=u,e*=u,Eb[C.id].x-=a,Eb[C.id].y-=e,Eb[W.id].x+=a,Eb[W.id].y+=e)}}}]);return N}(),Ta=function(){function N(a,e,h){P(this,N);this.body=a;this.physicsBody=e;this.setOptions(h)}va(N,[{key:"setOptions",value:function(a){this.options=a;this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var a=
this.body.nodes,e=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,u=this.options.nodeDistance,C=0;C<e.length-1;C++)for(var W=a[e[C]],za=C+1;za<e.length;za++){var eb=a[e[za]];if(W.level===eb.level){var Eb=u+this.overlapAvoidanceFactor*((W.shape.radius||0)/2+(eb.shape.radius||0)/2),$b=eb.x-W.x,jc=eb.y-W.y,uc=Math.sqrt($b*$b+jc*jc);Eb=uc<Eb?-Math.pow(.05*uc,2)+Math.pow(.05*Eb,2):0;0!==uc&&(Eb/=uc);$b*=Eb;jc*=Eb;h[W.id].x-=$b;h[W.id].y-=jc;h[eb.id].x+=$b;h[eb.id].y+=jc}}}}]);return N}(),
Pb=function(){function N(a,e,h){P(this,N);this.body=a;this.physicsBody=e;this.setOptions(h)}va(N,[{key:"setOptions",value:function(a){this.options=a}},{key:"solve",value:function(){for(var a,e,h=this.physicsBody.physicsEdgeIndices,u=this.body.edges,C,W,za=0;za<h.length;za++)e=u[h[za]],!0===e.connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(a=void 0===e.options.length?this.options.springLength:e.options.length,C=e.to,W=e.edgeType.via,
e=e.from,this._calculateSpringForce(C,W,.5*a),this._calculateSpringForce(W,e,.5*a)):(a=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,a)))}},{key:"_calculateSpringForce",value:function(a,e,h){var u=a.x-e.x,C=a.y-e.y,W=Math.max(Math.sqrt(u*u+C*C),.01);h=this.options.springConstant*(h-W)/W;u*=h;C*=h;void 0!==this.physicsBody.forces[a.id]&&(this.physicsBody.forces[a.id].x+=u,this.physicsBody.forces[a.id].y+=C);void 0!==this.physicsBody.forces[e.id]&&
(this.physicsBody.forces[e.id].x-=u,this.physicsBody.forces[e.id].y-=C)}}]);return N}(),ac=function(){function N(a,e,h){P(this,N);this.body=a;this.physicsBody=e;this.setOptions(h)}va(N,[{key:"setOptions",value:function(a){this.options=a}},{key:"solve",value:function(){var a,e=this.body.edges,h=this.physicsBody.physicsEdgeIndices,u=this.physicsBody.physicsNodeIndices,C=this.physicsBody.forces;for(a=0;a<u.length;a++){var W=u[a];C[W].springFx=0;C[W].springFy=0}for(var za=0;za<h.length;za++)if(W=e[h[za]],
!0===W.connected){a=void 0===W.options.length?this.options.springLength:W.options.length;var eb=W.from.x-W.to.x;var Eb=W.from.y-W.to.y;var $b=Math.sqrt(eb*eb+Eb*Eb);$b=0===$b?.01:$b;a=this.options.springConstant*(a-$b)/$b;eb*=a;a*=Eb;W.to.level!=W.from.level?(void 0!==C[W.toId]&&(C[W.toId].springFx-=eb,C[W.toId].springFy-=a),void 0!==C[W.fromId]&&(C[W.fromId].springFx+=eb,C[W.fromId].springFy+=a)):(void 0!==C[W.toId]&&(C[W.toId].x-=.5*eb,C[W.toId].y-=.5*a),void 0!==C[W.fromId]&&(C[W.fromId].x+=.5*
eb,C[W.fromId].y+=.5*a))}a=1;for(W=0;W<u.length;W++)za=u[W],e=Math.min(a,Math.max(-a,C[za].springFx)),h=Math.min(a,Math.max(-a,C[za].springFy)),C[za].x+=e,C[za].y+=h;for(a=e=h=0;a<u.length;a++)W=u[a],h+=C[W].x,e+=C[W].y;h/=u.length;e/=u.length;for(a=0;a<u.length;a++)W=u[a],C[W].x-=h,C[W].y-=e}}]);return N}(),yc=function(){function N(a,e,h){P(this,N);this.body=a;this.physicsBody=e;this.setOptions(h)}va(N,[{key:"setOptions",value:function(a){this.options=a}},{key:"solve",value:function(){for(var a,
e,h,u,C=this.body.nodes,W=this.physicsBody.physicsNodeIndices,za=this.physicsBody.forces,eb=0;eb<W.length;eb++)u=C[W[eb]],a=-u.x,e=-u.y,h=Math.sqrt(a*a+e*e),this._calculateForces(h,a,e,za,u)}},{key:"_calculateForces",value:function(a,e,h,u,C){a=0===a?0:this.options.centralGravity/a;u[C.id].x=e*a;u[C.id].y=h*a}}]);return N}(),Pc=function(N){function a(e,h,u){P(this,a);e=X(this,la(a).call(this,e,h,u));e._rng=(0,La.Alea)("FORCE ATLAS 2 BASED REPULSION SOLVER");return e}ua(a,N);va(a,[{key:"_calculateForces",
value:function(e,h,u,C,W){0===e&&(h=e=.1*this._rng());1>this.overlapAvoidanceFactor&&C.shape.radius&&(e=Math.max(.1+this.overlapAvoidanceFactor*C.shape.radius,e-C.shape.radius));e=this.options.gravitationalConstant*W.mass*C.options.mass*(C.edges.length+1)/Math.pow(e,2);this.physicsBody.forces[C.id].x+=h*e;this.physicsBody.forces[C.id].y+=u*e}}]);return a}(sa),Bc=function(N){function a(e,h,u){P(this,a);return X(this,la(a).call(this,e,h,u))}ua(a,N);va(a,[{key:"_calculateForces",value:function(e,h,u,
C,W){0<e&&(e=this.options.centralGravity*(W.edges.length+1)*W.options.mass,C[W.id].x=h*e,C[W.id].y=u*e)}}]);return a}(yc),Hc=function(){function N(a){P(this,N);this.body=a;this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}};this.physicsEnabled=!0;this.simulationInterval=1E3/60;this.requiresTimeout=!0;this.previousStates={};this.referenceState={};this.freezeCache={};this.renderTimer=void 0;this.adaptiveTimestepEnabled=this.adaptiveTimestep=!1;this.adaptiveCounter=
0;this.adaptiveInterval=3;this.startedStabilization=this.stabilized=!1;this.stabilizationIterations=0;this.ready=!1;this.options={};this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2E3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,
damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1E3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}};Object.assign(this.options,this.defaultOptions);this.timestep=.5;this.layoutFailed=!1;this.bindEventListeners()}va(N,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.on("initPhysics",
function(){a.initPhysics()});this.body.emitter.on("_layoutFailed",function(){a.layoutFailed=!0});this.body.emitter.on("resetPhysics",function(){a.stopSimulation();a.ready=!1});this.body.emitter.on("disablePhysics",function(){a.physicsEnabled=!1;a.stopSimulation()});this.body.emitter.on("restorePhysics",function(){a.setOptions(a.options);!0===a.ready&&a.startSimulation()});this.body.emitter.on("startSimulation",function(){!0===a.ready&&a.startSimulation()});this.body.emitter.on("stopSimulation",function(){a.stopSimulation()});
this.body.emitter.on("destroy",function(){a.stopSimulation(!1);a.body.emitter.off()});this.body.emitter.on("_dataChanged",function(){a.updatePhysicsData()})}},{key:"setOptions",value:function(a){if(void 0!==a)if(!1===a)this.physicsEnabled=this.options.enabled=!1,this.stopSimulation();else if(!0===a)this.physicsEnabled=this.options.enabled=!0,this.startSimulation();else{this.physicsEnabled=!0;(0,La.selectiveNotDeepExtend)(["stabilization"],this.options,a);(0,La.mergeOptions)(this.options,a,"stabilization");
void 0===a.enabled&&(this.options.enabled=!0);!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());if(a=this.options.wind){if("number"!==typeof a.x||Number.isNaN(a.x))a.x=0;if("number"!==typeof a.y||Number.isNaN(a.y))a.y=0}this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){if("forceAtlas2Based"===this.options.solver){var a=this.options.forceAtlas2Based;this.nodesSolver=new Pc(this.body,this.physicsBody,a);this.edgesSolver=new Pb(this.body,this.physicsBody,
a);this.gravitySolver=new Bc(this.body,this.physicsBody,a)}else"repulsion"===this.options.solver?(a=this.options.repulsion,this.nodesSolver=new bb(this.body,this.physicsBody,a),this.edgesSolver=new Pb(this.body,this.physicsBody,a)):"hierarchicalRepulsion"===this.options.solver?(a=this.options.hierarchicalRepulsion,this.nodesSolver=new Ta(this.body,this.physicsBody,a),this.edgesSolver=new ac(this.body,this.physicsBody,a)):(a=this.options.barnesHut,this.nodesSolver=new sa(this.body,this.physicsBody,
a),this.edgesSolver=new Pb(this.body,this.physicsBody,a)),this.gravitySolver=new yc(this.body,this.physicsBody,a);this.modelOptions=a}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){!0===this.physicsEnabled&&
!0===this.options.enabled?(this.adaptiveTimestep=this.stabilized=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=this.simulationStep.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this.stabilized=!0;!0===a&&this._emitStabilized();void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",
this.viewFunction),this.viewFunction=void 0,!0===a&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var a=Date.now();this.physicsTick();(Date.now()-a<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0);!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var a=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(1<this.stabilizationIterations||
!0===this.startedStabilization)&&setTimeout(function(){a.body.emitter.emit("stabilized",{iterations:e});a.startedStabilization=!1;a.stabilizationIterations=0},0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve();this.nodesSolver.solve();this.edgesSolver.solve();this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep*=1.2:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=
Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing();!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(0===this.adaptiveCounter%this.adaptiveInterval?(this.timestep*=2,this.physicsStep(),this.revert(),this.timestep*=.5,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),
this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={};this.physicsBody.physicsNodeIndices=[];this.physicsBody.physicsEdgeIndices=[];var a=this.body.nodes,e=this.body.edges;for(u in a)Object.prototype.hasOwnProperty.call(a,u)&&!0===a[u].options.physics&&this.physicsBody.physicsNodeIndices.push(a[u].id);for(var h in e)Object.prototype.hasOwnProperty.call(e,h)&&!0===e[h].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[h].id);for(e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var u=
this.physicsBody.physicsNodeIndices[e];this.physicsBody.forces[u]={x:0,y:0};void 0===this.physicsBody.velocities[u]&&(this.physicsBody.velocities[u]={x:0,y:0})}for(var C in this.physicsBody.velocities)void 0===a[C]&&delete this.physicsBody.velocities[C]}},{key:"revert",value:function(){var a=Object.keys(this.previousStates),e=this.body.nodes,h=this.physicsBody.velocities;this.referenceState={};for(var u=0;u<a.length;u++){var C=a[u];void 0!==e[C]?!0===e[C].options.physics&&(this.referenceState[C]=
{positions:{x:e[C].x,y:e[C].y}},h[C].x=this.previousStates[C].vx,h[C].y=this.previousStates[C].vy,e[C].x=this.previousStates[C].x,e[C].y=this.previousStates[C].y):delete this.previousStates[C]}}},{key:"_evaluateStepQuality",value:function(){var a=this.body.nodes,e=this.referenceState,h;for(h in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,h)&&void 0!==a[h]){var u=a[h].x-e[h].positions.x;var C=a[h].y-e[h].positions.y;u=Math.sqrt(Math.pow(u,2)+Math.pow(C,2));if(.3<
u)return!1}return!0}},{key:"moveNodes",value:function(){for(var a=this.physicsBody.physicsNodeIndices,e=0,h=0,u=0;u<a.length;u++){var C=this._performStep(a[u]);e=Math.max(e,C);h+=C}this.adaptiveTimestepEnabled=5>h/a.length;this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(a,e,h){a+=(e-this.modelOptions.damping*a)/h*this.timestep;e=this.options.maxVelocity||1E9;Math.abs(a)>e&&(a=0<a?e:-e);return a}},{key:"_performStep",value:function(a){var e=this.body.nodes[a],
h=this.physicsBody.forces[a];this.options.wind&&(h.x+=this.options.wind.x,h.y+=this.options.wind.y);var u=this.physicsBody.velocities[a];this.previousStates[a]={x:e.x,y:e.y,vx:u.x,vy:u.y};!1===e.options.fixed.x?(u.x=this.calculateComponentVelocity(u.x,h.x,e.options.mass),e.x+=u.x*this.timestep):(h.x=0,u.x=0);!1===e.options.fixed.y?(u.y=this.calculateComponentVelocity(u.y,h.y,e.options.mass),e.y+=u.y*this.timestep):(h.y=0,u.y=0);return Math.sqrt(Math.pow(u.x,2)+Math.pow(u.y,2))}},{key:"_freezeNodes",
value:function(){var a=this.body.nodes,e;for(e in a)if(Object.prototype.hasOwnProperty.call(a,e)&&a[e].x&&a[e].y){var h=a[e].options.fixed;this.freezeCache[e]={x:h.x,y:h.y};h.x=!0;h.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var a=this.body.nodes,e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&void 0!==this.freezeCache[e]&&(a[e].options.fixed.x=this.freezeCache[e].x,a[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var a=this,e=0<
arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!==typeof e&&(e=this.options.stabilization.iterations,console.log("The stabilize method needs a numeric amount of iterations. Switching to default: ",e));0===this.physicsBody.physicsNodeIndices.length?this.ready=!0:(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=
e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,setTimeout(function(){return a._stabilizationBatch()},0))}},{key:"_startStabilizing",value:function(){if(!0===this.startedStabilization)return!1;this.body.emitter.emit("startStabilizing");return this.startedStabilization=!0}},{key:"_stabilizationBatch",value:function(){var a=this,e=function(){a.body.emitter.emit("stabilizationProgress",{iterations:a.stabilizationIterations,total:a.targetIterations})};
this._startStabilizing()&&e();for(var h=0;!1===a.stabilized&&a.stabilizationIterations<a.targetIterations&&h<this.options.stabilization.updateInterval;)this.physicsTick(),h++;e();!1===a.stabilized&&a.stabilizationIterations<a.targetIterations?setTimeout(this._stabilizationBatch.bind(this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw");!0===this.options.stabilization.fit&&this.body.emitter.emit("fit");!0===this.options.stabilization.onlyDynamicEdges&&
this._restoreFrozenNodes();this.body.emitter.emit("stabilizationIterationsDone");this.body.emitter.emit("_requestRedraw");!0===this.stabilized?this._emitStabilized():this.startSimulation();this.ready=!0}},{key:"_drawForces",value:function(a){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var h=this.physicsBody.physicsNodeIndices[e],u=this.body.nodes[h],C=this.physicsBody.forces[h],W=Math.sqrt(Math.pow(C.x,2)+Math.pow(C.x,2)),za=Math.min(Math.max(5,W),15);h=3*za;W=(0,La.HSVToHex)((180-
180*Math.min(1,Math.max(0,.03*W)))/360,1,1);var eb={x:u.x+20*C.x,y:u.y+20*C.y};a.lineWidth=za;a.strokeStyle=W;a.beginPath();a.moveTo(u.x,u.y);a.lineTo(eb.x,eb.y);a.stroke();u=Math.atan2(C.y,C.x);a.fillStyle=W;Tb.draw(a,{type:"arrow",point:eb,angle:u,length:h});a.fill()}}}]);return N}(),gd=function(){function N(){P(this,N)}va(N,null,[{key:"getRange",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],h=1E9,u=-1E9,C=1E9,W=-1E9;if(0<e.length)for(var za=0;za<e.length;za++){var eb=
a[e[za]];C>eb.shape.boundingBox.left&&(C=eb.shape.boundingBox.left);W<eb.shape.boundingBox.right&&(W=eb.shape.boundingBox.right);h>eb.shape.boundingBox.top&&(h=eb.shape.boundingBox.top);u<eb.shape.boundingBox.bottom&&(u=eb.shape.boundingBox.bottom)}1E9===C&&-1E9===W&&1E9===h&&-1E9===u&&(W=C=u=h=0);return{minX:C,maxX:W,minY:h,maxY:u}}},{key:"getRangeCore",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],h=1E9,u=-1E9,C=1E9,W=-1E9;if(0<e.length)for(var za=0;za<e.length;za++){var eb=
a[e[za]];C>eb.x&&(C=eb.x);W<eb.x&&(W=eb.x);h>eb.y&&(h=eb.y);u<eb.y&&(u=eb.y)}1E9===C&&-1E9===W&&1E9===h&&-1E9===u&&(W=C=u=h=0);return{minX:C,maxX:W,minY:h,maxY:u}}},{key:"findCenter",value:function(a){return{x:.5*(a.maxX+a.minX),y:.5*(a.maxY+a.minY)}}},{key:"cloneOptions",value:function(a,e){var h={};void 0===e||"node"===e?((0,La.deepExtend)(h,a.options,!0),h.x=a.x,h.y=a.y,h.amountOfConnections=a.edges.length):(0,La.deepExtend)(h,a.options,!0);return h}}]);return N}(),pd=function(N){function a(e,
h,u,C,W,za){P(this,a);e=X(this,la(a).call(this,e,h,u,C,W,za));e.isCluster=!0;e.containedNodes={};e.containedEdges={};return e}ua(a,N);va(a,[{key:"_openChildCluster",value:function(e){var h=this,u=this.body.nodes[e];if(void 0===this.containedNodes[e])throw Error("node with id: "+e+" not in current cluster");if(!u.isCluster)throw Error("node with id: "+e+" is not a cluster");delete this.containedNodes[e];(0,La.forEach)(u.edges,function(C){delete h.containedEdges[C.id]});(0,La.forEach)(u.containedNodes,
function(C,W){h.containedNodes[W]=C});u.containedNodes={};(0,La.forEach)(u.containedEdges,function(C,W){h.containedEdges[W]=C});u.containedEdges={};(0,La.forEach)(u.edges,function(C){(0,La.forEach)(h.edges,function(W){var za=W.clusteringEdgeReplacingIds.indexOf(C.id);-1!==za&&((0,La.forEach)(C.clusteringEdgeReplacingIds,function(eb){W.clusteringEdgeReplacingIds.push(eb);h.body.edges[eb].edgeReplacedById=W.id}),W.clusteringEdgeReplacingIds.splice(za,1))})});u.edges=[]}}]);return a}(dc),cd=function(){function N(a){var e=
this;P(this,N);this.body=a;this.clusteredNodes={};this.clusteredEdges={};this.options={};this.defaultOptions={};Object.assign(this.options,this.defaultOptions);this.body.emitter.on("_resetData",function(){e.clusteredNodes={};e.clusteredEdges={}})}va(N,[{key:"clusterByHubsize",value:function(a,e){void 0===a?a=this._getHubSize():"object"===ka(a)&&(e=this._checkOptions(a),a=this._getHubSize());for(var h=[],u=0;u<this.body.nodeIndices.length;u++){var C=this.body.nodes[this.body.nodeIndices[u]];C.edges.length>=
a&&h.push(C.id)}for(a=0;a<h.length;a++)this.clusterByConnection(h[a],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var a=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},h=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(void 0===e.joinCondition)throw Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var u={},C={};(0,La.forEach)(this.body.nodes,function(W,za){W.options&&!0===
e.joinCondition(W.options)&&(u[za]=W,(0,La.forEach)(W.edges,function(eb){void 0===a.clusteredEdges[eb.id]&&(C[eb.id]=eb)}))});this._cluster(u,C,e,h)}},{key:"clusterByEdgeCount",value:function(a,e){var h=this,u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;e=this._checkOptions(e);for(var C=[],W={},za,eb,Eb,$b=function(uc){var zc={},Ic={};uc=h.body.nodeIndices[uc];var Lc=h.body.nodes[uc];if(void 0===W[uc]){Eb=0;eb=[];for(var Rc=0;Rc<Lc.edges.length;Rc++)za=Lc.edges[Rc],void 0===h.clusteredEdges[za.id]&&
(za.toId!==za.fromId&&Eb++,eb.push(za));if(Eb===a){Rc=function(ed){if(void 0===e.joinCondition||null===e.joinCondition)return!0;ed=gd.cloneOptions(ed);return e.joinCondition(ed)};for(var Tc=!0,Zc=0;Zc<eb.length;Zc++){za=eb[Zc];var jd=h._getConnectedId(za,uc);if(Rc(Lc))Ic[za.id]=za,zc[uc]=Lc,zc[jd]=h.body.nodes[jd],W[uc]=!0;else{Tc=!1;break}}if(0<Object.keys(zc).length&&0<Object.keys(Ic).length&&!0===Tc)if(uc=function(){for(var ed=0;ed<C.length;++ed)for(var Dc in zc)if(void 0!==C[ed].nodes[Dc])return C[ed]}(),
void 0!==uc){for(var ld in zc)void 0===uc.nodes[ld]&&(uc.nodes[ld]=zc[ld]);for(var fd in Ic)void 0===uc.edges[fd]&&(uc.edges[fd]=Ic[fd])}else C.push({nodes:zc,edges:Ic})}}},jc=0;jc<this.body.nodeIndices.length;jc++)$b(jc);for($b=0;$b<C.length;$b++)this._cluster(C[$b].nodes,C[$b].edges,e,!1);!0===u&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(a){this.clusterByEdgeCount(1,a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0)}},{key:"clusterBridges",value:function(a){this.clusterByEdgeCount(2,
a,1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0)}},{key:"clusterByConnection",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(void 0===a)throw Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[a])throw Error("The nodeId given to clusterByConnection does not exist!");var u=this.body.nodes[a];e=this._checkOptions(e,u);void 0===e.clusterNodeProperties.x&&(e.clusterNodeProperties.x=u.x);void 0===e.clusterNodeProperties.y&&
(e.clusterNodeProperties.y=u.y);void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=u.options.fixed.x,e.clusterNodeProperties.fixed.y=u.options.fixed.y);var C={},W={},za=u.id,eb=gd.cloneOptions(u);C[za]=u;for(var Eb=0;Eb<u.edges.length;Eb++){var $b=u.edges[Eb];if(void 0===this.clusteredEdges[$b.id]){var jc=this._getConnectedId($b,za);if(void 0===this.clusteredNodes[jc])if(jc!==za)if(void 0===e.joinCondition)W[$b.id]=$b,C[jc]=this.body.nodes[jc];
else{var uc=gd.cloneOptions(this.body.nodes[jc]);!0===e.joinCondition(eb,uc)&&(W[$b.id]=$b,C[jc]=this.body.nodes[jc])}else W[$b.id]=$b}}u=Object.keys(C).map(function(Ic){return C[Ic].id});for(var zc in C)if(Object.prototype.hasOwnProperty.call(C,zc))for(za=C[zc],eb=0;eb<za.edges.length;eb++)Eb=za.edges[eb],-1<u.indexOf(this._getConnectedId(Eb,za.id))&&(W[Eb.id]=Eb);this._cluster(C,W,e,h)}},{key:"_createClusterEdges",value:function(a,e,h,u){for(var C,W,za,eb,Eb,$b,jc=Object.keys(a),uc=[],zc=0;zc<jc.length;zc++){W=
jc[zc];za=a[W];for(var Ic=0;Ic<za.edges.length;Ic++)C=za.edges[Ic],void 0===this.clusteredEdges[C.id]&&(C.toId==C.fromId?e[C.id]=C:C.toId==W?(eb=h.id,$b=Eb=C.fromId):(eb=C.toId,Eb=h.id,$b=eb),void 0===a[$b]&&uc.push({edge:C,fromId:Eb,toId:eb}))}a=[];for(e=0;e<uc.length;e++){h=uc[e];C=h.edge;a:{for(W=0;W<a.length;W++)if(za=a[W],eb=h.fromId===za.toId&&h.toId===za.fromId,h.fromId===za.fromId&&h.toId===za.toId||eb){W=za;break a}W=null}null===W?(W=this._createClusteredEdge(h.fromId,h.toId,C,u),a.push(W)):
W.clusteringEdgeReplacingIds.push(C.id);this.body.edges[C.id].edgeReplacedById=W.id;this._backupEdgeOptions(C);C.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};void 0===a.clusterEdgeProperties&&(a.clusterEdgeProperties={});void 0===a.clusterNodeProperties&&(a.clusterNodeProperties={});return a}},{key:"_cluster",value:function(a,e,h){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!0,C=[],W;for(W in a)Object.prototype.hasOwnProperty.call(a,
W)&&void 0!==this.clusteredNodes[W]&&C.push(W);for(W=0;W<C.length;++W)delete a[C[W]];if(0!=Object.keys(a).length&&(1!=Object.keys(a).length||1==h.clusterNodeProperties.allowSingleNodeCluster)){C=(0,La.deepExtend)({},h.clusterNodeProperties);if(void 0!==h.processProperties){W=[];for(var za in a)if(Object.prototype.hasOwnProperty.call(a,za)){var eb=gd.cloneOptions(a[za]);W.push(eb)}za=[];for(var Eb in e)Object.prototype.hasOwnProperty.call(e,Eb)&&"clusterEdge:"!==Eb.substr(0,12)&&(eb=gd.cloneOptions(e[Eb],
"edge"),za.push(eb));C=h.processProperties(C,W,za);if(!C)throw Error("The processProperties function does not return properties!");}void 0===C.id&&(C.id="cluster:"+(0,vb.v4)());Eb=C.id;void 0===C.label&&(C.label="cluster");za=void 0;void 0===C.x&&(za=this._getClusterPosition(a),C.x=za.x);void 0===C.y&&(void 0===za&&(za=this._getClusterPosition(a)),C.y=za.y);C.id=Eb;Eb=this.body.functions.createNode(C,pd);Eb.containedNodes=a;Eb.containedEdges=e;Eb.clusterEdgeProperties=h.clusterEdgeProperties;this.body.nodes[C.id]=
Eb;this._clusterEdges(a,e,C,h.clusterEdgeProperties);C.id=void 0;!0===u&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(a){void 0===this.clusteredEdges[a.id]&&(this.clusteredEdges[a.id]={physics:a.options.physics})}},{key:"_restoreEdge",value:function(a){var e=this.clusteredEdges[a.id];void 0!==e&&(a.setOptions({physics:e.physics}),delete this.clusteredEdges[a.id])}},{key:"isCluster",value:function(a){if(void 0!==this.body.nodes[a])return!0===this.body.nodes[a].isCluster;
console.log("Node does not exist.");return!1}},{key:"_getClusterPosition",value:function(a){for(var e=Object.keys(a),h=a[e[0]].x,u=a[e[0]].x,C=a[e[0]].y,W=a[e[0]].y,za,eb=1;eb<e.length;eb++)za=a[e[eb]],h=za.x<h?za.x:h,u=za.x>u?za.x:u,C=za.y<C?za.y:C,W=za.y>W?za.y:W;return{x:.5*(h+u),y:.5*(C+W)}}},{key:"openCluster",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;if(void 0===a)throw Error("No clusterNodeId supplied to openCluster.");var u=this.body.nodes[a];if(void 0===
u)throw Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==u.isCluster||void 0===u.containedNodes||void 0===u.containedEdges)throw Error("The node:"+a+" is not a valid cluster.");var C=this.findNode(a),W=C.indexOf(a)-1;if(0<=W)this.body.nodes[C[W]]._openChildCluster(a);else{W=u.containedNodes;C=u.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"===typeof e.releaseFunction){var za={},eb={x:u.x,y:u.y};for($b in W)if(Object.prototype.hasOwnProperty.call(W,$b)){var Eb=
this.body.nodes[$b];za[$b]={x:Eb.x,y:Eb.y}}var $b=e.releaseFunction(eb,za);for(var jc in W)Object.prototype.hasOwnProperty.call(W,jc)&&(za=this.body.nodes[jc],void 0!==$b[jc]&&(za.x=void 0===$b[jc].x?u.x:$b[jc].x,za.y=void 0===$b[jc].y?u.y:$b[jc].y))}else(0,La.forEach)(W,function(Tc){!1===Tc.options.fixed.x&&(Tc.x=u.x);!1===Tc.options.fixed.y&&(Tc.y=u.y)});for(var uc in W)Object.prototype.hasOwnProperty.call(W,uc)&&(jc=this.body.nodes[uc],jc.vx=u.vx,jc.vy=u.vy,jc.setOptions({physics:!0}),delete this.clusteredNodes[uc]);
uc=[];for(jc=0;jc<u.edges.length;jc++)uc.push(u.edges[jc]);for(jc=0;jc<uc.length;jc++){W=uc[jc];$b=this._getConnectedId(W,a);za=this.clusteredNodes[$b];for(eb=0;eb<W.clusteringEdgeReplacingIds.length;eb++)if(Eb=this.body.edges[W.clusteringEdgeReplacingIds[eb]],void 0!==Eb)if(void 0!==za){var zc=this.body.nodes[za.clusterId];zc.containedEdges[Eb.id]=Eb;delete C[Eb.id];var Ic=Eb.fromId,Lc=Eb.toId;Eb.toId==$b?Lc=za.clusterId:Ic=za.clusterId;this._createClusteredEdge(Ic,Lc,Eb,zc.clusterEdgeProperties,
{hidden:!1,physics:!0})}else this._restoreEdge(Eb);W.remove()}for(var Rc in C)Object.prototype.hasOwnProperty.call(C,Rc)&&this._restoreEdge(C[Rc])}delete this.body.nodes[a];!0===h&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(a){var e=[];if(!0===this.isCluster(a)){a=this.body.nodes[a].containedNodes;for(var h in a)Object.prototype.hasOwnProperty.call(a,h)&&e.push(this.body.nodes[h].id)}return e}},{key:"findNode",value:function(a){for(var e=[],h=0,u;void 0!==this.clusteredNodes[a]&&
100>h;){u=this.body.nodes[a];if(void 0===u)return[];e.push(u.id);a=this.clusteredNodes[a].clusterId;h++}u=this.body.nodes[a];if(void 0===u)return[];e.push(u.id);e.reverse();return e}},{key:"updateClusteredNode",value:function(a,e){if(void 0===a)throw Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[a])throw Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");
this.body.nodes[a].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(a,e){if(void 0===a)throw Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[a])throw Error("The startEdgeId supplied to updateEdge does not exist.");a=this.getClusteredEdges(a);for(var h=0;h<a.length;h++)this.body.edges[a[h]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",
value:function(a){for(var e=[],h=0;void 0!==a&&void 0!==this.body.edges[a]&&100>h;)e.push(this.body.edges[a].id),a=this.body.edges[a].edgeReplacedById,h++;e.reverse();return e}},{key:"getBaseEdge",value:function(a){return this.getBaseEdges(a)[0]}},{key:"getBaseEdges",value:function(a){a=[a];for(var e=[],h=[],u=0;0<a.length&&100>u;){var C=a.pop();if(void 0!==C){var W=this.body.edges[C];if(void 0!==W){u++;W=W.clusteringEdgeReplacingIds;if(void 0===W)h.push(C);else for(var za=0;za<W.length;++za){var eb=
W[za];-1===a.indexOf(W)&&-1===e.indexOf(W)&&a.push(eb)}e.push(C)}}}return h}},{key:"_getConnectedId",value:function(a,e){return a.toId!=e?a.toId:a.fromId}},{key:"_getHubSize",value:function(){for(var a=0,e=0,h=0,u=0,C=0;C<this.body.nodeIndices.length;C++){var W=this.body.nodes[this.body.nodeIndices[C]];W.edges.length>u&&(u=W.edges.length);a+=W.edges.length;e+=Math.pow(W.edges.length,2);h+=1}a/=h;a=Math.floor(a+2*Math.sqrt(e/h-Math.pow(a,2)));a>u&&(a=u);return a}},{key:"_createClusteredEdge",value:function(a,
e,h,u,C){var W=gd.cloneOptions(h,"edge");(0,La.deepExtend)(W,u);W.from=a;W.to=e;W.id="clusterEdge:"+(0,vb.v4)();void 0!==C&&(0,La.deepExtend)(W,C);a=this.body.functions.createEdge(W);a.clusteringEdgeReplacingIds=[h.id];a.connect();return this.body.edges[a.id]=a}},{key:"_clusterEdges",value:function(a,e,h,u){if(e instanceof J){var C={};C[e.id]=e;e=C}a instanceof dc&&(C={},C[a.id]=a,a=C);if(void 0===h||null===h)throw Error("_clusterEdges: parameter clusterNode required");void 0===u&&(u=h.clusterEdgeProperties);
this._createClusterEdges(a,e,h,u);for(var W in e)Object.prototype.hasOwnProperty.call(e,W)&&void 0!==this.body.edges[W]&&(u=this.body.edges[W],this._backupEdgeOptions(u),u.setOptions({physics:!1}));for(var za in a)Object.prototype.hasOwnProperty.call(a,za)&&(this.clusteredNodes[za]={clusterId:h.id,node:this.body.nodes[za]},this.body.nodes[za].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(a){if(void 0!==a&&(a=this.clusteredNodes[a],void 0!==a&&(a=a.clusterId,void 0!==a)))return this.body.nodes[a]}},
{key:"_filter",value:function(a,e){var h=[];(0,La.forEach)(a,function(u){e(u)&&h.push(u)});return h}},{key:"_updateState",value:function(){var a=this,e,h=[],u={},C=function(eb){(0,La.forEach)(a.body.nodes,function(Eb){!0===Eb.isCluster&&eb(Eb)})};for(e in this.clusteredNodes)Object.prototype.hasOwnProperty.call(this.clusteredNodes,e)&&void 0===this.body.nodes[e]&&h.push(e);C(function(eb){for(var Eb=0;Eb<h.length;Eb++)delete eb.containedNodes[h[Eb]]});for(e=0;e<h.length;e++)delete this.clusteredNodes[h[e]];
(0,La.forEach)(this.clusteredEdges,function(eb){var Eb=a.body.edges[eb];void 0!==Eb&&Eb.endPointsValid()||(u[eb]=eb)});C(function(eb){(0,La.forEach)(eb.containedEdges,function(Eb,$b){Eb.endPointsValid()||u[$b]||(u[$b]=$b)})});(0,La.forEach)(this.body.edges,function(eb,Eb){var $b=!0,jc=eb.clusteringEdgeReplacingIds;if(void 0!==jc){var uc=0;(0,La.forEach)(jc,function(zc){zc=a.body.edges[zc];void 0!==zc&&zc.endPointsValid()&&(uc+=1)});$b=0<uc}eb.endPointsValid()&&$b||(u[Eb]=Eb)});C(function(eb){(0,La.forEach)(u,
function(Eb){delete eb.containedEdges[Eb];(0,La.forEach)(eb.edges,function($b,jc){$b.id===Eb?eb.edges[jc]=null:$b.clusteringEdgeReplacingIds=a._filter($b.clusteringEdgeReplacingIds,function(uc){return!u[uc]})});eb.edges=a._filter(eb.edges,function($b){return null!==$b})})});(0,La.forEach)(u,function(eb){delete a.clusteredEdges[eb]});(0,La.forEach)(u,function(eb){delete a.body.edges[eb]});e=Object.keys(this.body.edges);(0,La.forEach)(e,function(eb){var Eb=a.body.edges[eb],$b=a._isClusteredNode(Eb.fromId)||
a._isClusteredNode(Eb.toId);$b!==a._isClusteredEdge(Eb.id)&&($b?(eb=a._getClusterNodeForNode(Eb.fromId),void 0!==eb&&a._clusterEdges(a.body.nodes[Eb.fromId],Eb,eb),eb=a._getClusterNodeForNode(Eb.toId),void 0!==eb&&a._clusterEdges(a.body.nodes[Eb.toId],Eb,eb)):(delete a._clusterEdges[eb],a._restoreEdge(Eb)))});var W=!1,za=!0;for(e=function(){var eb=[];C(function($b){var jc=Object.keys($b.containedNodes).length,uc=!0===$b.options.allowSingleNodeCluster;(uc&&1>jc||!uc&&2>jc)&&eb.push($b.id)});for(var Eb=
0;Eb<eb.length;++Eb)a.openCluster(eb[Eb],{},!1);za=0<eb.length;W=W||za};za;)e();W&&this._updateState()}},{key:"_isClusteredNode",value:function(a){return void 0!==this.clusteredNodes[a]}},{key:"_isClusteredEdge",value:function(a){return void 0!==this.clusteredEdges[a]}}]);return N}(),le=function(){function N(a,e){P(this,N);ib();this.body=a;this.canvas=e;this.redrawRequested=!1;this.renderTimer=void 0;this.requiresTimeout=!0;this.renderingActive=!1;this.renderRequests=0;this.allowRedraw=!0;this.zooming=
this.dragging=!1;this.options={};this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1};Object.assign(this.options,this.defaultOptions);this._determineBrowserMethod();this.bindEventListeners()}va(N,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.on("dragStart",function(){a.dragging=!0});this.body.emitter.on("dragEnd",function(){a.dragging=!1});this.body.emitter.on("zoom",function(){a.zooming=!0;window.clearTimeout(a.zoomTimeoutId);a.zoomTimeoutId=window.setTimeout(function(){a.zooming=
!1;a._requestRedraw.bind(a)()},250)});this.body.emitter.on("_resizeNodes",function(){a._resizeNodes()});this.body.emitter.on("_redraw",function(){!1===a.renderingActive&&a._redraw()});this.body.emitter.on("_blockRedraw",function(){a.allowRedraw=!1});this.body.emitter.on("_allowRedraw",function(){a.allowRedraw=!0;a.redrawRequested=!1});this.body.emitter.on("_requestRedraw",this._requestRedraw.bind(this));this.body.emitter.on("_startRendering",function(){a.renderRequests+=1;a.renderingActive=!0;a._startRendering()});
this.body.emitter.on("_stopRendering",function(){--a.renderRequests;a.renderingActive=0<a.renderRequests;a.renderTimer=void 0});this.body.emitter.on("destroy",function(){a.renderRequests=0;a.allowRedraw=!1;a.renderingActive=!1;!0===a.requiresTimeout?clearTimeout(a.renderTimer):window.cancelAnimationFrame(a.renderTimer);a.body.emitter.off()})}},{key:"setOptions",value:function(a){void 0!==a&&(0,La.selectiveDeepExtend)(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,a)}},{key:"_requestNextFrame",
value:function(a,e){if("undefined"!==typeof window){var h,u=window;!0===this.requiresTimeout?h=u.setTimeout(a,e):u.requestAnimationFrame&&(h=u.requestAnimationFrame(a));return h}}},{key:"_startRendering",value:function(){!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(this._renderStep.bind(this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),
this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize");this._redraw()}},{key:"_requestRedraw",value:function(){var a=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame(function(){a._redraw(!1)},0))}},{key:"_redraw",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw");
this.redrawRequested=!1;0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize();this.canvas.setTransform();var e=this.canvas.getContext(),h=this.canvas.frame.canvas.clientWidth,u=this.canvas.frame.canvas.clientHeight;e.clearRect(0,0,h,u);0!==this.canvas.frame.clientWidth&&(e.save(),e.translate(this.body.view.translation.x,this.body.view.translation.y),e.scale(this.body.view.scale,this.body.view.scale),e.beginPath(),this.body.emitter.emit("beforeDrawing",e),e.closePath(),
!1===a&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(e),(!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag)&&this._drawNodes(e,a),!1===a&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawArrows(e),!1===a&&this._drawSelectionBox(e),e.beginPath(),
this.body.emitter.emit("afterDrawing",e),e.closePath(),e.restore(),!0===a&&e.clearRect(0,0,h,u))}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var a=this.canvas.getContext();a.save();a.translate(this.body.view.translation.x,this.body.view.translation.y);a.scale(this.body.view.scale,this.body.view.scale);var e=this.body.nodes,h;for(h in e)if(Object.prototype.hasOwnProperty.call(e,h)){var u=e[h];u.resize(a);u.updateBoundingBox(a,u.selected)}a.restore()}},{key:"_drawNodes",value:function(a){var e=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1,h=this.body.nodes,u=this.body.nodeIndices,C=[],W=[];var za=this.canvas.DOMtoCanvas({x:-20,y:-20});var eb=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20});eb={top:za.y,left:za.x,bottom:eb.y,right:eb.x};for(var Eb=0;Eb<u.length;Eb++)za=h[u[Eb]],za.hover?W.push(u[Eb]):za.isSelected()?C.push(u[Eb]):!0===e?za.draw(a):!0===za.isBoundingBoxOverlappingWith(eb)?za.draw(a):za.updateBoundingBox(a,
za.selected);u=C.length;eb=W.length;for(e=0;e<u;e++)za=h[C[e]],za.draw(a);for(e=0;e<eb;e++)za=h[W[e]],za.draw(a)}},{key:"_drawEdges",value:function(a){for(var e=this.body.edges,h=this.body.edgeIndices,u=0;u<h.length;u++){var C=e[h[u]];!0===C.connected&&C.draw(a)}}},{key:"_drawArrows",value:function(a){for(var e=this.body.edges,h=this.body.edgeIndices,u=0;u<h.length;u++){var C=e[h[u]];!0===C.connected&&C.drawArrows(a)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!==typeof window){var a=
navigator.userAgent.toLowerCase();this.requiresTimeout=!1;-1!=a.indexOf("msie 9.0")?this.requiresTimeout=!0:-1!=a.indexOf("safari")&&-1>=a.indexOf("chrome")&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(a){if(this.body.selectionBox.show){a.beginPath();var e=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,h=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;a.rect(this.body.selectionBox.position.start.x,
this.body.selectionBox.position.start.y,e,h);a.fillStyle="rgba(151, 194, 252, 0.2)";a.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,h);a.strokeStyle="rgba(151, 194, 252, 1)";a.stroke()}else a.closePath()}}]);return N}(),me=function(){function N(a){P(this,N);this.body=a;this.pixelRatio=1;this.resizeTimer=void 0;this.resizeFunction=this._onResize.bind(this);this.cameraState={};this.initialized=!1;this.canvasViewCenter={};this.options={};this.defaultOptions=
{autoResize:!0,height:"100%",width:"100%"};Object.assign(this.options,this.defaultOptions);this.bindEventListeners()}va(N,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.once("resize",function(e){0!==e.width&&(a.body.view.translation.x=.5*e.width);0!==e.height&&(a.body.view.translation.y=.5*e.height)});this.body.emitter.on("setSize",this.setSize.bind(this));this.body.emitter.on("destroy",function(){a.hammerFrame.destroy();a.hammer.destroy();a._cleanUp()})}},{key:"setOptions",
value:function(a){var e=this;void 0!==a&&(0,La.selectiveDeepExtend)(["width","height","autoResize"],this.options,a);!0===this.options.autoResize&&(this._cleanUp(),this.resizeTimer=setInterval(function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")},1E3),this.resizeFunction=this._onResize.bind(this),(0,La.addEventListener)(window,"resize",this.resizeFunction))}},{key:"_cleanUp",value:function(){void 0!==this.resizeTimer&&clearInterval(this.resizeTimer);(0,La.removeEventListener)(window,
"resize",this.resizeFunction);this.resizeFunction=void 0}},{key:"_onResize",value:function(){this.setSize();this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/a,this.cameraState.previousHeight=this.frame.canvas.height/a,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/
a,y:.5*this.frame.canvas.height/a}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&0<this.cameraState.previousWidth&&0<this.cameraState.previousHeight){var a=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,h=this.cameraState.scale;1!=a&&1!=e?h=.5*this.cameraState.scale*(a+e):1!=
a?h=this.cameraState.scale*a:1!=e&&(h=this.cameraState.scale*e);this.body.view.scale=h;a=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight});e=a.y-this.cameraState.position.y;this.body.view.translation.x+=(a.x-this.cameraState.position.x)*this.body.view.scale;this.body.view.translation.y+=e*this.body.view.scale}}},{key:"_prepareValue",value:function(a){if("number"===typeof a)return a+"px";if("string"===typeof a){if(-1!==a.indexOf("%")||-1!==a.indexOf("px"))return a;
if(-1===a.indexOf("%"))return a+"px"}throw Error("Could not use the value supplied for width or height:"+a);}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);this.frame=document.createElement("div");this.frame.className="vis-network";this.frame.style.position="relative";this.frame.style.overflow="hidden";this.frame.tabIndex=900;this.frame.canvas=document.createElement("canvas");this.frame.canvas.style.position=
"relative";this.frame.appendChild(this.frame.canvas);if(this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var a=document.createElement("DIV");a.style.color="red";a.style.fontWeight="bold";a.style.padding="10px";a.innerHTML="Error: your browser does not support HTML canvas";this.frame.canvas.appendChild(a)}this.body.container.appendChild(this.frame);this.body.view.scale=1;this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight};this._bindHammer()}},
{key:"_bindHammer",value:function(){var a=this;void 0!==this.hammer&&this.hammer.destroy();this.drag={};this.pinch={};this.hammer=new hb(this.frame.canvas);this.hammer.get("pinch").set({enable:!0});this.hammer.get("pan").set({threshold:5,direction:hb.DIRECTION_ALL});Ib(this.hammer,function(e){a.body.eventListeners.onTouch(e)});this.hammer.on("tap",function(e){a.body.eventListeners.onTap(e)});this.hammer.on("doubletap",function(e){a.body.eventListeners.onDoubleTap(e)});this.hammer.on("press",function(e){a.body.eventListeners.onHold(e)});
this.hammer.on("panstart",function(e){a.body.eventListeners.onDragStart(e)});this.hammer.on("panmove",function(e){a.body.eventListeners.onDrag(e)});this.hammer.on("panend",function(e){a.body.eventListeners.onDragEnd(e)});this.hammer.on("pinch",function(e){a.body.eventListeners.onPinch(e)});this.frame.canvas.addEventListener("wheel",function(e){a.body.eventListeners.onMouseWheel(e)});this.frame.canvas.addEventListener("mousemove",function(e){a.body.eventListeners.onMouseMove(e)});this.frame.canvas.addEventListener("contextmenu",
function(e){a.body.eventListeners.onContext(e)});this.hammerFrame=new hb(this.frame);Oa(this.hammerFrame,function(e){a.body.eventListeners.onRelease(e)})}},{key:"setSize",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.width,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.height;a=this._prepareValue(a);e=this._prepareValue(e);var h=!1,u=this.frame.canvas.width,C=this.frame.canvas.height,W=this.pixelRatio;this._setPixelRatio();a!=this.options.width||
e!=this.options.height||this.frame.style.width!=a||this.frame.style.height!=e?(this._getCameraState(W),this.frame.style.width=a,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=a,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},
h=!0):(a=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),e=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.frame.canvas.width===a&&this.frame.canvas.height===e||this._getCameraState(W),this.frame.canvas.width!==a&&(this.frame.canvas.width=a,h=!0),this.frame.canvas.height!==e&&(this.frame.canvas.height=e,h=!0));!0===h&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(u/
this.pixelRatio),oldHeight:Math.round(C/this.pixelRatio)}),this._setCameraState());this.initialized=!0;return h}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var a=this.getContext();if(void 0===a)throw Error("Could not get canvax context");var e=1;"undefined"!==typeof window&&(e=window.devicePixelRatio||1);return e/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||
a.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var a=this.getContext();if(void 0===a)throw Error("Could not get canvax context");a.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(a){return(a-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(a){return a*this.body.view.scale+this.body.view.translation.x}},
{key:"_YconvertDOMtoCanvas",value:function(a){return(a-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(a){return a*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(a){return{x:this._XconvertCanvasToDOM(a.x),y:this._YconvertCanvasToDOM(a.y)}}},{key:"DOMtoCanvas",value:function(a){return{x:this._XconvertDOMtoCanvas(a.x),y:this._YconvertDOMtoCanvas(a.y)}}}]);return N}(),Sd=function(){function N(a,e){var h=this;P(this,
N);this.body=a;this.canvas=e;this.animationSpeed=1/this.renderRefreshRate;this.animationEasingFunction="easeInOutQuint";this.targetTranslation=this.sourceTranslation=this.targetScale=this.sourceScale=this.easingTime=0;this.lockedOnNodeOffset=this.lockedOnNodeId=void 0;this.touchTime=0;this.viewFunction=void 0;this.body.emitter.on("fit",this.fit.bind(this));this.body.emitter.on("animationFinished",function(){h.body.emitter.emit("_stopRendering")});this.body.emitter.on("unlockNode",this.releaseNode.bind(this))}
va(N,[{key:"setOptions",value:function(){this.options=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}}},{key:"fit",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{nodes:[]},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;a=Object.assign({},a);if(void 0===a.nodes||0===a.nodes.length)a.nodes=this.body.nodeIndices;var h=this.canvas.frame.canvas.clientWidth;var u=this.canvas.frame.canvas.clientHeight;if(0===h||0===u){u=1;var C=gd.getRange(this.body.nodes,
a.nodes)}else if(!0===e){e=0;for(C in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,C)&&!0===this.body.nodes[C].predefinedPosition&&(e+=1);if(e>.5*this.body.nodeIndices.length){this.fit(a,!1);return}C=gd.getRange(this.body.nodes,a.nodes);u=(12.662/(this.body.nodeIndices.length+7.4147)+.0964822)*Math.min(h/600,u/600)}else this.body.emitter.emit("_resizeNodes"),C=gd.getRange(this.body.nodes,a.nodes),h/=1.1*Math.abs(C.maxX-C.minX),u/=1.1*Math.abs(C.maxY-C.minY),u=h<=u?h:u;1<u?
u=1:0===u&&(u=1);a={position:gd.findCenter(C),scale:u,animation:a.animation};this.moveTo(a)}},{key:"focus",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};void 0!==this.body.nodes[a]?(e.position={x:this.body.nodes[a].x,y:this.body.nodes[a].y},e.lockedOnNode=a,this.moveTo(e)):console.log("Node: "+a+" cannot be found.")}},{key:"moveTo",value:function(a){if(void 0!==a){if(null!=a.offset){if(null!=a.offset.x){if(a.offset.x=+a.offset.x,!Number.isFinite(a.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.');
}else a.offset.x=0;if(null!=a.offset.y){if(a.offset.y=+a.offset.y,!Number.isFinite(a.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.');}else a.offset.x=0}else a.offset={x:0,y:0};if(null!=a.position){if(null!=a.position.x){if(a.position.x=+a.position.x,!Number.isFinite(a.position.x))throw new TypeError('The option "position.x" has to be a finite number.');}else a.position.x=0;if(null!=a.position.y){if(a.position.y=+a.position.y,!Number.isFinite(a.position.y))throw new TypeError('The option "position.y" has to be a finite number.');
}else a.position.x=0}else a.position=this.getViewPosition();if(null!=a.scale){if(a.scale=+a.scale,!(0<a.scale))throw new TypeError('The option "scale" has to be a number greater than zero.');}else a.scale=this.body.view.scale;void 0===a.animation&&(a.animation={duration:0});!1===a.animation&&(a.animation={duration:0});!0===a.animation&&(a.animation={});void 0===a.animation.duration&&(a.animation.duration=1E3);void 0===a.animation.easingFunction&&(a.animation.easingFunction="easeInOutQuad");this.animateView(a)}}},
{key:"animateView",value:function(a){if(void 0!==a){this.animationEasingFunction=a.animation.easingFunction;this.releaseNode();!0===a.locked&&(this.lockedOnNodeId=a.lockedOnNode,this.lockedOnNodeOffset=a.offset);0!=this.easingTime&&this._transitionRedraw(!0);this.sourceScale=this.body.view.scale;this.sourceTranslation=this.body.view.translation;this.targetScale=a.scale;this.body.view.scale=this.targetScale;var e=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight});
this.targetTranslation={x:this.sourceTranslation.x+(e.x-a.position.x)*this.targetScale+a.offset.x,y:this.sourceTranslation.y+(e.y-a.position.y)*this.targetScale+a.offset.y};0===a.animation.duration?void 0!=this.lockedOnNodeId?(this.viewFunction=this._lockedRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(.06*a.animation.duration)||
1/60,this.animationEasingFunction=a.animation.easingFunction,this.viewFunction=this._transitionRedraw.bind(this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var a=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,h=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),u=this.body.view.translation;this.body.view.translation=
{x:u.x+(h.x-a)*this.body.view.scale+this.lockedOnNodeOffset.x,y:u.y+(h.y-e)*this.body.view.scale+this.lockedOnNodeOffset.y}}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeOffset=this.lockedOnNodeId=void 0)}},{key:"_transitionRedraw",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;this.easingTime+=this.animationSpeed;this.easingTime=!0===a?1:this.easingTime;
a=La.easingFunctions[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*a;this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*a,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*a};1<=this.easingTime&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,void 0!=this.lockedOnNodeId&&(this.viewFunction=this._lockedRedraw.bind(this),
this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]);return N}(),yd=function(){function N(a,e){var h=this;P(this,N);this.body=a;this.canvas=e;this.iconsCreated=!1;this.navigationHammers=[];this.boundFunctions={};this.touchTime=
0;this.activated=!1;this.body.emitter.on("activate",function(){h.activated=!0;h.configureKeyboardBindings()});this.body.emitter.on("deactivate",function(){h.activated=!1;h.configureKeyboardBindings()});this.body.emitter.on("destroy",function(){void 0!==h.keycharm&&h.keycharm.destroy()});this.options={}}va(N,[{key:"setOptions",value:function(a){void 0!==a&&(this.options=a,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():
!0===this.iconsCreated&&this.cleanNavigation();this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var a=0;a<this.navigationHammers.length;a++)this.navigationHammers[a].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper);this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var a=
this;this.cleanNavigation();this.navigationDOM={};var e="up down left right zoomIn zoomOut zoomExtends".split(" "),h="_moveUp _moveDown _moveLeft _moveRight _zoomIn _zoomOut _fit".split(" ");this.navigationDOM.wrapper=document.createElement("div");this.navigationDOM.wrapper.className="vis-navigation";this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var u=0;u<e.length;u++){this.navigationDOM[e[u]]=document.createElement("div");this.navigationDOM[e[u]].className="vis-button vis-"+e[u];
this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[u]]);var C=new hb(this.navigationDOM[e[u]]);"_fit"===h[u]?Ib(C,this._fit.bind(this)):Ib(C,this.bindToRedraw.bind(this,h[u]));this.navigationHammers.push(C)}e=new hb(this.canvas.frame);Oa(e,function(){a._stopMovement()});this.navigationHammers.push(e);this.iconsCreated=!0}},{key:"bindToRedraw",value:function(a){void 0===this.boundFunctions[a]&&(this.boundFunctions[a]=this[a].bind(this),this.body.emitter.on("initRedraw",this.boundFunctions[a]),
this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(a){void 0!==this.boundFunctions[a]&&(this.body.emitter.off("initRedraw",this.boundFunctions[a]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[a])}},{key:"_fit",value:function(){700<(new Date).valueOf()-this.touchTime&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var a in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,
a)&&(this.body.emitter.off("initRedraw",this.boundFunctions[a]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},
{key:"_zoomIn",value:function(){var a=this.body.view.scale*(1+this.options.keyboard.speed.zoom),e=this.body.view.translation,h=a/this.body.view.scale,u=(1-h)*this.canvas.canvasViewCenter.x+e.x*h;e=(1-h)*this.canvas.canvasViewCenter.y+e.y*h;this.body.view.scale=a;this.body.view.translation={x:u,y:e};this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var a=this.body.view.scale/(1+this.options.keyboard.speed.zoom),e=this.body.view.translation,
h=a/this.body.view.scale,u=(1-h)*this.canvas.canvasViewCenter.x+e.x*h;e=(1-h)*this.canvas.canvasViewCenter.y+e.y*h;this.body.view.scale=a;this.body.view.translation={x:u,y:e};this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var a=this;void 0!==this.keycharm&&this.keycharm.destroy();!0===this.options.keyboard.enabled&&(this.keycharm=!0===this.options.keyboard.bindToWindow?(0,Na["default"])({container:window,preventDefault:!0}):
(0,Na["default"])({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(this.keycharm.bind("up",function(){a.bindToRedraw("_moveUp")},"keydown"),this.keycharm.bind("down",function(){a.bindToRedraw("_moveDown")},"keydown"),this.keycharm.bind("left",function(){a.bindToRedraw("_moveLeft")},"keydown"),this.keycharm.bind("right",function(){a.bindToRedraw("_moveRight")},"keydown"),this.keycharm.bind("\x3d",function(){a.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num+",
function(){a.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("num-",function(){a.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("-",function(){a.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("[",function(){a.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("]",function(){a.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pageup",function(){a.bindToRedraw("_zoomIn")},"keydown"),this.keycharm.bind("pagedown",function(){a.bindToRedraw("_zoomOut")},"keydown"),this.keycharm.bind("up",
function(){a.unbindFromRedraw("_moveUp")},"keyup"),this.keycharm.bind("down",function(){a.unbindFromRedraw("_moveDown")},"keyup"),this.keycharm.bind("left",function(){a.unbindFromRedraw("_moveLeft")},"keyup"),this.keycharm.bind("right",function(){a.unbindFromRedraw("_moveRight")},"keyup"),this.keycharm.bind("\x3d",function(){a.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num+",function(){a.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("num-",function(){a.unbindFromRedraw("_zoomOut")},
"keyup"),this.keycharm.bind("-",function(){a.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("[",function(){a.unbindFromRedraw("_zoomOut")},"keyup"),this.keycharm.bind("]",function(){a.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pageup",function(){a.unbindFromRedraw("_zoomIn")},"keyup"),this.keycharm.bind("pagedown",function(){a.unbindFromRedraw("_zoomOut")},"keyup")))}}]);return N}(),Wc=function(){function N(a,e){P(this,N);this.container=a;this.overflowMethod=e||"cap";this.y=
this.x=0;this.padding=5;this.hidden=!1;this.frame=document.createElement("div");this.frame.className="vis-tooltip";this.container.appendChild(this.frame)}va(N,[{key:"setPosition",value:function(a,e){this.x=parseInt(a);this.y=parseInt(e)}},{key:"setText",value:function(a){a instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(a)):this.frame.innerHTML=a}},{key:"show",value:function(a){void 0===a&&(a=!0);if(!0===a){a=this.frame.clientHeight;var e=this.frame.clientWidth,h=this.frame.parentNode.clientHeight,
u=this.frame.parentNode.clientWidth;if("flip"==this.overflowMethod){h=!1;var C=!0;this.y-a<this.padding&&(C=!1);this.x+e>u-this.padding&&(h=!0);h=h?this.x-e:this.x;C=C?this.y-a:this.y}else C=this.y-a,C+a+this.padding>h&&(C=h-a-this.padding),C<this.padding&&(C=this.padding),h=this.x,h+e+this.padding>u&&(h=u-e-this.padding),h<this.padding&&(h=this.padding);this.frame.style.left=h+"px";this.frame.style.top=C+"px";this.frame.style.visibility="visible";this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=
!0;this.frame.style.left="0";this.frame.style.top="0";this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]);return N}(),Md=function(){function N(a,e,h){P(this,N);this.body=a;this.canvas=e;this.selectionHandler=h;this.navigationHandler=new yd(a,e);this.body.eventListeners.onTap=this.onTap.bind(this);this.body.eventListeners.onTouch=this.onTouch.bind(this);this.body.eventListeners.onDoubleTap=this.onDoubleTap.bind(this);this.body.eventListeners.onHold=
this.onHold.bind(this);this.body.eventListeners.onDragStart=this.onDragStart.bind(this);this.body.eventListeners.onDrag=this.onDrag.bind(this);this.body.eventListeners.onDragEnd=this.onDragEnd.bind(this);this.body.eventListeners.onMouseWheel=this.onMouseWheel.bind(this);this.body.eventListeners.onPinch=this.onPinch.bind(this);this.body.eventListeners.onMouseMove=this.onMouseMove.bind(this);this.body.eventListeners.onRelease=this.onRelease.bind(this);this.body.eventListeners.onContext=this.onContext.bind(this);
this.touchTime=0;this.drag={};this.pinch={};this.popupTimer=this.popupObj=this.popup=void 0;this.body.functions.getPointer=this.getPointer.bind(this);this.options={};this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1};Object.assign(this.options,this.defaultOptions);this.bindEventListeners()}va(N,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.on("destroy",
function(){clearTimeout(a.popupTimer);delete a.body.functions.getPointer})}},{key:"setOptions",value:function(a){void 0!==a&&((0,La.selectiveNotDeepExtend)("hideEdgesOnDrag hideEdgesOnZoom hideNodesOnDrag keyboard multiselect selectable selectConnectedEdges".split(" "),this.options,a),(0,La.mergeOptions)(this.options,a,"keyboard"),a.tooltip&&(Object.assign(this.options.tooltip,a.tooltip),a.tooltip.color&&(this.options.tooltip.color=(0,La.parseColor)(a.tooltip.color))));this.navigationHandler.setOptions(this.options)}},
{key:"getPointer",value:function(a){return{x:a.x-(0,La.getAbsoluteLeft)(this.canvas.frame.canvas),y:a.y-(0,La.getAbsoluteTop)(this.canvas.frame.canvas)}}},{key:"onTouch",value:function(a){50<(new Date).valueOf()-this.touchTime&&(this.drag.pointer=this.getPointer(a.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(a){var e=this.getPointer(a.center);this.checkSelectionChanges(e,a,this.selectionHandler.options.multiselect&&
(a.changedPointers[0].ctrlKey||a.changedPointers[0].metaKey));this.selectionHandler._generateClickEvent("click",a,e)}},{key:"onDoubleTap",value:function(a){var e=this.getPointer(a.center);this.selectionHandler._generateClickEvent("doubleClick",a,e)}},{key:"onHold",value:function(a){var e=this.getPointer(a.center);this.checkSelectionChanges(e,a,this.selectionHandler.options.multiselect);this.selectionHandler._generateClickEvent("click",a,e);this.selectionHandler._generateClickEvent("hold",a,e)}},{key:"onRelease",
value:function(a){if(10<(new Date).valueOf()-this.touchTime){var e=this.getPointer(a.center);this.selectionHandler._generateClickEvent("release",a,e);this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(a){var e=this.getPointer({x:a.clientX,y:a.clientY});this.selectionHandler._generateClickEvent("oncontext",a,e)}},{key:"checkSelectionChanges",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,u=this.selectionHandler.getSelection();h=!0===h?this.selectionHandler.selectAdditionalOnPoint(a):
this.selectionHandler.selectOnPoint(a);var C=this.selectionHandler.getSelection(),W=this._determineDifference(u,C);C=this._determineDifference(C,u);0<W.edges.length&&(this.selectionHandler._generateClickEvent("deselectEdge",e,a,u),h=!0);0<W.nodes.length&&(this.selectionHandler._generateClickEvent("deselectNode",e,a,u),h=!0);0<C.nodes.length&&(this.selectionHandler._generateClickEvent("selectNode",e,a),h=!0);0<C.edges.length&&(this.selectionHandler._generateClickEvent("selectEdge",e,a),h=!0);!0===
h&&this.selectionHandler._generateClickEvent("select",e,a)}},{key:"_determineDifference",value:function(a,e){var h=function(u,C){for(var W=[],za=0;za<u.length;za++){var eb=u[za];-1===C.indexOf(eb)&&W.push(eb)}return W};return{nodes:h(a.nodes,e.nodes),edges:h(a.edges,e.edges)}}},{key:"onDragStart",value:function(a){if(!this.drag.dragging){if(void 0===this.drag.pointer)this.onTouch(a);var e=this.selectionHandler.getNodeAt(this.drag.pointer);this.drag.dragging=!0;this.drag.selection=[];this.drag.translation=
Object.assign({},this.body.view.translation);this.drag.nodeId=void 0;if(a.srcEvent.shiftKey){this.body.selectionBox.show=!0;var h=this.getPointer(a.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(h.x),y:this.canvas._YconvertDOMtoCanvas(h.y)};this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(h.x),y:this.canvas._YconvertDOMtoCanvas(h.y)}}if(void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id;!1===e.isSelected()&&(this.selectionHandler.unselectAll(),
this.selectionHandler.selectObject(e));this.selectionHandler._generateClickEvent("dragStart",a,this.drag.pointer);a=this.selectionHandler.selectionObj.nodes;for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(e=a[u],h={id:e.id,node:e,x:e.x,y:e.y,xFixed:e.options.fixed.x,yFixed:e.options.fixed.y},e.options.fixed.x=!0,e.options.fixed.y=!0,this.drag.selection.push(h))}else this.selectionHandler._generateClickEvent("dragStart",a,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(a){var e=
this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var h=this.getPointer(a.center),u=this.drag.selection;if(u&&u.length&&!0===this.options.dragNodes){this.selectionHandler._generateClickEvent("dragging",a,h);var C=h.x-this.drag.pointer.x,W=h.y-this.drag.pointer.y;u.forEach(function(za){var eb=za.node;!1===za.xFixed&&(eb.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(za.x)+C));!1===za.yFixed&&(eb.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(za.y)+W))});
this.body.emitter.emit("startSimulation")}else{if(a.srcEvent.shiftKey){this.selectionHandler._generateClickEvent("dragging",a,h,void 0,!0);if(void 0===this.drag.pointer){this.onDragStart(a);return}this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(h.x),y:this.canvas._YconvertDOMtoCanvas(h.y)};this.body.emitter.emit("_requestRedraw")}if(!0===this.options.dragView&&!a.srcEvent.shiftKey)if(this.selectionHandler._generateClickEvent("dragging",a,h,void 0,!0),void 0===this.drag.pointer)this.onDragStart(a);
else this.body.view.translation={x:this.drag.translation.x+(h.x-this.drag.pointer.x),y:this.drag.translation.y+(h.y-this.drag.pointer.y)},this.body.emitter.emit("_requestRedraw")}}}},{key:"onDragEnd",value:function(a){var e=this;this.drag.dragging=!1;if(this.body.selectionBox.show){this.body.selectionBox.show=!1;var h=this.body.selectionBox.position,u=Math.min(h.start.x,h.end.x),C=Math.min(h.start.y,h.end.y),W=Math.max(h.start.x,h.end.x),za=Math.max(h.start.y,h.end.y);this.body.nodeIndices.filter(function(eb){eb=
e.body.nodes[eb];return eb.x>=u&&eb.x<=W&&eb.y>=C&&eb.y<=za}).forEach(function(eb){return e.selectionHandler.selectObject(e.body.nodes[eb])});this.selectionHandler._generateClickEvent("dragEnd",a,this.getPointer(a.center),void 0,!0);this.body.emitter.emit("_requestRedraw")}else(h=this.drag.selection)&&h.length?(h.forEach(function(eb){eb.node.options.fixed.x=eb.xFixed;eb.node.options.fixed.y=eb.yFixed}),this.selectionHandler._generateClickEvent("dragEnd",a,this.getPointer(a.center)),this.body.emitter.emit("startSimulation")):
(this.selectionHandler._generateClickEvent("dragEnd",a,this.getPointer(a.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}},{key:"onPinch",value:function(a){var e=this.getPointer(a.center);this.drag.pinched=!0;void 0===this.pinch.scale&&(this.pinch.scale=1);this.zoom(this.pinch.scale*a.scale,e)}},{key:"zoom",value:function(a,e){if(!0===this.options.zoomView){var h=this.body.view.scale;1E-5>a&&(a=1E-5);10<a&&(a=10);var u=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(u=this.canvas.DOMtoCanvas(this.drag.pointer));
var C=this.body.view.translation,W=a/h,za=(1-W)*e.x+C.x*W;C=(1-W)*e.y+C.y*W;this.body.view.scale=a;this.body.view.translation={x:za,y:C};void 0!=u&&(u=this.canvas.canvasToDOM(u),this.drag.pointer.x=u.x,this.drag.pointer.y=u.y);this.body.emitter.emit("_requestRedraw");h<a?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(a){if(!0===this.options.zoomView){if(0!==
a.deltaY){var e=this.body.view.scale;e*=1+.1*(0>a.deltaY?1:-1)*this.options.zoomSpeed;var h=this.getPointer({x:a.clientX,y:a.clientY});this.zoom(e,h)}a.preventDefault()}}},{key:"onMouseMove",value:function(a){var e=this,h=this.getPointer({x:a.clientX,y:a.clientY}),u=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(h),!1===this.popup.hidden&&(u=!0,this.popup.setPosition(h.x+3,h.y-5),this.popup.show()));!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&
this.canvas.frame.focus();!1===u&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=setTimeout(function(){return e._checkShowPopup(h)},this.options.tooltipDelay)));!0===this.options.hover&&this.selectionHandler.hoverObject(a,h)}},{key:"_checkShowPopup",value:function(a){var e=this.canvas._XconvertDOMtoCanvas(a.x),h=this.canvas._YconvertDOMtoCanvas(a.y);e={left:e,top:h,right:e,bottom:h};h=void 0===this.popupObj?void 0:this.popupObj.id;
var u=!1,C="node";if(void 0===this.popupObj){for(var W=this.body.nodeIndices,za=this.body.nodes,eb,Eb=[],$b=0;$b<W.length;$b++)eb=za[W[$b]],!0===eb.isOverlappingWith(e)&&(u=!0,void 0!==eb.getTitle()&&Eb.push(W[$b]));0<Eb.length&&(this.popupObj=za[Eb[Eb.length-1]],u=!0)}if(void 0===this.popupObj&&!1===u){u=this.body.edgeIndices;W=this.body.edges;eb=[];for(Eb=0;Eb<u.length;Eb++)za=W[u[Eb]],!0===za.isOverlappingWith(e)&&!0===za.connected&&void 0!==za.getTitle()&&eb.push(u[Eb]);0<eb.length&&(this.popupObj=
W[eb[eb.length-1]],C="edge")}void 0!==this.popupObj?this.popupObj.id!==h&&(void 0===this.popup&&(this.popup=new Wc(this.canvas.frame)),this.popup.popupTargetType=C,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(a.x+3,a.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(a){var e=this.selectionHandler._pointerToPositionObject(a),
h=!1;"node"===this.popup.popupTargetType?void 0!==this.body.nodes[this.popup.popupTargetId]&&(h=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e),!0===h&&(a=this.selectionHandler.getNodeAt(a),h=void 0===a?!1:a.id===this.popup.popupTargetId)):void 0===this.selectionHandler.getNodeAt(a)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(h=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===h&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]);
return N}(),vd=function(){function N(a,e){var h=this;P(this,N);this.body=a;this.canvas=e;this.selectionObj={nodes:[],edges:[]};this.hoverObj={nodes:{},edges:{}};this.options={};this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0};Object.assign(this.options,this.defaultOptions);this.body.emitter.on("_dataChanged",function(){h.updateSelection()})}va(N,[{key:"setOptions",value:function(a){void 0!==a&&(0,La.selectiveDeepExtend)(["multiselect","hoverConnectedEdges",
"selectable","selectConnectedEdges"],this.options,a)}},{key:"selectOnPoint",value:function(a){var e=!1;!0===this.options.selectable&&(a=this.getNodeAt(a)||this.getEdgeAt(a),this.unselectAll(),void 0!==a&&(e=this.selectObject(a)),this.body.emitter.emit("_requestRedraw"));return e}},{key:"selectAdditionalOnPoint",value:function(a){var e=!1;!0===this.options.selectable&&(a=this.getNodeAt(a)||this.getEdgeAt(a),void 0!==a&&(e=!0,!0===a.isSelected()?this.deselectObject(a):this.selectObject(a),this.body.emitter.emit("_requestRedraw")));
return e}},{key:"_initBaseEvent",value:function(a,e){var h={};h.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)};h.event=a;return h}},{key:"_generateClickEvent",value:function(a,e,h,u){var C=4<arguments.length&&void 0!==arguments[4]?arguments[4]:!1,W=this._initBaseEvent(e,h);!0===C?(W.nodes=[],W.edges=[]):(C=this.getSelection(),W.nodes=C.nodes,W.edges=C.edges);void 0!==u&&(W.previousSelection=u);"click"==a&&(W.items=this.getClickedItems(h));void 0!==e.controlEdge&&(W.controlEdge=e.controlEdge);
this.body.emitter.emit(a,W)}},{key:"selectObject",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==a?(a instanceof dc&&!0===e&&this._selectConnectedEdges(a),a.select(),this._addToSelection(a),!0):!1}},{key:"deselectObject",value:function(a){!0===a.isSelected()&&(a.selected=!1,this._removeFromSelection(a))}},{key:"_getAllNodesOverlappingWith",value:function(a){for(var e=[],h=this.body.nodes,u=0;u<this.body.nodeIndices.length;u++){var C=
this.body.nodeIndices[u];h[C].isOverlappingWith(a)&&e.push(C)}return e}},{key:"_pointerToPositionObject",value:function(a){a=this.canvas.DOMtoCanvas(a);return{left:a.x-1,top:a.y+1,right:a.x+1,bottom:a.y-1}}},{key:"getNodeAt",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,h=this._pointerToPositionObject(a);h=this._getAllNodesOverlappingWith(h);if(0<h.length)return!0===e?this.body.nodes[h[h.length-1]]:h[h.length-1]}},{key:"_getEdgesOverlappingWith",value:function(a,
e){for(var h=this.body.edges,u=0;u<this.body.edgeIndices.length;u++){var C=this.body.edgeIndices[u];h[C].isOverlappingWith(a)&&e.push(C)}}},{key:"_getAllEdgesOverlappingWith",value:function(a){var e=[];this._getEdgesOverlappingWith(a,e);return e}},{key:"getEdgeAt",value:function(a){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0,h=this.canvas.DOMtoCanvas(a),u=10,C=null,W=this.body.edges,za=0;za<this.body.edgeIndices.length;za++){var eb=this.body.edgeIndices[za],Eb=W[eb];Eb.connected&&
(Eb=Eb.edgeType.getDistanceToEdge(Eb.from.x,Eb.from.y,Eb.to.x,Eb.to.y,h.x,h.y),Eb<u&&(C=eb,u=Eb))}if(null!==C)return!0===e?this.body.edges[C]:C}},{key:"_addToSelection",value:function(a){a instanceof dc?this.selectionObj.nodes[a.id]=a:this.selectionObj.edges[a.id]=a}},{key:"_addToHover",value:function(a){a instanceof dc?this.hoverObj.nodes[a.id]=a:this.hoverObj.edges[a.id]=a}},{key:"_removeFromSelection",value:function(a){a instanceof dc?(delete this.selectionObj.nodes[a.id],this._unselectConnectedEdges(a)):
delete this.selectionObj.edges[a.id]}},{key:"unselectAll",value:function(){for(var a in this.selectionObj.nodes)Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,a)&&this.selectionObj.nodes[a].unselect();for(var e in this.selectionObj.edges)Object.prototype.hasOwnProperty.call(this.selectionObj.edges,e)&&this.selectionObj.edges[e].unselect();this.selectionObj={nodes:{},edges:{}}}},{key:"_getSelectedNodeCount",value:function(){var a=0,e;for(e in this.selectionObj.nodes)Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,
e)&&(a+=1);return a}},{key:"_getSelectedNode",value:function(){for(var a in this.selectionObj.nodes)if(Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,a))return this.selectionObj.nodes[a]}},{key:"_getSelectedEdge",value:function(){for(var a in this.selectionObj.edges)if(Object.prototype.hasOwnProperty.call(this.selectionObj.edges,a))return this.selectionObj.edges[a]}},{key:"_getSelectedEdgeCount",value:function(){var a=0,e;for(e in this.selectionObj.edges)Object.prototype.hasOwnProperty.call(this.selectionObj.edges,
e)&&(a+=1);return a}},{key:"_getSelectedObjectCount",value:function(){var a=0,e;for(e in this.selectionObj.nodes)Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,e)&&(a+=1);for(var h in this.selectionObj.edges)Object.prototype.hasOwnProperty.call(this.selectionObj.edges,h)&&(a+=1);return a}},{key:"_selectionIsEmpty",value:function(){for(var a in this.selectionObj.nodes)if(Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,a))return!1;for(var e in this.selectionObj.edges)if(Object.prototype.hasOwnProperty.call(this.selectionObj.edges,
e))return!1;return!0}},{key:"_clusterInSelection",value:function(){for(var a in this.selectionObj.nodes)if(Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,a)&&1<this.selectionObj.nodes[a].clusterSize)return!0;return!1}},{key:"_selectConnectedEdges",value:function(a){for(var e=0;e<a.edges.length;e++){var h=a.edges[e];h.select();this._addToSelection(h)}}},{key:"_hoverConnectedEdges",value:function(a){for(var e=0;e<a.edges.length;e++){var h=a.edges[e];h.hover=!0;this._addToHover(h)}}},{key:"_unselectConnectedEdges",
value:function(a){for(var e=0;e<a.edges.length;e++){var h=a.edges[e];h.unselect();this._removeFromSelection(h)}}},{key:"emitBlurEvent",value:function(a,e,h){a=this._initBaseEvent(a,e);!0===h.hover&&(h.hover=!1,h instanceof dc?(a.node=h.id,this.body.emitter.emit("blurNode",a)):(a.edge=h.id,this.body.emitter.emit("blurEdge",a)))}},{key:"emitHoverEvent",value:function(a,e,h){a=this._initBaseEvent(a,e);e=!1;!1===h.hover&&(h.hover=!0,this._addToHover(h),e=!0,h instanceof dc?(a.node=h.id,this.body.emitter.emit("hoverNode",
a)):(a.edge=h.id,this.body.emitter.emit("hoverEdge",a)));return e}},{key:"hoverObject",value:function(a,e){var h=this.getNodeAt(e);void 0===h&&(h=this.getEdgeAt(e));var u=!1;for(za in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,za)&&(void 0===h||h instanceof dc&&h.id!=za||h instanceof J)&&(this.emitBlurEvent(a,e,this.hoverObj.nodes[za]),delete this.hoverObj.nodes[za],u=!0);for(var C in this.hoverObj.edges)if(Object.prototype.hasOwnProperty.call(this.hoverObj.edges,
C))if(!0===u)this.hoverObj.edges[C].hover=!1,delete this.hoverObj.edges[C];else if(void 0===h||h instanceof J&&h.id!=C||h instanceof dc&&!h.hover)this.emitBlurEvent(a,e,this.hoverObj.edges[C]),delete this.hoverObj.edges[C],u=!0;if(void 0!==h){C=Object.keys(this.hoverObj.edges).length;var W=Object.keys(this.hoverObj.nodes).length;var za=h instanceof J&&0===C&&0===W;C=h instanceof dc&&0===C&&0===W;if(u||za||C)u=this.emitHoverEvent(a,e,h);h instanceof dc&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(h)}!0===
u&&this.body.emitter.emit("_requestRedraw")}},{key:"getSelection",value:function(){var a=this.getSelectedNodes(),e=this.getSelectedEdges();return{nodes:a,edges:e}}},{key:"getSelectedNodes",value:function(){var a=[];if(!0===this.options.selectable)for(var e in this.selectionObj.nodes)Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,e)&&a.push(this.selectionObj.nodes[e].id);return a}},{key:"getSelectedEdges",value:function(){var a=[];if(!0===this.options.selectable)for(var e in this.selectionObj.edges)Object.prototype.hasOwnProperty.call(this.selectionObj.edges,
e)&&a.push(this.selectionObj.edges[e].id);return a}},{key:"setSelection",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},h;if(!a||!a.nodes&&!a.edges)throw"Selection must be an object with nodes and/or edges properties";(e.unselectAll||void 0===e.unselectAll)&&this.unselectAll();if(a.nodes)for(h=0;h<a.nodes.length;h++){var u=a.nodes[h];var C=this.body.nodes[u];if(!C)throw new RangeError('Node with id "'+u+'" not found');this.selectObject(C,e.highlightEdges)}if(a.edges)for(h=
0;h<a.edges.length;h++){u=a.edges[h];e=this.body.edges[u];if(!e)throw new RangeError('Edge with id "'+u+'" not found');this.selectObject(e)}this.body.emitter.emit("_requestRedraw")}},{key:"selectNodes",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if(!a||void 0===a.length)throw"Selection must be an array with ids";this.setSelection({nodes:a},{highlightEdges:e})}},{key:"selectEdges",value:function(a){if(!a||void 0===a.length)throw"Selection must be an array with ids";
this.setSelection({edges:a})}},{key:"updateSelection",value:function(){for(var a in this.selectionObj.nodes)Object.prototype.hasOwnProperty.call(this.selectionObj.nodes,a)&&(Object.prototype.hasOwnProperty.call(this.body.nodes,a)||delete this.selectionObj.nodes[a]);for(var e in this.selectionObj.edges)Object.prototype.hasOwnProperty.call(this.selectionObj.edges,e)&&(Object.prototype.hasOwnProperty.call(this.body.edges,e)||delete this.selectionObj.edges[e])}},{key:"getClickedItems",value:function(a){a=
this.canvas.DOMtoCanvas(a);for(var e=[],h=this.body.nodeIndices,u=this.body.nodes,C=h.length-1;0<=C;C--){var W=u[h[C]].getItemsOnPoint(a);e.push.apply(e,W)}h=this.body.edgeIndices;u=this.body.edges;for(C=h.length-1;0<=C;C--)W=u[h[C]].getItemsOnPoint(a),e.push.apply(e,W);return e}}]);return N}(),Fd=function(){function N(){P(this,N)}va(N,[{key:"abstract",value:function(){throw Error("Can't instantiate abstract class!");}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this["abstract"]()}},
{key:"getPosition",value:function(a){this.fake_use(a);return this["abstract"]()}},{key:"setPosition",value:function(a,e){this.fake_use(a,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0);this["abstract"]()}},{key:"getTreeSize",value:function(a){this.fake_use(a);return this["abstract"]()}},{key:"sort",value:function(a){this.fake_use(a);this["abstract"]()}},{key:"fix",value:function(a,e){this.fake_use(a,e);this["abstract"]()}},{key:"shift",value:function(a,e){this.fake_use(a,e);this["abstract"]()}}]);
return N}(),Td=function(N){function a(e){P(this,a);var h=X(this,la(a).call(this));h.layout=e;return h}ua(a,N);va(a,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(e){return e.x}},{key:"setPosition",value:function(e,h){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==u&&this.layout.hierarchical.addToOrdering(e,u);e.x=h}},{key:"getTreeSize",value:function(e){e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:e.min_x,
max:e.max_x}}},{key:"sort",value:function(e){(0,jb.sort)(e,function(h,u){return h.x-u.x})}},{key:"fix",value:function(e,h){e.y=this.layout.options.hierarchical.levelSeparation*h;e.options.fixed.y=!0}},{key:"shift",value:function(e,h){this.layout.body.nodes[e].x+=h}}]);return a}(Fd),pe=function(N){function a(e){P(this,a);var h=X(this,la(a).call(this));h.layout=e;return h}ua(a,N);va(a,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(e){return e.y}},{key:"setPosition",
value:function(e,h){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==u&&this.layout.hierarchical.addToOrdering(e,u);e.y=h}},{key:"getTreeSize",value:function(e){e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,e);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(e){(0,jb.sort)(e,function(h,u){return h.y-u.y})}},{key:"fix",value:function(e,h){e.x=this.layout.options.hierarchical.levelSeparation*h;e.options.fixed.x=!0}},{key:"shift",value:function(e,
h){this.layout.body.nodes[e].y+=h}}]);return a}(Fd),Vd=function(){function N(){P(this,N);this.childrenReference={};this.parentReference={};this.trees={};this.distributionOrdering={};this.levels={};this.distributionIndex={};this.isTree=!1;this.treeIndex=-1}va(N,[{key:"addRelation",value:function(a,e){void 0===this.childrenReference[a]&&(this.childrenReference[a]=[]);this.childrenReference[a].push(e);void 0===this.parentReference[e]&&(this.parentReference[e]=[]);this.parentReference[e].push(a)}},{key:"checkIfTree",
value:function(){for(var a in this.parentReference)if(1<this.parentReference[a].length){this.isTree=!1;return}this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(a,e){void 0!==e&&void 0===this.trees[a.id]&&(this.trees[a.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(a){void 0===this.levels[a]&&(this.levels[a]=0)}},{key:"getMaxLevel",value:function(a){var e=this,h={};return function W(C){if(void 0!==h[C])return h[C];
var za=e.levels[C];if(e.childrenReference[C]){var eb=e.childrenReference[C];if(0<eb.length)for(var Eb=0;Eb<eb.length;Eb++)za=Math.max(za,W(eb[Eb]))}return h[C]=za}(a)}},{key:"levelDownstream",value:function(a,e){void 0===this.levels[e.id]&&(void 0===this.levels[a.id]&&(this.levels[a.id]=0),this.levels[e.id]=this.levels[a.id]+1)}},{key:"setMinLevelToZero",value:function(a){var e=1E9,h;for(h in a)Object.prototype.hasOwnProperty.call(a,h)&&void 0!==this.levels[h]&&(e=Math.min(this.levels[h],e));for(var u in a)Object.prototype.hasOwnProperty.call(a,
u)&&void 0!==this.levels[u]&&(this.levels[u]-=e)}},{key:"getTreeSize",value:function(a,e){var h=1E9,u=-1E9,C=1E9,W=-1E9,za;for(za in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,za)&&this.trees[za]===e){var eb=a[za];h=Math.min(eb.x,h);u=Math.max(eb.x,u);C=Math.min(eb.y,C);W=Math.max(eb.y,W)}return{min_x:h,max_x:u,min_y:C,max_y:W}}},{key:"hasSameParent",value:function(a,e){a=this.parentReference[a.id];e=this.parentReference[e.id];if(void 0===a||void 0===e)return!1;for(var h=0;h<a.length;h++)for(var u=
0;u<e.length;u++)if(a[h]==e[u])return!0;return!1}},{key:"inSameSubNetwork",value:function(a,e){return this.trees[a.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return Object.keys(this.distributionOrdering)}},{key:"addToOrdering",value:function(a,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var h=!1,u=this.distributionOrdering[e],C;for(C in u)if(u[C]===a){h=!0;break}h||(this.distributionOrdering[e].push(a),this.distributionIndex[a.id]=this.distributionOrdering[e].length-
1)}}]);return N}(),qe=function(){function N(a){P(this,N);this.body=a;this._resetRNG(Math.random()+":"+Date.now());this.setPhysics=!1;this.options={};this.optionsBackup={physics:{}};this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}};Object.assign(this.options,this.defaultOptions);this.bindEventListeners()}
va(N,[{key:"bindEventListeners",value:function(){var a=this;this.body.emitter.on("_dataChanged",function(){a.setupHierarchicalLayout()});this.body.emitter.on("_dataLoaded",function(){a.layoutNetwork()});this.body.emitter.on("_resetHierarchicalLayout",function(){a.setupHierarchicalLayout()});this.body.emitter.on("_adjustEdgesForHierarchicalLayout",function(){if(!0===a.options.hierarchical.enabled){var e=a.direction.curveType();a.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}})}},{key:"setOptions",
value:function(a,e){if(void 0!==a){var h=this.options.hierarchical,u=h.enabled;(0,La.selectiveDeepExtend)(["randomSeed","improvedLayout","clusterThreshold"],this.options,a);(0,La.mergeOptions)(this.options,a,"hierarchical");void 0!==a.randomSeed&&this._resetRNG(a.randomSeed);if(!0===h.enabled)return!0===u&&this.body.emitter.emit("refresh",!0),"RL"===h.direction||"DU"===h.direction?0<h.levelSeparation&&(h.levelSeparation*=-1):0>h.levelSeparation&&(h.levelSeparation*=-1),this.setDirectionStrategy(),
this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===u)return this.body.emitter.emit("refresh"),(0,La.deepExtend)(e,this.optionsBackup)}return e}},{key:"_resetRNG",value:function(a){this.initialRandomSeed=a;this._rng=(0,La.Alea)(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(a){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===a.physics||!0===a.physics?(a.physics={enabled:void 0===
e.enabled?!0:e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled?!0:e.enabled,e.solver=e.solver||"barnesHut"):"object"===ka(a.physics)?(e.enabled=void 0===a.physics.enabled?!0:a.physics.enabled,e.solver=a.physics.solver||"barnesHut",a.physics.solver="hierarchicalRepulsion"):!1!==a.physics&&(e.solver="barnesHut",a.physics={solver:"hierarchicalRepulsion"});e=this.direction.curveType();if(void 0===a.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},a.edges={smooth:!1};
else if(void 0===a.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},a.edges.smooth=!1;else if("boolean"===typeof a.edges.smooth)this.optionsBackup.edges={smooth:a.edges.smooth},a.edges.smooth={enabled:a.edges.smooth,type:e};else{var h=a.edges.smooth;void 0!==h.type&&"dynamic"!==h.type&&(e=h.type);this.optionsBackup.edges={smooth:{enabled:void 0===h.enabled?!0:h.enabled,type:void 0===h.type?"dynamic":h.type,roundness:void 0===h.roundness?.5:h.roundness,forceDirection:void 0===
h.forceDirection?!1:h.forceDirection}};a.edges.smooth={enabled:void 0===h.enabled?!0:h.enabled,type:e,roundness:void 0===h.roundness?.5:h.roundness,forceDirection:void 0===h.forceDirection?!1:h.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",e)}return a}},{key:"positionInitially",value:function(a){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var e=a.length+50,h=0;h<a.length;h++){var u=a[h],C=2*Math.PI*this._rng();void 0===u.x&&(u.x=e*Math.cos(C));
void 0===u.y&&(u.y=e*Math.sin(C))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var a=this.body.nodeIndices,e=0,h=0;h<a.length;h++)!0===this.body.nodes[a[h]].predefinedPosition&&(e+=1);if(e<.5*a.length){e=0;h=this.options.clusterThreshold;var u={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(a.length>h){for(var C=a.length;a.length>
h&&10>=e;){e+=1;var W=a.length;0===e%3?this.body.modules.clustering.clusterBridges(u):this.body.modules.clustering.clusterOutliers(u);if(W==a.length&&0!==e%3){this._declusterAll();this.body.emitter.emit("_layoutFailed");console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.");return}}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*C)})}10<e&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result.");
this.body.modules.kamadaKawai.solve(a,this.body.edgeIndices,!0);this._shiftToCenter();for(e=0;e<a.length;e++)h=this.body.nodes[a[e]],!1===h.predefinedPosition&&(h.x+=70*(.5-this._rng()),h.y+=70*(.5-this._rng()));this._declusterAll();this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){var a=gd.getRangeCore(this.body.nodes,this.body.nodeIndices);a=gd.findCenter(a);for(var e=0;e<this.body.nodeIndices.length;e++){var h=this.body.nodes[this.body.nodeIndices[e]];
h.x-=a.x;h.y-=a.y}}},{key:"_declusterAll",value:function(){for(var a=!0;!0===a;){a=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(a=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===a&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&0<this.body.nodeIndices.length){var a,
e=!1,h=!1;this.lastNodeOnLevel={};this.hierarchical=new Vd;for(a in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,a)){var u=this.body.nodes[a];void 0!==u.options.level?(e=!0,this.hierarchical.levels[a]=u.options.level):h=!0}if(!0===h&&!0===e)throw Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");!0===h&&(u=this.options.hierarchical.sortMethod,"hubsize"===u?this._determineLevelsByHubsize():"directed"===
u?this._determineLevelsDirected():"custom"===u&&this._determineLevelsCustomCallback());for(var C in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,C)&&this.hierarchical.ensureLevel(C);C=this._getDistribution();this._generateMap();this._placeNodesByHierarchy(C);this._condenseHierarchy();this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var a=this,e=!1,h={},u=function Lc(zc,Ic){if(!Ic[zc.id]&&(Ic[zc.id]=!0,a.hierarchical.childrenReference[zc.id]&&(zc=a.hierarchical.childrenReference[zc.id],
0<zc.length)))for(var Rc=0;Rc<zc.length;Rc++)Lc(a.body.nodes[zc[Rc]],Ic)},C=function(zc){var Ic=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1E9,Lc=1E9,Rc=1E9,Tc=1E9,Zc=-1E9,jd;for(jd in zc)if(Object.prototype.hasOwnProperty.call(zc,jd)){var ld=a.body.nodes[jd],fd=a.hierarchical.levels[ld.id],ed=a.direction.getPosition(ld);ld=a._getSpaceAroundNode(ld,zc);ld=ra(ld,2);var Dc=ld[1];Lc=Math.min(ld[0],Lc);Rc=Math.min(Dc,Rc);fd<=Ic&&(Tc=Math.min(ed,Tc),Zc=Math.max(ed,Zc))}return[Tc,Zc,Lc,Rc]},
W=function(zc,Ic){var Lc=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,Rc=a.direction.getPosition(zc),Tc=a.direction.getPosition(Ic),Zc=a.options.hierarchical.nodeSpacing;if(Math.abs(Tc-Rc)>Zc){Tc={};Rc={};u(zc,Tc);u(Ic,Rc);var jd=a.hierarchical.getMaxLevel(zc.id);var ld=a.hierarchical.getMaxLevel(Ic.id);jd=Math.min(jd,ld);Tc=C(Tc,jd);Rc=C(Rc,jd);Tc=Tc[1];jd=Rc[0];Rc=Rc[2];Math.abs(Tc-jd)>Zc&&(Tc=Tc-jd+Zc,Tc<-Rc+Zc&&(Tc=-Rc+Zc),0>Tc&&(a._shiftBlock(Ic.id,Tc),e=!0,!0===Lc&&a._centerParent(Ic)))}},
za=function(zc,Ic){for(var Lc=Ic.id,Rc=Ic.edges,Tc=a.hierarchical.levels[Ic.id],Zc=a.options.hierarchical.levelSeparation*a.options.hierarchical.levelSeparation,jd={},ld=[],fd=0;fd<Rc.length;fd++){var ed=Rc[fd];if(ed.toId!=ed.fromId){var Dc=ed.toId==Lc?ed.from:ed.to;jd[Rc[fd].id]=Dc;a.hierarchical.levels[Dc.id]<Tc&&ld.push(ed)}}Lc=function($c,rd){for(var Pd=a.direction.getPosition(Ic),Ud={},Ce=0;Ce<$c;Ce++){var ee=Pd;for(var Fe=rd,ue=0,te=0;te<Fe.length;te++)if(void 0!==jd[Fe[te].id]){var xe=a.direction.getPosition(jd[Fe[te].id])-
ee;ue+=xe/Math.sqrt(xe*xe+Zc)}ee=ue;Fe=Pd;ue=rd;for(xe=te=0;xe<ue.length;xe++)if(void 0!==jd[ue[xe].id]){var Re=a.direction.getPosition(jd[ue[xe].id])-Fe;te-=Zc*Math.pow(Re*Re+Zc,-1.5)}Pd-=Math.max(-40,Math.min(40,Math.round(ee/te)));if(void 0!==Ud[Pd])break;Ud[Pd]=Ce}return Pd};ld=Lc(zc,ld);(function($c){var rd=a.direction.getPosition(Ic);if(void 0===h[Ic.id]){var Pd={};u(Ic,Pd);h[Ic.id]=Pd}var Ud=C(h[Ic.id]);Pd=Ud[2];Ud=Ud[3];$c-=rd;rd=0;0<$c?rd=Math.min($c,Ud-a.options.hierarchical.nodeSpacing):
0>$c&&(rd=-Math.min(-$c,Pd-a.options.hierarchical.nodeSpacing));0!=rd&&(a._shiftBlock(Ic.id,rd),e=!0)})(ld);ld=Lc(zc,Rc);(function($c){var rd=a.direction.getPosition(Ic),Pd=a._getSpaceAroundNode(Ic),Ud=ra(Pd,2);Pd=Ud[0];Ud=Ud[1];var Ce=$c-rd,ee=rd;0<Ce?ee=Math.min(rd+(Ud-a.options.hierarchical.nodeSpacing),$c):0>Ce&&(ee=Math.max(rd-(Pd-a.options.hierarchical.nodeSpacing),$c));ee!==rd&&(a.direction.setPosition(Ic,ee),e=!0)})(ld)},eb=function(zc){var Ic=a.hierarchical.getLevels();Ic=Ic.reverse();for(var Lc=
0;Lc<zc;Lc++){e=!1;for(var Rc=0;Rc<Ic.length;Rc++)for(var Tc=a.hierarchical.distributionOrdering[Ic[Rc]],Zc=0;Zc<Tc.length;Zc++)za(1E3,Tc[Zc]);if(!0!==e)break}},Eb=function(zc){var Ic=a.hierarchical.getLevels();Ic=Ic.reverse();for(var Lc=0;Lc<zc;Lc++){e=!1;for(var Rc=W,Tc=Ic,Zc=a.hierarchical,jd=0;jd<Tc.length;jd++){var ld=Zc.distributionOrdering[Tc[jd]];if(1<ld.length)for(var fd=0;fd<ld.length-1;fd++){var ed=ld[fd],Dc=ld[fd+1];Zc.hasSameParent(ed,Dc)&&Zc.inSameSubNetwork(ed,Dc)&&Rc(ed,Dc,!0)}}if(!0!==
e)break}},$b=function(){for(var zc in a.body.nodes)Object.prototype.hasOwnProperty.call(a.body.nodes,zc)&&a._centerParent(a.body.nodes[zc])},jc=function(){var zc=a.hierarchical.getLevels();zc=zc.reverse();for(var Ic=0;Ic<zc.length;Ic++)for(var Lc=a.hierarchical.distributionOrdering[zc[Ic]],Rc=0;Rc<Lc.length;Rc++)a._centerParent(Lc[Rc])};!0===this.options.hierarchical.blockShifting&&(Eb(5),$b());!0===this.options.hierarchical.edgeMinimization&&eb(20);!0===this.options.hierarchical.parentCentralization&&
jc();(function(){for(var zc=[],Ic=0;Ic<a.hierarchical.numTrees();Ic++)zc.push(a.direction.getTreeSize(Ic));for(var Lc=Ic=0;Lc<zc.length-1;Lc++){Ic+=zc[Lc].max-zc[Lc+1].min+a.options.hierarchical.treeSpacing;var Rc=void 0,Tc=Lc+1,Zc=Ic,jd=a.hierarchical.trees;for(Rc in jd)Object.prototype.hasOwnProperty.call(jd,Rc)&&jd[Rc]===Tc&&a.direction.shift(Rc,Zc)}})()}},{key:"_getSpaceAroundNode",value:function(a,e){var h=!0;void 0===e&&(h=!1);var u=this.hierarchical.levels[a.id];if(void 0!==u){var C=this.hierarchical.distributionIndex[a.id];
a=this.direction.getPosition(a);var W=this.hierarchical.distributionOrdering[u],za=1E9;u=1E9;if(0!==C){var eb=W[C-1];if(!0===h&&void 0===e[eb.id]||!1===h)za=this.direction.getPosition(eb),za=a-za}C!=W.length-1&&(C=W[C+1],!0===h&&void 0===e[C.id]||!1===h)&&(e=this.direction.getPosition(C),u=Math.min(u,e-a));return[za,u]}return[0,0]}},{key:"_centerParent",value:function(a){if(this.hierarchical.parentReference[a.id]){a=this.hierarchical.parentReference[a.id];for(var e=0;e<a.length;e++){var h=a[e],u=
this.body.nodes[h];h=this.hierarchical.childrenReference[h];if(void 0!==h){h=this._getCenterPosition(h);var C=this.direction.getPosition(u),W=this._getSpaceAroundNode(u),za=ra(W,2);W=za[0];za=za[1];C-=h;(0>C&&Math.abs(C)<za-this.options.hierarchical.nodeSpacing||0<C&&Math.abs(C)<W-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(u,h)}}}}},{key:"_placeNodesByHierarchy",value:function(a){this.positionedNodes={};for(var e in a)if(Object.prototype.hasOwnProperty.call(a,e)){var h=Object.keys(a[e]);
h=this._indexArrayToNodes(h);this.direction.sort(h);for(var u=0,C=0;C<h.length;C++){var W=h[C];if(void 0===this.positionedNodes[W.id]){var za=this.options.hierarchical.nodeSpacing,eb=za*u;0<u&&(eb=this.direction.getPosition(h[C-1])+za);this.direction.setPosition(W,eb,e);this._validatePositionAndContinue(W,e,eb);u++}}}}},{key:"_placeBranchNodes",value:function(a,e){var h=this.hierarchical.childrenReference[a];if(void 0!==h){for(var u=[],C=0;C<h.length;C++)u.push(this.body.nodes[h[C]]);this.direction.sort(u);
for(h=0;h<u.length;h++){C=u[h];var W=this.hierarchical.levels[C.id];if(W>e&&void 0===this.positionedNodes[C.id]){var za=this.options.hierarchical.nodeSpacing;za=0===h?this.direction.getPosition(this.body.nodes[a]):this.direction.getPosition(u[h-1])+za;this.direction.setPosition(C,za,W);this._validatePositionAndContinue(C,W,za)}else return}u=this._getCenterPosition(u);this.direction.setPosition(this.body.nodes[a],u,e)}}},{key:"_validatePositionAndContinue",value:function(a,e,h){if(this.hierarchical.isTree){if(void 0!==
this.lastNodeOnLevel[e]){var u=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);h-u<this.options.hierarchical.nodeSpacing&&(h=u+this.options.hierarchical.nodeSpacing-h,u=this._findCommonParent(this.lastNodeOnLevel[e],a.id),this._shiftBlock(u.withChild,h))}this.lastNodeOnLevel[e]=a.id;this.positionedNodes[a.id]=!0;this._placeBranchNodes(a.id,e)}}},{key:"_indexArrayToNodes",value:function(a){for(var e=[],h=0;h<a.length;h++)e.push(this.body.nodes[a[h]]);return e}},{key:"_getDistribution",
value:function(){var a={},e;for(e in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,e)){var h=this.body.nodes[e];var u=void 0===this.hierarchical.levels[e]?0:this.hierarchical.levels[e];this.direction.fix(h,u);void 0===a[u]&&(a[u]={});a[u][e]=h}return a}},{key:"_getActiveEdges",value:function(a){var e=this,h=[];(0,La.forEach)(a.edges,function(u){-1!==e.body.edgeIndices.indexOf(u.id)&&h.push(u)});return h}},{key:"_getHubSizes",value:function(){var a=this,e={},h=this.body.nodeIndices;
(0,La.forEach)(h,function(C){C=a._getActiveEdges(a.body.nodes[C]).length;e[C]=!0});var u=[];(0,La.forEach)(e,function(C){u.push(Number(C))});jb["default"].sort(u,function(C,W){return W-C});return u}},{key:"_determineLevelsByHubsize",value:function(){for(var a=this,e=function(W,za){a.hierarchical.levelDownstream(W,za)},h=this._getHubSizes(),u=function(W){var za=h[W];if(0===za)return"break";(0,La.forEach)(a.body.nodeIndices,function(eb){za===a._getActiveEdges(a.body.nodes[eb]).length&&a._crawlNetwork(e,
eb)})},C=0;C<h.length&&"break"!==u(C);++C);}},{key:"_determineLevelsCustomCallback",value:function(){var a=this;this._crawlNetwork(function(e,h,u){var C=a.hierarchical.levels[e.id];void 0===C&&(C=a.hierarchical.levels[e.id]=1E5);gd.cloneOptions(e,"node");gd.cloneOptions(h,"node");gd.cloneOptions(u,"edge");a.hierarchical.levels[h.id]=C+void 0});this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var a=this,e=this.body.nodeIndices.reduce(function(u,
C){u.set(C,a.body.nodes[C]);return u},new Map),h=this.hierarchical.levels;this.hierarchical.levels="roots"===this.options.hierarchical.shakeTowards?ja(e,h):Pa(e,h);this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var a=this;this._crawlNetwork(function(e,h){a.hierarchical.levels[h.id]>a.hierarchical.levels[e.id]&&a.hierarchical.addRelation(e.id,h.id)});this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var a=this,e=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:function(){},h=1<arguments.length?arguments[1]:void 0,u={},C=function jc(Eb,$b){if(void 0===u[Eb.id]){a.hierarchical.setTreeIndex(Eb,$b);u[Eb.id]=!0;for(var uc,zc=a._getActiveEdges(Eb),Ic=0;Ic<zc.length;Ic++){var Lc=zc[Ic];!0===Lc.connected&&(uc=Lc.toId==Eb.id?Lc.from:Lc.to,Eb.id!=uc.id&&(e(Eb,uc,Lc),jc(uc,$b)))}}};if(void 0===h)for(var W=h=0;W<this.body.nodeIndices.length;W++){var za=this.body.nodeIndices[W];void 0===u[za]&&(C(this.body.nodes[za],h),h+=1)}else W=
this.body.nodes[h],void 0===W?console.error("Node not found:",h):C(W)}},{key:"_shiftBlock",value:function(a,e){var h=this,u={};(function za(W){if(!u[W]&&(u[W]=!0,h.direction.shift(W,e),W=h.hierarchical.childrenReference[W],void 0!==W))for(var eb=0;eb<W.length;eb++)za(W[eb])})(a)}},{key:"_findCommonParent",value:function(a,e){var h=this,u={};(function eb(W,za){za=h.hierarchical.parentReference[za];if(void 0!==za)for(var Eb=0;Eb<za.length;Eb++){var $b=za[Eb];W[$b]=!0;eb(W,$b)}})(u,a);return function Eb(za,
eb){var $b=h.hierarchical.parentReference[eb];if(void 0!==$b)for(var jc=0;jc<$b.length;jc++){var uc=$b[jc];if(void 0!==za[uc])return{foundParent:uc,withChild:eb};uc=Eb(za,uc);if(null!==uc.foundParent)return uc}return{foundParent:null,withChild:eb}}(u,e)}},{key:"setDirectionStrategy",value:function(){this.direction="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction?new Td(this):new pe(this)}},{key:"_getCenterPosition",value:function(a){for(var e=1E9,h=-1E9,u=0;u<
a.length;u++){var C=this.direction.getPosition(void 0!==a[u].id?a[u]:this.body.nodes[a[u]]);e=Math.min(e,C);h=Math.max(h,C)}return.5*(e+h)}}]);return N}(),Nd=function(){function N(a,e,h,u){var C=this;P(this,N);this.body=a;this.canvas=e;this.selectionHandler=h;this.interactionHandler=u;this.editMode=!1;this.closeDiv=this.editModeDiv=this.manipulationDiv=void 0;this.manipulationHammers=[];this.temporaryUIFunctions={};this.temporaryEventFunctions=[];this.touchTime=0;this.temporaryIds={nodes:[],edges:[]};
this.inMode=this.guiEnabled=!1;this.selectedControlNode=void 0;this.options={};this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}};Object.assign(this.options,this.defaultOptions);this.body.emitter.on("destroy",function(){C._clean()});this.body.emitter.on("_dataChanged",
this._restore.bind(this));this.body.emitter.on("_resetData",this._restore.bind(this))}va(N,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(a,e,h){void 0!==e&&(this.options.locale=void 0!==e.locale?e.locale:h.locale,this.options.locales=void 0!==e.locales?e.locales:h.locales);void 0!==a&&("boolean"===typeof a?this.options.enabled=a:(this.options.enabled=!0,(0,La.deepExtend)(this.options,
a)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0;this._clean();!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1;this._clean();!0===this.guiEnabled&&
(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){this._clean();this.manipulationDOM={};if(!0===this.guiEnabled){this.editMode=!0;this.manipulationDiv.style.display="block";this.closeDiv.style.display="block";var a=this.selectionHandler._getSelectedNodeCount(),e=this.selectionHandler._getSelectedEdgeCount(),h=a+e,u=this.options.locales[this.options.locale],
C=!1;!1!==this.options.addNode&&(this._createAddNodeButton(u),C=!0);!1!==this.options.addEdge&&(!0===C?this._createSeperator(1):C=!0,this._createAddEdgeButton(u));1===a&&"function"===typeof this.options.editNode?(!0===C?this._createSeperator(2):C=!0,this._createEditNodeButton(u)):1===e&&0===a&&!1!==this.options.editEdge&&(!0===C?this._createSeperator(3):C=!0,this._createEditEdgeButton(u));0!==h&&(0<a&&!1!==this.options.deleteNode?(!0===C&&this._createSeperator(4),this._createDeleteButton(u)):0===
a&&!1!==this.options.deleteEdge&&(!0===C&&this._createSeperator(4),this._createDeleteButton(u)));this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this));this._temporaryBindEvent("select",this.showManipulatorToolbar.bind(this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){!0!==this.editMode&&this.enableEditMode();this._clean();this.inMode="addNode";if(!0===this.guiEnabled){var a=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(a);
this._createSeperator();this._createDescription(a.addDescription||this.options.locales.en.addDescription);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindEvent("click",this._performAddNode.bind(this))}},{key:"editNode",value:function(){var a=this;!0!==this.editMode&&this.enableEditMode();this._clean();var e=this.selectionHandler._getSelectedNode();if(void 0!==e)if(this.inMode="editNode","function"===typeof this.options.editNode)if(!0!==e.isCluster){var h=(0,
La.deepExtend)({},e.options,!1);h.x=e.x;h.y=e.y;if(2===this.options.editNode.length)this.options.editNode(h,function(u){null!==u&&void 0!==u&&"editNode"===a.inMode&&a.body.data.nodes.getDataSet().update(u);a.showManipulatorToolbar()});else throw Error("The function for edit does not support two arguments (data, callback)");}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError);else throw Error("No function has been configured to handle the editing of nodes.");
else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){!0!==this.editMode&&this.enableEditMode();this._clean();this.inMode="addEdge";if(!0===this.guiEnabled){var a=this.options.locales[this.options.locale];this.manipulationDOM={};this._createBackButton(a);this._createSeperator();this._createDescription(a.edgeDescription||this.options.locales.en.edgeDescription);this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this))}this._temporaryBindUI("onTouch",this._handleConnect.bind(this));
this._temporaryBindUI("onDragEnd",this._finishConnect.bind(this));this._temporaryBindUI("onDrag",this._dragControlNode.bind(this));this._temporaryBindUI("onRelease",this._finishConnect.bind(this));this._temporaryBindUI("onDragStart",this._dragStartEdge.bind(this));this._temporaryBindUI("onHold",function(){})}},{key:"editEdgeMode",value:function(){!0!==this.editMode&&this.enableEditMode();this._clean();this.inMode="editEdge";if("object"===ka(this.options.editEdge)&&"function"===typeof this.options.editEdge.editWithoutDrag&&
(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdges()[0],void 0!==this.edgeBeingEditedId)){var a=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(a.from.id,a.to.id);return}!0===this.guiEnabled&&(a=this.options.locales[this.options.locale],this.manipulationDOM={},this._createBackButton(a),this._createSeperator(),this._createDescription(a.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindHammerToDiv(this.closeDiv,this.toggleEditMode.bind(this)));this.edgeBeingEditedId=
this.selectionHandler.getSelectedEdges()[0];if(void 0!==this.edgeBeingEditedId){var e=this.body.edges[this.edgeBeingEditedId],h=this._getNewTargetNode(e.from.x,e.from.y),u=this._getNewTargetNode(e.to.x,e.to.y);this.temporaryIds.nodes.push(h.id);this.temporaryIds.nodes.push(u.id);this.body.nodes[h.id]=h;this.body.nodeIndices.push(h.id);this.body.nodes[u.id]=u;this.body.nodeIndices.push(u.id);this._temporaryBindUI("onTouch",this._controlNodeTouch.bind(this));this._temporaryBindUI("onTap",function(){});
this._temporaryBindUI("onHold",function(){});this._temporaryBindUI("onDragStart",this._controlNodeDragStart.bind(this));this._temporaryBindUI("onDrag",this._controlNodeDrag.bind(this));this._temporaryBindUI("onDragEnd",this._controlNodeDragEnd.bind(this));this._temporaryBindUI("onMouseMove",function(){});this._temporaryBindEvent("beforeDrawing",function(C){C=e.edgeType.findBorderPositions(C);!1===h.selected&&(h.x=C.from.x,h.y=C.from.y);!1===u.selected&&(u.x=C.to.x,u.y=C.to.y)});this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}},
{key:"deleteSelected",value:function(){var a=this;!0!==this.editMode&&this.enableEditMode();this._clean();this.inMode="delete";var e=this.selectionHandler.getSelectedNodes(),h=this.selectionHandler.getSelectedEdges(),u=void 0;if(0<e.length){for(var C=0;C<e.length;C++)if(!0===this.body.nodes[e[C]].isCluster){alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);return}"function"===typeof this.options.deleteNode&&(u=this.options.deleteNode)}else 0<
h.length&&"function"===typeof this.options.deleteEdge&&(u=this.options.deleteEdge);if("function"===typeof u)if(e={nodes:e,edges:h},2===u.length)u(e,function(W){null!==W&&void 0!==W&&"delete"===a.inMode&&(a.body.data.edges.getDataSet().remove(W.edges),a.body.data.nodes.getDataSet().remove(W.nodes));a.body.emitter.emit("startSimulation");a.showManipulatorToolbar()});else throw Error("The function for delete does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().remove(h),
this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",
this.manipulationDiv.style.display=!0===this.editMode?"block":"none",this.canvas.frame.appendChild(this.manipulationDiv));void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",this.editModeDiv.style.display=!0===this.editMode?"none":"block",this.canvas.frame.appendChild(this.editModeDiv));void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="vis-close",this.closeDiv.style.display=this.manipulationDiv.style.display,
this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(a,e){var h=(0,La.deepExtend)({},this.options.controlNodeStyle);h.id="targetNode"+(0,vb.v4)();h.hidden=!1;h.physics=!1;h.x=a;h.y=e;h=this.body.functions.createNode(h);h.shape.boundingBox={left:a,right:a,top:e,bottom:e};return h}},{key:"_createEditButton",value:function(){this._clean();this.manipulationDOM={};(0,La.recursiveDOMDelete)(this.editModeDiv);var a=this._createButton("editMode","vis-button vis-edit vis-edit-mode",
this.options.locales[this.options.locale].edit||this.options.locales.en.edit);this.editModeDiv.appendChild(a);this._bindHammerToDiv(a,this.toggleEditMode.bind(this))}},{key:"_clean",value:function(){this.inMode=!1;!0===this.guiEnabled&&((0,La.recursiveDOMDelete)(this.editModeDiv),(0,La.recursiveDOMDelete)(this.manipulationDiv),this._cleanManipulatorHammers());this._cleanupTemporaryNodesAndEdges();this._unbindTemporaryUIs();this._unbindTemporaryEvents();this.body.emitter.emit("restorePhysics")}},{key:"_cleanManipulatorHammers",
value:function(){if(0!=this.manipulationHammers.length){for(var a=0;a<this.manipulationHammers.length;a++)this.manipulationHammers[a].destroy();this.manipulationHammers=[]}}},{key:"_removeManipulationDOM",value:function(){this._clean();(0,La.recursiveDOMDelete)(this.manipulationDiv);(0,La.recursiveDOMDelete)(this.editModeDiv);(0,La.recursiveDOMDelete)(this.closeDiv);this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv);this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv);
this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv);this.closeDiv=this.editModeDiv=this.manipulationDiv=void 0}},{key:"_createSeperator",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+a]=document.createElement("div");this.manipulationDOM["seperatorLineDiv"+a].className="vis-separator-line";this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+a])}},{key:"_createAddNodeButton",value:function(a){a=this._createButton("addNode",
"vis-button vis-add",a.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(a);this._bindHammerToDiv(a,this.addNodeMode.bind(this))}},{key:"_createAddEdgeButton",value:function(a){a=this._createButton("addEdge","vis-button vis-connect",a.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(a);this._bindHammerToDiv(a,this.addEdgeMode.bind(this))}},{key:"_createEditNodeButton",value:function(a){a=this._createButton("editNode","vis-button vis-edit",a.editNode||
this.options.locales.en.editNode);this.manipulationDiv.appendChild(a);this._bindHammerToDiv(a,this.editNode.bind(this))}},{key:"_createEditEdgeButton",value:function(a){a=this._createButton("editEdge","vis-button vis-edit",a.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(a);this._bindHammerToDiv(a,this.editEdgeMode.bind(this))}},{key:"_createDeleteButton",value:function(a){a=this._createButton("delete",this.options.rtl?"vis-button vis-delete-rtl":"vis-button vis-delete",
a.del||this.options.locales.en.del);this.manipulationDiv.appendChild(a);this._bindHammerToDiv(a,this.deleteSelected.bind(this))}},{key:"_createBackButton",value:function(a){a=this._createButton("back","vis-button vis-back",a.back||this.options.locales.en.back);this.manipulationDiv.appendChild(a);this._bindHammerToDiv(a,this.showManipulatorToolbar.bind(this))}},{key:"_createButton",value:function(a,e,h){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"vis-label";this.manipulationDOM[a+
"Div"]=document.createElement("div");this.manipulationDOM[a+"Div"].className=e;this.manipulationDOM[a+"Label"]=document.createElement("div");this.manipulationDOM[a+"Label"].className=u;this.manipulationDOM[a+"Label"].innerHTML=h;this.manipulationDOM[a+"Div"].appendChild(this.manipulationDOM[a+"Label"]);return this.manipulationDOM[a+"Div"]}},{key:"_createDescription",value:function(a){this.manipulationDiv.appendChild(this._createButton("description","vis-button vis-none",a))}},{key:"_temporaryBindEvent",
value:function(a,e){this.temporaryEventFunctions.push({event:a,boundFunction:e});this.body.emitter.on(a,e)}},{key:"_temporaryBindUI",value:function(a,e){if(void 0!==this.body.eventListeners[a])this.temporaryUIFunctions[a]=this.body.eventListeners[a],this.body.eventListeners[a]=e;else throw Error("This UI function does not exist. Typo? You tried: "+a+" possible are: "+JSON.stringify(Object.keys(this.body.eventListeners)));}},{key:"_unbindTemporaryUIs",value:function(){for(var a in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,
a)&&(this.body.eventListeners[a]=this.temporaryUIFunctions[a],delete this.temporaryUIFunctions[a]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var a=0;a<this.temporaryEventFunctions.length;a++)this.body.emitter.off(this.temporaryEventFunctions[a].event,this.temporaryEventFunctions[a].boundFunction);this.temporaryEventFunctions=[]}},{key:"_bindHammerToDiv",value:function(a,e){a=new hb(a,{});Ib(a,e);this.manipulationHammers.push(a)}},{key:"_cleanupTemporaryNodesAndEdges",
value:function(){for(var a=0;a<this.temporaryIds.edges.length;a++){this.body.edges[this.temporaryIds.edges[a]].disconnect();delete this.body.edges[this.temporaryIds.edges[a]];var e=this.body.edgeIndices.indexOf(this.temporaryIds.edges[a]);-1!==e&&this.body.edgeIndices.splice(e,1)}for(a=0;a<this.temporaryIds.nodes.length;a++)delete this.body.nodes[this.temporaryIds.nodes[a]],e=this.body.nodeIndices.indexOf(this.temporaryIds.nodes[a]),-1!==e&&this.body.nodeIndices.splice(e,1);this.temporaryIds={nodes:[],
edges:[]}}},{key:"_controlNodeTouch",value:function(a){this.selectionHandler.unselectAll();this.lastTouch=this.body.functions.getPointer(a.center);this.lastTouch.translation=Object.assign({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(a){var e=this.selectionHandler._pointerToPositionObject(this.lastTouch);a=this.body.nodes[this.temporaryIds.nodes[0]];var h=this.body.nodes[this.temporaryIds.nodes[1]],u=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;
var C=a.isOverlappingWith(e);e=h.isOverlappingWith(e);!0===C?(this.selectedControlNode=a,u.edgeType.from=a):!0===e&&(this.selectedControlNode=h,u.edgeType.to=h);void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode);this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(a){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(a.center);e=this.canvas.DOMtoCanvas(e);if(void 0!==this.selectedControlNode)this.selectedControlNode.x=
e.x,this.selectedControlNode.y=e.y;else this.interactionHandler.onDrag(a);this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(a){a=this.body.functions.getPointer(a.center);var e=this.selectionHandler._pointerToPositionObject(a);a=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();e=this.selectionHandler._getAllNodesOverlappingWith(e);for(var h=void 0,u=e.length-1;0<=u;u--)if(e[u]!==this.selectedControlNode.id){h=
this.body.nodes[e[u]];break}void 0!==h&&void 0!==this.selectedControlNode?!0===h.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):this.selectedControlNode.id===this.body.nodes[this.temporaryIds.nodes[0]].id?this._performEditEdge(h.id,a.to.id):this._performEditEdge(a.from.id,h.id):(a.updateEdgeType(),this.body.emitter.emit("restorePhysics"));this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(a){if(100<(new Date).valueOf()-
this.touchTime){this.lastTouch=this.body.functions.getPointer(a.center);this.lastTouch.translation=Object.assign({},this.body.view.translation);this.interactionHandler.drag.pointer=this.lastTouch;this.interactionHandler.drag.translation=this.lastTouch.translation;var e=this.selectionHandler.getNodeAt(this.lastTouch);void 0!==e&&(!0===e.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):(a=this._getNewTargetNode(e.x,e.y),this.body.nodes[a.id]=
a,this.body.nodeIndices.push(a.id),e=this.body.functions.createEdge({id:"connectionEdge"+(0,vb.v4)(),from:e.id,to:a.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}}),this.body.edges[e.id]=e,this.body.edgeIndices.push(e.id),this.temporaryIds.nodes.push(a.id),this.temporaryIds.edges.push(e.id)));this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(a){var e=this.body.functions.getPointer(a.center),h=this.selectionHandler._pointerToPositionObject(e),u=void 0;
void 0!==this.temporaryIds.edges[0]&&(u=this.body.edges[this.temporaryIds.edges[0]].fromId);h=this.selectionHandler._getAllNodesOverlappingWith(h);for(var C=void 0,W=h.length-1;0<=W;W--)if(-1===this.temporaryIds.nodes.indexOf(h[W])){C=this.body.nodes[h[W]];break}a.controlEdge={from:u,to:C?C.id:void 0};this.selectionHandler._generateClickEvent("controlNodeDragging",a,e);if(void 0!==this.temporaryIds.nodes[0])a=this.body.nodes[this.temporaryIds.nodes[0]],a.x=this.canvas._XconvertDOMtoCanvas(e.x),a.y=
this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw");else this.interactionHandler.onDrag(a)}},{key:"_finishConnect",value:function(a){var e=this.body.functions.getPointer(a.center),h=this.selectionHandler._pointerToPositionObject(e),u=void 0;void 0!==this.temporaryIds.edges[0]&&(u=this.body.edges[this.temporaryIds.edges[0]].fromId);h=this.selectionHandler._getAllNodesOverlappingWith(h);for(var C=void 0,W=h.length-1;0<=W;W--)if(-1===this.temporaryIds.nodes.indexOf(h[W])){C=this.body.nodes[h[W]];
break}this._cleanupTemporaryNodesAndEdges();void 0!==C&&(!0===C.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[u]&&void 0!==this.body.nodes[C.id]&&this._performAddEdge(u,C.id));a.controlEdge={from:u,to:C?C.id:void 0};this.selectionHandler._generateClickEvent("controlNodeDragEnd",a,e);this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(a){this.selectionHandler._generateClickEvent("dragStart",
a,this.lastTouch,void 0,!0)}},{key:"_performAddNode",value:function(a){var e=this;a={id:(0,vb.v4)(),x:a.pointer.canvas.x,y:a.pointer.canvas.y,label:"new"};if("function"===typeof this.options.addNode)if(2===this.options.addNode.length)this.options.addNode(a,function(h){null!==h&&void 0!==h&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(h);e.showManipulatorToolbar()});else throw this.showManipulatorToolbar(),Error("The function for add does not support two arguments (data,callback)");else this.body.data.nodes.getDataSet().add(a),
this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(a,e){var h=this;a={from:a,to:e};if("function"===typeof this.options.addEdge)if(2===this.options.addEdge.length)this.options.addEdge(a,function(u){null!==u&&void 0!==u&&"addEdge"===h.inMode&&(h.body.data.edges.getDataSet().add(u),h.selectionHandler.unselectAll(),h.showManipulatorToolbar())});else throw Error("The function for connect does not support two arguments (data,callback)");else this.body.data.edges.getDataSet().add(a),this.selectionHandler.unselectAll(),
this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(a,e){var h=this,u={id:this.edgeBeingEditedId,from:a,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label};a=this.options.editEdge;"object"===ka(a)&&(a=a.editWithoutDrag);if("function"===typeof a)if(2===a.length)a(u,function(C){null===C||void 0===C||"editEdge"!==h.inMode?(h.body.edges[u.id].updateEdgeType(),h.body.emitter.emit("_redraw")):(h.body.data.edges.getDataSet().update(C),h.selectionHandler.unselectAll());h.showManipulatorToolbar()});
else throw Error("The function for edit does not support two arguments (data, callback)");else this.body.data.edges.getDataSet().update(u),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]);return N}(),Ke={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",
cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",
mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",
paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",
violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",
lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Pe=function(){function N(){var a=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:1;P(this,N);this.pixelRatio=a;this.generated=!1;this.centerCoordinates={x:144.5,y:144.5};this.r=289*.49;this.color={r:255,g:255,b:255,a:1};this.hueCircle=void 0;this.initialColor={r:255,g:255,b:255,a:1};this.previousColor=void 0;this.applied=!1;this.updateCallback=function(){};this.closeCallback=function(){};this._create()}va(N,[{key:"insertTo",value:function(a){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0);this.container=a;this.container.appendChild(this.frame);this._bindHammer();
this._setSize()}},{key:"setUpdateCallback",value:function(a){if("function"===typeof a)this.updateCallback=a;else throw Error("Function attempted to set as colorPicker update callback is not a function.");}},{key:"setCloseCallback",value:function(a){if("function"===typeof a)this.closeCallback=a;else throw Error("Function attempted to set as colorPicker closing callback is not a function.");}},{key:"_isColorString",value:function(a){if("string"===typeof a)return Ke[a]}},{key:"setColor",value:function(a){var e=
1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;if("none"!==a){var h=this._isColorString(a);void 0!==h&&(a=h);if(!0===(0,La.isString)(a))if(!0===(0,La.isValidRGB)(a)){var u=a.substr(4).substr(0,a.length-5).split(",");u={r:u[0],g:u[1],b:u[2],a:1}}else!0===(0,La.isValidRGBA)(a)?(u=a.substr(5).substr(0,a.length-6).split(","),u={r:u[0],g:u[1],b:u[2],a:u[3]}):!0===(0,La.isValidHex)(a)&&(u=(0,La.hexToRGB)(a),u={r:u.r,g:u.g,b:u.b,a:1});else a instanceof Object&&void 0!==a.r&&void 0!==a.g&&void 0!==
a.b&&(u={r:a.r,g:a.g,b:a.b,a:void 0!==a.a?a.a:"1.0"});if(void 0===u)throw Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(a));this._setColor(u,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0);this.applied=!1;this.frame.style.display="block";this._generateHueCircle()}},{key:"_hide",value:function(){var a=this;!0===(0<arguments.length&&
void 0!==arguments[0]?arguments[0]:!0)&&(this.previousColor=Object.assign({},this.color));!0===this.applied&&this.updateCallback(this.initialColor);this.frame.style.display="none";setTimeout(function(){void 0!==a.closeCallback&&(a.closeCallback(),a.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color);this.applied=!1;this._hide()}},{key:"_apply",value:function(){this.applied=!0;this.updateCallback(this.color);this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==
this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(a){!0===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0)&&(this.initialColor=Object.assign({},a));this.color=a;var e=(0,La.RGBToHSV)(a.r,a.g,a.b),h=2*Math.PI,u=this.r*e.s,C=this.centerCoordinates.y+u*Math.cos(h*e.h);this.colorPickerSelector.style.left=this.centerCoordinates.x+u*Math.sin(h*e.h)-.5*this.colorPickerSelector.clientWidth+"px";this.colorPickerSelector.style.top=
C-.5*this.colorPickerSelector.clientHeight+"px";this._updatePicker(a)}},{key:"_setOpacity",value:function(a){this.color.a=a/100;this._updatePicker(this.color)}},{key:"_setBrightness",value:function(a){var e=(0,La.RGBToHSV)(this.color.r,this.color.g,this.color.b);e.v=a/100;a=(0,La.HSVToRGB)(e.h,e.s,e.v);a.a=this.color.a;this.color=a;this._updatePicker()}},{key:"_updatePicker",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.color,e=(0,La.RGBToHSV)(a.r,a.g,a.b),h=this.colorPickerCanvas.getContext("2d");
void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(h.webkitBackingStorePixelRatio||h.mozBackingStorePixelRatio||h.msBackingStorePixelRatio||h.oBackingStorePixelRatio||h.backingStorePixelRatio||1));h.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);h.clearRect(0,0,this.colorPickerCanvas.clientWidth,this.colorPickerCanvas.clientHeight);h.putImageData(this.hueCircle,0,0);h.fillStyle="rgba(0,0,0,"+(1-e.v)+")";h.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);
h.fill();this.brightnessRange.value=100*e.v;this.opacityRange.value=100*a.a;this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")";this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%";this.colorPickerCanvas.style.height="100%";this.colorPickerCanvas.width=289*this.pixelRatio;
this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){this.frame=document.createElement("div");this.frame.className="vis-color-picker";this.colorPickerDiv=document.createElement("div");this.colorPickerSelector=document.createElement("div");this.colorPickerSelector.className="vis-selector";this.colorPickerDiv.appendChild(this.colorPickerSelector);this.colorPickerCanvas=document.createElement("canvas");this.colorPickerDiv.appendChild(this.colorPickerCanvas);if(this.colorPickerCanvas.getContext){var a=
this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1);this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else a=document.createElement("DIV"),a.style.color="red",a.style.fontWeight="bold",a.style.padding="10px",a.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(a);
this.colorPickerDiv.className="vis-color";this.opacityDiv=document.createElement("div");this.opacityDiv.className="vis-opacity";this.brightnessDiv=document.createElement("div");this.brightnessDiv.className="vis-brightness";this.arrowDiv=document.createElement("div");this.arrowDiv.className="vis-arrow";this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(h){}this.opacityRange.value="100";this.opacityRange.className=
"vis-range";this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(h){}this.brightnessRange.value="100";this.brightnessRange.className="vis-range";this.opacityDiv.appendChild(this.opacityRange);this.brightnessDiv.appendChild(this.brightnessRange);var e=this;this.opacityRange.onchange=function(){e._setOpacity(this.value)};this.opacityRange.oninput=function(){e._setOpacity(this.value)};this.brightnessRange.onchange=
function(){e._setBrightness(this.value)};this.brightnessRange.oninput=function(){e._setBrightness(this.value)};this.brightnessLabel=document.createElement("div");this.brightnessLabel.className="vis-label vis-brightness";this.brightnessLabel.innerHTML="brightness:";this.opacityLabel=document.createElement("div");this.opacityLabel.className="vis-label vis-opacity";this.opacityLabel.innerHTML="opacity:";this.newColorDiv=document.createElement("div");this.newColorDiv.className="vis-new-color";this.newColorDiv.innerHTML=
"new";this.initialColorDiv=document.createElement("div");this.initialColorDiv.className="vis-initial-color";this.initialColorDiv.innerHTML="initial";this.cancelButton=document.createElement("div");this.cancelButton.className="vis-button vis-cancel";this.cancelButton.innerHTML="cancel";this.cancelButton.onclick=this._hide.bind(this,!1);this.applyButton=document.createElement("div");this.applyButton.className="vis-button vis-apply";this.applyButton.innerHTML="apply";this.applyButton.onclick=this._apply.bind(this);
this.saveButton=document.createElement("div");this.saveButton.className="vis-button vis-save";this.saveButton.innerHTML="save";this.saveButton.onclick=this._save.bind(this);this.loadButton=document.createElement("div");this.loadButton.className="vis-button vis-load";this.loadButton.innerHTML="load last";this.loadButton.onclick=this._loadLast.bind(this);this.frame.appendChild(this.colorPickerDiv);this.frame.appendChild(this.arrowDiv);this.frame.appendChild(this.brightnessLabel);this.frame.appendChild(this.brightnessDiv);
this.frame.appendChild(this.opacityLabel);this.frame.appendChild(this.opacityDiv);this.frame.appendChild(this.newColorDiv);this.frame.appendChild(this.initialColorDiv);this.frame.appendChild(this.cancelButton);this.frame.appendChild(this.applyButton);this.frame.appendChild(this.saveButton);this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var a=this;this.drag={};this.pinch={};this.hammer=new hb(this.colorPickerCanvas);this.hammer.get("pinch").set({enable:!0});Ib(this.hammer,
function(e){a._moveSelector(e)});this.hammer.on("tap",function(e){a._moveSelector(e)});this.hammer.on("panstart",function(e){a._moveSelector(e)});this.hammer.on("panmove",function(e){a._moveSelector(e)});this.hammer.on("panend",function(e){a._moveSelector(e)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var a=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||
a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1));a.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e=this.colorPickerCanvas.clientWidth,h=this.colorPickerCanvas.clientHeight;a.clearRect(0,0,e,h);var u,C;this.centerCoordinates={x:.5*e,y:.5*h};this.r=.49*e;var W=2*Math.PI/360,za=1/360,eb=1/this.r;for(u=0;360>u;u++)for(C=0;C<this.r;C++){var Eb=this.centerCoordinates.x+C*Math.sin(W*u);var $b=this.centerCoordinates.y+C*Math.cos(W*u);var jc=(0,La.HSVToRGB)(u*
za,C*eb,1);a.fillStyle="rgb("+jc.r+","+jc.g+","+jc.b+")";a.fillRect(Eb-.5,$b-.5,2,2)}a.strokeStyle="rgba(0,0,0,1)";a.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);a.stroke();this.hueCircle=a.getImageData(0,0,e,h)}this.generated=!0}},{key:"_moveSelector",value:function(a){var e=this.colorPickerDiv.getBoundingClientRect(),h=.5*this.colorPickerDiv.clientHeight,u=.5*this.colorPickerDiv.clientWidth,C=a.center.x-e.left-u;e=a.center.y-e.top-h;a=Math.atan2(C,e);C=.98*Math.min(Math.sqrt(C*
C+e*e),u);u=Math.sin(a)*C+u;this.colorPickerSelector.style.top=Math.cos(a)*C+h-.5*this.colorPickerSelector.clientHeight+"px";this.colorPickerSelector.style.left=u-.5*this.colorPickerSelector.clientWidth+"px";h=a/(2*Math.PI);h=0>h?h+1:h;u=C/this.r;C=(0,La.RGBToHSV)(this.color.r,this.color.g,this.color.b);C.h=h;C.s=u;h=(0,La.HSVToRGB)(C.h,C.s,C.v);h.a=this.color.a;this.color=h;this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+
this.initialColor.a+")";this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]);return N}(),Ge=function(){function N(a,e,h){var u=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;P(this,N);this.parent=a;this.changedOptions=[];this.container=e;this.allowCreation=!1;this.options={};this.initialized=!1;this.popupCounter=0;this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0};Object.assign(this.options,this.defaultOptions);
this.configureOptions=h;this.moduleOptions={};this.domElements=[];this.popupDiv={};this.popupLimit=5;this.popupHistory={};this.colorPicker=new Pe(u);this.wrapper=void 0}va(N,[{key:"setOptions",value:function(a){if(void 0!==a){this.popupHistory={};this._removePopup();var e=!0;if("string"===typeof a)this.options.filter=a;else if(a instanceof Array)this.options.filter=a.join();else if("object"===ka(a)){if(null==a)throw new TypeError("options cannot be null");void 0!==a.container&&(this.options.container=
a.container);void 0!==a.filter&&(this.options.filter=a.filter);void 0!==a.showButton&&(this.options.showButton=a.showButton);void 0!==a.enabled&&(e=a.enabled)}else"boolean"===typeof a?(this.options.filter=!0,e=a):"function"===typeof a&&(this.options.filter=a,e=!0);!1===this.options.filter&&(e=!1);this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(a){this.moduleOptions=a;!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),
this._create())}},{key:"_create",value:function(){this._clean();this.changedOptions=[];var a=this.options.filter,e=0,h;for(h in this.configureOptions)if(Object.prototype.hasOwnProperty.call(this.configureOptions,h)){var u=this.allowCreation=!1;if("function"===typeof a)u=(u=a(h,[]))||this._handleObject(this.configureOptions[h],[h],!0);else if(!0===a||-1!==a.indexOf(h))u=!0;!1!==u&&(this.allowCreation=!0,0<e&&this._makeItem([]),this._makeHeader(h),this._handleObject(this.configureOptions[h],[h]));e++}this._makeButton();
this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div");this.wrapper.className="vis-configuration-wrapper";this.container.appendChild(this.wrapper);for(var a=0;a<this.domElements.length;a++)this.wrapper.appendChild(this.domElements[a]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var a=0;a<this.domElements.length;a++)this.wrapper.removeChild(this.domElements[a]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0);
this.domElements=[];this._removePopup()}},{key:"_getValue",value:function(a){for(var e=this.moduleOptions,h=0;h<a.length;h++)if(void 0!==e[a[h]])e=e[a[h]];else{e=void 0;break}return e}},{key:"_makeItem",value:function(a){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+a.length;for(var h=arguments.length,u=Array(1<h?h-1:0),C=1;C<h;C++)u[C-1]=arguments[C];u.forEach(function(W){e.appendChild(W)});this.domElements.push(e);return this.domElements.length}return 0}},
{key:"_makeHeader",value:function(a){var e=document.createElement("div");e.className="vis-configuration vis-config-header";e.innerHTML=a;this._makeItem([],e)}},{key:"_makeLabel",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,u=document.createElement("div");u.className="vis-configuration vis-config-label vis-config-s"+e.length;u.innerHTML=!0===h?"\x3ci\x3e\x3cb\x3e"+a+":\x3c/b\x3e\x3c/i\x3e":a+":";return u}},{key:"_makeDropdown",value:function(a,e,h){var u=document.createElement("select");
u.className="vis-configuration vis-config-select";var C=0;void 0!==e&&-1!==a.indexOf(e)&&(C=a.indexOf(e));for(e=0;e<a.length;e++){var W=document.createElement("option");W.value=a[e];e===C&&(W.selected="selected");W.innerHTML=a[e];u.appendChild(W)}var za=this;u.onchange=function(){za._update(this.value,h)};a=this._makeLabel(h[h.length-1],h);this._makeItem(h,a,u)}},{key:"_makeRange",value:function(a,e,h){var u=a[0],C=a[1],W=a[2],za=a[3];a=document.createElement("input");a.className="vis-configuration vis-config-range";
try{a.type="range",a.min=C,a.max=W}catch(jc){}a.step=za;za="";var eb=0;void 0!==e?(0>e&&1.2*e<C?(a.min=Math.ceil(1.2*e),eb=a.min,za="range increased"):e/1.2<C&&(a.min=Math.ceil(e/1.2),eb=a.min,za="range increased"),1.2*e>W&&1!==W&&(a.max=Math.ceil(1.2*e),eb=a.max,za="range increased"),a.value=e):a.value=u;var Eb=document.createElement("input");Eb.className="vis-configuration vis-config-rangeinput";Eb.value=a.value;var $b=this;a.onchange=function(){Eb.value=this.value;$b._update(Number(this.value),
h)};a.oninput=function(){Eb.value=this.value};e=this._makeLabel(h[h.length-1],h);e=this._makeItem(h,e,a,Eb);""!==za&&this.popupHistory[e]!==eb&&(this.popupHistory[e]=eb,this._setupPopup(za,e))}},{key:"_makeButton",value:function(){var a=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button";e.innerHTML="generate options";e.onclick=function(){a._printOptions()};e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"};
e.onmouseout=function(){e.className="vis-configuration vis-config-button"};this.optionsContainer=document.createElement("div");this.optionsContainer.className="vis-configuration vis-config-option-container";this.domElements.push(this.optionsContainer);this.domElements.push(e)}}},{key:"_setupPopup",value:function(a,e){var h=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var u=document.createElement("div");u.id="vis-configuration-popup";u.className="vis-configuration-popup";
u.innerHTML=a;u.onclick=function(){h._removePopup()};this.popupCounter+=1;this.popupDiv={html:u,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var a=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=
e.left+"px";this.popupDiv.html.style.top=e.top-30+"px";document.body.appendChild(this.popupDiv.html);this.popupDiv.hideTimeout=setTimeout(function(){a.popupDiv.html.style.opacity=0},1500);this.popupDiv.deleteTimeout=setTimeout(function(){a._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(a,e,h){var u=document.createElement("input");u.type="checkbox";u.className="vis-configuration vis-config-checkbox";u.checked=a;void 0!==e&&(u.checked=e,e!==a&&("object"===ka(a)?e!==a.enabled&&this.changedOptions.push({path:h,
value:e}):this.changedOptions.push({path:h,value:e})));var C=this;u.onchange=function(){C._update(this.checked,h)};a=this._makeLabel(h[h.length-1],h);this._makeItem(h,a,u)}},{key:"_makeTextInput",value:function(a,e,h){var u=document.createElement("input");u.type="text";u.className="vis-configuration vis-config-text";u.value=e;e!==a&&this.changedOptions.push({path:h,value:e});var C=this;u.onchange=function(){C._update(this.value,h)};a=this._makeLabel(h[h.length-1],h);this._makeItem(h,a,u)}},{key:"_makeColorField",
value:function(a,e,h){var u=this;a=a[1];var C=document.createElement("div");e=void 0===e?a:e;"none"!==e?(C.className="vis-configuration vis-config-colorBlock",C.style.backgroundColor=e):C.className="vis-configuration vis-config-colorBlock none";e=void 0===e?a:e;C.onclick=function(){u._showColorPicker(e,C,h)};a=this._makeLabel(h[h.length-1],h);this._makeItem(h,a,C)}},{key:"_showColorPicker",value:function(a,e,h){var u=this;e.onclick=function(){};this.colorPicker.insertTo(e);this.colorPicker.show();
this.colorPicker.setColor(a);this.colorPicker.setUpdateCallback(function(C){C="rgba("+C.r+","+C.g+","+C.b+","+C.a+")";e.style.backgroundColor=C;u._update(C,h)});this.colorPicker.setCloseCallback(function(){e.onclick=function(){u._showColorPicker(a,e,h)}})}},{key:"_handleObject",value:function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,u=this.options.filter,C=!1,W;for(W in a)if(Object.prototype.hasOwnProperty.call(a,
W)){var za=!0;var eb=a[W],Eb=(0,La.copyAndExtendArray)(e,W);"function"===typeof u&&(za=u(W,e),!1===za&&!(eb instanceof Array)&&"string"!==typeof eb&&"boolean"!==typeof eb&&eb instanceof Object&&(this.allowCreation=!1,za=this._handleObject(eb,Eb,!0),this.allowCreation=!1===h));!1!==za&&(C=!0,za=this._getValue(Eb),eb instanceof Array?this._handleArray(eb,za,Eb):"string"===typeof eb?this._makeTextInput(eb,za,Eb):"boolean"===typeof eb?this._makeCheckbox(eb,za,Eb):eb instanceof Object?(za=!0,-1!==e.indexOf("physics")&&
this.moduleOptions.physics.solver!==W&&"wind"!==W&&(za=!1),!0===za&&(void 0!==eb.enabled?(za=(0,La.copyAndExtendArray)(Eb,"enabled"),za=this._getValue(za),!0===za?(za=this._makeLabel(W,Eb,!0),this._makeItem(Eb,za),C=this._handleObject(eb,Eb)||C):this._makeCheckbox(eb,za,Eb)):(za=this._makeLabel(W,Eb,!0),this._makeItem(Eb,za),C=this._handleObject(eb,Eb)||C))):console.error("dont know how to handle",eb,W,Eb))}return C}},{key:"_handleArray",value:function(a,e,h){"string"===typeof a[0]&&"color"===a[0]?
(this._makeColorField(a,e,h),a[1]!==e&&this.changedOptions.push({path:h,value:e})):"string"===typeof a[0]?(this._makeDropdown(a,e,h),a[0]!==e&&this.changedOptions.push({path:h,value:e})):"number"===typeof a[0]&&(this._makeRange(a,e,h),a[0]!==e&&this.changedOptions.push({path:h,value:Number(e)}))}},{key:"_update",value:function(a,e){a=this._constructOptions(a,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",a);this.initialized=
!0;this.parent.setOptions(a)}},{key:"_constructOptions",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},u=h;a="true"===a?!0:a;a="false"===a?!1:a;for(var C=0;C<e.length;C++)"global"!==e[C]&&(void 0===u[e[C]]&&(u[e[C]]={}),C!==e.length-1?u=u[e[C]]:u[e[C]]=a);return h}},{key:"_printOptions",value:function(){var a=this.getOptions();this.optionsContainer.innerHTML="\x3cpre\x3evar options \x3d "+JSON.stringify(a,null,2)+"\x3c/pre\x3e"}},{key:"getOptions",value:function(){for(var a=
{},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,a);return a}}]);return N}(),B="arrow bar box circle crow curve diamond image inv_curve inv_triangle triangle vee".split(" "),T={configure:{enabled:{"boolean":"boolean"},filter:{"boolean":"boolean",string:"string",array:"array","function":"function"},container:{dom:"dom"},showButton:{"boolean":"boolean"},__type__:{object:"object","boolean":"boolean",string:"string",array:"array",
"function":"function"}},edges:{arrows:{to:{enabled:{"boolean":"boolean"},scaleFactor:{number:"number"},type:{string:B},imageHeight:{number:"number"},imageWidth:{number:"number"},src:{string:"string"},__type__:{object:"object","boolean":"boolean"}},middle:{enabled:{"boolean":"boolean"},scaleFactor:{number:"number"},type:{string:B},imageWidth:{number:"number"},imageHeight:{number:"number"},src:{string:"string"},__type__:{object:"object","boolean":"boolean"}},from:{enabled:{"boolean":"boolean"},scaleFactor:{number:"number"},
type:{string:B},imageWidth:{number:"number"},imageHeight:{number:"number"},src:{string:"string"},__type__:{object:"object","boolean":"boolean"}},__type__:{string:["from","to","middle"],object:"object"}},endPointOffset:{from:{number:"number"},to:{number:"number"},__type__:{object:"object",number:"number"}},arrowStrikethrough:{"boolean":"boolean"},background:{enabled:{"boolean":"boolean"},color:{string:"string"},size:{number:"number"},dashes:{"boolean":"boolean",array:"array"},__type__:{object:"object",
"boolean":"boolean"}},chosen:{label:{"boolean":"boolean","function":"function"},edge:{"boolean":"boolean","function":"function"},__type__:{object:"object","boolean":"boolean"}},color:{color:{string:"string"},highlight:{string:"string"},hover:{string:"string"},inherit:{string:["from","to","both"],"boolean":"boolean"},opacity:{number:"number"},__type__:{object:"object",string:"string"}},dashes:{"boolean":"boolean",array:"array"},font:{color:{string:"string"},size:{number:"number"},face:{string:"string"},
background:{string:"string"},strokeWidth:{number:"number"},strokeColor:{string:"string"},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:"number"},multi:{"boolean":"boolean",string:"string"},bold:{color:{string:"string"},size:{number:"number"},face:{string:"string"},mod:{string:"string"},vadjust:{number:"number"},__type__:{object:"object",string:"string"}},boldital:{color:{string:"string"},size:{number:"number"},face:{string:"string"},mod:{string:"string"},vadjust:{number:"number"},
__type__:{object:"object",string:"string"}},ital:{color:{string:"string"},size:{number:"number"},face:{string:"string"},mod:{string:"string"},vadjust:{number:"number"},__type__:{object:"object",string:"string"}},mono:{color:{string:"string"},size:{number:"number"},face:{string:"string"},mod:{string:"string"},vadjust:{number:"number"},__type__:{object:"object",string:"string"}},__type__:{object:"object",string:"string"}},hidden:{"boolean":"boolean"},hoverWidth:{"function":"function",number:"number"},
label:{string:"string",undefined:"undefined"},labelHighlightBold:{"boolean":"boolean"},length:{number:"number",undefined:"undefined"},physics:{"boolean":"boolean"},scaling:{min:{number:"number"},max:{number:"number"},label:{enabled:{"boolean":"boolean"},min:{number:"number"},max:{number:"number"},maxVisible:{number:"number"},drawThreshold:{number:"number"},__type__:{object:"object","boolean":"boolean"}},customScalingFunction:{"function":"function"},__type__:{object:"object"}},selectionWidth:{"function":"function",
number:"number"},selfReferenceSize:{number:"number"},selfReference:{size:{number:"number"},angle:{number:"number"},renderBehindTheNode:{"boolean":"boolean"},__type__:{object:"object"}},shadow:{enabled:{"boolean":"boolean"},color:{string:"string"},size:{number:"number"},x:{number:"number"},y:{number:"number"},__type__:{object:"object","boolean":"boolean"}},smooth:{enabled:{"boolean":"boolean"},type:{string:"dynamic continuous discrete diagonalCross straightCross horizontal vertical curvedCW curvedCCW cubicBezier".split(" ")},
roundness:{number:"number"},forceDirection:{string:["horizontal","vertical","none"],"boolean":"boolean"},__type__:{object:"object","boolean":"boolean"}},title:{string:"string",undefined:"undefined"},width:{number:"number"},widthConstraint:{maximum:{number:"number"},__type__:{object:"object","boolean":"boolean",number:"number"}},value:{number:"number",undefined:"undefined"},__type__:{object:"object"}},groups:{useDefaultGroups:{"boolean":"boolean"},__any__:"get from nodes, will be overwritten below",
__type__:{object:"object"}},interaction:{dragNodes:{"boolean":"boolean"},dragView:{"boolean":"boolean"},hideEdgesOnDrag:{"boolean":"boolean"},hideEdgesOnZoom:{"boolean":"boolean"},hideNodesOnDrag:{"boolean":"boolean"},hover:{"boolean":"boolean"},keyboard:{enabled:{"boolean":"boolean"},speed:{x:{number:"number"},y:{number:"number"},zoom:{number:"number"},__type__:{object:"object"}},bindToWindow:{"boolean":"boolean"},__type__:{object:"object","boolean":"boolean"}},multiselect:{"boolean":"boolean"},
navigationButtons:{"boolean":"boolean"},selectable:{"boolean":"boolean"},selectConnectedEdges:{"boolean":"boolean"},hoverConnectedEdges:{"boolean":"boolean"},tooltipDelay:{number:"number"},zoomView:{"boolean":"boolean"},zoomSpeed:{number:"number"},__type__:{object:"object"}},layout:{randomSeed:{undefined:"undefined",number:"number",string:"string"},improvedLayout:{"boolean":"boolean"},clusterThreshold:{number:"number"},hierarchical:{enabled:{"boolean":"boolean"},levelSeparation:{number:"number"},
nodeSpacing:{number:"number"},treeSpacing:{number:"number"},blockShifting:{"boolean":"boolean"},edgeMinimization:{"boolean":"boolean"},parentCentralization:{"boolean":"boolean"},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:"object","boolean":"boolean"}},__type__:{object:"object"}},manipulation:{enabled:{"boolean":"boolean"},initiallyActive:{"boolean":"boolean"},addNode:{"boolean":"boolean","function":"function"},
addEdge:{"boolean":"boolean","function":"function"},editNode:{"function":"function"},editEdge:{editWithoutDrag:{"function":"function"},__type__:{object:"object","boolean":"boolean","function":"function"}},deleteNode:{"boolean":"boolean","function":"function"},deleteEdge:{"boolean":"boolean","function":"function"},controlNodeStyle:"get from nodes, will be overwritten below",__type__:{object:"object","boolean":"boolean"}},nodes:{borderWidth:{number:"number"},borderWidthSelected:{number:"number",undefined:"undefined"},
brokenImage:{string:"string",undefined:"undefined"},chosen:{label:{"boolean":"boolean","function":"function"},node:{"boolean":"boolean","function":"function"},__type__:{object:"object","boolean":"boolean"}},color:{border:{string:"string"},background:{string:"string"},highlight:{border:{string:"string"},background:{string:"string"},__type__:{object:"object",string:"string"}},hover:{border:{string:"string"},background:{string:"string"},__type__:{object:"object",string:"string"}},__type__:{object:"object",
string:"string"}},opacity:{number:"number",undefined:"undefined"},fixed:{x:{"boolean":"boolean"},y:{"boolean":"boolean"},__type__:{object:"object","boolean":"boolean"}},font:{align:{string:"string"},color:{string:"string"},size:{number:"number"},face:{string:"string"},background:{string:"string"},strokeWidth:{number:"number"},strokeColor:{string:"string"},vadjust:{number:"number"},multi:{"boolean":"boolean",string:"string"},bold:{color:{string:"string"},size:{number:"number"},face:{string:"string"},
mod:{string:"string"},vadjust:{number:"number"},__type__:{object:"object",string:"string"}},boldital:{color:{string:"string"},size:{number:"number"},face:{string:"string"},mod:{string:"string"},vadjust:{number:"number"},__type__:{object:"object",string:"string"}},ital:{color:{string:"string"},size:{number:"number"},face:{string:"string"},mod:{string:"string"},vadjust:{number:"number"},__type__:{object:"object",string:"string"}},mono:{color:{string:"string"},size:{number:"number"},face:{string:"string"},
mod:{string:"string"},vadjust:{number:"number"},__type__:{object:"object",string:"string"}},__type__:{object:"object",string:"string"}},group:{string:"string",number:"number",undefined:"undefined"},heightConstraint:{minimum:{number:"number"},valign:{string:"string"},__type__:{object:"object","boolean":"boolean",number:"number"}},hidden:{"boolean":"boolean"},icon:{face:{string:"string"},code:{string:"string"},size:{number:"number"},color:{string:"string"},weight:{string:"string",number:"number"},__type__:{object:"object"}},
id:{string:"string",number:"number"},image:{selected:{string:"string",undefined:"undefined"},unselected:{string:"string",undefined:"undefined"},__type__:{object:"object",string:"string"}},imagePadding:{top:{number:"number"},right:{number:"number"},bottom:{number:"number"},left:{number:"number"},__type__:{object:"object",number:"number"}},label:{string:"string",undefined:"undefined"},labelHighlightBold:{"boolean":"boolean"},level:{number:"number",undefined:"undefined"},margin:{top:{number:"number"},
right:{number:"number"},bottom:{number:"number"},left:{number:"number"},__type__:{object:"object",number:"number"}},mass:{number:"number"},physics:{"boolean":"boolean"},scaling:{min:{number:"number"},max:{number:"number"},label:{enabled:{"boolean":"boolean"},min:{number:"number"},max:{number:"number"},maxVisible:{number:"number"},drawThreshold:{number:"number"},__type__:{object:"object","boolean":"boolean"}},customScalingFunction:{"function":"function"},__type__:{object:"object"}},shadow:{enabled:{"boolean":"boolean"},
color:{string:"string"},size:{number:"number"},x:{number:"number"},y:{number:"number"},__type__:{object:"object","boolean":"boolean"}},shape:{string:"custom ellipse circle database box text image circularImage diamond dot star triangle triangleDown square icon hexagon".split(" ")},customRenderer:{"function":"function"},shapeProperties:{borderDashes:{"boolean":"boolean",array:"array"},borderRadius:{number:"number"},interpolation:{"boolean":"boolean"},useImageSize:{"boolean":"boolean"},useBorderWithImage:{"boolean":"boolean"},
coordinateOrigin:{string:["center","top-left"]},__type__:{object:"object"}},size:{number:"number"},title:{string:"string",dom:"dom",undefined:"undefined"},value:{number:"number",undefined:"undefined"},widthConstraint:{minimum:{number:"number"},maximum:{number:"number"},__type__:{object:"object","boolean":"boolean",number:"number"}},x:{number:"number"},y:{number:"number"},__type__:{object:"object"}},physics:{enabled:{"boolean":"boolean"},barnesHut:{theta:{number:"number"},gravitationalConstant:{number:"number"},
centralGravity:{number:"number"},springLength:{number:"number"},springConstant:{number:"number"},damping:{number:"number"},avoidOverlap:{number:"number"},__type__:{object:"object"}},forceAtlas2Based:{theta:{number:"number"},gravitationalConstant:{number:"number"},centralGravity:{number:"number"},springLength:{number:"number"},springConstant:{number:"number"},damping:{number:"number"},avoidOverlap:{number:"number"},__type__:{object:"object"}},repulsion:{centralGravity:{number:"number"},springLength:{number:"number"},
springConstant:{number:"number"},nodeDistance:{number:"number"},damping:{number:"number"},__type__:{object:"object"}},hierarchicalRepulsion:{centralGravity:{number:"number"},springLength:{number:"number"},springConstant:{number:"number"},nodeDistance:{number:"number"},damping:{number:"number"},avoidOverlap:{number:"number"},__type__:{object:"object"}},maxVelocity:{number:"number"},minVelocity:{number:"number"},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{"boolean":"boolean"},
iterations:{number:"number"},updateInterval:{number:"number"},onlyDynamicEdges:{"boolean":"boolean"},fit:{"boolean":"boolean"},__type__:{object:"object","boolean":"boolean"}},timestep:{number:"number"},adaptiveTimestep:{"boolean":"boolean"},wind:{x:{number:"number"},y:{number:"number"},__type__:{object:"object"}},__type__:{object:"object","boolean":"boolean"}},autoResize:{"boolean":"boolean"},clickToUse:{"boolean":"boolean"},locale:{string:"string"},locales:{__any__:{any:"any"},__type__:{object:"object"}},
height:{string:"string"},width:{string:"string"},__type__:{object:"object"}};T.groups.__any__=T.nodes;T.manipulation.controlNodeStyle=T.nodes;var pa={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial",
"verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:"ellipse box circle database diamond dot square star text triangle triangleDown hexagon".split(" "),shapeProperties:{borderDashes:!1,
borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color",
"#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/
2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:"dynamic continuous discrete diagonalCross straightCross horizontal vertical curvedCW curvedCCW cubicBezier".split(" "),forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],
blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1E3,25],zoomView:!0,zoomSpeed:[1,
.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2E3,-3E4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,
0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},Da=
Object.freeze({__proto__:null,allOptions:T,configureOptions:pa});wb.networkOptions=Da;var ab=function(){function N(){P(this,N)}va(N,[{key:"getDistances",value:function(a,e,h){var u={};a=a.edges;for(var C=0;C<e.length;C++){var W={};u[e[C]]=W;for(var za=0;za<e.length;za++)W[e[za]]=C==za?0:1E9}for(C=0;C<h.length;C++)W=a[h[C]],!0===W.connected&&void 0!==u[W.fromId]&&void 0!==u[W.toId]&&(u[W.fromId][W.toId]=1,u[W.toId][W.fromId]=1);h=e.length;for(a=0;a<h;a++)for(C=e[a],W=u[C],za=0;za<h-1;za++)for(var eb=
e[za],Eb=u[eb],$b=za+1;$b<h;$b++){var jc=e[$b],uc=u[jc],zc=Math.min(Eb[jc],Eb[C]+W[jc]);Eb[jc]=zc;uc[eb]=zc}return u}}]);return N}(),ob=function(){function N(a,e,h){P(this,N);this.body=a;this.springLength=e;this.springConstant=h;this.distanceSolver=new ab}va(N,[{key:"setOptions",value:function(a){a&&(a.springLength&&(this.springLength=a.springLength),a.springConstant&&(this.springConstant=a.springConstant))}},{key:"solve",value:function(a,e){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:
!1,u=this.distanceSolver.getDistances(this.body,a,e);this._createL_matrix(u);this._createK_matrix(u);this._createE_matrix();u=0;for(var C=Math.max(1E3,Math.min(10*this.body.nodeIndices.length,6E3)),W=1E9,za,eb,Eb,$b,jc;.01<W&&u<C;)for(u+=1,W=this._getHighestEnergyNode(h),jc=ra(W,4),za=jc[0],W=jc[1],eb=jc[2],Eb=jc[3],$b=W,jc=0;1<$b&&5>jc;)jc+=1,this._moveNode(za,eb,Eb),eb=this._getEnergy(za),Eb=ra(eb,3),$b=Eb[0],eb=Eb[1],Eb=Eb[2]}},{key:"_getHighestEnergyNode",value:function(a){for(var e=this.body.nodeIndices,
h=this.body.nodes,u=0,C=e[0],W=0,za=0,eb=0;eb<e.length;eb++){var Eb=e[eb];if(!1===h[Eb].predefinedPosition||!0===h[Eb].isCluster&&!0===a||!0===h[Eb].options.fixed.x||!0===h[Eb].options.fixed.y){var $b=this._getEnergy(Eb),jc=ra($b,3);$b=jc[0];var uc=jc[1];jc=jc[2];u<$b&&(u=$b,C=Eb,W=uc,za=jc)}}return[C,u,W,za]}},{key:"_getEnergy",value:function(a){var e=ra(this.E_sums[a],2);a=e[0];e=e[1];return[Math.sqrt(Math.pow(a,2)+Math.pow(e,2)),a,e]}},{key:"_moveNode",value:function(a,e,h){for(var u=this.body.nodeIndices,
C=this.body.nodes,W=0,za=0,eb=0,Eb=C[a].x,$b=C[a].y,jc=this.K_matrix[a],uc=this.L_matrix[a],zc=0;zc<u.length;zc++){var Ic=u[zc];if(Ic!==a){var Lc=C[Ic].x,Rc=C[Ic].y,Tc=jc[Ic];Ic=uc[Ic];var Zc=1/Math.pow(Math.pow(Eb-Lc,2)+Math.pow($b-Rc,2),1.5);W+=Tc*(1-Ic*Math.pow($b-Rc,2)*Zc);za+=Tc*Ic*(Eb-Lc)*($b-Rc)*Zc;eb+=Tc*(1-Ic*Math.pow(Eb-Lc,2)*Zc)}}u=W;h=(e/u+h/za)/(za/u-eb/za);C[a].x+=-(za*h+e)/u;C[a].y+=h;this._updateE_matrix(a)}},{key:"_createL_matrix",value:function(a){var e=this.body.nodeIndices,h=this.springLength;
this.L_matrix=[];for(var u=0;u<e.length;u++){this.L_matrix[e[u]]={};for(var C=0;C<e.length;C++)this.L_matrix[e[u]][e[C]]=h*a[e[u]][e[C]]}}},{key:"_createK_matrix",value:function(a){var e=this.body.nodeIndices,h=this.springConstant;this.K_matrix=[];for(var u=0;u<e.length;u++){this.K_matrix[e[u]]={};for(var C=0;C<e.length;C++)this.K_matrix[e[u]][e[C]]=h*Math.pow(a[e[u]][e[C]],-2)}}},{key:"_createE_matrix",value:function(){var a=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={};this.E_sums={};
for(var h=0;h<a.length;h++)this.E_matrix[a[h]]=[];for(h=0;h<a.length;h++){for(var u=a[h],C=e[u].x,W=e[u].y,za=0,eb=0,Eb=h;Eb<a.length;Eb++){var $b=a[Eb];if($b!==u){var jc=e[$b].x,uc=e[$b].y,zc=1/Math.sqrt(Math.pow(C-jc,2)+Math.pow(W-uc,2));this.E_matrix[u][Eb]=[this.K_matrix[u][$b]*(C-jc-this.L_matrix[u][$b]*(C-jc)*zc),this.K_matrix[u][$b]*(W-uc-this.L_matrix[u][$b]*(W-uc)*zc)];this.E_matrix[$b][h]=this.E_matrix[u][Eb];za+=this.E_matrix[u][Eb][0];eb+=this.E_matrix[u][Eb][1]}}this.E_sums[u]=[za,eb]}}},
{key:"_updateE_matrix",value:function(a){for(var e=this.body.nodeIndices,h=this.body.nodes,u=this.E_matrix[a],C=this.K_matrix[a],W=this.L_matrix[a],za=h[a].x,eb=h[a].y,Eb=0,$b=0,jc=0;jc<e.length;jc++){var uc=e[jc];if(uc!==a){var zc=u[jc],Ic=zc[0];zc=zc[1];var Lc=h[uc].x,Rc=h[uc].y,Tc=1/Math.sqrt(Math.pow(za-Lc,2)+Math.pow(eb-Rc,2));Lc=C[uc]*(za-Lc-W[uc]*(za-Lc)*Tc);Rc=C[uc]*(eb-Rc-W[uc]*(eb-Rc)*Tc);u[jc]=[Lc,Rc];Eb+=Lc;$b+=Rc;uc=this.E_sums[uc];uc[0]+=Lc-Ic;uc[1]+=Rc-zc}}this.E_sums[a]=[Eb,$b]}}]);
return N}();(0,qb["default"])(Za.prototype);Za.prototype.setOptions=function(N){var a=this;null===N&&(N=void 0);if(void 0!==N){!0===fc.validate(N,T)&&console.log("%cErrors have been found in the supplied options object.","background: #FFeeee; color: #dd0000");(0,La.selectiveDeepExtend)(["locale","locales","clickToUse"],this.options,N);void 0!==N.locale&&(N.locale=Ga(N.locales||this.options.locales,N.locale));N=this.layoutEngine.setOptions(N.layout,N);this.canvas.setOptions(N);this.groups.setOptions(N.groups);
this.nodesHandler.setOptions(N.nodes);this.edgesHandler.setOptions(N.edges);this.physics.setOptions(N.physics);this.manipulation.setOptions(N.manipulation,N,this.options);this.interactionHandler.setOptions(N.interaction);this.renderer.setOptions(N.interaction);this.selectionHandler.setOptions(N.interaction);void 0!==N.groups&&this.body.emitter.emit("refreshNodes");"configure"in N&&(this.configurator||(this.configurator=new Ge(this,this.body.container,pa,this.canvas.pixelRatio)),this.configurator.setOptions(N.configure));
if(this.configurator&&!0===this.configurator.options.enabled){var e={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};(0,La.deepExtend)(e.nodes,this.nodesHandler.options);(0,La.deepExtend)(e.edges,this.edgesHandler.options);(0,La.deepExtend)(e.layout,this.layoutEngine.options);(0,La.deepExtend)(e.interaction,this.selectionHandler.options);(0,La.deepExtend)(e.interaction,this.renderer.options);(0,La.deepExtend)(e.interaction,this.interactionHandler.options);(0,La.deepExtend)(e.manipulation,
this.manipulation.options);(0,La.deepExtend)(e.physics,this.physics.options);(0,La.deepExtend)(e.global,this.canvas.options);(0,La.deepExtend)(e.global,this.options);this.configurator.setModuleOptions(e)}void 0!==N.clickToUse?!0===N.clickToUse?void 0===this.activator&&(this.activator=new Fa(this.canvas.frame),this.activator.on("change",function(){a.body.emitter.emit("activate")})):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate");
this.canvas.setSize();this.body.emitter.emit("startSimulation")}};Za.prototype._updateVisibleIndices=function(){var N=this.body.nodes,a=this.body.edges;this.body.nodeIndices=[];this.body.edgeIndices=[];for(var e in N)Object.prototype.hasOwnProperty.call(N,e)&&(this.clustering._isClusteredNode(e)||!1!==N[e].options.hidden||this.body.nodeIndices.push(N[e].id));for(var h in a)if(Object.prototype.hasOwnProperty.call(a,h)){e=a[h];var u=N[e.fromId],C=N[e.toId],W=void 0!==u&&void 0!==C;!this.clustering._isClusteredEdge(h)&&
!1===e.options.hidden&&W&&!1===u.options.hidden&&!1===C.options.hidden&&this.body.edgeIndices.push(e.id)}};Za.prototype.bindEventListeners=function(){var N=this;this.body.emitter.on("_dataChanged",function(){N.edgesHandler._updateState();N.body.emitter.emit("_dataUpdated")});this.body.emitter.on("_dataUpdated",function(){N.clustering._updateState();N._updateVisibleIndices();N._updateValueRange(N.body.nodes);N._updateValueRange(N.body.edges);N.body.emitter.emit("startSimulation");N.body.emitter.emit("_requestRedraw")})};
Za.prototype.setData=function(N){this.body.emitter.emit("resetPhysics");this.body.emitter.emit("_resetData");this.selectionHandler.unselectAll();if(N&&N.dot&&(N.nodes||N.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');this.setOptions(N&&N.options);N&&N.dot?(console.log("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data \x3d vis.network.convertDot(dotString);"),
N=Q(N.dot),this.setData(N)):N&&N.gephi?(console.log("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data \x3d vis.network.convertGephi(gephiJson);"),N=oa(N.gephi),this.setData(N)):(this.nodesHandler.setData(N&&N.nodes,!0),this.edgesHandler.setData(N&&N.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),
this.body.emitter.emit("initPhysics"))};Za.prototype.destroy=function(){this.body.emitter.emit("destroy");this.body.emitter.off();this.off();delete this.groups;delete this.canvas;delete this.selectionHandler;delete this.interactionHandler;delete this.view;delete this.renderer;delete this.physics;delete this.layoutEngine;delete this.clustering;delete this.manipulation;delete this.nodesHandler;delete this.edgesHandler;delete this.configurator;delete this.images;for(var N in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,
N)&&delete this.body.nodes[N];for(var a in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,a)&&delete this.body.edges[a];(0,La.recursiveDOMDelete)(this.body.container)};Za.prototype._updateValueRange=function(N){var a,e=void 0,h=void 0,u=0;for(a in N)if(Object.prototype.hasOwnProperty.call(N,a)){var C=N[a].getValue();void 0!==C&&(e=void 0===e?C:Math.min(C,e),h=void 0===h?C:Math.max(C,h),u+=C)}if(void 0!==e&&void 0!==h)for(a in N)Object.prototype.hasOwnProperty.call(N,a)&&N[a].setValueRange(e,
h,u)};Za.prototype.isActive=function(){return!this.activator||this.activator.active};Za.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)};Za.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)};Za.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)};Za.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)};Za.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,
arguments)};Za.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)};Za.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)};Za.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)};Za.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)};Za.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,
arguments)};Za.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)};Za.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)};Za.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)};Za.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)};Za.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,
arguments)};Za.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)};Za.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)};Za.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)};Za.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)};Za.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,
arguments)};Za.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)};Za.prototype.editNodeMode=function(){console.log("Deprecated: Please use editNode instead of editNodeMode.");return this.manipulation.editNode.apply(this.manipulation,arguments)};Za.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)};Za.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,
arguments)};Za.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)};Za.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)};Za.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)};Za.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)};Za.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,
arguments)};Za.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)};Za.prototype.getConnectedNodes=function(N){return void 0!==this.body.nodes[N]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)};Za.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)};Za.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,
arguments)};Za.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)};Za.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)};Za.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)};Za.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)};Za.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodes.apply(this.selectionHandler,
arguments)};Za.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdges.apply(this.selectionHandler,arguments)};Za.prototype.getNodeAt=function(){var N=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==N&&void 0!==N.id?N.id:N};Za.prototype.getEdgeAt=function(){var N=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==N&&void 0!==N.id?N.id:N};Za.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,
arguments)};Za.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)};Za.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments);this.redraw()};Za.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)};Za.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)};Za.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,
arguments)};Za.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)};Za.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)};Za.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)};Za.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)};Za.prototype.getOptionsFromConfigurator=function(){var N={};this.configurator&&(N=this.configurator.getOptions.apply(this.configurator));return N};wb.parseDOTNetwork=
Q}
goog.provide("module$node_modules$vis_network$esnext$esm$vis_network");
goog.global. module$node_modules$vis_network$esnext$esm$vis_network=shadow.js.require(72, {});
