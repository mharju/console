shadow$provide[14]=function(Nc,Vb,pc,wb){!function(p,ma,Ma){L.drawVersion="1.0.4";L.Draw={};L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},
radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"\x3cstrong\x3eError:\x3c/strong\x3e shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},
simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}};
L.Draw.Event={};L.Draw.Event.CREATED="draw:created";L.Draw.Event.EDITED="draw:edited";L.Draw.Event.DELETED="draw:deleted";L.Draw.Event.DRAWSTART="draw:drawstart";L.Draw.Event.DRAWSTOP="draw:drawstop";L.Draw.Event.DRAWVERTEX="draw:drawvertex";L.Draw.Event.EDITSTART="draw:editstart";L.Draw.Event.EDITMOVE="draw:editmove";L.Draw.Event.EDITRESIZE="draw:editresize";L.Draw.Event.EDITVERTEX="draw:editvertex";L.Draw.Event.EDITSTOP="draw:editstop";L.Draw.Event.DELETESTART="draw:deletestart";L.Draw.Event.DELETESTOP=
"draw:deletestop";L.Draw.Event.TOOLBAROPENED="draw:toolbaropened";L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed";L.Draw.Event.MARKERCONTEXT="draw:markercontext";L.Draw=L.Draw||{};L.Draw.Feature=L.Handler.extend({initialize:function(y,O){this._map=y;this._container=y._container;this._overlayPane=y._panes.overlayPane;this._popupPane=y._panes.popupPane;O&&O.shapeOptions&&(O.shapeOptions=L.Util.extend({},this.options.shapeOptions,O.shapeOptions));L.setOptions(this,O);y=L.version.split(".");1===parseInt(y[0],
10)&&2<=parseInt(y[1],10)?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var y=this._map;y&&
(L.DomUtil.disableTextSelection(),y.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(y){L.setOptions(this,y)},_fireCreatedEvent:function(y){this._map.fire(L.Draw.Event.CREATED,{layer:y,layerType:this.type})},_cancelDrawing:function(y){27===
y.keyCode&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}});L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4E3,
shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2E3,factor:1,maxPoints:0},initialize:function(y,O){L.Browser.touch&&(this.options.icon=this.options.touchIcon);this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error;O&&O.drawError&&(O.drawError=L.Util.extend({},this.options.drawError,O.drawError));this.type=L.Draw.Polyline.TYPE;L.Draw.Feature.prototype.initialize.call(this,y,O)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);
this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,
this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._clearHideErrorTimeout();this._cleanUpShape();this._map.removeLayer(this._markerGroup);delete this._markerGroup;delete this._markers;
this._map.removeLayer(this._poly);delete this._poly;this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this);this._map.removeLayer(this._mouseMarker);delete this._mouseMarker;this._clearGuides();this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,
this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(1>=this._markers.length)){var y=this._markers.pop(),O=this._poly,X=O.getLatLngs(),la=X.splice(-1,1)[0];this._poly.setLatLngs(X);this._markerGroup.removeLayer(y);2>O.getLatLngs().length&&this._map.removeLayer(O);this._vertexChanged(la,!1)}},addVertex:function(y){if(2<=this._markers.length&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(y))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip();
this._markers.push(this._createMarker(y));this._poly.addLatLng(y);2===this._poly.getLatLngs().length&&this._map.addLayer(this._poly);this._vertexChanged(y,!0)},completeShape:function(){1>=this._markers.length||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var y=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs();y=this._poly.newLatLngIntersects(y[y.length-1]);if(!this.options.allowIntersection&&
y||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){null!==this._markers&&this._updateGuide()},_onMouseMove:function(y){var O=this._map.mouseEventToLayerPoint(y.originalEvent),X=this._map.layerPointToLatLng(O);this._currentLatLng=X;this._updateTooltip(X);this._updateGuide(O);this._mouseMarker.setLatLng(X);L.DomEvent.preventDefault(y.originalEvent)},_vertexChanged:function(y,
O){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup});this._updateFinishHandler();this._updateRunningMeasure(y,O);this._clearGuides();this._updateTooltip()},_onMouseDown:function(y){this._clickHandled||this._touchHandled||this._disableMarkers||(this._onMouseMove(y),this._clickHandled=!0,this._disableNewMarkers(),y=y.originalEvent,this._startPoint.call(this,y.clientX,y.clientY))},_startPoint:function(y,O){this._mouseDownOrigin=L.point(y,O)},_onMouseUp:function(y){var O=y.originalEvent;
this._endPoint.call(this,O.clientX,O.clientY,y);this._clickHandled=null},_endPoint:function(y,O,X){this._mouseDownOrigin&&(y=L.point(y,O).distanceTo(this._mouseDownOrigin),O=this._calculateFinishDistance(X.latlng),1<this.options.maxPoints&&this.options.maxPoints==this._markers.length+1?(this.addVertex(X.latlng),this._finishShape()):10>O&&L.Browser.touch?this._finishShape():Math.abs(y)<9*(p.devicePixelRatio||1)&&this.addVertex(X.latlng),this._enableNewMarkers());this._mouseDownOrigin=null},_onTouch:function(y){var O,
X,la=y.originalEvent;!la.touches||!la.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(O=la.touches[0].clientX,X=la.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,O,X),this._endPoint.call(this,O,X,y),this._touchHandled=null);this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(y){if(0<this._markers.length){if(this.type===L.Draw.Polyline.TYPE)var O=
this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;O=this._markers[0]}O=this._map.latLngToContainerPoint(O.getLatLng());y=new L.Marker(y,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});y=this._map.latLngToContainerPoint(y.getLatLng());O=O.distanceTo(y)}else O=1/0;return O},_updateFinishHandler:function(){var y=this._markers.length;1<y&&this._markers[y-1].on("click",this._finishShape,this);2<y&&this._markers[y-2].off("click",this._finishShape,
this)},_createMarker:function(y){y=new L.Marker(y,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(y),y},_updateGuide:function(y){var O=this._markers?this._markers.length:0;0<O&&(y=y||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[O-1].getLatLng()),y))},_updateTooltip:function(y){var O=this._getTooltipText();y&&this._tooltip.updatePosition(y);this._errorShown||this._tooltip.updateContent(O)},
_drawGuide:function(y,O){var X=Math.floor(Math.sqrt(Math.pow(O.x-y.x,2)+Math.pow(O.y-y.y,2))),la=this.options.guidelineDistance;var ua=this.options.maxGuideLineLength;la=X>ua?X-ua:la;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));la<X;la+=this.options.guidelineDistance){ua=la/X;ua={x:Math.floor(y.x*(1-ua)+ua*O.x),y:Math.floor(y.y*(1-ua)+ua*O.y)};var Ea=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer);Ea.style.backgroundColor=
this._errorShown?this.options.drawError.color:this.options.shapeOptions.color;L.DomUtil.setPosition(Ea,ua)}},_updateGuideColor:function(y){if(this._guidesContainer)for(var O=0,X=this._guidesContainer.childNodes.length;O<X;O++)this._guidesContainer.childNodes[O].style.backgroundColor=y},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var y,O,X=this.options.showLength;
return 0===this._markers.length?y={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(O=X?this._getMeasurementString():"",y=1===this._markers.length?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:O}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:O}),y},_updateRunningMeasure:function(y,O){var X,la,ua=this._markers.length;1===this._markers.length?this._measurementRunningTotal=0:(X=ua-(O?2:1),la=L.GeometryUtil.isVersion07x()?y.distanceTo(this._markers[X].getLatLng())*
(this.options.factor||1):this._map.distance(y,this._markers[X].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=la*(O?1:-1))},_getMeasurementString:function(){var y,O=this._currentLatLng,X=this._markers[this._markers.length-1].getLatLng();return y=L.GeometryUtil.isVersion07x()?X&&O&&O.distanceTo?this._measurementRunningTotal+O.distanceTo(X)*(this.options.factor||1):this._measurementRunningTotal||0:X&&O?this._measurementRunningTotal+this._map.distance(O,X)*(this.options.factor||
1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(y,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0;this._tooltip.showAsError().updateContent({text:this.options.drawError.message});this._updateGuideColor(this.options.drawError.color);this._poly.setStyle({color:this.options.drawError.color});this._clearHideErrorTimeout();this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},
_hideErrorTooltip:function(){this._errorShown=!1;this._clearHideErrorTimeout();this._tooltip.removeError().updateContent(this._getTooltipText());this._updateGuideColor(this.options.shapeOptions.color);this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout(function(){this._disableMarkers=
!1}.bind(this),50)},_cleanUpShape:function(){1<this._markers.length&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var y=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,y)}});L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,
clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(y,O){L.Draw.Polyline.prototype.initialize.call(this,y,O);this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var y=this._markers.length;1===y&&this._markers[0].on("click",this._finishShape,this);2<y&&(this._markers[y-1].on("dblclick",this._finishShape,this),3<y&&this._markers[y-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var y,O;return 0===this._markers.length?y=L.drawLocal.draw.handlers.polygon.tooltip.start:
3>this._markers.length?(y=L.drawLocal.draw.handlers.polygon.tooltip.cont,O=this._getMeasurementString()):(y=L.drawLocal.draw.handlers.polygon.tooltip.end,O=this._getMeasurementString()),{text:y,subtext:O}},_getMeasurementString:function(){var y=this._area,O="";return y||this.options.showLength?(this.options.showLength&&(O=L.Draw.Polyline.prototype._getMeasurementString.call(this)),y&&(O+="\x3cbr\x3e"+L.GeometryUtil.readableArea(y,this.options.metric,this.options.precision)),O):null},_shapeIsValid:function(){return 3<=
this._markers.length},_vertexChanged:function(y,O){var X;!this.options.allowIntersection&&this.options.showArea&&(X=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(X));L.Draw.Polyline.prototype._vertexChanged.call(this,y,O)},_cleanUpShape:function(){var y=this._markers.length;0<y&&(this._markers[0].off("click",this._finishShape,this),2<y&&this._markers[y-1].off("dblclick",this._finishShape,this))}});L.SimpleShape={};L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},
initialize:function(y,O){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end;L.Draw.Feature.prototype.initialize.call(this,y,O)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,
this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),ma.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(ma,
"mouseup",this._onMouseUp,this),L.DomEvent.off(ma,"touchend",this._onMouseUp,this),ma.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape));this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(y){this._isDrawing=!0;this._startLatLng=y.latlng;L.DomEvent.on(ma,"mouseup",this._onMouseUp,this).on(ma,"touchend",this._onMouseUp,this).preventDefault(y.originalEvent)},_onMouseMove:function(y){y=
y.latlng;this._tooltip.updatePosition(y);this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(y))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()}});L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(y,O){this.type=L.Draw.Rectangle.TYPE;
this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,y,O)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(y){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);var O;if(O=this._isCurrentlyTwoClickDrawing){for(y=y.target;(y=y.parentElement)&&!y.classList.contains("leaflet-pane"););O=!y}O||
L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(y){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,y)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,y),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var y=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,y)},_getTooltipText:function(){var y,O,X,la=L.Draw.SimpleShape.prototype._getTooltipText.call(this),
ua=this.options.showArea;return this._shape&&(y=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),O=L.GeometryUtil.geodesicArea(y),X=ua?L.GeometryUtil.readableArea(O,this.options.metric):""),{text:la.text,subtext:X}}});L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2E3},initialize:function(y,O){this.type=L.Draw.Marker.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start;L.Draw.Feature.prototype.initialize.call(this,
y,O)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this);this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,
this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this);this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(y){y=y.latlng;this._tooltip.updatePosition(y);
this._mouseMarker.setLatLng(y);this._marker?(y=this._mouseMarker.getLatLng(),this._marker.setLatLng(y)):(this._marker=this._createMarker(y),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(y){return new L.Marker(y,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent();this.disable();this.options.repeatMode&&this.enable()},_onTouch:function(y){this._onMouseMove(y);
this._onClick()},_fireCreatedEvent:function(){var y=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,y)}});L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2E3},initialize:function(y,O){this.type=L.Draw.CircleMarker.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start;
L.Draw.Feature.prototype.initialize.call(this,y,O)},_fireCreatedEvent:function(){var y=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,y)},_createMarker:function(y){return new L.CircleMarker(y,this.options)}});L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},
initialize:function(y,O){this.type=L.Draw.Circle.TYPE;this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start;L.Draw.SimpleShape.prototype.initialize.call(this,y,O)},_drawShape:function(y){y=L.GeometryUtil.isVersion07x()?this._startLatLng.distanceTo(y):this._map.distance(this._startLatLng,y);this._shape?this._shape.setRadius(y):(this._shape=new L.Circle(this._startLatLng,y,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var y=new L.Circle(this._startLatLng,
this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,y)},_onMouseMove:function(y){var O=y.latlng;y=this.options.showRadius;var X=this.options.metric;if(this._tooltip.updatePosition(O),this._isDrawing){this._drawShape(O);O=this._shape.getRadius().toFixed(1);var la="";y&&(la=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(O,X,this.options.feet,this.options.nautic));this._tooltip.updateContent({text:this._endLabelText,
subtext:la})}}});L.Edit=L.Edit||{};L.Edit.Marker=L.Handler.extend({initialize:function(y,O){this._marker=y;L.setOptions(this,O)},addHooks:function(){var y=this._marker;y.dragging.enable();y.on("dragend",this._onDragEnd,y);this._toggleMarkerHighlight()},removeHooks:function(){var y=this._marker;y.dragging.disable();y.off("dragend",this._onDragEnd,y);this._toggleMarkerHighlight()},_onDragEnd:function(y){y=y.target;y.edited=!0;this._map.fire(L.Draw.Event.EDITMOVE,{layer:y})},_toggleMarkerHighlight:function(){var y=
this._marker._icon;y&&(y.style.display="none",L.DomUtil.hasClass(y,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(y,"leaflet-edit-marker-selected"),this._offsetMarker(y,-4)):(L.DomUtil.addClass(y,"leaflet-edit-marker-selected"),this._offsetMarker(y,4)),y.style.display="")},_offsetMarker:function(y,O){var X=parseInt(y.style.marginTop,10)-O;O=parseInt(y.style.marginLeft,10)-O;y.style.marginTop=X+"px";y.style.marginLeft=O+"px"}});L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),
this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.Poly=L.Handler.extend({initialize:function(y){this.latlngs=[y._latlngs];y._holes&&(this.latlngs=this.latlngs.concat(y._holes));this._poly=y;this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(y){for(var O=0;O<this._verticesHandlers.length;O++)y(this._verticesHandlers[O])},
addHooks:function(){this._initHandlers();this._eachVertexHandler(function(y){y.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(y){y.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(y){y.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var y=0;y<this.latlngs.length;y++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[y],this._poly.options.poly))},_updateLatLngs:function(y){this.latlngs=[y.layer._latlngs];
y.layer._holes&&(this.latlngs=this.latlngs.concat(y.layer._holes))}});L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1E3}},initialize:function(y,O,X){L.Browser.touch&&(this.options.icon=this.options.touchIcon);this._poly=y;X&&X.drawError&&(X.drawError=
L.Util.extend({},this.options.drawError,X.drawError));this._latlngs=O;L.setOptions(this,X)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var y=this._poly,O=y._path;y instanceof L.Polygon||(y.options.fill=!1,y.options.editing&&(y.options.editing.fill=!1));O&&y.options.editing&&y.options.editing.className&&(y.options.original.className&&y.options.original.className.split(" ").forEach(function(X){L.DomUtil.removeClass(O,
X)}),y.options.editing.className.split(" ").forEach(function(X){L.DomUtil.addClass(O,X)}));y.setStyle(y.options.editing);this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var y=this._poly,O=y._path;O&&y.options.editing&&y.options.editing.className&&(y.options.editing.className.split(" ").forEach(function(X){L.DomUtil.removeClass(O,X)}),y.options.original.className&&y.options.original.className.split(" ").forEach(function(X){L.DomUtil.addClass(O,
X)}));y.setStyle(y.options.original);y._map&&(y._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup);this._markers=[];var y,O=this._defaultShape();var X=0;for(y=O.length;X<y;X++){var la=this._createMarker(O[X],X);la.on("click",this._onMarkerClick,this);la.on("contextmenu",this._onContextMenu,this);this._markers.push(la)}var ua,
Ea;X=0;for(la=y-1;X<y;la=X++)(0!==X||L.Polygon&&this._poly instanceof L.Polygon)&&(ua=this._markers[la],Ea=this._markers[X],this._createMiddleMarker(ua,Ea),this._updatePrevNext(ua,Ea))},_createMarker:function(y,O){var X=new L.Marker.Touch(y,{draggable:!0,icon:this.options.icon});return X._origLatLng=y,X._index=O,X.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",
this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(X),X},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var y=this._defaultShape(),O=[].splice.apply(y,arguments);return this._poly._convertLatLngs(y,!0),this._poly.redraw(),O},_removeMarker:function(y){var O=y._index;this._markerGroup.removeLayer(y);this._markers.splice(O,1);this._spliceLatLngs(O,1);this._updateIndexes(O,-1);y.off("dragstart",this._onMarkerDragStart,this).off("drag",
this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0;this._poly.fire("edit");this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(y){y=y.target;var O=this._poly,X=L.LatLngUtil.cloneLatLng(y._origLatLng);
if(L.extend(y._origLatLng,y._latlng),O.options.poly){var la=O._map._editTooltip;if(!O.options.poly.allowIntersection&&O.intersects()){L.extend(y._origLatLng,X);y.setLatLng(X);var ua=O.options.color;O.setStyle({color:this.options.drawError.color});la&&la.updateContent({text:L.drawLocal.draw.handlers.polyline.error});setTimeout(function(){O.setStyle({color:ua});la&&la.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1E3)}}y._middleLeft&&
y._middleLeft.setLatLng(this._getMiddleLatLng(y._prev,y));y._middleRight&&y._middleRight.setLatLng(this._getMiddleLatLng(y,y._next));this._poly._bounds._southWest=L.latLng(1/0,1/0);this._poly._bounds._northEast=L.latLng(-1/0,-1/0);y=this._poly.getLatLngs();this._poly._convertLatLngs(y,!0);this._poly.redraw();this._poly.fire("editdrag")},_onMarkerClick:function(y){var O=L.Polygon&&this._poly instanceof L.Polygon?4:3;y=y.target;this._defaultShape().length<O||(this._removeMarker(y),this._updatePrevNext(y._prev,
y._next),y._middleLeft&&this._markerGroup.removeLayer(y._middleLeft),y._middleRight&&this._markerGroup.removeLayer(y._middleRight),y._prev&&y._next?this._createMiddleMarker(y._prev,y._next):y._prev?y._next||(y._prev._middleRight=null):y._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(y){y=y.target;this._poly;this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:y,layers:this._markerGroup,poly:this._poly});L.DomEvent.stopPropagation},_onTouchMove:function(y){var O=this._map.mouseEventToLayerPoint(y.originalEvent.touches[0]);
O=this._map.layerPointToLatLng(O);y=y.target;L.extend(y._origLatLng,O);y._middleLeft&&y._middleLeft.setLatLng(this._getMiddleLatLng(y._prev,y));y._middleRight&&y._middleRight.setLatLng(this._getMiddleLatLng(y,y._next));this._poly.redraw();this.updateMarkers()},_updateIndexes:function(y,O){this._markerGroup.eachLayer(function(X){X._index>y&&(X._index+=O)})},_createMiddleMarker:function(y,O){var X=this._getMiddleLatLng(y,O),la=this._createMarker(X);la.setOpacity(.6);y._middleRight=O._middleLeft=la;
var ua=function(){la.off("touchmove",ua,this);var P=O._index;la._index=P;la.off("click",ka,this).on("click",this._onMarkerClick,this);X.lat=la.getLatLng().lat;X.lng=la.getLatLng().lng;this._spliceLatLngs(P,0,X);this._markers.splice(P,0,la);la.setOpacity(1);this._updateIndexes(P,1);O._index++;this._updatePrevNext(y,la);this._updatePrevNext(la,O);this._poly.fire("editstart")};var Ea=function(){la.off("dragstart",ua,this);la.off("dragend",Ea,this);la.off("touchmove",ua,this);this._createMiddleMarker(y,
la);this._createMiddleMarker(la,O)};var ka=function(){ua.call(this);Ea.call(this);this._fireEdit()};la.on("click",ka,this).on("dragstart",ua,this).on("dragend",Ea,this).on("touchmove",ua,this);this._markerGroup.addLayer(la)},_updatePrevNext:function(y,O){y&&(y._next=O);O&&(O._prev=y)},_getMiddleLatLng:function(y,O){var X=this._poly._map;y=X.project(y.getLatLng());O=X.project(O.getLatLng());return X.unproject(y._add(O)._divideBy(2))}});L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&
(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))});L.Edit=L.Edit||{};L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,
8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(y,O){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon);
this._shape=y;L.Util.setOptions(this,O)},addHooks:function(){var y=this._shape;this._shape._map&&(this._map=this._shape._map,y.setStyle(y.options.editing),y._map&&(this._map=y._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var y=this._shape;if(y.setStyle(y.options.original),y._map){this._unbindMarker(this._moveMarker);y=0;for(var O=this._resizeMarkers.length;y<O;y++)this._unbindMarker(this._resizeMarkers[y]);this._resizeMarkers=null;this._map.removeLayer(this._markerGroup);
delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers();this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup);this._createMoveMarker();this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(y,O){y=new L.Marker.Touch(y,{draggable:!0,icon:O,zIndexOffset:10});return this._bindMarker(y),this._markerGroup.addLayer(y),y},_bindMarker:function(y){y.on("dragstart",
this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(y){y.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",
this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(y){y.target.setOpacity(0);this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0;this._shape.fire("edit")},_onMarkerDrag:function(y){y=y.target;var O=y.getLatLng();y===this._moveMarker?this._move(O):this._resize(O);this._shape.redraw();this._shape.fire("editdrag")},_onMarkerDragEnd:function(y){y.target.setOpacity(1);
this._fireEdit()},_onTouchStart:function(y){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,y),"function"==typeof this._getCorners){var O=this._getCorners();y=y.target;var X=y._cornerIndex;y.setOpacity(0);this._oppositeCorner=O[(X+2)%4];this._toggleCornerMarkers(0,X)}this._shape.fire("editstart")},_onTouchMove:function(y){var O=this._map.mouseEventToLayerPoint(y.originalEvent.touches[0]);O=this._map.layerPointToLatLng(O);return y.target===this._moveMarker?this._move(O):this._resize(O),
this._shape.redraw(),!1},_onTouchEnd:function(y){y.target.setOpacity(1);this.updateMarkers();this._fireEdit()},_move:function(){},_resize:function(){}});L.Edit=L.Edit||{};L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var y=this._shape.getBounds().getCenter();this._moveMarker=this._createMarker(y,this.options.moveIcon)},_createResizeMarker:function(){var y=this._getCorners();this._resizeMarkers=[];for(var O=0,X=y.length;O<X;O++)this._resizeMarkers.push(this._createMarker(y[O],
this.options.resizeIcon)),this._resizeMarkers[O]._cornerIndex=O},_onMarkerDragStart:function(y){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,y);var O=this._getCorners();y=y.target._cornerIndex;this._oppositeCorner=O[(y+2)%4];this._toggleCornerMarkers(0,y)},_onMarkerDragEnd:function(y){var O,X,la=y.target;la===this._moveMarker&&(O=this._shape.getBounds(),X=O.getCenter(),la.setLatLng(X));this._toggleCornerMarkers(1);this._repositionCornerMarkers();L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,
y)},_move:function(y){for(var O,X=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),la=this._shape.getBounds().getCenter(),ua=[],Ea=0,ka=X.length;Ea<ka;Ea++)O=[X[Ea].lat-la.lat,X[Ea].lng-la.lng],ua.push([y.lat+O[0],y.lng+O[1]]);this._shape.setLatLngs(ua);this._repositionCornerMarkers();this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(y){this._shape.setBounds(L.latLngBounds(y,this._oppositeCorner));y=this._shape.getBounds();this._moveMarker.setLatLng(y.getCenter());
this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var y=this._shape.getBounds();return[y.getNorthWest(),y.getNorthEast(),y.getSouthEast(),y.getSouthWest()]},_toggleCornerMarkers:function(y){for(var O=0,X=this._resizeMarkers.length;O<X;O++)this._resizeMarkers[O].setOpacity(y)},_repositionCornerMarkers:function(){for(var y=this._getCorners(),O=0,X=this._resizeMarkers.length;O<X;O++)this._resizeMarkers[O].setLatLng(y[O])}});L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&
(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())});L.Edit=L.Edit||{};L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var y=this._shape.getLatLng();this._moveMarker=this._createMarker(y,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(y){if(this._resizeMarkers.length){var O=this._getResizeMarkerPoint(y);this._resizeMarkers[0].setLatLng(O)}this._shape.setLatLng(y);this._map.fire(L.Draw.Event.EDITMOVE,
{layer:this._shape})}});L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable());this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()});this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})});L.Edit=L.Edit||{};L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var y=this._shape.getLatLng();y=this._getResizeMarkerPoint(y);
this._resizeMarkers=[];this._resizeMarkers.push(this._createMarker(y,this.options.resizeIcon))},_getResizeMarkerPoint:function(y){var O=this._shape._radius*Math.cos(Math.PI/4);y=this._map.project(y);return this._map.unproject([y.x+O,y.y-O])},_resize:function(y){var O=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=O.distanceTo(y):radius=this._map.distance(O,y);this._shape.setRadius(radius);this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+
"\x3cbr /\x3e"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)});this._shape.setRadius(radius);this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}});L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())});L.Map.mergeOptions({touchExtend:!0});L.Map.TouchExtend=L.Handler.extend({initialize:function(y){this._map=
y;this._container=y._container;this._pane=y._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this);L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this);this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,
this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this);L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this);L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this);this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",
this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(y,O){if(void 0!==y.touches){if(!y.touches.length)return;var X=y.touches[0]}else if("touch"!==y.pointerType||
(X=y,!this._filterClick(y)))return;var la=this._map.mouseEventToContainerPoint(X),ua=this._map.mouseEventToLayerPoint(X),Ea=this._map.layerPointToLatLng(ua);this._map.fire(O,{latlng:Ea,layerPoint:ua,containerPoint:la,pageX:X.pageX,pageY:X.pageY,originalEvent:y})},_filterClick:function(y){var O=y.timeStamp||y.originalEvent.timeStamp,X=L.DomEvent._lastClick&&O-L.DomEvent._lastClick;return X&&100<X&&500>X||y.target._simulatedClick&&!y._simulated?(L.DomEvent.stop(y),!1):(L.DomEvent._lastClick=O,!0)},
_onTouchStart:function(y){this._map._loaded&&this._touchEvent(y,"touchstart")},_onTouchEnd:function(y){this._map._loaded&&this._touchEvent(y,"touchend")},_onTouchCancel:function(y){if(this._map._loaded){var O="touchcancel";this._detectIE()&&(O="pointercancel");this._touchEvent(y,O)}},_onTouchLeave:function(y){this._map._loaded&&this._touchEvent(y,"touchleave")},_onTouchMove:function(y){this._map._loaded&&this._touchEvent(y,"touchmove")},_detectIE:function(){var y=p.navigator.userAgent,O=y.indexOf("MSIE ");
if(0<O)return parseInt(y.substring(O+5,y.indexOf(".",O)),10);if(0<y.indexOf("Trident/"))return O=y.indexOf("rv:"),parseInt(y.substring(O+3,y.indexOf(".",O)),10);O=y.indexOf("Edge/");return 0<O&&parseInt(y.substring(O+5,y.indexOf(".",O)),10)}});L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend);L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var y=
this._icon,O="dblclick mousedown mouseover mouseout contextmenu touchstart touchend touchmove".split(" ");this._detectIE?O.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):O.concat(["touchcancel"]);L.DomUtil.addClass(y,"leaflet-clickable");L.DomEvent.on(y,"click",this._onMouseClick,this);L.DomEvent.on(y,"keypress",this._onKeyPress,this);for(var X=0;X<O.length;X++)L.DomEvent.on(y,O[X],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),
this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var y=p.navigator.userAgent,O=y.indexOf("MSIE ");if(0<O)return parseInt(y.substring(O+5,y.indexOf(".",O)),10);if(0<y.indexOf("Trident/"))return O=y.indexOf("rv:"),parseInt(y.substring(O+3,y.indexOf(".",O)),10);O=y.indexOf("Edge/");return 0<O&&parseInt(y.substring(O+5,y.indexOf(".",O)),10)}});L.LatLngUtil={cloneLatLngs:function(y){for(var O=[],X=0,la=y.length;X<la;X++)Array.isArray(y[X])?O.push(L.LatLngUtil.cloneLatLngs(y[X])):
O.push(this.cloneLatLng(y[X]));return O},cloneLatLng:function(y){return L.latLng(y.lat,y.lng)}};(function(){var y={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(O){var X=O.length,la=0,ua=Math.PI/180;if(2<X){for(var Ea=0;Ea<X;Ea++){var ka=O[Ea];var P=O[(Ea+1)%X];la+=(P.lng-ka.lng)*ua*(2+Math.sin(ka.lat*ua)+Math.sin(P.lat*ua))}la=40680631590769*la/2}return Math.abs(la)},formattedNumber:function(O,X){O=parseFloat(O).toFixed(X);var la=(X=L.drawLocal.format&&
L.drawLocal.format.numeric)&&X.delimiters;X=la&&la.thousands;la=la&&la.decimal;if(X||la){var ua=O.split(".");O=X?ua[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+X):ua[0];1<ua.length&&(O=O+(la||".")+ua[1])}return O},readableArea:function(O,X,la){var ua,Ea;la=L.Util.extend({},y,la);return X?(Ea=["ha","m"],type=typeof X,"string"===type?Ea=[X]:"boolean"!==type&&(Ea=X),ua=1E6<=O&&-1!==Ea.indexOf("km")?L.GeometryUtil.formattedNumber(1E-6*O,la.km)+" km²":1E4<=O&&-1!==Ea.indexOf("ha")?L.GeometryUtil.formattedNumber(1E-4*
O,la.ha)+" ha":L.GeometryUtil.formattedNumber(O,la.m)+" m²"):(O/=.836127,ua=3097600<=O?L.GeometryUtil.formattedNumber(O/3097600,la.mi)+" mi²":4840<=O?L.GeometryUtil.formattedNumber(O/4840,la.ac)+" acres":L.GeometryUtil.formattedNumber(O,la.yd)+" yd²"),ua},readableDistance:function(O,X,la,ua,Ea){Ea=L.Util.extend({},y,Ea);switch(X?"string"==typeof X?X:"metric":la?"feet":ua?"nauticalMile":"yards"){case "metric":O=1E3<O?L.GeometryUtil.formattedNumber(O/1E3,Ea.km)+" km":L.GeometryUtil.formattedNumber(O,
Ea.m)+" m";break;case "feet":O=L.GeometryUtil.formattedNumber(3.28083*O,Ea.ft)+" ft";break;case "nauticalMile":O=L.GeometryUtil.formattedNumber(.53996*O/1E3,Ea.nm)+" nm";break;default:O*=1.09361,O=1760<O?L.GeometryUtil.formattedNumber(O/1760,Ea.mi)+" miles":L.GeometryUtil.formattedNumber(O,Ea.yd)+" yd"}return O},isVersion07x:function(){var O=L.version.split(".");return 0===parseInt(O[0],10)&&7===parseInt(O[1],10)}})})();L.Util.extend(L.LineUtil,{segmentsIntersect:function(y,O,X,la){return this._checkCounterclockwise(y,
X,la)!==this._checkCounterclockwise(O,X,la)&&this._checkCounterclockwise(y,O,X)!==this._checkCounterclockwise(y,O,la)},_checkCounterclockwise:function(y,O,X){return(X.y-y.y)*(O.x-y.x)>(O.y-y.y)*(X.x-y.x)}});L.Polyline.include({intersects:function(){var y,O,X=this._getProjectedPoints();var la=X?X.length:0;if(this._tooFewPointsForIntersection())return!1;for(--la;3<=la;la--)if(y=X[la-1],O=X[la],this._lineSegmentsIntersectsRange(y,O,la-2))return!0;return!1},newLatLngIntersects:function(y,O){return!!this._map&&
this.newPointIntersects(this._map.latLngToLayerPoint(y),O)},newPointIntersects:function(y,O){var X=this._getProjectedPoints(),la=X?X.length:0;X=X?X[la-1]:null;la-=2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(X,y,la,O?1:0)},_tooFewPointsForIntersection:function(y){var O=this._getProjectedPoints(),X=O?O.length:0;return X+=y||0,!O||3>=X},_lineSegmentsIntersectsRange:function(y,O,X,la){var ua,Ea,ka=this._getProjectedPoints();for(la=la||0;X>la;X--)if(ua=ka[X-1],Ea=ka[X],
L.LineUtil.segmentsIntersect(y,O,ua,Ea))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var y=[],O=this._defaultShape(),X=0;X<O.length;X++)y.push(this._map.latLngToLayerPoint(O[X]));return y}});L.Polygon.include({intersects:function(){var y,O,X,la,ua=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(y=ua.length,O=ua[0],X=ua[y-1],la=y-2,this._lineSegmentsIntersectsRange(X,O,
la,1)))}});L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(y){if("0.7">L.version)throw Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,y);var O;this._toolbars={};L.DrawToolbar&&this.options.draw&&(O=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=O,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this));
L.EditToolbar&&this.options.edit&&(O=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=O,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this));L.toolbar=this},onAdd:function(y){var O,X=L.DomUtil.create("div","leaflet-draw"),la=!1,ua;for(ua in this._toolbars)this._toolbars.hasOwnProperty(ua)&&(O=this._toolbars[ua].addToolbar(y))&&(la||(L.DomUtil.hasClass(O,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(O.childNodes[0],"leaflet-draw-toolbar-top"),la=!0),X.appendChild(O));
return X},onRemove:function(){for(var y in this._toolbars)this._toolbars.hasOwnProperty(y)&&this._toolbars[y].removeToolbar()},setDrawingOptions:function(y){for(var O in this._toolbars)this._toolbars[O]instanceof L.DrawToolbar&&this._toolbars[O].setOptions(y)},_toolbarEnabled:function(y){y=y.target;for(var O in this._toolbars)this._toolbars[O]!==y&&this._toolbars[O].disable()}});L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1});L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=
new L.Control.Draw,this.addControl(this.drawControl))});L.Toolbar=L.Class.extend({initialize:function(y){L.setOptions(this,y);this._modes={};this._actionButtons=[];this._activeMode=null;y=L.version.split(".");1===parseInt(y[0],10)&&2<=parseInt(y[1],10)?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return null!==this._activeMode},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(y){var O=L.DomUtil.create("div",
"leaflet-draw-section"),X=0,la=this._toolbarClass||"",ua=this.getModeHandlers(y);this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar");this._map=y;for(y=0;y<ua.length;y++)ua[y].enabled&&this._initModeHandler(ua[y].handler,this._toolbarContainer,X++,la,ua[y].title);if(X)return this._lastButtonIndex=--X,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),O.appendChild(this._toolbarContainer),O.appendChild(this._actionsContainer),O},removeToolbar:function(){for(var y in this._modes)this._modes.hasOwnProperty(y)&&
(this._disposeButton(this._modes[y].button,this._modes[y].handler.enable,this._modes[y].handler),this._modes[y].handler.disable(),this._modes[y].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};y=0;for(var O=this._actionButtons.length;y<O;y++)this._disposeButton(this._actionButtons[y].button,this._actionButtons[y].callback,this);this._actionButtons=[];this._actionsContainer=null},_initModeHandler:function(y,O,X,la,ua){var Ea=y.type;this._modes[Ea]=
{};this._modes[Ea].handler=y;this._modes[Ea].button=this._createButton({type:Ea,title:ua,className:la+"-"+Ea,container:O,callback:this._modes[Ea].handler.enable,context:this._modes[Ea].handler});this._modes[Ea].buttonIndex=X;this._modes[Ea].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!p.MSStream},_createButton:function(y){var O=L.DomUtil.create("a",y.className||"",y.container),
X=L.DomUtil.create("span","sr-only",y.container);O.href="#";O.appendChild(X);y.title&&(O.title=y.title,X.innerHTML=y.title);y.text&&(O.innerHTML=y.text,X.innerHTML=y.text);X=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(O,"click",L.DomEvent.stopPropagation).on(O,"mousedown",L.DomEvent.stopPropagation).on(O,"dblclick",L.DomEvent.stopPropagation).on(O,"touchstart",L.DomEvent.stopPropagation).on(O,"click",L.DomEvent.preventDefault).on(O,X,y.callback,y.context),O},_disposeButton:function(y,
O){var X=this._detectIOS()?"touchstart":"click";L.DomEvent.off(y,"click",L.DomEvent.stopPropagation).off(y,"mousedown",L.DomEvent.stopPropagation).off(y,"dblclick",L.DomEvent.stopPropagation).off(y,"touchstart",L.DomEvent.stopPropagation).off(y,"click",L.DomEvent.preventDefault).off(y,X,O)},_handlerActivated:function(y){this.disable();this._activeMode=this._modes[y.handler];L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._showActionsToolbar();this.fire("enable")},
_handlerDeactivated:function(){this._hideActionsToolbar();L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled");this._activeMode=null;this.fire("disable")},_createActions:function(y){var O,X,la,ua=this._actionsContainer;y=this.getActions(y);var Ea=y.length;var ka=0;for(X=this._actionButtons.length;ka<X;ka++)this._disposeButton(this._actionButtons[ka].button,this._actionButtons[ka].callback);for(this._actionButtons=[];ua.firstChild;)ua.removeChild(ua.firstChild);for(ka=
0;ka<Ea;ka++)"enabled"in y[ka]&&!y[ka].enabled||(O=L.DomUtil.create("li","",ua),la=this._createButton({title:y[ka].title,text:y[ka].text,container:O,callback:y[ka].callback,context:y[ka].context}),this._actionButtons.push({button:la,callback:y[ka].callback}))},_showActionsToolbar:function(){var y=this._activeMode.buttonIndex,O=this._lastButtonIndex,X=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler);this._actionsContainer.style.top=X+"px";0===y&&(L.DomUtil.addClass(this._toolbarContainer,
"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top"));y===O&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom"));this._actionsContainer.style.display="block";this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none";L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop");L.DomUtil.removeClass(this._toolbarContainer,
"leaflet-draw-toolbar-nobottom");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top");L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom");this._map.fire(L.Draw.Event.TOOLBARCLOSED)}});L.Draw=L.Draw||{};L.Draw.Tooltip=L.Class.extend({initialize:function(y){this._map=y;this._popupPane=y._panes.popupPane;this._visible=!1;this._container=y.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null;this._singleLineLabel=!1;
this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this);this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(y){return this._container?(y.subtext=y.subtext||"",0!==y.subtext.length||this._singleLineLabel?0<y.subtext.length&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),
this._singleLineLabel=!0),this._container.innerHTML=(0<y.subtext.length?'\x3cspan class\x3d"leaflet-draw-tooltip-subtext"\x3e'+y.subtext+"\x3c/span\x3e\x3cbr /\x3e":"")+"\x3cspan\x3e"+y.text+"\x3c/span\x3e",y.text||y.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(y){y=this._map.latLngToLayerPoint(y);var O=this._container;return this._container&&(this._visible&&(O.style.visibility=
"inherit"),L.DomUtil.setPosition(O,y)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}});L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},
initialize:function(y){for(var O in this.options)this.options.hasOwnProperty(O)&&y[O]&&(y[O]=L.extend({},this.options[O],y[O]));this._toolbarClass="leaflet-draw-draw";L.Toolbar.prototype.initialize.call(this,y)},getModeHandlers:function(y){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(y,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(y,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},
{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(y,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(y,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(y,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(y,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},
getActions:function(y){return[{enabled:y.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:y.completeShape,context:y},{enabled:y.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:y.deleteLastVertex,context:y},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(y){L.setOptions(this,y);for(var O in this._modes)this._modes.hasOwnProperty(O)&&
y.hasOwnProperty(O)&&this._modes[O].handler.setOptions(y[O])}});L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(y){y.edit&&(void 0===y.edit.selectedPathOptions&&(y.edit.selectedPathOptions=this.options.edit.selectedPathOptions),y.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,y.edit.selectedPathOptions));
y.remove&&(y.remove=L.extend({},this.options.remove,y.remove));y.poly&&(y.poly=L.extend({},this.options.poly,y.poly));this._toolbarClass="leaflet-draw-edit";L.Toolbar.prototype.initialize.call(this,y);this._selectedFeatureCount=0},getModeHandlers:function(y){var O=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(y,{featureGroup:O,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},
{enabled:this.options.remove,handler:new L.EditToolbar.Delete(y,{featureGroup:O}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(y){var O=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return y.removeAllLayers&&O.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,
text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),O},addToolbar:function(y){y=L.Toolbar.prototype.addToolbar.call(this,y);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),y},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this);L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),
L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save();this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers();this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var y,O=0!==this.options.featureGroup.getLayers().length;this.options.edit&&(y=this._modes[L.EditToolbar.Edit.TYPE].button,O?L.DomUtil.removeClass(y,"leaflet-disabled"):L.DomUtil.addClass(y,"leaflet-disabled"),
y.setAttribute("title",O?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled));this.options.remove&&(y=this._modes[L.EditToolbar.Delete.TYPE].button,O?L.DomUtil.removeClass(y,"leaflet-disabled"):L.DomUtil.addClass(y,"leaflet-disabled"),y.setAttribute("title",O?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}});L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(y,O){if(L.Handler.prototype.initialize.call(this,
y),L.setOptions(this,O),this._featureGroup=O.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={};this.type=L.EditToolbar.Edit.TYPE;y=L.version.split(".");1===parseInt(y[0],10)&&2<=parseInt(y[1],10)?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,
{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var y=this._map;y&&(y.getContainer().focus(),
this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),y._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&
(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(y){this._revertLayer(y)},this)},save:function(){var y=new L.LayerGroup;this._featureGroup.eachLayer(function(O){O.edited&&
(y.addLayer(O),O.edited=!1)});this._map.fire(L.Draw.Event.EDITED,{layers:y})},_backupLayer:function(y){var O=L.Util.stamp(y);this._uneditedLayerProps[O]||(y instanceof L.Polyline||y instanceof L.Polygon||y instanceof L.Rectangle?this._uneditedLayerProps[O]={latlngs:L.LatLngUtil.cloneLatLngs(y.getLatLngs())}:y instanceof L.Circle?this._uneditedLayerProps[O]={latlng:L.LatLngUtil.cloneLatLng(y.getLatLng()),radius:y.getRadius()}:(y instanceof L.Marker||y instanceof L.CircleMarker)&&(this._uneditedLayerProps[O]=
{latlng:L.LatLngUtil.cloneLatLng(y.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(y){var O=L.Util.stamp(y);y.edited=!1;this._uneditedLayerProps.hasOwnProperty(O)&&(y instanceof L.Polyline||y instanceof L.Polygon||y instanceof L.Rectangle?y.setLatLngs(this._uneditedLayerProps[O].latlngs):y instanceof
L.Circle?(y.setLatLng(this._uneditedLayerProps[O].latlng),y.setRadius(this._uneditedLayerProps[O].radius)):(y instanceof L.Marker||y instanceof L.CircleMarker)&&y.setLatLng(this._uneditedLayerProps[O].latlng),y.fire("revert-edited",{layer:y}))},_enableLayerEdit:function(y){var O,X;y=y.layer||y.target||y;this._backupLayer(y);this.options.poly&&(X=L.Util.extend({},this.options.poly),y.options.poly=X);this.options.selectedPathOptions&&(O=L.Util.extend({},this.options.selectedPathOptions),O.maintainColor&&
(O.color=y.options.color,O.fillColor=y.options.fillColor),y.options.original=L.extend({},y.options),y.options.editing=O);y instanceof L.Marker?(y.editing&&y.editing.enable(),y.dragging.enable(),y.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):y.editing.enable()},_disableLayerEdit:function(y){y=y.layer||y.target||y;y.edited=!1;y.editing&&y.editing.disable();
delete y.options.editing;delete y.options.original;this._selectedPathOptions&&(y instanceof L.Marker?this._toggleMarkerHighlight(y):(y.setStyle(y.options.previousOptions),delete y.options.previousOptions));y instanceof L.Marker?(y.dragging.disable(),y.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):y.editing.disable()},_onMouseMove:function(y){this._tooltip.updatePosition(y.latlng)},
_onMarkerDragEnd:function(y){y=y.target;y.edited=!0;this._map.fire(L.Draw.Event.EDITMOVE,{layer:y})},_onTouchMove:function(y){var O=this._map.mouseEventToLayerPoint(y.originalEvent.changedTouches[0]);O=this._map.layerPointToLatLng(O);y.target.setLatLng(O)},_hasAvailableLayers:function(){return 0!==this._featureGroup.getLayers().length}});L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(y,O){if(L.Handler.prototype.initialize.call(this,y),L.Util.setOptions(this,O),
this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;y=L.version.split(".");1===parseInt(y[0],10)&&2<=parseInt(y[1],10)?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,
{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var y=this._map;
y&&(y.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,
this))},revertLayers:function(){this._deletedLayers.eachLayer(function(y){this._deletableLayers.addLayer(y);y.fire("revert-deleted",{layer:y})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(y){this._removeLayer({layer:y})},this);this.save()},_enableLayerDelete:function(y){(y.layer||y.target||y).on("click",this._removeLayer,this)},_disableLayerDelete:function(y){y=y.layer||y.target||y;y.off("click",
this._removeLayer,this);this._deletedLayers.removeLayer(y)},_removeLayer:function(y){y=y.layer||y.target||y;this._deletableLayers.removeLayer(y);this._deletedLayers.addLayer(y);y.fire("deleted")},_onMouseMove:function(y){this._tooltip.updatePosition(y.latlng)},_hasAvailableLayers:function(){return 0!==this._deletableLayers.getLayers().length}})}(window,document)}
goog.provide("module$node_modules$leaflet_draw$dist$leaflet_draw");
goog.global. module$node_modules$leaflet_draw$dist$leaflet_draw=shadow.js.require(14, {});
