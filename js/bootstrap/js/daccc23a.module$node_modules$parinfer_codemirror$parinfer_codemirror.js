shadow$provide[86]=function(Nc,Vb,pc,wb){(function(p,ma){"function"===typeof define&&define.amd?define(["parinfer"],ma):"object"===typeof pc&&pc.exports?pc.exports=ma(Vb(85)):p.parinferCodeMirror=ma(p.parinfer)})(this,function(p){function ma(l){return"parinferCodeMirror: "+l}function Ma(l){if(-1===f.indexOf(l))throw ma('Mode "'+l+'" is invalid. Must be one of: '+f.join(","));}function y(l){l=l.__parinfer__;if(!l)throw ma("You must call parinferCodeMirror.init(cm) on a CodeMirror instance before you can use the rest of the API.");
return l}function O(l){return l.map(function(q){return{x:q.from.ch,lineNo:q.from.line,oldText:q.removed.join("\n"),newText:q.text.join("\n")}})}function X(l,q){var w=l.getAllMarks();for(l=0;l<w.length;l++)w[l].className===q&&w[l].clear()}function la(l,q,w,z,G){l.markText({line:q,ch:w},{line:q,ch:z},{className:G})}function ua(l,q){X(l,"parinfer-error");q&&(la(l,q.lineNo,q.x,q.x+1,"parinfer-error"),q.extra&&la(l,q.extra.lineNo,q.extra.x,q.extra.x+1,"parinfer-error"))}function Ea(l,q){X(l,"parinfer-paren-trail");
if(q){var w;for(w=0;w<q.length;w++){var z=q[w];la(l,z.lineNo,z.startX,z.endX,"parinfer-paren-trail")}}}function ka(l){l=l.listSelections()[0];return Math.min(l.head.line,l.anchor.line)}function P(l,q,w){if(!l)return null;var z,G;for(z=0;z<l.length;z++){var H=l[z];if(q<H){var R=H;break}q>H&&(G=H)}if(-1===w)return G;if(1===w)return R}function ca(l,q){l=l.getLine(q);for(q=0;q<l.length;q++)if(" "!==l[q])return q;return null}function va(l,q){var w=l.somethingSelected(),z;if(z=y(l).tabStops){var G=[],H;
for(H=0;H<z.length;H++){var R=z[H];-1>=R.x&&G.pop();G.push(R.x);G.push(R.x+("("===R.ch?2:1));null!=R.argX&&G.push(R.argX)}z=G}else z=null;w?(w=z,z=ka(l),z=ca(l,z),w=P(w,z,q),null==w&&(w=Math.max(0,z+2*q)),l.indentSelection(w-z)):(H=z,G=l.getCursor(),w=G.line,z=G.ch,G=ca(l,G.line),H=P(H,z,q),q=null==H||null!=G&&z!==G?Math.max(0,z+2*q):H,null!=G&&G<z&&z<q?(q=Array(q-z+1).join(" "),l.replaceSelection(q)):(q-=z,""!==l.getDoc().getLine(w).trim()?l.indentLine(w,q):0<q?(q=Array(q+1).join(" "),l.replaceSelection(q)):
(z=l.getCursor().ch,l.replaceRange("",{line:w,ch:z+q},{line:w,ch:z},"+indent"))))}function ra(l,q){return q.line===l.lineNo&&l.startX<=q.ch}function Y(l,q){var w;for(w=0;w<q.length;w++){var z=l,G=q[w],H=z.getDoc().sel,R=H.ranges[0];(R=G.lineNo===G.closer.lineNo||!G.closer.trail||ra(G.closer.trail,R.anchor)||ra(G.closer.trail,R.head))||(R=G.closer,R=-1!==H.contains({line:R.lineNo,ch:R.x}));R||la(z,G.closer.lineNo,G.closer.x,G.closer.x+1,"parinfer-locus-paren");Y(z,G.children)}}function qa(l,q){l=l.charCoords({line:q.lineNo,
ch:q.x},"local");return{midx:l.left+(l.right-l.left)/2,right:l.right,left:l.left,top:l.top,bottom:l.bottom}}function ya(l,q){var w;for(w=0;w<q.length;w++){var z=l,G=q[w],H=z.__parinfer__.layer,R=H.paper,ha=qa(z,G),Ja=qa(z,G.closer);if(G.closer.trail&&G.lineNo!==G.closer.lineNo)switch(H.type){case "guides":R.path(["M",ha.midx,ha.bottom,"V",Ja.bottom].join(" "));break;case "locus":H=z;var D=G.lineNo;for(var Q=G.closer.lineNo,oa=H.getDoc(),Fa=0,Ga=0;D<=Q;D++){var xb=oa.getLine(D);xb.length>Fa&&(Fa=xb.length,
Ga=D)}H=qa(H,{lineNo:Ga,x:Fa}).right;R.path(["M",ha.midx,ha.top+4,"A",4,4,0,0,1,ha.midx+4,ha.top,"H",H-4,"A",4,4,0,0,1,H,ha.top+4,"V",Ja.bottom,"H",ha.midx,"V",ha.bottom].join(" "))}ya(z,G.children)}}function ia(l,q){l=l.__parinfer__.layer;l.type=q;q=document.createElement("div");q.style.position="absolute";q.style.left="0";q.style.top="0";q.style["z-index"]=100;q.className="parinfer-locus";l.el=q;l.container.appendChild(q);l.paper=Raphael(q,l.container.clientWidth,l.container.clientHeight)}function ea(l){(l=
l.__parinfer__.layer)&&l.el&&l.container.removeChild(l.el)}function Ha(l,q){X(l,"parinfer-locus-paren");q&&(Y(l,q),ea(l),ia(l,"guides"),ya(l,q))}function aa(l,q){q&&(ea(l),ia(l,"guides"),ya(l,q))}function Ba(l,q){var w=l.cm,z=w.getValue(),G=w.somethingSelected(),H=w.listSelections(),R=w.getCursor(),ha=w.getScrollerElement();R={cursorLine:R.line,cursorX:R.ch,prevCursorLine:l.prevCursorLine,prevCursorX:l.prevCursorX};G&&(R.selectionStartLine=ka(w));if(l.options)for(var Ja in l.options)l.options.hasOwnProperty(Ja)&&
(R[Ja]=l.options[Ja]);q&&(R.changes=O(q));Ja=l.options&&l.options.locus;var D=l.options&&l.options.guides;if(Ja||D)delete R.locus,delete R.guides,R.returnParens=!0;var Q=l.fixMode?"paren":l.mode;switch(Q){case "indent":var oa=p.indentMode(z,R);break;case "paren":oa=p.parenMode(z,R);break;case "smart":oa=p.smartMode(z,R);break;default:Ma(Q)}l.parens=oa.parens;l.tabStops=oa.tabStops;z!==oa.text&&(z=w.getHistory(),w.setValue(oa.text),l.monitorCursor=!1,G?w.setSelections(H):w.setCursor(oa.cursorLine,
oa.cursorX),w.setHistory(z),setTimeout(function(){l.monitorCursor=!0},0),w.scrollTo(ha.scrollLeft,ha.scrollTop));ua(w,oa.error);Ea(w,oa.parenTrails);l.prevCursorLine=oa.cursorLine;l.prevCursorX=oa.cursorX;Ja?Ha(w,oa.parens):D&&aa(w,oa.parens);return l.fixMode&&oa.success?(l.fixMode=!1,Ba(l,q)):oa.success}function Va(l){clearTimeout(l.cursorTimeout);l.monitorCursor&&(l.cursorTimeout=setTimeout(function(){Ba(l)},0))}function Ya(l){if(!l.enabled){l.callbackCursor=function(w){Va(l)};l.callbackChanges=
function(w,z){clearTimeout(l.cursorTimeout);"setValue"!==z[0].origin&&Ba(l,z)};var q=l.cm;q.on("cursorActivity",l.callbackCursor);q.on("changes",l.callbackChanges);l.parinferKeys={Tab:function(w){va(w,1)},"Shift-Tab":function(w){va(w,-1)}};q.addKeyMap(l.parinferKeys);l.enabled=!0}}function d(l){l=y(l);"paren"!==l.mode&&(l.fixMode=!0);Ya(l);return Ba(l)}var f=["paren","indent","smart"];return{version:"1.4.2",init:function(l,q,w){var z=l.__parinfer__;if(z)throw ma("init has already been called on this CodeMirror instance");
q=q||"smart";Ma(q);z={cm:l,mode:q,options:w,enabled:!1,cursorTimeout:null,monitorCursor:!0,prevCursorX:null,prevCursorLine:null,callbackCursor:null,callbackChanges:null};q=l.__parinfer__=z;w=l.getWrapperElement().querySelector(".CodeMirror-lines").parentNode;q.layer={container:w};return d(l)},enable:d,disable:function(l){l=y(l);if(l.enabled){var q=l.cm;X(q,"parinfer-error");X(q,"parinfer-paren-trail");q.off("cursorActivity",l.callbackCursor);q.off("changes",l.callbackChanges);q.removeKeyMap(l.parinferKeys);
l.enabled=!1}},setMode:function(l,q){l=y(l);Ma(q);l.mode=q;return Ba(l)},setOptions:function(l,q){l=y(l);l.options=q;return Ba(l)}}})}
goog.provide("module$node_modules$parinfer_codemirror$parinfer_codemirror");
goog.global. module$node_modules$parinfer_codemirror$parinfer_codemirror=shadow.js.require(86, {});
