shadow$provide[84]=function(Nc,Vb,pc,wb){(function(p){"object"==typeof wb&&"object"==typeof pc?p(Vb(1),Vb(81),Vb(82),Vb(83)):"function"==typeof define&&define.amd?define(["codemirror/lib/codemirror","codemirror/addon/search/searchcursor","codemirror/addon/dialog/dialog","codemirror/addon/edit/matchbrackets"],p):p(CodeMirror)})(function(p){var ma=[{keys:"\x3cLeft\x3e",type:"keyToKey",toKeys:"h"},{keys:"\x3cRight\x3e",type:"keyToKey",toKeys:"l"},{keys:"\x3cUp\x3e",type:"keyToKey",toKeys:"k"},{keys:"\x3cDown\x3e",
type:"keyToKey",toKeys:"j"},{keys:"\x3cSpace\x3e",type:"keyToKey",toKeys:"l"},{keys:"\x3cBS\x3e",type:"keyToKey",toKeys:"h",context:"normal"},{keys:"\x3cDel\x3e",type:"keyToKey",toKeys:"x",context:"normal"},{keys:"\x3cC-Space\x3e",type:"keyToKey",toKeys:"W"},{keys:"\x3cC-BS\x3e",type:"keyToKey",toKeys:"B",context:"normal"},{keys:"\x3cS-Space\x3e",type:"keyToKey",toKeys:"w"},{keys:"\x3cS-BS\x3e",type:"keyToKey",toKeys:"b",context:"normal"},{keys:"\x3cC-n\x3e",type:"keyToKey",toKeys:"j"},{keys:"\x3cC-p\x3e",
type:"keyToKey",toKeys:"k"},{keys:"\x3cC-[\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e"},{keys:"\x3cC-c\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e"},{keys:"\x3cC-[\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e",context:"insert"},{keys:"\x3cC-c\x3e",type:"keyToKey",toKeys:"\x3cEsc\x3e",context:"insert"},{keys:"s",type:"keyToKey",toKeys:"cl",context:"normal"},{keys:"s",type:"keyToKey",toKeys:"c",context:"visual"},{keys:"S",type:"keyToKey",toKeys:"cc",context:"normal"},{keys:"S",type:"keyToKey",toKeys:"VdO",context:"visual"},
{keys:"\x3cHome\x3e",type:"keyToKey",toKeys:"0"},{keys:"\x3cEnd\x3e",type:"keyToKey",toKeys:"$"},{keys:"\x3cPageUp\x3e",type:"keyToKey",toKeys:"\x3cC-b\x3e"},{keys:"\x3cPageDown\x3e",type:"keyToKey",toKeys:"\x3cC-f\x3e"},{keys:"\x3cCR\x3e",type:"keyToKey",toKeys:"j^",context:"normal"},{keys:"\x3cIns\x3e",type:"action",action:"toggleOverwrite",context:"insert"},{keys:"H",type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"M",type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,
toJumplist:!0}},{keys:"L",type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:"h",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:"l",type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:"j",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:"k",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:"gj",type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:"gk",
type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:"w",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:"W",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:"e",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:"E",type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"b",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,
wordEnd:!1}},{keys:"B",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:"ge",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:"gE",type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:"{",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:"}",type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:"(",type:"motion",
motion:"moveBySentence",motionArgs:{forward:!1}},{keys:")",type:"motion",motion:"moveBySentence",motionArgs:{forward:!0}},{keys:"\x3cC-f\x3e",type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:"\x3cC-b\x3e",type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:"\x3cC-d\x3e",type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:"\x3cC-u\x3e",type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:"gg",type:"motion",
motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"G",type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:"0",type:"motion",motion:"moveToStartOfLine"},{keys:"^",type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"+",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:"-",type:"motion",motion:"moveByLines",motionArgs:{forward:!1,
toFirstChar:!0}},{keys:"_",type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:"$",type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:"%",type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:"f\x3ccharacter\x3e",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"F\x3ccharacter\x3e",type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:"t\x3ccharacter\x3e",
type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:"T\x3ccharacter\x3e",type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:";",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:",",type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:"'\x3ccharacter\x3e",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0,linewise:!0}},{keys:"`\x3ccharacter\x3e",type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},
{keys:"]`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:"[`",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:"]'",type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:"['",type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:"]p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0,matchIndent:!0}},{keys:"[p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0,matchIndent:!0}},{keys:"]\x3ccharacter\x3e",
type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:"[\x3ccharacter\x3e",type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:"|",type:"motion",motion:"moveToColumn"},{keys:"o",type:"motion",motion:"moveToOtherHighlightedEnd",context:"visual"},{keys:"O",type:"motion",motion:"moveToOtherHighlightedEnd",motionArgs:{sameLine:!0},context:"visual"},{keys:"d",type:"operator",operator:"delete"},{keys:"y",type:"operator",operator:"yank"},{keys:"c",
type:"operator",operator:"change"},{keys:"\x3d",type:"operator",operator:"indentAuto"},{keys:"\x3e",type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:"\x3c",type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:"g~",type:"operator",operator:"changeCase"},{keys:"gu",type:"operator",operator:"changeCase",operatorArgs:{toLower:!0},isEdit:!0},{keys:"gU",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},isEdit:!0},{keys:"n",type:"motion",motion:"findNext",
motionArgs:{forward:!0,toJumplist:!0}},{keys:"N",type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:"x",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:"X",type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:"D",type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},
{keys:"D",type:"operator",operator:"delete",operatorArgs:{linewise:!0},context:"visual"},{keys:"Y",type:"operatorMotion",operator:"yank",motion:"expandToLine",motionArgs:{linewise:!0},context:"normal"},{keys:"Y",type:"operator",operator:"yank",operatorArgs:{linewise:!0},context:"visual"},{keys:"C",type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},context:"normal"},{keys:"C",type:"operator",operator:"change",operatorArgs:{linewise:!0},context:"visual"},{keys:"~",
type:"operatorMotion",operator:"changeCase",motion:"moveByCharacters",motionArgs:{forward:!0},operatorArgs:{shouldMoveCursor:!0},context:"normal"},{keys:"~",type:"operator",operator:"changeCase",context:"visual"},{keys:"\x3cC-w\x3e",type:"operatorMotion",operator:"delete",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1},context:"insert"},{keys:"\x3cC-w\x3e",type:"idle",context:"normal"},{keys:"\x3cC-i\x3e",type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:"\x3cC-o\x3e",type:"action",
action:"jumpListWalk",actionArgs:{forward:!1}},{keys:"\x3cC-e\x3e",type:"action",action:"scroll",actionArgs:{forward:!0,linewise:!0}},{keys:"\x3cC-y\x3e",type:"action",action:"scroll",actionArgs:{forward:!1,linewise:!0}},{keys:"a",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"},context:"normal"},{keys:"A",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"endOfSelectedArea"},
context:"visual"},{keys:"i",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"},context:"normal"},{keys:"gi",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"lastEdit"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"},context:"normal"},{keys:"gI",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"bol"},context:"normal"},{keys:"I",type:"action",action:"enterInsertMode",
isEdit:!0,actionArgs:{insertAt:"startOfSelectedArea"},context:"visual"},{keys:"o",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0},context:"normal"},{keys:"O",type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1},context:"normal"},{keys:"v",type:"action",action:"toggleVisualMode"},{keys:"V",type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:"\x3cC-v\x3e",type:"action",
action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"\x3cC-q\x3e",type:"action",action:"toggleVisualMode",actionArgs:{blockwise:!0}},{keys:"gv",type:"action",action:"reselectLastSelection"},{keys:"J",type:"action",action:"joinLines",isEdit:!0},{keys:"gJ",type:"action",action:"joinLines",actionArgs:{keepSpaces:!0},isEdit:!0},{keys:"p",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:"P",type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:"r\x3ccharacter\x3e",
type:"action",action:"replace",isEdit:!0},{keys:"@\x3ccharacter\x3e",type:"action",action:"replayMacro"},{keys:"q\x3ccharacter\x3e",type:"action",action:"enterMacroRecordMode"},{keys:"R",type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0},context:"normal"},{keys:"R",type:"operator",operator:"change",operatorArgs:{linewise:!0,fullLine:!0},context:"visual",exitVisualBlock:!0},{keys:"u",type:"action",action:"undo",context:"normal"},{keys:"u",type:"operator",operator:"changeCase",
operatorArgs:{toLower:!0},context:"visual",isEdit:!0},{keys:"U",type:"operator",operator:"changeCase",operatorArgs:{toLower:!1},context:"visual",isEdit:!0},{keys:"\x3cC-r\x3e",type:"action",action:"redo"},{keys:"m\x3ccharacter\x3e",type:"action",action:"setMark"},{keys:'"\x3ccharacter\x3e',type:"action",action:"setRegister"},{keys:"zz",type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:"z.",type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},
{keys:"zt",type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:"z\x3cCR\x3e",type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:"z-",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:"zb",type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:".",type:"action",action:"repeatLastEdit"},{keys:"\x3cC-a\x3e",type:"action",action:"incrementNumberToken",
isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:"\x3cC-x\x3e",type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:"\x3cC-t\x3e",type:"action",action:"indent",actionArgs:{indentRight:!0},context:"insert"},{keys:"\x3cC-d\x3e",type:"action",action:"indent",actionArgs:{indentRight:!1},context:"insert"},{keys:"a\x3ccharacter\x3e",type:"motion",motion:"textObjectManipulation"},{keys:"i\x3ccharacter\x3e",type:"motion",motion:"textObjectManipulation",
motionArgs:{textObjectInner:!0}},{keys:"/",type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:"?",type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:"*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"#",type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",wholeWordOnly:!0,toJumplist:!0}},{keys:"g*",type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:"g#",
type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:":",type:"ex"}],Ma=ma.length,y=[{name:"colorscheme",shortName:"colo"},{name:"map"},{name:"imap",shortName:"im"},{name:"nmap",shortName:"nm"},{name:"vmap",shortName:"vm"},{name:"unmap"},{name:"write",shortName:"w"},{name:"undo",shortName:"u"},{name:"redo",shortName:"red"},{name:"set",shortName:"se"},{name:"set",shortName:"se"},{name:"setlocal",shortName:"setl"},{name:"setglobal",shortName:"setg"},{name:"sort",shortName:"sor"},
{name:"substitute",shortName:"s",possiblyAsync:!0},{name:"nohlsearch",shortName:"noh"},{name:"yank",shortName:"y"},{name:"delmarks",shortName:"delm"},{name:"registers",shortName:"reg",excludeFromCommandHistory:!0},{name:"global",shortName:"g"}],O=p.Pos;p.Vim=function(){function X(F,M){this==p.keyMap.vim&&(p.rmClass(F.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==F.getOption("inputStyle")&&null!=document.body.style.caretColor&&(Ea(F),F.off("cursorActivity",ua),F.state.fatCursorMarks=null,
F.getInputField().style.caretColor=""));M&&M.attach==la||(F.setOption("disableInput",!1),F.off("cursorActivity",Ub),p.off(F.getInputField(),"paste",ca(F)),F.state.vim=null)}function la(F,M){this==p.keyMap.vim&&(p.addClass(F.getWrapperElement(),"cm-fat-cursor"),"contenteditable"==F.getOption("inputStyle")&&null!=document.body.style.caretColor&&(F.state.fatCursorMarks=[],ua(F),F.on("cursorActivity",ua),F.getInputField().style.caretColor="transparent"));M&&M.attach==la||(F.setOption("disableInput",!0),
F.setOption("showCursorWhenSelecting",!1),p.signal(F,"vim-mode-change",{mode:"normal"}),F.on("cursorActivity",Ub),Ba(F),p.on(F.getInputField(),"paste",ca(F)))}function ua(F){if(F.state.fatCursorMarks){Ea(F);for(var M=F.listSelections(),da=[],Aa=0;Aa<M.length;Aa++){var Wa=M[Aa];if(Wa.empty()){var Ra=F.getLine(Wa.anchor.line).length;Wa.anchor.ch<Ra?da.push(F.markText(Wa.anchor,O(Wa.anchor.line,Wa.anchor.ch+1),{className:"cm-fat-cursor-mark"})):da.push(F.markText(O(Wa.anchor.line,Ra-1),O(Wa.anchor.line,
Ra),{className:"cm-fat-cursor-mark"}))}}F.state.fatCursorMarks=da}}function Ea(F){if(F=F.state.fatCursorMarks)for(var M=0;M<F.length;M++)F[M].clear()}function ka(F,M){if(M){if(this[F])return this[F];F=P(F);if(!F)return!1;var da=p.Vim.findKey(M,F);"function"==typeof da&&p.signal(M,"vim-keypress",F);return da}}function P(F){if("'"==F.charAt(0))return F.charAt(1);F=F.split(/-(?!$)/);var M=F[F.length-1];if(1==F.length&&1==F[0].length||2==F.length&&"Shift"==F[0]&&1==M.length)return!1;for(var da=!1,Aa=
0;Aa<F.length;Aa++){var Wa=F[Aa];Wa in Sb?F[Aa]=Sb[Wa]:da=!0;Wa in Xb&&(F[Aa]=Xb[Wa])}if(!da)return!1;Y(M)&&(F[F.length-1]=M.toLowerCase());return"\x3c"+F.join("-")+"\x3e"}function ca(F){var M=F.state.vim;M.onPasteFn||(M.onPasteFn=function(){M.insertMode||(F.setCursor(H(F.getCursor(),0,1)),Mc.enterInsertMode(F,{},M))});return M.onPasteFn}function va(F,M){for(var da=[],Aa=F;Aa<F+M;Aa++)da.push(String.fromCharCode(Aa));return da}function ra(F,M){return M>=F.firstLine()&&M<=F.lastLine()}function Y(F){return/^[A-Z]$/.test(F)}
function qa(F){return/^\s*$/.test(F)}function ya(F,M){for(var da=0;da<M.length;da++)if(M[da]==F)return!0;return!1}function ia(F,M,da,Aa,Wa){if(void 0===M&&!Wa)throw Error("defaultValue is required unless callback is provided");da||(da="string");Ld[F]={type:da,defaultValue:M,callback:Wa};if(Aa)for(da=0;da<Aa.length;da++)Ld[Aa[da]]=Ld[F];M&&ea(F,M)}function ea(F,M,da,Aa){var Wa=Ld[F];Aa=Aa||{};Aa=Aa.scope;if(!Wa)return Error("Unknown option: "+F);if("boolean"==Wa.type){if(M&&!0!==M)return Error("Invalid argument: "+
F+"\x3d"+M);!1!==M&&(M=!0)}Wa.callback?("local"!==Aa&&Wa.callback(M,void 0),"global"!==Aa&&da&&Wa.callback(M,da)):("local"!==Aa&&(Wa.value="boolean"==Wa.type?!!M:M),"global"!==Aa&&da&&(da.state.vim.options[F]={value:M}))}function Ha(F,M,da){var Aa=Ld[F];da=da||{};da=da.scope;if(!Aa)return Error("Unknown option: "+F);if(Aa.callback){F=M&&Aa.callback(void 0,M);if("global"!==da&&void 0!==F)return F;if("local"!==da)return Aa.callback()}else return F="global"!==da&&M&&M.state.vim.options[F],(F||"local"!==
da&&Aa||{}).value}function aa(){this.latestRegister=void 0;this.isRecording=this.isPlaying=!1;this.replaySearchQueries=[];this.onRecordingDone=void 0;this.lastInsertModeChanges=Dd()}function Ba(F){F.state.vim||(F.state.vim={inputState:new Ya,lastEditInputState:void 0,lastEditActionCommand:void 0,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},fakeCursor:null,insertMode:!1,insertModeRepeat:void 0,visualMode:!1,visualLine:!1,visualBlock:!1,lastSelection:null,lastPastedText:null,sel:{},options:{}});
return F.state.vim}function Va(){Gc={searchQuery:null,searchIsReversed:!1,lastSubstituteReplacePart:void 0,jumpList:Qd(),macroModeState:new aa,lastCharacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new l({}),searchHistoryController:new q,exCommandHistoryController:new q};for(var F in Ld){var M=Ld[F];M.value=M.defaultValue}}function Ya(){this.prefixRepeat=[];this.motionRepeat=[];this.motionArgs=this.motion=this.operatorArgs=this.operator=null;this.keyBuffer=[];this.registerName=
null}function d(F,M){F.state.vim.inputState=new Ya;p.signal(F,"vim-command-done",M)}function f(F,M,da){this.clear();this.keyBuffer=[F||""];this.insertModeChanges=[];this.searchQueries=[];this.linewise=!!M;this.blockwise=!!da}function l(F){this.registers=F;this.unnamedRegister=F['"']=new f;F["."]=new f;F[":"]=new f;F["/"]=new f}function q(){this.historyBuffer=[];this.iterator=0;this.initialPrefix=null}function w(F,M){for(var da=[],Aa=0;Aa<M;Aa++)da.push(F);return da}function z(F,M){var da=F.state.vim,
Aa=da.insertMode||da.visualMode;da=Math.min(Math.max(F.firstLine(),M.line),F.lastLine());F=Ga(F,da)-1+!!Aa;return O(da,Math.min(Math.max(0,M.ch),F))}function G(F){var M={},da;for(da in F)F.hasOwnProperty(da)&&(M[da]=F[da]);return M}function H(F,M,da){"object"===typeof M&&(da=M.ch,M=M.line);return O(F.line+M,F.ch+da)}function R(F,M,da){return function(){for(var Aa=0;Aa<da;Aa++)M(F)}}function ha(F){return O(F.line,F.ch)}function Ja(F,M){return F.ch==M.ch&&F.line==M.line}function D(F,M){return F.line<
M.line||F.line==M.line&&F.ch<M.ch?!0:!1}function Q(F,M){2<arguments.length&&(M=Q.apply(void 0,Array.prototype.slice.call(arguments,1)));return D(F,M)?F:M}function oa(F,M){2<arguments.length&&(M=oa.apply(void 0,Array.prototype.slice.call(arguments,1)));return D(F,M)?M:F}function Fa(F,M,da){F=D(F,M);M=D(M,da);return F&&M}function Ga(F,M){return F.getLine(M).length}function xb(F){return F.trim?F.trim():F.replace(/^\s+|\s+$/g,"")}function Hb(F,M,da){var Aa=Ga(F,M);da=Array(da-Aa+1).join(" ");F.setCursor(O(M,
Aa));F.replaceRange(da,F.getCursor())}function Kb(F,M){var da=[],Aa=F.listSelections(),Wa=ha(F.clipPos(M)),Ra=!Ja(M,Wa),Bb;a:{var Ob=F.getCursor("head");for(Bb=0;Bb<Aa.length;Bb++){var tb=Ja(Aa[Bb].anchor,Ob),Tb=Ja(Aa[Bb].head,Ob);if(tb||Tb)break a}Bb=-1}Ob=Ja(Aa[Bb].head,Aa[Bb].anchor);tb=Aa.length-1;var mc=tb-Bb>Bb?tb:0;Bb=Aa[mc].anchor;var K=Math.min(Bb.line,Wa.line);tb=Math.max(Bb.line,Wa.line);Tb=Bb.ch;Wa=Wa.ch;Aa=Aa[mc].head.ch-Tb;mc=Wa-Tb;0<Aa&&0>=mc?(Tb++,Ra||Wa--):0>Aa&&0<=mc?(Tb--,Ob||Wa++):
0>Aa&&-1==mc&&(Tb--,Wa++);for(Ra=K;Ra<=tb;Ra++)Aa={anchor:new O(Ra,Tb),head:new O(Ra,Wa)},da.push(Aa);F.setSelections(da);M.ch=Wa;Bb.ch=Tb;return Bb}function Cb(F,M,da){for(var Aa=[],Wa=0;Wa<da;Wa++){var Ra=H(M,Wa,0);Aa.push({anchor:Ra,head:Ra})}F.setSelections(Aa,0)}function ib(F,M){var da=M.lastSelection,Aa=function(){var Ra=F.listSelections(),Bb=Ra[0];Ra=Ra[Ra.length-1];Bb=D(Bb.anchor,Bb.head)?Bb.anchor:Bb.head;Ra=D(Ra.anchor,Ra.head)?Ra.head:Ra.anchor;return[Bb,Ra]},Wa=function(){var Ra=F.getCursor(),
Bb=F.getCursor(),Ob=da.visualBlock;if(Ob){Bb=O(Ra.line+Ob.height,Ra.ch+Ob.width);Ob=[];for(var tb=Ra.line;tb<Bb.line;tb++){var Tb=O(tb,Ra.ch),mc=O(tb,Bb.ch);Ob.push({anchor:Tb,head:mc})}F.setSelections(Ob)}else tb=da.anchorMark.find(),Tb=da.headMark.find(),Ob=Tb.line-tb.line,tb=Tb.ch-tb.ch,Bb={line:Bb.line+Ob,ch:Ob?Bb.ch:tb+Bb.ch},da.visualLine&&(Ra=O(Ra.line,0),Bb=O(Bb.line,Ga(F,Bb.line))),F.setSelection(Ra,Bb);return[Ra,Bb]};return M.visualMode?Aa():Wa()}function Ib(F,M){var da=M.sel.anchor,Aa=
M.sel.head;M.lastPastedText&&(Aa=F.posFromIndex(F.indexFromPos(da)+M.lastPastedText.length),M.lastPastedText=null);M.lastSelection={anchorMark:F.setBookmark(da),headMark:F.setBookmark(Aa),anchor:ha(da),head:ha(Aa),visualMode:M.visualMode,visualLine:M.visualLine,visualBlock:M.visualBlock}}function Oa(F,M,da){var Aa=F.state.vim;M=M||Aa.sel;da=da||Aa.visualLine?"line":Aa.visualBlock?"block":"char";M=Ua(F,M,da);F.setSelections(M.ranges,M.primary);lc(F)}function Ua(F,M,da,Aa){var Wa=ha(M.head),Ra=ha(M.anchor);
if("char"==da)return Wa=Aa||D(M.head,M.anchor)?0:1,Ra=D(M.head,M.anchor)?1:0,Wa=H(M.head,0,Wa),Ra=H(M.anchor,0,Ra),{ranges:[{anchor:Ra,head:Wa}],primary:0};if("line"==da)return D(M.head,M.anchor)?(Wa.ch=0,Ra.ch=Ga(F,Ra.line)):(Ra.ch=0,M=F.lastLine(),Wa.line>M&&(Wa.line=M),Wa.ch=Ga(F,Wa.line)),{ranges:[{anchor:Ra,head:Wa}],primary:0};if("block"==da){M=Math.min(Ra.line,Wa.line);F=Math.min(Ra.ch,Wa.ch);da=Math.max(Ra.ch,Wa.ch)+1;Ra=Math.max(Ra.line,Wa.line)-M+1;Wa=Wa.line==M?0:Ra-1;Aa=[];for(var Bb=
0;Bb<Ra;Bb++)Aa.push({anchor:O(M+Bb,F),head:O(M+Bb,da)});return{ranges:Aa,primary:Wa}}}function Pa(F,M){var da=F.state.vim;!1!==M&&F.setCursor(z(F,da.sel.head));Ib(F,da);da.visualMode=!1;da.visualLine=!1;da.visualBlock=!1;p.signal(F,"vim-mode-change",{mode:"normal"});gb(da)}function ja(F){if(!F)return 0;var M=F.search(/\S/);return-1==M?F.length:M}function Qa(F,M,da,Aa,Wa){da=F.getCursor("head");1==F.getSelection().length&&(da=Q(da,F.getCursor("anchor")));F=F.getLine(da.line);var Ra=da.ch;for(Wa=Wa?
Ec[0]:dd[0];!Wa(F.charAt(Ra));)if(Ra++,Ra>=F.length)return null;Aa?Wa=dd[0]:(Wa=Ec[0],Wa(F.charAt(Ra))||(Wa=Ec[1]));for(Aa=Ra;Wa(F.charAt(Aa))&&Aa<F.length;)Aa++;for(;Wa(F.charAt(Ra))&&0<=Ra;)Ra--;Ra++;if(M){for(M=Aa;/\s/.test(F.charAt(Aa))&&Aa<F.length;)Aa++;if(M==Aa){for(M=Ra;/\s/.test(F.charAt(Ra-1))&&0<Ra;)Ra--;Ra||(Ra=M)}}return{start:O(da.line,Ra),end:O(da.line,Aa)}}function Za(F,M){Gc.lastCharacterSearch.increment=F;Gc.lastCharacterSearch.forward=M.forward;Gc.lastCharacterSearch.selectedCharacter=
M.selectedCharacter}function qb(F,M,da,Aa){for(var Wa=F.getCursor(),Ra=Wa.ch,Bb,Ob=0;Ob<M;Ob++){Bb=F.getLine(Wa.line);var tb=Aa;Bb=da?Bb.indexOf(tb,Ra+1):Bb.lastIndexOf(tb,Ra-1);if(-1==Bb)return null;Ra=Bb}return O(F.getCursor().line,Bb)}function La(F,M,da,Aa){ya(da,Wd)&&(M.marks[da]&&M.marks[da].clear(),M.marks[da]=F.setBookmark(Aa))}function Na(F,M,da,Aa,Wa){function Ra(Tb,mc,K){return K?!F.getLine(Tb)!=!F.getLine(Tb+mc):!!F.getLine(Tb)&&!F.getLine(Tb+mc)}M=M.line;var Bb=F.firstLine(),Ob=F.lastLine(),
tb=M;if(Aa){for(;Bb<=tb&&tb<=Ob&&0<da;)Ra(tb,Aa)&&da--,tb+=Aa;return new O(tb,0)}tb=F.state.vim;tb.visualLine&&Ra(M,1,!0)&&(tb=tb.sel.anchor,Ra(tb.line,-1,!0)&&(Wa&&tb.line==M||(M+=1)));Aa=!F.getLine(M);for(tb=M;tb<=Ob&&da;tb++)Ra(tb,1,!0)&&(Wa&&!F.getLine(tb)==Aa||da--);da=new O(tb,0);tb>Ob&&!Aa?Aa=!0:Wa=!1;for(tb=M;tb>Bb&&(Wa&&!F.getLine(tb)!=Aa&&tb!=M||!Ra(tb,-1,!0));tb--);return{start:new O(tb,0),end:da}}function kb(F,M,da,Aa){function Wa(Ob,tb){0>tb.pos+tb.dir||tb.pos+tb.dir>=tb.line.length?
(tb.ln+=tb.dir,ra(Ob,tb.ln)?(tb.line=Ob.getLine(tb.ln),tb.pos=0<tb.dir?0:tb.line.length-1):(tb.line=null,tb.ln=null,tb.pos=null)):tb.pos+=tb.dir}function Ra(Ob,tb,Tb,mc){var K=Ob.getLine(tb),m=""===K;K={line:K,ln:tb,pos:Tb,dir:mc};tb={ln:K.ln,pos:K.pos};Tb=""===K.line;for(Wa(Ob,K);null!==K.line;){tb.ln=K.ln;tb.pos=K.pos;if(""!==K.line||Tb){if(m&&""!==K.line&&!qa(K.line[K.pos]))return{ln:K.ln,pos:K.pos};-1==".?!".indexOf(K.line[K.pos])||m||K.pos!==K.line.length-1&&!qa(K.line[K.pos+1])||(m=!0)}else return{ln:K.ln,
pos:K.pos};Wa(Ob,K)}K=Ob.getLine(tb.ln);tb.pos=0;for(Ob=K.length-1;0<=Ob;--Ob)if(!qa(K[Ob])){tb.pos=Ob;break}return tb}function Bb(Ob,tb,Tb,mc){var K=Ob.getLine(tb);K={line:K,ln:tb,pos:Tb,dir:mc};tb={ln:K.ln,pos:null};Tb=""===K.line;for(Wa(Ob,K);null!==K.line;){if(""!==K.line||Tb){if(-1!=".?!".indexOf(K.line[K.pos])&&null!==tb.pos&&(K.ln!==tb.ln||K.pos+1!==tb.pos))return tb;""===K.line||qa(K.line[K.pos])||(Tb=!1,tb={ln:K.ln,pos:K.pos})}else return null!==tb.pos?tb:{ln:K.ln,pos:K.pos};Wa(Ob,K)}K=Ob.getLine(tb.ln);
for(Ob=tb.pos=0;Ob<K.length;++Ob)if(!qa(K[Ob])){tb.pos=Ob;break}return tb}for(M={ln:M.line,pos:M.ch};0<da;)M=0>Aa?Bb(F,M.ln,M.pos,Aa):Ra(F,M.ln,M.pos,Aa),da--;return O(M.ln,M.pos)}function Sa(){}function vb(F){F=F.state.vim;return F.searchState_||(F.searchState_=new Sa)}function jb(F,M){M=nb(F,M)||[];if(!M.length)return[];var da=[];if(0===M[0]){for(var Aa=0;Aa<M.length;Aa++)"number"==typeof M[Aa]&&da.push(F.substring(M[Aa]+1,M[Aa+1]));return da}}function nb(F,M){M||(M="/");for(var da=!1,Aa=[],Wa=
0;Wa<F.length;Wa++){var Ra=F.charAt(Wa);da||Ra!=M||Aa.push(Wa);da=!da&&"\\"==Ra}return Aa}function sb(F,M){F.openNotification?F.openNotification('\x3cspan style\x3d"color: red"\x3e'+M+"\x3c/span\x3e",{bottom:!0,duration:5E3}):alert(M)}function hc(F,M){var da=(M.prefix||"")+" "+(M.desc||""),Aa=M.desc,Wa='\x3cspan style\x3d"font-family: monospace; white-space: pre"\x3e'+(M.prefix||"")+'\x3cinput type\x3d"text" autocorrect\x3d"off" autocapitalize\x3d"off" spellcheck\x3d"false"\x3e\x3c/span\x3e';Aa&&
(Wa+=' \x3cspan style\x3d"color: #888"\x3e'+Aa+"\x3c/span\x3e");Aa=M.onClose;F.openDialog?F.openDialog(Wa,Aa,{bottom:!0,value:M.value,onKeyDown:M.onKeyDown,onKeyUp:M.onKeyUp,selectValueOnOpen:!1}):Aa(prompt(da,""))}function Nb(F,M,da,Aa){if(M){var Wa=vb(F);da=!!da;Aa=!!Aa;Gc.registerController.getRegister("/").setText(M);if(M instanceof RegExp)var Ra=M;else{var Bb=nb(M,"/");if(Bb.length){var Ob=M.substring(0,Bb[0]);Ra=-1!=M.substring(Bb[0]).indexOf("i")}else Ob=M;if(Ob){if(!Ha("pcre")){M=Ob;Bb=!1;
Ob=[];for(var tb=-1;tb<M.length;tb++){var Tb=M.charAt(tb)||"",mc=M.charAt(tb+1)||"",K=mc&&-1!="|(){".indexOf(mc);Bb?("\\"===Tb&&K||Ob.push(Tb),Bb=!1):"\\"===Tb?(Bb=!0,mc&&-1!="}".indexOf(mc)&&(K=!0),K&&"\\"!==mc||Ob.push(Tb)):(Ob.push(Tb),K&&"\\"!==mc&&Ob.push("\\"))}Ob=Ob.join("")}Aa&&(da=/^[^A-Z]*$/.test(Ob));Ra=new RegExp(Ob,da||Ra?"i":void 0)}else Ra=null}if(Ra){nc(F,Ra);a:if(F=Wa.getQuery(),Ra instanceof RegExp&&F instanceof RegExp){da=["global","multiline","ignoreCase","source"];for(Aa=0;Aa<
da.length;Aa++)if(M=da[Aa],Ra[M]!==F[M]){F=!1;break a}F=!0}else F=!1;if(F)return Ra;Wa.setQuery(Ra);return Ra}}}function cc(F){if("^"==F.source.charAt(0))var M=!0;return{token:function(da){if(M&&!da.sol())da.skipToEnd();else{var Aa=da.match(F,!1);if(Aa){if(0==Aa[0].length)return da.next(),"searching";if(!da.sol()&&(da.backUp(1),!F.exec(da.next()+Aa[0])))return da.next(),null;da.match(F);return"searching"}for(;!da.eol()&&(da.next(),!da.match(F,!1)););}},query:F}}function nc(F,M){clearTimeout(xc);xc=
setTimeout(function(){var da=vb(F),Aa=da.getOverlay();Aa&&M==Aa.query||(Aa&&F.removeOverlay(Aa),Aa=cc(M),F.addOverlay(Aa),F.showMatchesOnScrollbar&&(da.getScrollbarAnnotate()&&da.getScrollbarAnnotate().clear(),da.setScrollbarAnnotate(F.showMatchesOnScrollbar(M))),da.setOverlay(Aa))},50)}function Fc(F,M,da,Aa){void 0===Aa&&(Aa=1);return F.operation(function(){for(var Wa=F.getCursor(),Ra=F.getSearchCursor(da,Wa),Bb=0;Bb<Aa;Bb++){var Ob=Ra.find(M);0==Bb&&Ob&&Ja(Ra.from(),Wa)&&(Ob=Ra.find(M));if(!Ob&&
(Ra=F.getSearchCursor(da,M?O(F.lastLine()):O(F.firstLine(),0)),!Ra.find(M)))return}return Ra.from()})}function oc(F){var M=vb(F);F.removeOverlay(vb(F).getOverlay());M.setOverlay(null);M.getScrollbarAnnotate()&&(M.getScrollbarAnnotate().clear(),M.setScrollbarAnnotate(null))}function ec(F,M,da){"number"!=typeof F&&(F=F.line);return M instanceof Array?ya(F,M):da?F>=M&&F<=da:F==M}function lb(F){var M=F.getScrollInfo(),da=F.coordsChar({left:0,top:6+M.top},"local");F=F.coordsChar({left:0,top:M.clientHeight-
10+M.top},"local");return{top:da.line,bottom:F.line}}function Gb(F,M,da){return"'"==da||"`"==da?Gc.jumpList.find(F,-1)||O(0,0):"."==da?kc(F):(F=M.marks[da])&&F.find()}function kc(F){F=F.doc.history.done;for(var M=F.length;M--;)if(F[M].changes)return ha(F[M].changes[0].to)}function V(F,M,da,Aa,Wa,Ra,Bb,Ob,tb){function Tb(){F.operation(function(){for(;!k;)mc(),K();m()})}function mc(){var x=F.getRange(Ra.from(),Ra.to()).replace(Bb,Ob);Ra.replace(x)}function K(){for(;Ra.findNext()&&ec(Ra.from(),Aa,Wa);)if(da||
!r||Ra.from().line!=r.line){F.scrollIntoView(Ra.from(),30);F.setSelection(Ra.from(),Ra.to());r=Ra.from();k=!1;return}k=!0}function m(x){x&&x();F.focus();r&&(F.setCursor(r),x=F.state.vim,x.exMode=!1,x.lastHPos=x.lastHSPos=r.ch);tb&&tb()}F.state.vim.exMode=!0;var k=!1,r=Ra.from();K();k?sb(F,"No matches for "+Bb.source):M?hc(F,{prefix:"replace with \x3cstrong\x3e"+Ob+"\x3c/strong\x3e (y/n/a/q/l)",onKeyDown:function(x,J,Z){p.e_stop(x);switch(p.keyName(x)){case "Y":mc();K();break;case "N":K();break;case "A":x=
tb;tb=void 0;F.operation(Tb);tb=x;break;case "L":mc();case "Q":case "Esc":case "Ctrl-C":case "Ctrl-[":m(Z)}k&&m(Z);return!0}}):(Tb(),tb&&tb())}function hb(F){var M=F.state.vim,da=Gc.macroModeState,Aa=Gc.registerController.getRegister("."),Wa=da.isPlaying,Ra=da.lastInsertModeChanges;Wa||(F.off("change",Wb),p.off(F.getInputField(),"keydown",cb));!Wa&&1<M.insertModeRepeat&&(Ia(F,M,M.insertModeRepeat-1,!0),M.lastEditInputState.repeatOverride=M.insertModeRepeat);delete M.insertModeRepeat;M.insertMode=
!1;F.setCursor(F.getCursor().line,F.getCursor().ch-1);F.setOption("keyMap","vim");F.setOption("disableInput",!0);F.toggleOverwrite(!1);Aa.setText(Ra.changes.join(""));p.signal(F,"vim-mode-change",{mode:"normal"});da.isRecording&&(da.isPlaying||(F=Gc.registerController.getRegister(da.latestRegister))&&F.pushInsertModeChanges&&F.pushInsertModeChanges(da.lastInsertModeChanges))}function Mb(F){ma.unshift(F)}function Wb(F,M){var da=Gc.macroModeState,Aa=da.lastInsertModeChanges;if(!da.isPlaying)for(;M;){Aa.expectCursorActivityForChange=
!0;if(1<Aa.ignoreCount)Aa.ignoreCount--;else if("+input"==M.origin||"paste"==M.origin||void 0===M.origin)da=F.listSelections().length,1<da&&(Aa.ignoreCount=da),da=M.text.join("\n"),Aa.maybeReset&&(Aa.changes=[],Aa.maybeReset=!1),da&&(F.state.overwrite&&!/\n/.test(da)?Aa.changes.push([da]):Aa.changes.push(da));M=M.next}}function Ub(F){var M=F.state.vim;if(M.insertMode){var da=Gc.macroModeState;if(da.isPlaying)return;da=da.lastInsertModeChanges;da.expectCursorActivityForChange?da.expectCursorActivityForChange=
!1:da.maybeReset=!0}else if(!F.curOp.isVimOp){da=F.getCursor("anchor");var Aa=F.getCursor("head");M.visualMode&&!F.somethingSelected()?Pa(F,!1):M.visualMode||M.insertMode||!F.somethingSelected()||(M.visualMode=!0,M.visualLine=!1,p.signal(F,"vim-mode-change",{mode:"visual"}));if(M.visualMode){var Wa=D(Aa,da)?0:-1,Ra=D(Aa,da)?-1:0;Aa=H(Aa,0,Wa);da=H(da,0,Ra);M.sel={anchor:da,head:Aa};La(F,M,"\x3c",Q(Aa,da));La(F,M,"\x3e",oa(Aa,da))}else M.insertMode||(M.lastHPos=F.getCursor().ch)}M.visualMode&&lc(F)}
function lc(F){var M=F.state.vim,da=z(F,ha(M.sel.head)),Aa=H(da,0,1);gb(M);da.ch==F.getLine(da.line).length?(Aa=document.createElement("span"),Aa.textContent="Â ",Aa.className="cm-animate-fat-cursor",M.fakeCursorBookmark=F.setBookmark(da,{widget:Aa})):M.fakeCursor=F.markText(da,Aa,{className:"cm-animate-fat-cursor"})}function gb(F){F.fakeCursor&&(F.fakeCursor.clear(),F.fakeCursor=null);F.fakeCursorBookmark&&(F.fakeCursorBookmark.clear(),F.fakeCursorBookmark=null)}function xa(F){this.keyName=F}function cb(F){function M(){da.maybeReset&&
(da.changes=[],da.maybeReset=!1);da.changes.push(new xa(Aa));return!0}var da=Gc.macroModeState.lastInsertModeChanges,Aa=p.keyName(F);Aa&&(-1==Aa.indexOf("Delete")&&-1==Aa.indexOf("Backspace")||p.lookupKey(Aa,"vim-insert",M))}function Ia(F,M,da,Aa){function Wa(){Ob?gc.processAction(F,M,M.lastEditActionCommand):gc.evalInput(F,M)}function Ra(mc){0<Bb.lastInsertModeChanges.changes.length&&(mc=M.lastEditActionCommand?mc:1,mb(F,Bb.lastInsertModeChanges.changes,mc))}var Bb=Gc.macroModeState;Bb.isPlaying=
!0;var Ob=!!M.lastEditActionCommand,tb=M.inputState;M.inputState=M.lastEditInputState;if(Ob&&M.lastEditActionCommand.interlaceInsertRepeat)for(var Tb=0;Tb<da;Tb++)Wa(),Ra(1);else Aa||Wa(),Ra(da);M.inputState=tb;M.insertMode&&!Aa&&hb(F);Bb.isPlaying=!1}function mb(F,M,da){function Aa(K){if("string"==typeof K)p.commands[K](F);else K(F);return!0}var Wa=F.getCursor("head"),Ra=Gc.macroModeState.lastInsertModeChanges.visualBlock;Ra&&(Cb(F,Wa,Ra+1),da=F.listSelections().length,F.setCursor(Wa));for(var Bb=
0;Bb<da;Bb++){Ra&&F.setCursor(H(Wa,Bb,0));for(var Ob=0;Ob<M.length;Ob++){var tb=M[Ob];if(tb instanceof xa)p.lookupKey(tb.keyName,"vim-insert",Aa);else if("string"==typeof tb){var Tb=F.getCursor();F.replaceRange(tb,Tb,Tb)}else{Tb=F.getCursor();var mc=H(Tb,0,tb[0].length);F.replaceRange(tb[0],Tb,mc)}}}Ra&&F.setCursor(H(Wa,0,1))}p.defineOption("vimMode",!1,function(F,M,da){M&&"vim"!=F.getOption("keyMap")?F.setOption("keyMap","vim"):!M&&da!=p.Init&&/^vim/.test(F.getOption("keyMap"))&&F.setOption("keyMap",
"default")});var Sb={Shift:"S",Ctrl:"C",Alt:"A",Cmd:"D",Mod:"A"},Xb={Enter:"CR",Backspace:"BS",Delete:"Del",Insert:"Ins"},tc=/[\d]/,Ec=[p.isWordChar,function(F){return F&&!p.isWordChar(F)&&!/\s/.test(F)}],dd=[function(F){return/\S/.test(F)}],ud=va(65,26),Yc=va(97,26),Id=va(48,10),Wd=[].concat(ud,Yc,Id,["\x3c","\x3e"]),ge=[].concat(ud,Yc,Id,["-",'"',".",":","/"]),Ld={};ia("filetype",void 0,"string",["ft"],function(F,M){if(void 0!==M){if(void 0===F)return F=M.getOption("mode"),"null"==F?"":F;M.setOption("mode",
""==F?"null":F)}});var Qd=function(){function F(Ra,Bb){M+=Bb;M>da?M=da:M<Aa&&(M=Aa);var Ob=Wa[(100+M)%100];if(Ob&&!Ob.find()){Bb=0<Bb?1:-1;var tb;Ra=Ra.getCursor();do if(M+=Bb,(Ob=Wa[(100+M)%100])&&(tb=Ob.find())&&!Ja(Ra,tb))break;while(M<da&&M>Aa)}return Ob}var M=-1,da=0,Aa=0,Wa=Array(100);return{cachedCursor:void 0,add:function(Ra,Bb,Ob){function tb(mc){var K=++M%100,m=Wa[K];m&&m.clear();Wa[K]=Ra.setBookmark(mc)}var Tb=Wa[M%100];Tb?(Tb=Tb.find())&&!Ja(Tb,Bb)&&tb(Bb):tb(Bb);tb(Ob);da=M;Aa=M-100+
1;0>Aa&&(Aa=0)},find:function(Ra,Bb){var Ob=M;Ra=F(Ra,Bb);M=Ob;return Ra&&Ra.find()},move:F}},Dd=function(F){return F?{changes:F.changes,expectCursorActivityForChange:F.expectCursorActivityForChange}:{changes:[],expectCursorActivityForChange:!1}};aa.prototype={exitMacroRecordMode:function(){var F=Gc.macroModeState;if(F.onRecordingDone)F.onRecordingDone();F.onRecordingDone=void 0;F.isRecording=!1},enterMacroRecordMode:function(F,M){var da=Gc.registerController.getRegister(M);da&&(da.clear(),this.latestRegister=
M,F.openDialog&&(this.onRecordingDone=F.openDialog("(recording)["+M+"]",null,{bottom:!0})),this.isRecording=!0)}};var Gc,fb,Db={buildKeyMap:function(){},getRegisterController:function(){return Gc.registerController},resetVimGlobalState_:Va,getVimGlobalState_:function(){return Gc},maybeInitVimState_:Ba,suppressErrorLogging:!1,InsertModeKey:xa,map:function(F,M,da){Uc.map(F,M,da)},unmap:function(F,M){Uc.unmap(F,M)},noremap:function(F,M,da){function Aa(K){return K?[K]:["normal","insert","visual"]}for(var Wa=
Aa(da),Ra=ma.length,Bb=Ra-Ma;Bb<Ra&&Wa.length;Bb++){var Ob=ma[Bb];if(!(Ob.keys!=M||da&&Ob.context&&Ob.context!==da)&&"ex"!==Ob.type.substr(0,2)&&"key"!==Ob.type.substr(0,3)){var tb={},Tb;for(Tb in Ob)tb[Tb]=Ob[Tb];tb.keys=F;da&&!tb.context&&(tb.context=da);this._mapCommand(tb);var mc=Aa(Ob.context);Wa=Wa.filter(function(K){return-1===mc.indexOf(K)})}}},mapclear:function(F){var M=ma.length,da=ma.slice(0,M-Ma);ma=ma.slice(M-Ma);if(F)for(M=da.length-1;0<=M;M--){var Aa=da[M];if(F!==Aa.context)if(Aa.context)this._mapCommand(Aa);
else{var Wa=["normal","insert","visual"],Ra;for(Ra in Wa)if(Wa[Ra]!==F){var Bb={},Ob;for(Ob in Aa)Bb[Ob]=Aa[Ob];Bb.context=Wa[Ra];this._mapCommand(Bb)}}}},setOption:ea,getOption:Ha,defineOption:ia,defineEx:function(F,M,da){if(!M)M=F;else if(0!==F.indexOf(M))throw Error('(Vim.defineEx) "'+M+'" is not a prefix of "'+F+'", command not registered');bd[F]=da;Uc.commandMap_[M]={name:F,shortName:M,type:"api"}},handleKey:function(F,M,da){F=this.findKey(F,M,da);if("function"===typeof F)return F()},findKey:function(F,
M,da){function Aa(){if("\x3cEsc\x3e"==M)return d(F),Bb.visualMode?Pa(F):Bb.insertMode&&hb(F),!0}function Wa(){if(Aa())return!0;for(var tb=Bb.inputState.keyBuffer+=M,Tb=1==M.length,mc=gc.matchCommand(tb,ma,Bb.inputState,"insert");1<tb.length&&"full"!=mc.type;){tb=Bb.inputState.keyBuffer=tb.slice(1);var K=gc.matchCommand(tb,ma,Bb.inputState,"insert");"none"!=K.type&&(mc=K)}if("none"==mc.type)return d(F),!1;if("partial"==mc.type)return fb&&window.clearTimeout(fb),fb=window.setTimeout(function(){Bb.insertMode&&
Bb.inputState.keyBuffer&&d(F)},Ha("insertModeEscKeysTimeout")),!Tb;fb&&window.clearTimeout(fb);if(Tb){Tb=F.listSelections();for(K=0;K<Tb.length;K++){var m=Tb[K].head;F.replaceRange("",H(m,0,-(tb.length-1)),m,"+input")}Gc.macroModeState.lastInsertModeChanges.changes.pop()}d(F);return mc.command}function Ra(){if(M.startsWith("\x3cA-")||M.startsWith("\x3cS-A-"))return!1;a:{var tb=Gc.macroModeState;if(tb.isRecording){if("q"==M){tb.exitMacroRecordMode();d(F);var Tb=!0;break a}"mapping"!=da&&(Tb=M,tb.isPlaying||
(tb=Gc.registerController.getRegister(tb.latestRegister))&&tb.pushText(Tb))}Tb=void 0}if(Tb||Aa())return!0;Tb=Bb.inputState.keyBuffer+=M;if(/^[1-9]\d*$/.test(Tb))return!0;tb=/^(\d*)(.*)$/.exec(Tb);if(!tb)return d(F),!1;var mc=gc.matchCommand(tb[2]||tb[1],ma,Bb.inputState,Bb.visualMode?"visual":"normal");if("none"==mc.type)return d(F),!1;if("partial"==mc.type)return!0;Bb.inputState.keyBuffer="";tb=/^(\d*)(.*)$/.exec(Tb);tb[1]&&"0"!=tb[1]&&Bb.inputState.pushRepeatDigit(tb[1]);return mc.command}var Bb=
Ba(F);var Ob=Bb.insertMode?Wa():Ra();return!1===Ob?Bb.insertMode||1!==M.length?void 0:function(){return!0}:!0===Ob?function(){return!0}:function(){return F.operation(function(){F.curOp.isVimOp=!0;try{if("keyToKey"==Ob.type)for(var tb=Ob.toKeys,Tb;tb;)Tb=/<\w+-.+?>|<\w+>|./.exec(tb),M=Tb[0],tb=tb.substring(Tb.index+M.length),p.Vim.handleKey(F,M,"mapping");else gc.processCommand(F,Bb,Ob)}catch(mc){throw F.state.vim=void 0,Ba(F),p.Vim.suppressErrorLogging||console.log(mc),mc;}return!0})}},handleEx:function(F,
M){Uc.processCommand(F,M)},defineMotion:function(F,M){sc[F]=M},defineAction:function(F,M){Mc[F]=M},defineOperator:function(F,M){wc[F]=M},mapCommand:function(F,M,da,Aa,Wa){F={keys:F,type:M};F[M]=da;F[M+"Args"]=Aa;for(var Ra in Wa)F[Ra]=Wa[Ra];Mb(F)},_mapCommand:Mb,defineRegister:function(F,M){var da=Gc.registerController.registers;if(!F||1!=F.length)throw Error("Register name must be 1 character");if(da[F])throw Error("Register already defined "+F);da[F]=M;ge.push(F)},exitVisualMode:Pa,exitInsertMode:hb};
Ya.prototype.pushRepeatDigit=function(F){this.operator?this.motionRepeat=this.motionRepeat.concat(F):this.prefixRepeat=this.prefixRepeat.concat(F)};Ya.prototype.getRepeat=function(){var F=0;if(0<this.prefixRepeat.length||0<this.motionRepeat.length)F=1,0<this.prefixRepeat.length&&(F*=parseInt(this.prefixRepeat.join(""),10)),0<this.motionRepeat.length&&(F*=parseInt(this.motionRepeat.join(""),10));return F};f.prototype={setText:function(F,M,da){this.keyBuffer=[F||""];this.linewise=!!M;this.blockwise=
!!da},pushText:function(F,M){M&&(this.linewise||this.keyBuffer.push("\n"),this.linewise=!0);this.keyBuffer.push(F)},pushInsertModeChanges:function(F){this.insertModeChanges.push(Dd(F))},pushSearchQuery:function(F){this.searchQueries.push(F)},clear:function(){this.keyBuffer=[];this.insertModeChanges=[];this.searchQueries=[];this.linewise=!1},toString:function(){return this.keyBuffer.join("")}};l.prototype={pushText:function(F,M,da,Aa,Wa){Aa&&"\n"!==da.charAt(da.length-1)&&(da+="\n");var Ra=this.isValidRegister(F)?
this.getRegister(F):null;if(Ra)Y(F)?Ra.pushText(da,Aa):Ra.setText(da,Aa,Wa),this.unnamedRegister.setText(Ra.toString(),Aa);else{switch(M){case "yank":this.registers["0"]=new f(da,Aa,Wa);break;case "delete":case "change":-1==da.indexOf("\n")?this.registers["-"]=new f(da,Aa):(this.shiftNumericRegisters_(),this.registers["1"]=new f(da,Aa))}this.unnamedRegister.setText(da,Aa,Wa)}},getRegister:function(F){if(!this.isValidRegister(F))return this.unnamedRegister;F=F.toLowerCase();this.registers[F]||(this.registers[F]=
new f);return this.registers[F]},isValidRegister:function(F){return F&&ya(F,ge)},shiftNumericRegisters_:function(){for(var F=9;2<=F;F--)this.registers[F]=this.getRegister(""+(F-1))}};q.prototype={nextMatch:function(F,M){var da=this.historyBuffer,Aa=M?-1:1;null===this.initialPrefix&&(this.initialPrefix=F);for(var Wa=this.iterator+Aa;M?0<=Wa:Wa<da.length;Wa+=Aa)for(var Ra=da[Wa],Bb=0;Bb<=Ra.length;Bb++)if(this.initialPrefix==Ra.substring(0,Bb))return this.iterator=Wa,Ra;if(Wa>=da.length)return this.iterator=
da.length,this.initialPrefix;if(0>Wa)return F},pushInput:function(F){var M=this.historyBuffer.indexOf(F);-1<M&&this.historyBuffer.splice(M,1);F.length&&this.historyBuffer.push(F)},reset:function(){this.initialPrefix=null;this.iterator=this.historyBuffer.length}};var gc={matchCommand:function(F,M,da,Aa){var Wa=[];var Ra=[];for(var Bb=0;Bb<M.length;Bb++){var Ob=M[Bb],tb;if(tb=!("insert"==Aa&&"insert"!=Ob.context||Ob.context&&Ob.context!=Aa||da.operator&&"action"==Ob.type)){var Tb=F;var mc=Ob.keys;if("\x3ccharacter\x3e"==
mc.slice(-11)){tb=mc.length-11;var K=Tb.slice(0,tb);mc=mc.slice(0,tb);Tb=K==mc&&Tb.length>tb?"full":0==mc.indexOf(K)?"partial":!1}else Tb=Tb==mc?"full":0==mc.indexOf(Tb)?"partial":!1;tb=Tb}tb&&("partial"==Tb&&Wa.push(Ob),"full"==Tb&&Ra.push(Ob))}M=Wa.length&&Wa;Ra=Ra.length&&Ra;if(!Ra&&!M)return{type:"none"};if(!Ra&&M)return{type:"partial"};var m;for(M=0;M<Ra.length;M++)Aa=Ra[M],m||(m=Aa);if("\x3ccharacter\x3e"==m.keys.slice(-11)){F=(Ra=/^.*(<[^>]+>)$/.exec(F))?Ra[1]:F.slice(-1);if(1<F.length)switch(F){case "\x3cCR\x3e":F=
"\n";break;case "\x3cSpace\x3e":F=" ";break;default:F=""}if(!F)return{type:"none"};da.selectedCharacter=F}return{type:"full",command:m}},processCommand:function(F,M,da){M.inputState.repeatOverride=da.repeatOverride;switch(da.type){case "motion":this.processMotion(F,M,da);break;case "operator":this.processOperator(F,M,da);break;case "operatorMotion":this.processOperatorMotion(F,M,da);break;case "action":this.processAction(F,M,da);break;case "search":this.processSearch(F,M,da);break;case "ex":case "keyToEx":this.processEx(F,
M,da)}},processMotion:function(F,M,da){M.inputState.motion=da.motion;M.inputState.motionArgs=G(da.motionArgs);this.evalInput(F,M)},processOperator:function(F,M,da){var Aa=M.inputState;if(Aa.operator){if(Aa.operator==da.operator){Aa.motion="expandToLine";Aa.motionArgs={linewise:!0};this.evalInput(F,M);return}d(F)}Aa.operator=da.operator;Aa.operatorArgs=G(da.operatorArgs);da.exitVisualBlock&&(M.visualBlock=!1,Oa(F));M.visualMode&&this.evalInput(F,M)},processOperatorMotion:function(F,M,da){var Aa=M.visualMode,
Wa=G(da.operatorMotionArgs);Wa&&Aa&&Wa.visualLine&&(M.visualLine=!0);this.processOperator(F,M,da);Aa||this.processMotion(F,M,da)},processAction:function(F,M,da){var Aa=M.inputState,Wa=Aa.getRepeat(),Ra=!!Wa,Bb=G(da.actionArgs)||{};Aa.selectedCharacter&&(Bb.selectedCharacter=Aa.selectedCharacter);da.operator&&this.processOperator(F,M,da);da.motion&&this.processMotion(F,M,da);(da.motion||da.operator)&&this.evalInput(F,M);Bb.repeat=Wa||1;Bb.repeatIsExplicit=Ra;Bb.registerName=Aa.registerName;d(F);M.lastMotion=
null;da.isEdit&&this.recordLastEdit(M,Aa,da);Mc[da.action](F,Bb,M)},processSearch:function(F,M,da){function Aa(r,x,J){Gc.searchHistoryController.pushInput(r);Gc.searchHistoryController.reset();try{Nb(F,r,x,J)}catch(Z){sb(F,"Invalid regex: "+r);d(F);return}gc.processMotion(F,M,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:da.searchArgs.toJumplist}})}function Wa(r){F.scrollTo(K.left,K.top);Aa(r,!0,!0);var x=Gc.macroModeState;x.isRecording&&(x.isPlaying||(x=Gc.registerController.getRegister(x.latestRegister))&&
x.pushSearchQuery&&x.pushSearchQuery(r))}function Ra(r,x,J){var Z=p.keyName(r);if("Up"==Z||"Down"==Z){var sa=r.target?r.target.selectionEnd:0;x=Gc.searchHistoryController.nextMatch(x,"Up"==Z?!0:!1)||"";J(x);sa&&r.target&&(r.target.selectionEnd=r.target.selectionStart=Math.min(sa,r.target.value.length))}else"Left"!=Z&&"Right"!=Z&&"Ctrl"!=Z&&"Alt"!=Z&&"Shift"!=Z&&Gc.searchHistoryController.reset();try{var bb=Nb(F,x,!0,!0)}catch(Ta){}bb?F.scrollIntoView(Fc(F,!Ob,bb),30):(oc(F),F.scrollTo(K.left,K.top))}
function Bb(r,x,J){var Z=p.keyName(r);"Esc"==Z||"Ctrl-C"==Z||"Ctrl-["==Z||"Backspace"==Z&&""==x?(Gc.searchHistoryController.pushInput(x),Gc.searchHistoryController.reset(),Nb(F,mc),oc(F),F.scrollTo(K.left,K.top),p.e_stop(r),d(F),J(),F.focus()):"Up"==Z||"Down"==Z?p.e_stop(r):"Ctrl-U"==Z&&(p.e_stop(r),J(""))}if(F.getSearchCursor){var Ob=da.searchArgs.forward,tb=da.searchArgs.wholeWordOnly;vb(F).setReversed(!Ob);var Tb=Ob?"/":"?",mc=vb(F).getQuery(),K=F.getScrollInfo();switch(da.searchArgs.querySrc){case "prompt":tb=
Gc.macroModeState;tb.isPlaying?(Tb=tb.replaySearchQueries.shift(),Aa(Tb,!0,!1)):hc(F,{onClose:Wa,prefix:Tb,desc:vc,onKeyUp:Ra,onKeyDown:Bb});break;case "wordUnderCursor":var m=Qa(F,!1,!0,!1,!0),k=!0;m||(m=Qa(F,!1,!0,!1,!1),k=!1);m&&(Tb=F.getLine(m.start.line).substring(m.start.ch,m.end.ch),Tb=k&&tb?"\\b"+Tb+"\\b":Tb.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1"),Gc.jumpList.cachedCursor=F.getCursor(),F.setCursor(m.start),Aa(Tb,!0,!1))}}},processEx:function(F,M,da){function Aa(Ra){Gc.exCommandHistoryController.pushInput(Ra);
Gc.exCommandHistoryController.reset();Uc.processCommand(F,Ra)}function Wa(Ra,Bb,Ob){var tb=p.keyName(Ra);if("Esc"==tb||"Ctrl-C"==tb||"Ctrl-["==tb||"Backspace"==tb&&""==Bb)Gc.exCommandHistoryController.pushInput(Bb),Gc.exCommandHistoryController.reset(),p.e_stop(Ra),d(F),Ob(),F.focus();if("Up"==tb||"Down"==tb){p.e_stop(Ra);var Tb=Ra.target?Ra.target.selectionEnd:0;Bb=Gc.exCommandHistoryController.nextMatch(Bb,"Up"==tb?!0:!1)||"";Ob(Bb);Tb&&Ra.target&&(Ra.target.selectionEnd=Ra.target.selectionStart=
Math.min(Tb,Ra.target.value.length))}else"Ctrl-U"==tb?(p.e_stop(Ra),Ob("")):"Left"!=tb&&"Right"!=tb&&"Ctrl"!=tb&&"Alt"!=tb&&"Shift"!=tb&&Gc.exCommandHistoryController.reset()}"keyToEx"==da.type?Uc.processCommand(F,da.exArgs.input):M.visualMode?hc(F,{onClose:Aa,prefix:":",value:"'\x3c,'\x3e",onKeyDown:Wa,selectValueOnOpen:!1}):hc(F,{onClose:Aa,prefix:":",onKeyDown:Wa})},evalInput:function(F,M){var da=M.inputState,Aa=da.motion,Wa=da.motionArgs||{},Ra=da.operator,Bb=da.operatorArgs||{},Ob=da.registerName,
tb=M.sel,Tb=ha(M.visualMode?z(F,tb.head):F.getCursor("head")),mc=ha(M.visualMode?z(F,tb.anchor):F.getCursor("anchor")),K=ha(Tb);mc=ha(mc);Ra&&this.recordLastEdit(M,da);var m=void 0!==da.repeatOverride?da.repeatOverride:da.getRepeat();if(0<m&&Wa.explicitRepeat)Wa.repeatIsExplicit=!0;else if(Wa.noRepeat||!Wa.explicitRepeat&&0===m)m=1,Wa.repeatIsExplicit=!1;da.selectedCharacter&&(Wa.selectedCharacter=Bb.selectedCharacter=da.selectedCharacter);Wa.repeat=m;d(F);if(Aa){var k=sc[Aa](F,Tb,Wa,M);M.lastMotion=
sc[Aa];if(!k)return;Wa.toJumplist&&(Aa=Gc.jumpList,(da=Aa.cachedCursor)?(Ja(da,k)||Gc.jumpList.add(F,da,k),delete Aa.cachedCursor):Ja(Tb,k)||Gc.jumpList.add(F,Tb,k));if(k instanceof Array){var r=k[0];k=k[1]}k||(k=ha(Tb));M.visualMode?(M.visualBlock&&Infinity===k.ch||(k=z(F,k)),r&&(r=z(F,r)),r=r||mc,tb.anchor=r,tb.head=k,Oa(F),La(F,M,"\x3c",D(r,k)?r:k),La(F,M,"\x3e",D(r,k)?k:r)):Ra||(k=z(F,k),F.setCursor(k.line,k.ch))}if(Ra){Bb.lastSel?(r=mc,tb=Bb.lastSel,k=Math.abs(tb.head.line-tb.anchor.line),Tb=
Math.abs(tb.head.ch-tb.anchor.ch),k=tb.visualLine?O(mc.line+k,mc.ch):tb.visualBlock?O(mc.line+k,mc.ch+Tb):tb.head.line==tb.anchor.line?O(mc.line,mc.ch+Tb):O(mc.line+k,mc.ch),M.visualMode=!0,M.visualLine=tb.visualLine,M.visualBlock=tb.visualBlock,tb=M.sel={anchor:r,head:k},Oa(F)):M.visualMode&&(Bb.lastSel={anchor:ha(tb.anchor),head:ha(tb.head),visualBlock:M.visualBlock,visualLine:M.visualLine});if(M.visualMode){if(r=Q(tb.head,tb.anchor),tb=oa(tb.head,tb.anchor),K=M.visualLine||Bb.linewise,Wa=M.visualBlock?
"block":K?"line":"char",r=Ua(F,{anchor:r,head:tb},Wa),K)if(tb=r.ranges,"block"==Wa)for(Wa=0;Wa<tb.length;Wa++)tb[Wa].head.ch=Ga(F,tb[Wa].head.line);else"line"==Wa&&(tb[0].head=O(tb[0].head.line+1,0))}else{r=ha(r||mc);tb=ha(k||K);D(tb,r)&&(K=r,r=tb,tb=K);if(K=Wa.linewise||Bb.linewise)Tb=tb,r.ch=0,Tb.ch=0,Tb.line++;else if(Wa.forward&&(Tb=tb,Aa=F.getRange(r,Tb),/\n\s*$/.test(Aa))){Aa=Aa.split("\n");Aa.pop();for(da=Aa.pop();0<Aa.length&&da&&qa(da);da=Aa.pop())Tb.line--,Tb.ch=0;da?(Tb.line--,Tb.ch=Ga(F,
Tb.line)):Tb.ch=0}r=Ua(F,{anchor:r,head:tb},"char",!Wa.inclusive||K)}F.setSelections(r.ranges,r.primary);M.lastMotion=null;Bb.repeat=m;Bb.registerName=Ob;Bb.linewise=K;Ra=wc[Ra](F,Bb,r.ranges,mc,k);M.visualMode&&Pa(F,null!=Ra);Ra&&F.setCursor(Ra)}},recordLastEdit:function(F,M,da){var Aa=Gc.macroModeState;Aa.isPlaying||(F.lastEditInputState=M,F.lastEditActionCommand=da,Aa.lastInsertModeChanges.changes=[],Aa.lastInsertModeChanges.expectCursorActivityForChange=!1,Aa.lastInsertModeChanges.visualBlock=
F.visualBlock?F.sel.head.line-F.sel.anchor.line:0)}},sc={moveToTopLine:function(F,M,da){M=lb(F).top+da.repeat-1;return O(M,ja(F.getLine(M)))},moveToMiddleLine:function(F){var M=lb(F);M=Math.floor(.5*(M.top+M.bottom));return O(M,ja(F.getLine(M)))},moveToBottomLine:function(F,M,da){M=lb(F).bottom-da.repeat+1;return O(M,ja(F.getLine(M)))},expandToLine:function(F,M,da){return O(M.line+da.repeat-1,Infinity)},findNext:function(F,M,da){M=vb(F);var Aa=M.getQuery();if(Aa){var Wa=!da.forward;Wa=M.isReversed()?
!Wa:Wa;nc(F,Aa);return Fc(F,Wa,Aa,da.repeat)}},goToMark:function(F,M,da,Aa){return(M=Gb(F,Aa,da.selectedCharacter))?da.linewise?{line:M.line,ch:ja(F.getLine(M.line))}:M:null},moveToOtherHighlightedEnd:function(F,M,da,Aa){return Aa.visualBlock&&da.sameLine?(M=Aa.sel,[z(F,O(M.anchor.line,M.head.ch)),z(F,O(M.head.line,M.anchor.ch))]):[Aa.sel.head,Aa.sel.anchor]},jumpToMark:function(F,M,da,Aa){for(var Wa=0;Wa<da.repeat;Wa++){var Ra=M,Bb;for(Bb in Aa.marks)if(/^[a-z]$/.test(Bb)){var Ob=Aa.marks[Bb].find();
if(da.forward?!D(Ob,Ra):!D(Ra,Ob))if(!da.linewise||Ob.line!=Ra.line){var tb=Ja(Ra,M),Tb=da.forward?Fa(Ra,Ob,M):Fa(M,Ob,Ra);if(tb||Tb)M=Ob}}}da.linewise&&(M=O(M.line,ja(F.getLine(M.line))));return M},moveByCharacters:function(F,M,da){F=da.repeat;return O(M.line,da.forward?M.ch+F:M.ch-F)},moveByLines:function(F,M,da,Aa){var Wa=M.ch;switch(Aa.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:Wa=Aa.lastHPos;break;default:Aa.lastHPos=
Wa}var Ra=da.repeat+(da.repeatOffset||0),Bb=da.forward?M.line+Ra:M.line-Ra,Ob=F.firstLine(),tb=F.lastLine();Ra=F.findPosV(M,da.forward?Ra:-Ra,"line",Aa.lastHSPos);if(da.forward?Ra.line>Bb:Ra.line<Bb)Bb=Ra.line,Wa=Ra.ch;if(Bb<Ob&&M.line==Ob)return this.moveToStartOfLine(F,M,da,Aa);if(Bb>tb&&M.line==tb)return this.moveToEol(F,M,da,Aa,!0);da.toFirstChar&&(Wa=ja(F.getLine(Bb)),Aa.lastHPos=Wa);Aa.lastHSPos=F.charCoords(O(Bb,Wa),"div").left;return O(Bb,Wa)},moveByDisplayLines:function(F,M,da,Aa){switch(Aa.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;
default:Aa.lastHSPos=F.charCoords(M,"div").left}var Wa=da.repeat;M=F.findPosV(M,da.forward?Wa:-Wa,"line",Aa.lastHSPos);M.hitSide&&(da.forward?(da={top:F.charCoords(M,"div").top+8,left:Aa.lastHSPos},M=F.coordsChar(da,"div")):(da=F.charCoords(O(F.firstLine(),0),"div"),da.left=Aa.lastHSPos,M=F.coordsChar(da,"div")));Aa.lastHPos=M.ch;return M},moveByPage:function(F,M,da){var Aa=da.repeat;return F.findPosV(M,da.forward?Aa:-Aa,"page")},moveByParagraph:function(F,M,da){return Na(F,M,da.repeat,da.forward?
1:-1)},moveBySentence:function(F,M,da){return kb(F,M,da.repeat,da.forward?1:-1)},moveByScroll:function(F,M,da,Aa){var Wa=F.getScrollInfo(),Ra=da.repeat;Ra||(Ra=Wa.clientHeight/(2*F.defaultTextHeight()));var Bb=F.charCoords(M,"local");da.repeat=Ra;M=sc.moveByDisplayLines(F,M,da,Aa);if(!M)return null;da=F.charCoords(M,"local");F.scrollTo(null,Wa.top+da.top-Bb.top);return M},moveByWords:function(F,M,da){var Aa=M,Wa=da.repeat;M=!!da.forward;var Ra=!!da.wordEnd,Bb=!!da.bigWord;da=ha(Aa);var Ob=[];(M&&
!Ra||!M&&Ra)&&Wa++;for(var tb=!(M&&Ra),Tb=0;Tb<Wa;Tb++){b:{var mc=F;var K=M,m=Bb,k=tb,r=Aa.line,x=Aa.ch,J=mc.getLine(r),Z=K?1:-1;m=m?dd:Ec;if(k&&""==J){r+=Z;J=mc.getLine(r);if(!ra(mc,r)){mc=null;break b}x=K?0:J.length}for(;;){if(k&&""==J){mc={from:0,to:0,line:r};break b}K=0<Z?J.length:-1;for(var sa,bb;x!=K;){for(var Ta=!1,Pb=0;Pb<m.length&&!Ta;++Pb)if(m[Pb](J.charAt(x))){for(sa=x;x!=K&&m[Pb](J.charAt(x));)x+=Z;bb=x;Ta=sa!=bb;if(sa!=Aa.ch||r!=Aa.line||bb!=sa+Z){mc={from:Math.min(sa,bb+1),to:Math.max(sa,
bb),line:r};break b}}Ta||(x+=Z)}r+=Z;if(!ra(mc,r)){mc=null;break b}J=mc.getLine(r);x=0<Z?0:J.length}}if(!mc){Bb=Ga(F,F.lastLine());Ob.push(M?{line:F.lastLine(),from:Bb,to:Bb}:{line:0,from:0,to:0});break}Ob.push(mc);Aa=O(mc.line,M?mc.to-1:mc.from)}F=Ob.length!=Wa;Wa=Ob[0];Bb=Ob.pop();M&&!Ra?(F||Wa.from==da.ch&&Wa.line==da.line||(Bb=Ob.pop()),M=O(Bb.line,Bb.from)):M&&Ra?M=O(Bb.line,Bb.to-1):!M&&Ra?(F||Wa.to==da.ch&&Wa.line==da.line||(Bb=Ob.pop()),M=O(Bb.line,Bb.to)):M=O(Bb.line,Bb.from);return M},moveTillCharacter:function(F,
M,da){F=qb(F,da.repeat,da.forward,da.selectedCharacter);M=da.forward?-1:1;Za(M,da);if(!F)return null;F.ch+=M;return F},moveToCharacter:function(F,M,da){var Aa=da.repeat;Za(0,da);return qb(F,Aa,da.forward,da.selectedCharacter)||M},moveToSymbol:function(F,M,da){var Aa=da.repeat,Wa=da.forward,Ra=da.selectedCharacter;da=ha(F.getCursor());var Bb=Wa?1:-1,Ob=Wa?F.lineCount():-1,tb=da.ch,Tb=da.line,mc=F.getLine(Tb);Wa={lineText:mc,nextCh:mc.charAt(tb),lastCh:null,index:tb,symb:Ra,reverseSymb:(Wa?{")":"(",
"}":"{"}:{"(":")","{":"}"})[Ra],forward:Wa,depth:0,curMoveThrough:!1};if(tb=ic[Ra]){Ra=zb[tb].init;tb=zb[tb].isComplete;for(Ra&&Ra(Wa);Tb!==Ob&&Aa;)Wa.index+=Bb,Wa.nextCh=Wa.lineText.charAt(Wa.index),Wa.nextCh||(Tb+=Bb,Wa.lineText=F.getLine(Tb)||"",0<Bb?Wa.index=0:(Ra=Wa.lineText.length,Wa.index=0<Ra?Ra-1:0),Wa.nextCh=Wa.lineText.charAt(Wa.index)),tb(Wa)&&(da.line=Tb,da.ch=Wa.index,Aa--);F=Wa.nextCh||Wa.curMoveThrough?O(Tb,Wa.index):da}else F=da;return F||M},moveToColumn:function(F,M,da,Aa){da=da.repeat;
Aa.lastHPos=da-1;Aa.lastHSPos=F.charCoords(M,"div").left;M=F.getCursor().line;return z(F,O(M,da-1))},moveToEol:function(F,M,da,Aa,Wa){M=O(M.line+da.repeat-1,Infinity);da=F.clipPos(M);da.ch--;Wa||(Aa.lastHPos=Infinity,Aa.lastHSPos=F.charCoords(da,"div").left);return M},moveToFirstNonWhiteSpaceCharacter:function(F,M){return O(M.line,ja(F.getLine(M.line)))},moveToMatchedSymbol:function(F,M){for(var da=M.line,Aa=M.ch,Wa=F.getLine(da),Ra;Aa<Wa.length&&(!(Ra=Wa.charAt(Aa))||-1=="()[]{}".indexOf(Ra)||(Ra=
F.getTokenTypeAt(O(da,Aa+1)),"string"===Ra||"comment"===Ra));Aa++);return Aa<Wa.length?(M="\x3c"===Aa||"\x3e"===Aa?/[(){}[\]<>]/:/[(){}[\]]/,F.findMatchingBracket(O(da,Aa),{bracketRegex:M}).to):M},moveToStartOfLine:function(F,M){return O(M.line,0)},moveToLineOrEdgeOfDocument:function(F,M,da){M=da.forward?F.lastLine():F.firstLine();da.repeatIsExplicit&&(M=da.repeat-F.getOption("firstLineNumber"));return O(M,ja(F.getLine(M)))},textObjectManipulation:function(F,M,da,Aa){var Wa={"'":!0,'"':!0,"`":!0},
Ra=da.selectedCharacter;"b"==Ra?Ra="(":"B"==Ra&&(Ra="{");var Bb=!da.textObjectInner;if({"(":")",")":"(","{":"}","}":"{","[":"]","]":"[","\x3c":"\x3e","\x3e":"\x3c"}[Ra]){var Ob={"(":/[()]/,")":/[()]/,"[":/[[\]]/,"]":/[[\]]/,"{":/[{}]/,"}":/[{}]/,"\x3c":/[<>]/,"\x3e":/[<>]/}[Ra];var tb={"(":"(",")":"(","[":"[","]":"[","{":"{","}":"{","\x3c":"\x3c","\x3e":"\x3c"}[Ra];da=F.getLine(M.line).charAt(M.ch)===tb?1:0;tb=F.scanForBracket(O(M.line,M.ch+da),-1,void 0,{bracketRegex:Ob});Ob=F.scanForBracket(O(M.line,
M.ch+da),1,void 0,{bracketRegex:Ob});if(tb&&Ob){tb=tb.pos;Ob=Ob.pos;if(tb.line==Ob.line&&tb.ch>Ob.ch||tb.line>Ob.line)M=tb,tb=Ob,Ob=M;Bb?Ob.ch+=1:tb.ch+=1;M={start:tb,end:Ob}}else M={start:M,end:M}}else if(Wa[Ra]){da=Ra;M=ha(M);Aa=F.getLine(M.line).split("");Ra=Aa.indexOf(da);M.ch<Ra?M.ch=Ra:Ra<M.ch&&Aa[M.ch]==da&&(Ob=M.ch,--M.ch);if(Aa[M.ch]!=da||Ob)for(Ra=M.ch;-1<Ra&&!tb;Ra--)Aa[Ra]==da&&(tb=Ra+1);else tb=M.ch+1;if(tb&&!Ob)for(Ra=tb,Wa=Aa.length;Ra<Wa&&!Ob;Ra++)Aa[Ra]==da&&(Ob=Ra);tb&&Ob?(Bb&&(--tb,
++Ob),M={start:O(M.line,tb),end:O(M.line,Ob)}):M={start:M,end:M}}else if("W"===Ra)M=Qa(F,Bb,!0,!0);else if("w"===Ra)M=Qa(F,Bb,!0,!1);else if("p"===Ra)if(M=Na(F,M,da.repeat,0,Bb),da.linewise=!0,Aa.visualMode)Aa.visualLine||(Aa.visualLine=!0);else{if(Bb=Aa.inputState.operatorArgs)Bb.linewise=!0;M.end.line--}else return null;return F.state.vim.visualMode?(Bb=M.start,M=M.end,Ob=F.state.vim.sel,tb=Ob.head,Ob=Ob.anchor,D(M,Bb)&&(da=M,M=Bb,Bb=da),D(tb,Ob)?(tb=Q(Bb,tb),Ob=oa(Ob,M)):(Ob=Q(Bb,Ob),tb=oa(tb,
M),tb=H(tb,0,-1),-1==tb.ch&&tb.line!=F.firstLine()&&(tb=O(tb.line-1,Ga(F,tb.line-1)))),[Ob,tb]):[M.start,M.end]},repeatLastCharacterSearch:function(F,M,da){var Aa=Gc.lastCharacterSearch,Wa=da.repeat,Ra=da.forward===Aa.forward,Bb=(Aa.increment?1:0)*(Ra?-1:1);F.moveH(-Bb,"char");da.inclusive=Ra?!0:!1;da=qb(F,Wa,Ra,Aa.selectedCharacter);if(!da)return F.moveH(Bb,"char"),M;da.ch+=Bb;return da}},wc={change:function(F,M,da){var Aa=F.state.vim;var Wa=da[0].anchor;var Ra=da[0].head;if(Aa.visualMode)if(M.fullLine){Ra.ch=
Number.MAX_VALUE;Ra.line--;F.setSelection(Wa,Ra);var Bb=F.getSelection();F.replaceSelection("")}else Bb=F.getSelection(),Wa=w("",da.length),F.replaceSelections(Wa),Wa=Q(da[0].head,da[0].anchor);else{Bb=F.getRange(Wa,Ra);Aa=Aa.lastEditInputState||{};if("moveByWords"==Aa.motion&&!qa(Bb)){var Ob=/\s+$/.exec(Bb);Ob&&Aa.motionArgs&&Aa.motionArgs.forward&&(Ra=H(Ra,0,-Ob[0].length),Bb=Bb.slice(0,-Ob[0].length))}Aa=new O(Wa.line-1,Number.MAX_VALUE);Ob=F.firstLine()==F.lastLine();Ra.line>F.lastLine()&&M.linewise&&
!Ob?F.replaceRange("",Aa,Ra):F.replaceRange("",Wa,Ra);M.linewise&&(Ob||(F.setCursor(Aa),p.commands.newlineAndIndent(F)),Wa.ch=Number.MAX_VALUE)}Gc.registerController.pushText(M.registerName,"change",Bb,M.linewise,1<da.length);Mc.enterInsertMode(F,{head:Wa},F.state.vim)},"delete":function(F,M,da){var Aa=F.state.vim;if(Aa.visualBlock){var Wa=F.getSelection();var Ra=w("",da.length);F.replaceSelections(Ra);da=da[0].anchor}else Ra=da[0].anchor,da=da[0].head,M.linewise&&da.line!=F.firstLine()&&Ra.line==
F.lastLine()&&Ra.line==da.line-1&&(Ra.line==F.firstLine()?Ra.ch=0:Ra=O(Ra.line-1,Ga(F,Ra.line-1))),Wa=F.getRange(Ra,da),F.replaceRange("",Ra,da),da=Ra,M.linewise&&(da=sc.moveToFirstNonWhiteSpaceCharacter(F,Ra));Gc.registerController.pushText(M.registerName,"delete",Wa,M.linewise,Aa.visualBlock);return z(F,da)},indent:function(F,M,da){var Aa=F.state.vim,Wa=da[0].anchor.line,Ra=Aa.visualBlock?da[da.length-1].anchor.line:da[0].head.line;Aa=Aa.visualMode?M.repeat:1;for(M.linewise&&Ra--;Wa<=Ra;Wa++)for(var Bb=
0;Bb<Aa;Bb++)F.indentLine(Wa,M.indentRight);return sc.moveToFirstNonWhiteSpaceCharacter(F,da[0].anchor)},indentAuto:function(F,M,da){F.execCommand("indentAuto");return sc.moveToFirstNonWhiteSpaceCharacter(F,da[0].anchor)},changeCase:function(F,M,da,Aa,Wa){for(var Ra=F.getSelections(),Bb=[],Ob=M.toLower,tb=0;tb<Ra.length;tb++){var Tb=Ra[tb],mc="";if(!0===Ob)mc=Tb.toLowerCase();else if(!1===Ob)mc=Tb.toUpperCase();else for(var K=0;K<Tb.length;K++){var m=Tb.charAt(K);mc+=Y(m)?m.toLowerCase():m.toUpperCase()}Bb.push(mc)}F.replaceSelections(Bb);
return M.shouldMoveCursor?Wa:!F.state.vim.visualMode&&M.linewise&&da[0].anchor.line+1==da[0].head.line?sc.moveToFirstNonWhiteSpaceCharacter(F,Aa):M.linewise?Aa:Q(da[0].anchor,da[0].head)},yank:function(F,M,da,Aa){var Wa=F.state.vim;F=F.getSelection();da=Wa.visualMode?Q(Wa.sel.anchor,Wa.sel.head,da[0].head,da[0].anchor):Aa;Gc.registerController.pushText(M.registerName,"yank",F,M.linewise,Wa.visualBlock);return da}},Mc={jumpListWalk:function(F,M,da){da.visualMode||(da=M.repeat,M=(M=(M=Gc.jumpList.move(F,
M.forward?da:-da))?M.find():void 0)?M:F.getCursor(),F.setCursor(M))},scroll:function(F,M,da){if(!da.visualMode){var Aa=M.repeat||1;da=F.defaultTextHeight();var Wa=F.getScrollInfo().top;Aa*=da;Wa=M.forward?Wa+Aa:Wa-Aa;Aa=ha(F.getCursor());var Ra=F.charCoords(Aa,"local");M.forward?Wa>Ra.top?(Aa.line+=(Wa-Ra.top)/da,Aa.line=Math.ceil(Aa.line),F.setCursor(Aa),Ra=F.charCoords(Aa,"local"),F.scrollTo(null,Ra.top)):F.scrollTo(null,Wa):(M=Wa+F.getScrollInfo().clientHeight,M<Ra.bottom?(Aa.line-=(Ra.bottom-
M)/da,Aa.line=Math.floor(Aa.line),F.setCursor(Aa),Ra=F.charCoords(Aa,"local"),F.scrollTo(null,Ra.bottom-F.getScrollInfo().clientHeight)):F.scrollTo(null,Wa))}},scrollToCursor:function(F,M){var da=F.getCursor().line,Aa=F.charCoords(O(da,0),"local");da=F.getScrollInfo().clientHeight;var Wa=Aa.top;Aa=Aa.bottom-Wa;switch(M.position){case "center":Wa=Wa-da/2+Aa;break;case "bottom":Wa=Wa-da+Aa}F.scrollTo(null,Wa)},replayMacro:function(F,M,da){var Aa=M.selectedCharacter;M=M.repeat;var Wa=Gc.macroModeState;
for("@"==Aa?Aa=Wa.latestRegister:Wa.latestRegister=Aa;M--;){var Ra=F,Bb=da,Ob=Wa,tb=Aa,Tb=Gc.registerController.getRegister(tb);if(":"==tb)Tb.keyBuffer[0]&&Uc.processCommand(Ra,Tb.keyBuffer[0]);else{tb=Tb.keyBuffer;var mc=0;Ob.isPlaying=!0;Ob.replaySearchQueries=Tb.searchQueries.slice(0);for(var K=0;K<tb.length;K++)for(var m=tb[K],k,r;m;)k=/<\w+-.+?>|<\w+>|./.exec(m),r=k[0],m=m.substring(k.index+r.length),p.Vim.handleKey(Ra,r,"macro"),Bb.insertMode&&(k=Tb.insertModeChanges[mc++].changes,Gc.macroModeState.lastInsertModeChanges.changes=
k,mb(Ra,k,1),hb(Ra))}Ob.isPlaying=!1}},enterMacroRecordMode:function(F,M){var da=Gc.macroModeState;M=M.selectedCharacter;Gc.registerController.isValidRegister(M)&&da.enterMacroRecordMode(F,M)},toggleOverwrite:function(F){F.state.overwrite?(F.toggleOverwrite(!1),F.setOption("keyMap","vim-insert"),p.signal(F,"vim-mode-change",{mode:"insert"})):(F.toggleOverwrite(!0),F.setOption("keyMap","vim-replace"),p.signal(F,"vim-mode-change",{mode:"replace"}))},enterInsertMode:function(F,M,da){if(!F.getOption("readOnly")){da.insertMode=
!0;da.insertModeRepeat=M&&M.repeat||1;var Aa=M?M.insertAt:null,Wa=da.sel,Ra=M.head||F.getCursor("head"),Bb=F.listSelections().length;if("eol"==Aa)Ra=O(Ra.line,Ga(F,Ra.line));else if("bol"==Aa)Ra=O(Ra.line,0);else if("charAfter"==Aa)Ra=H(Ra,0,1);else if("firstNonBlank"==Aa)Ra=sc.moveToFirstNonWhiteSpaceCharacter(F,Ra);else if("startOfSelectedArea"==Aa){if(!da.visualMode)return;da.visualBlock?(Ra=O(Math.min(Wa.head.line,Wa.anchor.line),Math.min(Wa.head.ch,Wa.anchor.ch)),Bb=Math.abs(Wa.head.line-Wa.anchor.line)+
1):Ra=Wa.head.line<Wa.anchor.line?Wa.head:O(Wa.anchor.line,0)}else if("endOfSelectedArea"==Aa){if(!da.visualMode)return;da.visualBlock?(Ra=O(Math.min(Wa.head.line,Wa.anchor.line),Math.max(Wa.head.ch+1,Wa.anchor.ch)),Bb=Math.abs(Wa.head.line-Wa.anchor.line)+1):Ra=Wa.head.line>=Wa.anchor.line?H(Wa.head,0,1):O(Wa.anchor.line,0)}else if("inplace"==Aa){if(da.visualMode)return}else"lastEdit"==Aa&&(Ra=kc(F)||Ra);F.setOption("disableInput",!1);M&&M.replace?(F.toggleOverwrite(!0),F.setOption("keyMap","vim-replace"),
p.signal(F,"vim-mode-change",{mode:"replace"})):(F.toggleOverwrite(!1),F.setOption("keyMap","vim-insert"),p.signal(F,"vim-mode-change",{mode:"insert"}));Gc.macroModeState.isPlaying||(F.on("change",Wb),p.on(F.getInputField(),"keydown",cb));da.visualMode&&Pa(F);Cb(F,Ra,Bb)}},toggleVisualMode:function(F,M,da){var Aa=M.repeat,Wa=F.getCursor();da.visualMode?da.visualLine^M.linewise||da.visualBlock^M.blockwise?(da.visualLine=!!M.linewise,da.visualBlock=!!M.blockwise,p.signal(F,"vim-mode-change",{mode:"visual",
subMode:da.visualLine?"linewise":da.visualBlock?"blockwise":""}),Oa(F)):Pa(F):(da.visualMode=!0,da.visualLine=!!M.linewise,da.visualBlock=!!M.blockwise,M=z(F,O(Wa.line,Wa.ch+Aa-1)),da.sel={anchor:Wa,head:M},p.signal(F,"vim-mode-change",{mode:"visual",subMode:da.visualLine?"linewise":da.visualBlock?"blockwise":""}),Oa(F),La(F,da,"\x3c",Q(Wa,M)),La(F,da,"\x3e",oa(Wa,M)))},reselectLastSelection:function(F,M,da){M=da.lastSelection;da.visualMode&&Ib(F,da);if(M){var Aa=M.anchorMark.find(),Wa=M.headMark.find();
Aa&&Wa&&(da.sel={anchor:Aa,head:Wa},da.visualMode=!0,da.visualLine=M.visualLine,da.visualBlock=M.visualBlock,Oa(F),La(F,da,"\x3c",Q(Aa,Wa)),La(F,da,"\x3e",oa(Aa,Wa)),p.signal(F,"vim-mode-change",{mode:"visual",subMode:da.visualLine?"linewise":da.visualBlock?"blockwise":""}))}},joinLines:function(F,M,da){if(da.visualMode){var Aa=F.getCursor("anchor");var Wa=F.getCursor("head");if(D(Wa,Aa)){var Ra=Wa;Wa=Aa;Aa=Ra}Wa.ch=Ga(F,Wa.line)-1}else Wa=Math.max(M.repeat,2),Aa=F.getCursor(),Wa=z(F,O(Aa.line+Wa-
1,Infinity));for(var Bb=0,Ob=Aa.line;Ob<Wa.line;Ob++){Bb=Ga(F,Aa.line);Ra=O(Aa.line+1,Ga(F,Aa.line+1));var tb=F.getRange(Aa,Ra);tb=M.keepSpaces?tb.replace(/\n\r?/g,""):tb.replace(/\n\s*/g," ");F.replaceRange(tb,Aa,Ra)}M=O(Aa.line,Bb);da.visualMode&&Pa(F,!1);F.setCursor(M)},newLineAndEnterInsertMode:function(F,M,da){da.insertMode=!0;var Aa=ha(F.getCursor());Aa.line!==F.firstLine()||M.after?(Aa.line=M.after?Aa.line:Aa.line-1,Aa.ch=Ga(F,Aa.line),F.setCursor(Aa),(p.commands.newlineAndIndentContinueComment||
p.commands.newlineAndIndent)(F)):(F.replaceRange("\n",O(F.firstLine(),0)),F.setCursor(F.firstLine(),0));this.enterInsertMode(F,{repeat:M.repeat},da)},paste:function(F,M,da){var Aa=ha(F.getCursor()),Wa=Gc.registerController.getRegister(M.registerName),Ra=Wa.toString();if(Ra){if(M.matchIndent){var Bb=F.getOption("tabSize"),Ob=function(r){var x=r.split("\t").length-1;r=r.split(" ").length-1;return x*Bb+1*r},tb=F.getLine(F.getCursor().line),Tb=Ob(tb.match(/^\s*/)[0]);tb=Ra.replace(/\n$/,"");var mc=Ra!==
tb,K=Ob(Ra.match(/^\s*/)[0]);Ra=tb.replace(/^\s*/gm,function(r){r=Tb+(Ob(r)-K);return 0>r?"":F.getOption("indentWithTabs")?Array(Math.floor(r/Bb)+1).join("\t"):Array(r+1).join(" ")});Ra+=mc?"\n":""}1<M.repeat&&(Ra=Array(M.repeat+1).join(Ra));tb=Wa.linewise;if(Wa=Wa.blockwise){Ra=Ra.split("\n");tb&&Ra.pop();for(mc=0;mc<Ra.length;mc++)Ra[mc]=""==Ra[mc]?" ":Ra[mc];Aa.ch+=M.after?1:0;Aa.ch=Math.min(Ga(F,Aa.line),Aa.ch)}else tb?da.visualMode?Ra=da.visualLine?Ra.slice(0,-1):"\n"+Ra.slice(0,Ra.length-1)+
"\n":M.after?(Ra="\n"+Ra.slice(0,Ra.length-1),Aa.ch=Ga(F,Aa.line)):Aa.ch=0:Aa.ch+=M.after?1:0;var m;if(da.visualMode){da.lastPastedText=Ra;M=ib(F,da);Aa=M[0];M=M[1];mc=F.getSelection();var k=F.listSelections();k=Array(k.length).join("1").split("1");da.lastSelection&&(m=da.lastSelection.headMark.find());Gc.registerController.unnamedRegister.setText(mc);Wa?(F.replaceSelections(k),M=O(Aa.line+Ra.length-1,Aa.ch),F.setCursor(Aa),Kb(F,M),F.replaceSelections(Ra),Ra=Aa):da.visualBlock?(F.replaceSelections(k),
F.setCursor(Aa),F.replaceRange(Ra,Aa,Aa),Ra=Aa):(F.replaceRange(Ra,Aa,M),Ra=F.posFromIndex(F.indexFromPos(Aa)+Ra.length-1));m&&(da.lastSelection.headMark=F.setBookmark(m));tb&&(Ra.ch=0)}else if(Wa){F.setCursor(Aa);for(mc=0;mc<Ra.length;mc++)m=Aa.line+mc,m>F.lastLine()&&F.replaceRange("\n",O(m,0)),Ga(F,m)<Aa.ch&&Hb(F,m,Aa.ch);F.setCursor(Aa);Kb(F,O(Aa.line+Ra.length-1,Aa.ch));F.replaceSelections(Ra);Ra=Aa}else F.replaceRange(Ra,Aa),tb&&M.after?Ra=O(Aa.line+1,ja(F.getLine(Aa.line+1))):tb&&!M.after?
Ra=O(Aa.line,ja(F.getLine(Aa.line))):!tb&&M.after?(m=F.indexFromPos(Aa),Ra=F.posFromIndex(m+Ra.length-1)):(m=F.indexFromPos(Aa),Ra=F.posFromIndex(m+Ra.length));da.visualMode&&Pa(F,!1);F.setCursor(Ra)}},undo:function(F,M){F.operation(function(){R(F,p.commands.undo,M.repeat)();F.setCursor(F.getCursor("anchor"))})},redo:function(F,M){R(F,p.commands.redo,M.repeat)()},setRegister:function(F,M,da){da.inputState.registerName=M.selectedCharacter},setMark:function(F,M,da){La(F,da,M.selectedCharacter,F.getCursor())},
replace:function(F,M,da){var Aa=M.selectedCharacter,Wa=F.getCursor(),Ra=F.listSelections();if(da.visualMode){Wa=F.getCursor("start");var Bb=F.getCursor("end")}else Bb=F.getLine(Wa.line),M=Wa.ch+M.repeat,M>Bb.length&&(M=Bb.length),Bb=O(Wa.line,M);"\n"==Aa?(da.visualMode||F.replaceRange("",Wa,Bb),(p.commands.newlineAndIndentContinueComment||p.commands.newlineAndIndent)(F)):(M=F.getRange(Wa,Bb),M=M.replace(/[^\n]/g,Aa),da.visualBlock?(Wa=Array(F.getOption("tabSize")+1).join(" "),M=F.getSelection(),M=
M.replace(/\t/g,Wa).replace(/[^\n]/g,Aa).split("\n"),F.replaceSelections(M)):F.replaceRange(M,Wa,Bb),da.visualMode?(Wa=D(Ra[0].anchor,Ra[0].head)?Ra[0].anchor:Ra[0].head,F.setCursor(Wa),Pa(F,!1)):F.setCursor(H(Bb,0,-1)))},incrementNumberToken:function(F,M){for(var da=F.getCursor(),Aa=F.getLine(da.line),Wa=/(-?)(?:(0x)([\da-f]+)|(0b|0|)(\d+))/gi,Ra,Bb,Ob;null!==(Ra=Wa.exec(Aa))&&!(Bb=Ra.index,Ob=Bb+Ra[0].length,da.ch<Ob););if((M.backtrack||!(Ob<=da.ch))&&Ra){Aa=Ra[2]||Ra[4];Wa=Ra[3]||Ra[5];var tb=
M.increase?1:-1,Tb={"0b":2,0:8,"":10,"0x":16}[Aa.toLowerCase()];M=(parseInt(Ra[1]+Wa,Tb)+tb*M.repeat).toString(Tb);Ra=Aa?Array(Wa.length-M.length+1+Ra[1].length).join("0"):"";M="-"===M.charAt(0)?"-"+Aa+Ra+M.substr(1):Aa+Ra+M;Ra=O(da.line,Bb);Ob=O(da.line,Ob);F.replaceRange(M,Ra,Ob);F.setCursor(O(da.line,Bb+M.length-1))}},repeatLastEdit:function(F,M,da){if(da.lastEditInputState){var Aa=M.repeat;Aa&&M.repeatIsExplicit?da.lastEditInputState.repeatOverride=Aa:Aa=da.lastEditInputState.repeatOverride||
Aa;Ia(F,da,Aa,!1)}},indent:function(F,M){F.indentLine(F.getCursor().line,M.indentRight)},exitInsertMode:hb},ic={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},zb={bracket:{isComplete:function(F){if(F.nextCh===F.symb){if(F.depth++,1<=F.depth)return!0}else F.nextCh===F.reverseSymb&&F.depth--;return!1}},section:{init:function(F){F.curMoveThrough=!0;F.symb=(F.forward?"]":"[")===F.symb?"{":"}"},isComplete:function(F){return 0===
F.index&&F.nextCh===F.symb}},comment:{isComplete:function(F){var M="*"===F.lastCh&&"/"===F.nextCh;F.lastCh=F.nextCh;return M}},method:{init:function(F){F.symb="m"===F.symb?"{":"}";F.reverseSymb="{"===F.symb?"}":"{"},isComplete:function(F){return F.nextCh===F.symb?!0:!1}},preprocess:{init:function(F){F.index=0},isComplete:function(F){if("#"===F.nextCh){var M=F.lineText.match(/#(\w+)/)[1];if("endif"===M){if(F.forward&&0===F.depth)return!0;F.depth++}else if("if"===M){if(!F.forward&&0===F.depth)return!0;
F.depth--}if("else"===M&&0===F.depth)return!0}return!1}}};ia("pcre",!0,"boolean");Sa.prototype={getQuery:function(){return Gc.query},setQuery:function(F){Gc.query=F},getOverlay:function(){return this.searchOverlay},setOverlay:function(F){this.searchOverlay=F},isReversed:function(){return Gc.isReversed},setReversed:function(F){Gc.isReversed=F},getScrollbarAnnotate:function(){return this.annotate},setScrollbarAnnotate:function(F){this.annotate=F}};var fc={"\\n":"\n","\\r":"\r","\\t":"\t"},dc={"\\/":"/",
"\\\\":"\\","\\n":"\n","\\r":"\r","\\t":"\t","\\\x26":"\x26"},vc="(Javascript regexp)",xc=0,Vc=function(){this.buildCommandMap_()};Vc.prototype={processCommand:function(F,M,da){var Aa=this;F.operation(function(){F.curOp.isVimOp=!0;Aa._processCommand(F,M,da)})},_processCommand:function(F,M,da){var Aa=F.state.vim,Wa=Gc.registerController.getRegister(":"),Ra=Wa.toString();Aa.visualMode&&Pa(F);Aa=new p.StringStream(M);Wa.setText(M);da=da||{};da.input=M;try{this.parseInput_(F,Aa,da)}catch(tb){throw sb(F,
tb),tb;}var Bb;if(da.commandName){if(Bb=this.matchCommand_(da.commandName)){var Ob=Bb.name;Bb.excludeFromCommandHistory&&Wa.setText(Ra);this.parseCommandArgs_(Aa,da,Bb);if("exToKey"==Bb.type){for(M=0;M<Bb.toKeys.length;M++)p.Vim.handleKey(F,Bb.toKeys[M],"mapping");return}if("exToEx"==Bb.type){this.processCommand(F,Bb.toInput);return}}}else void 0!==da.line&&(Ob="move");if(Ob)try{bd[Ob](F,da),Bb&&Bb.possiblyAsync||!da.callback||da.callback()}catch(tb){throw sb(F,tb),tb;}else sb(F,'Not an editor command ":'+
M+'"')},parseInput_:function(F,M,da){M.eatWhile(":");M.eat("%")?(da.line=F.firstLine(),da.lineEnd=F.lastLine()):(da.line=this.parseLineSpec_(F,M),void 0!==da.line&&M.eat(",")&&(da.lineEnd=this.parseLineSpec_(F,M)));F=M.match(/^(\w+)/);da.commandName=F?F[1]:M.match(/.*/)[0];return da},parseLineSpec_:function(F,M){var da=M.match(/^(\d+)/);if(da)return parseInt(da[1],10)-1;switch(M.next()){case ".":return this.parseLineSpecOffset_(M,F.getCursor().line);case "$":return this.parseLineSpecOffset_(M,F.lastLine());
case "'":da=M.next();F=Gb(F,F.state.vim,da);if(!F)throw Error("Mark not set");return this.parseLineSpecOffset_(M,F.line);case "-":case "+":return M.backUp(1),this.parseLineSpecOffset_(M,F.getCursor().line);default:M.backUp(1)}},parseLineSpecOffset_:function(F,M){if(F=F.match(/^([+-])?(\d+)/)){var da=parseInt(F[2],10);M="-"==F[1]?M-da:M+da}return M},parseCommandArgs_:function(F,M,da){F.eol()||(M.argString=F.match(/.*/)[0],F=da.argDelimiter||/\s+/,F=xb(M.argString).split(F),F.length&&F[0]&&(M.args=
F))},matchCommand_:function(F){for(var M=F.length;0<M;M--){var da=F.substring(0,M);if(this.commandMap_[da]&&(da=this.commandMap_[da],0===da.name.indexOf(F)))return da}return null},buildCommandMap_:function(){this.commandMap_={};for(var F=0;F<y.length;F++){var M=y[F];this.commandMap_[M.shortName||M.name]=M}},map:function(F,M,da){if(":"!=F&&":"==F.charAt(0)){if(da)throw Error("Mode not supported for ex mappings");da=F.substring(1);":"!=M&&":"==M.charAt(0)?this.commandMap_[da]={name:da,type:"exToEx",
toInput:M.substring(1),user:!0}:this.commandMap_[da]={name:da,type:"exToKey",toKeys:M,user:!0}}else M=":"!=M&&":"==M.charAt(0)?{keys:F,type:"keyToEx",exArgs:{input:M.substring(1)}}:{keys:F,type:"keyToKey",toKeys:M},da&&(M.context=da),ma.unshift(M)},unmap:function(F,M){if(":"!=F&&":"==F.charAt(0)){if(M)throw Error("Mode not supported for ex mappings");F=F.substring(1);if(this.commandMap_[F]&&this.commandMap_[F].user){delete this.commandMap_[F];return}}else for(var da=0;da<ma.length;da++)if(F==ma[da].keys&&
ma[da].context===M){ma.splice(da,1);return}throw Error("No such mapping.");}};var bd={colorscheme:function(F,M){!M.args||1>M.args.length?sb(F,F.getOption("theme")):F.setOption("theme",M.args[0])},map:function(F,M,da){var Aa=M.args;!Aa||2>Aa.length?F&&sb(F,"Invalid mapping: "+M.input):Uc.map(Aa[0],Aa[1],da)},imap:function(F,M){this.map(F,M,"insert")},nmap:function(F,M){this.map(F,M,"normal")},vmap:function(F,M){this.map(F,M,"visual")},unmap:function(F,M,da){var Aa=M.args;!Aa||1>Aa.length?F&&sb(F,"No such mapping: "+
M.input):Uc.unmap(Aa[0],da)},move:function(F,M){gc.processCommand(F,F.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:M.line+1})},set:function(F,M){var da=M.args,Aa=M.setCfg||{};if(!da||1>da.length)F&&sb(F,"Invalid mapping: "+M.input);else{var Wa=da[0].split("\x3d");da=Wa[0];Wa=Wa[1];var Ra=!1;if("?"==da.charAt(da.length-1)){if(Wa)throw Error("Trailing characters: "+M.argString);da=da.substring(0,da.length-1);Ra=!0}void 0===
Wa&&"no"==da.substring(0,2)&&(da=da.substring(2),Wa=!1);(M=Ld[da]&&"boolean"==Ld[da].type)&&void 0==Wa&&(Wa=!0);!M&&void 0===Wa||Ra?(Aa=Ha(da,F,Aa),Aa instanceof Error?sb(F,Aa.message):!0===Aa||!1===Aa?sb(F," "+(Aa?"":"no")+da):sb(F,"  "+da+"\x3d"+Aa)):(Aa=ea(da,Wa,F,Aa),Aa instanceof Error&&sb(F,Aa.message))}},setlocal:function(F,M){M.setCfg={scope:"local"};this.set(F,M)},setglobal:function(F,M){M.setCfg={scope:"global"};this.set(F,M)},registers:function(F,M){var da=M.args;M=Gc.registerController.registers;
var Aa="----------Registers----------\x3cbr\x3e\x3cbr\x3e";if(da){da=da.join("");for(var Wa=0;Wa<da.length;Wa++)if(Bb=da.charAt(Wa),Gc.registerController.isValidRegister(Bb)){var Ra=M[Bb]||new f;Aa+='"'+Bb+"    "+Ra.toString()+"\x3cbr\x3e"}}else for(var Bb in M)da=M[Bb].toString(),da.length&&(Aa+='"'+Bb+"    "+da+"\x3cbr\x3e");sb(F,Aa)},sort:function(F,M){function da(bb,Ta){if(Wa){var Pb=bb;bb=Ta;Ta=Pb}Ra&&(bb=bb.toLowerCase(),Ta=Ta.toLowerCase());Pb=Ob&&m.exec(bb);var ac=Ob&&m.exec(Ta);if(!Pb)return bb<
Ta?-1:1;Pb=parseInt((Pb[1]+Pb[2]).toLowerCase(),k);ac=parseInt((ac[1]+ac[2]).toLowerCase(),k);return Pb-ac}function Aa(bb,Ta){if(Wa){var Pb=bb;bb=Ta;Ta=Pb}Ra&&(bb[0]=bb[0].toLowerCase(),Ta[0]=Ta[0].toLowerCase());return bb[0]<Ta[0]?-1:1}var Wa,Ra,Bb,Ob,tb,Tb=function(){if(M.argString){var bb=new p.StringStream(M.argString);bb.eat("!")&&(Wa=!0);if(!bb.eol()){if(!bb.eatSpace())return"Invalid arguments";var Ta=bb.match(/([dinuox]+)?\s*(\/.+\/)?\s*/);if(!Ta&&!bb.eol())return"Invalid arguments";if(Ta[1]){Ra=
-1!=Ta[1].indexOf("i");Bb=-1!=Ta[1].indexOf("u");bb=-1!=Ta[1].indexOf("d")||-1!=Ta[1].indexOf("n")&&1;var Pb=-1!=Ta[1].indexOf("x")&&1,ac=-1!=Ta[1].indexOf("o")&&1;if(1<bb+Pb+ac)return"Invalid arguments";Ob=bb&&"decimal"||Pb&&"hex"||ac&&"octal"}Ta[2]&&(tb=new RegExp(Ta[2].substr(1,Ta[2].length-2),Ra?"i":""))}}}();if(Tb)sb(F,Tb+": "+M.argString);else{Tb=M.line||F.firstLine();var mc=M.lineEnd||M.line||F.lastLine();if(Tb!=mc){Tb=O(Tb,0);mc=O(mc,Ga(F,mc));var K=F.getRange(Tb,mc).split("\n"),m=tb?tb:"decimal"==
Ob?/(-?)([\d]+)/:"hex"==Ob?/(-?)(?:0x)?([0-9a-f]+)/i:"octal"==Ob?/([0-7]+)/:null,k="decimal"==Ob?10:"hex"==Ob?16:"octal"==Ob?8:null,r=[],x=[];if(Ob||tb)for(var J=0;J<K.length;J++){var Z=tb?K[J].match(tb):null;Z&&""!=Z[0]?r.push(Z):!tb&&m.exec(K[J])?r.push(K[J]):x.push(K[J])}else x=K;r.sort(tb?Aa:da);if(tb)for(J=0;J<r.length;J++)r[J]=r[J].input;else Ob||x.sort(da);K=Wa?r.concat(x):x.concat(r);if(Bb)for(r=K,K=[],J=0;J<r.length;J++){r[J]!=sa&&K.push(r[J]);var sa=r[J]}F.replaceRange(K.join("\n"),Tb,mc)}}},
global:function(F,M){var da=M.argString;if(da){var Aa=void 0!==M.line?M.line:F.firstLine();M=M.lineEnd||M.line||F.lastLine();var Wa=jb(da,"/");if(Wa.length){da=Wa[0];var Ra=Wa.slice(1,Wa.length).join("/")}if(da)try{Nb(F,da,!0,!0)}catch(Tb){sb(F,"Invalid regex: "+da);return}da=vb(F).getQuery();var Bb=[];for(Wa="";Aa<=M;Aa++)da.test(F.getLine(Aa))&&(Bb.push(Aa+1),Wa+=F.getLine(Aa)+"\x3cbr\x3e");if(Ra){var Ob=0,tb=function(){Ob<Bb.length&&Uc.processCommand(F,Bb[Ob]+Ra,{callback:tb});Ob++};tb()}else sb(F,
Wa)}else sb(F,"Regular Expression missing from global")},substitute:function(F,M){if(!F.getSearchCursor)throw Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var da=M.argString,Aa=da?jb(da,da[0]):[],Wa="",Ra,Bb=!1,Ob=!1;if(Aa.length){var tb=Aa[0];Ha("pcre")&&""!==tb&&(tb=(new RegExp(tb)).source);Wa=Aa[1];tb&&"$"===tb[tb.length-1]&&(tb=tb.slice(0,tb.length-1)+"\\n",Wa=Wa?Wa+"\n":"\n");if(void 0!==Wa){if(Ha("pcre")){Wa=Wa.replace(/([^\\])&/g,
"$1$$\x26");Wa=new p.StringStream(Wa);for(Ra=[];!Wa.eol();){for(;Wa.peek()&&"\\"!=Wa.peek();)Ra.push(Wa.next());da=!1;for(var Tb in dc)if(Wa.match(Tb,!0)){da=!0;Ra.push(dc[Tb]);break}da||Ra.push(Wa.next())}Wa=Ra.join("")}else{Tb=!1;Ra=[];for(da=-1;da<Wa.length;da++){var mc=Wa.charAt(da)||"",K=Wa.charAt(da+1)||"";fc[mc+K]?(Ra.push(fc[mc+K]),da++):Tb?(Ra.push(mc),Tb=!1):"\\"===mc?(Tb=!0,tc.test(K)||"$"===K?Ra.push("$"):"/"!==K&&"\\"!==K&&Ra.push("\\")):("$"===mc&&Ra.push("$"),Ra.push(mc),"/"===K&&Ra.push("\\"))}Wa=
Ra.join("")}Gc.lastSubstituteReplacePart=Wa}Ra=Aa[2]?Aa[2].split(" "):[]}else if(da&&da.length){sb(F,"Substitutions should be of the form :s/pattern/replace/");return}if(Ra){Aa=Ra[0];var m=parseInt(Ra[1]);Aa&&(-1!=Aa.indexOf("c")&&(Bb=!0,Aa.replace("c","")),-1!=Aa.indexOf("g")&&(Ob=!0,Aa.replace("g","")),tb=Ha("pcre")?tb+"/"+Aa:tb.replace(/\//g,"\\/")+"/"+Aa)}if(tb)try{Nb(F,tb,!0,!0)}catch(k){sb(F,"Invalid regex: "+tb);return}Wa=Wa||Gc.lastSubstituteReplacePart;void 0===Wa?sb(F,"No previous substitute regular expression"):
(tb=vb(F).getQuery(),Aa=void 0!==M.line?M.line:F.getCursor().line,Tb=M.lineEnd||Aa,Aa==F.firstLine()&&Tb==F.lastLine()&&(Tb=Infinity),m&&(Aa=Tb,Tb=Aa+m-1),m=z(F,O(Aa,0)),m=F.getSearchCursor(tb,m),V(F,Bb,Ob,Aa,Tb,m,tb,Wa,M.callback))},redo:p.commands.redo,undo:p.commands.undo,write:function(F){p.commands.save?p.commands.save(F):F.save&&F.save()},nohlsearch:function(F){oc(F)},yank:function(F){var M=ha(F.getCursor()).line;F=F.getLine(M);Gc.registerController.pushText("0","yank",F,!0,!0)},delmarks:function(F,
M){if(M.argString&&xb(M.argString))for(var da=F.state.vim,Aa=new p.StringStream(xb(M.argString));!Aa.eol();){Aa.eatSpace();var Wa=Aa.pos;if(!Aa.match(/[a-zA-Z]/,!1)){sb(F,"Invalid argument: "+M.argString.substring(Wa));break}var Ra=Aa.next();if(Aa.match("-",!0)){if(!Aa.match(/[a-zA-Z]/,!1)){sb(F,"Invalid argument: "+M.argString.substring(Wa));break}var Bb=Aa.next();if(/^[a-z]$/.test(Ra)&&/^[a-z]$/.test(Bb)||Y(Ra)&&Y(Bb)){Ra=Ra.charCodeAt(0);Bb=Bb.charCodeAt(0);if(Ra>=Bb){sb(F,"Invalid argument: "+
M.argString.substring(Wa));break}for(Wa=0;Wa<=Bb-Ra;Wa++){var Ob=String.fromCharCode(Ra+Wa);delete da.marks[Ob]}}else{sb(F,"Invalid argument: "+Ra+"-");break}}else delete da.marks[Ra]}else sb(F,"Argument required")}},Uc=new Vc;p.keyMap.vim={attach:la,detach:X,call:ka};ia("insertModeEscKeysTimeout",200,"number");p.keyMap["vim-insert"]={fallthrough:["default"],attach:la,detach:X,call:ka};p.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"],attach:la,detach:X,call:ka};Va();return Db}()})}
goog.provide("module$js$keymap$vim");
goog.global. module$js$keymap$vim=shadow.js.require(84, {});
