shadow$provide[76]=function(Nc,Vb,pc,wb){function p(){if("function"!==typeof WeakMap)return null;var K=new WeakMap;p=function(){return K};return K}function ma(K){return K&&K.__esModule?K:{"default":K}}function Ma(K){if(Array.isArray(K)){var m=0;for(var k=Array(K.length);m<K.length;m++)k[m]=K[m];m=k}else m=void 0;m||(m=Symbol.iterator in Object(K)||"[object Arguments]"===Object.prototype.toString.call(K)?Array.from(K):void 0);if(!(K=m))throw new TypeError("Invalid attempt to spread non-iterable instance");
return K}function y(K){y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"===typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m};return y(K)}function O(K,m){return!m||"object"!==y(m)&&"function"!==typeof m?la(K):m}function X(K){X=Object.setPrototypeOf?Object.getPrototypeOf:function(m){return m.__proto__||Object.getPrototypeOf(m)};return X(K)}function la(K){if(void 0===K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return K}function ua(K,m){if("function"!==typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");K.prototype=Object.create(m&&m.prototype,{constructor:{value:K,writable:!0,configurable:!0}});m&&Ea(K,m)}function Ea(K,m){Ea=Object.setPrototypeOf||function(k,r){k.__proto__=r;return k};return Ea(K,m)}function ka(K,m){if(!(K instanceof m))throw new TypeError("Cannot call a class as a function");}function P(K,m){for(var k=0;k<m.length;k++){var r=m[k];r.enumerable=r.enumerable||
!1;r.configurable=!0;"value"in r&&(r.writable=!0);Object.defineProperty(K,r.key,r)}}function ca(K,m,k){m&&P(K.prototype,m);k&&P(K,k);return K}function va(K,m){var k=Object.keys(K);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(K);m&&(r=r.filter(function(x){return Object.getOwnPropertyDescriptor(K,x).enumerable}));k.push.apply(k,r)}return k}function ra(K,m){if(void 0!==K){if(null===K)return null;if(!m)return K;if("string"!==typeof m&&!(m instanceof String))throw Error("Type must be a string");
switch(m){case "boolean":case "Boolean":return!!K;case "number":case "Number":return(0,Nb.isString)(K)&&!isNaN(Date.parse(K))?(0,hc["default"])(K).valueOf():Number(K.valueOf());case "string":case "String":return String(K);case "Date":if((0,Nb.isNumber)(K))return new Date(K);if(K instanceof Date||hc["default"].isMoment(K))return new Date(K.valueOf());if((0,Nb.isString)(K))return(m=kc.exec(K))?new Date(Number(m[1])):(0,hc["default"])(new Date(K)).toDate();throw Error("Cannot convert object of type "+
(0,Nb.getType)(K)+" to type Date");case "Moment":if((0,Nb.isNumber)(K))return(0,hc["default"])(K);if(K instanceof Date)return(0,hc["default"])(K.valueOf());if(hc["default"].isMoment(K))return(0,hc["default"])(K);if((0,Nb.isString)(K))return(m=kc.exec(K))?(0,hc["default"])(Number(m[1])):(0,hc["default"])(K);throw Error("Cannot convert object of type "+(0,Nb.getType)(K)+" to type Date");case "ISODate":if((0,Nb.isNumber)(K))return new Date(K);if(K instanceof Date)return K.toISOString();if(hc["default"].isMoment(K))return K.toDate().toISOString();
if((0,Nb.isString)(K))return(m=kc.exec(K))?(new Date(Number(m[1]))).toISOString():(0,hc["default"])(K).format();throw Error("Cannot convert object of type "+(0,Nb.getType)(K)+" to type ISODate");case "ASPDate":if((0,Nb.isNumber)(K))return"/Date("+K+")/";if(K instanceof Date||hc["default"].isMoment(K))return"/Date("+K.valueOf()+")/";if((0,Nb.isString)(K))return m=kc.exec(K),"/Date("+(m?(new Date(Number(m[1]))).valueOf():(new Date(K)).valueOf())+")/";throw Error("Cannot convert object of type "+(0,
Nb.getType)(K)+" to type ASPDate");default:throw Error("Unknown type ".concat(m));}}}function Y(K){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{start:"Date",end:"Date"},k=K._idProp,r=new cc.DataSet({fieldId:k}),x=(0,cc.createNewDataPipeFrom)(K).map(function(J){return Object.keys(J).reduce(function(Z,sa){Z[sa]=ra(J[sa],m[sa]);return Z},{})}).to(r);x.all().start();return{add:function(){var J;return(J=K.getDataSet()).add.apply(J,arguments)},remove:function(){var J;return(J=K.getDataSet()).remove.apply(J,
arguments)},update:function(){var J;return(J=K.getDataSet()).update.apply(J,arguments)},updateOnly:function(){var J;return(J=K.getDataSet()).updateOnly.apply(J,arguments)},forEach:r.forEach.bind(r),get:r.get.bind(r),getIds:r.getIds.bind(r),off:r.off.bind(r),on:r.on.bind(r),get length(){return r.length},idProp:k,type:m,rawDS:K,coercedDS:r,dispose:function(){return x.stop()}}}function qa(K,m,k){if(k&&!Array.isArray(k))return qa(K,m,[k]);m.hiddenDates=[];if(k&&1==Array.isArray(k)){for(var r=0;r<k.length;r++)if(void 0===
k[r].repeat){var x={};x.start=K(k[r].start).toDate().valueOf();x.end=K(k[r].end).toDate().valueOf();m.hiddenDates.push(x)}m.hiddenDates.sort(function(J,Z){return J.start-Z.start})}}function ya(K,m,k){if(k&&!Array.isArray(k))return ya(K,m,[k]);if(k&&void 0!==m.domProps.centerContainer.width){qa(K,m,k);for(var r=K(m.range.start),x=K(m.range.end),J=(m.range.end-m.range.start)/m.domProps.centerContainer.width,Z=0;Z<k.length;Z++)if(void 0!==k[Z].repeat){var sa=K(k[Z].start),bb=K(k[Z].end);if("Invalid Date"==
sa._d)throw Error("Supplied start date is not valid: ".concat(k[Z].start));if("Invalid Date"==bb._d)throw Error("Supplied end date is not valid: ".concat(k[Z].end));if(bb-sa>=4*J){var Ta=0,Pb=x.clone();switch(k[Z].repeat){case "daily":sa.day()!=bb.day()&&(Ta=1);sa.dayOfYear(r.dayOfYear());sa.year(r.year());sa.subtract(7,"days");bb.dayOfYear(r.dayOfYear());bb.year(r.year());bb.subtract(7-Ta,"days");Pb.add(1,"weeks");break;case "weekly":Ta=bb.diff(sa,"days");var ac=sa.day();sa.date(r.date());sa.month(r.month());
sa.year(r.year());bb=sa.clone();sa.day(ac);bb.day(ac);bb.add(Ta,"days");sa.subtract(1,"weeks");bb.subtract(1,"weeks");Pb.add(1,"weeks");break;case "monthly":sa.month()!=bb.month()&&(Ta=1);sa.month(r.month());sa.year(r.year());sa.subtract(1,"months");bb.month(r.month());bb.year(r.year());bb.subtract(1,"months");bb.add(Ta,"months");Pb.add(1,"months");break;case "yearly":sa.year()!=bb.year()&&(Ta=1);sa.year(r.year());sa.subtract(1,"years");bb.year(r.year());bb.subtract(1,"years");bb.add(Ta,"years");
Pb.add(1,"years");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",k[Z].repeat);return}for(;sa<Pb;)switch(m.hiddenDates.push({start:sa.valueOf(),end:bb.valueOf()}),k[Z].repeat){case "daily":sa.add(1,"days");bb.add(1,"days");break;case "weekly":sa.add(1,"weeks");bb.add(1,"weeks");break;case "monthly":sa.add(1,"months");bb.add(1,"months");break;case "yearly":sa.add(1,"y");bb.add(1,"y");break;default:console.log("Wrong repeat format, allowed are: daily, weekly, monthly, yearly. Given:",
k[Z].repeat);return}m.hiddenDates.push({start:sa.valueOf(),end:bb.valueOf()})}}ia(m);K=q(m.range.start,m.hiddenDates);k=q(m.range.end,m.hiddenDates);r=m.range.start;x=m.range.end;1==K.hidden&&(r=1==m.range.startToFront?K.startDate-1:K.endDate+1);1==k.hidden&&(x=1==m.range.endToFront?k.startDate-1:k.endDate+1);1!=K.hidden&&1!=k.hidden||m.range._applyRange(r,x)}}function ia(K){for(var m=K.hiddenDates,k=[],r=0;r<m.length;r++)for(var x=0;x<m.length;x++)r!=x&&1!=m[x].remove&&1!=m[r].remove&&(m[x].start>=
m[r].start&&m[x].end<=m[r].end?m[x].remove=!0:m[x].start>=m[r].start&&m[x].start<=m[r].end?(m[r].end=m[x].end,m[x].remove=!0):m[x].end>=m[r].start&&m[x].end<=m[r].end&&(m[r].start=m[x].start,m[x].remove=!0));for(r=0;r<m.length;r++)!0!==m[r].remove&&k.push(m[r]);K.hiddenDates=k;K.hiddenDates.sort(function(J,Z){return J.start-Z.start})}function ea(K,m,k){for(var r=!1,x=m.current.valueOf(),J=0;J<m.hiddenDates.length;J++){var Z=m.hiddenDates[J].end;if(x>=m.hiddenDates[J].start&&x<Z){r=!0;break}}1==r&&
x<m._end.valueOf()&&x!=k&&(k=K(k),K=K(Z),k.year()!=K.year()?m.switchedYear=!0:k.month()!=K.month()?m.switchedMonth=!0:k.dayOfYear()!=K.dayOfYear()&&(m.switchedDay=!0),m.current=K)}function Ha(K,m,k){if(0==K.body.hiddenDates.length)return k=K.range.conversion(k),(m.valueOf()-k.offset)*k.scale;var r=q(m,K.body.hiddenDates);1==r.hidden&&(m=r.startDate);r=Ba(K.body.hiddenDates,K.range.start,K.range.end);if(m<K.range.start)return k=K.range.conversion(k,r),r=Va(K.body.hiddenDates,m,k.offset),m=K.options.moment(m).toDate().valueOf(),
-(k.offset-(m+r).valueOf())*k.scale;m=m>K.range.end?Ya(K.options.moment,K.body.hiddenDates,{start:K.range.start,end:m},m):Ya(K.options.moment,K.body.hiddenDates,K.range,m);k=K.range.conversion(k,r);return(m.valueOf()-k.offset)*k.scale}function aa(K,m,k){if(0==K.body.hiddenDates.length)return K=K.range.conversion(k),new Date(m/K.scale+K.offset);var r=Ba(K.body.hiddenDates,K.range.start,K.range.end);m=(K.range.end-K.range.start-r)*m/k;k=f(K.body.hiddenDates,K.range,m);return new Date(k+m+K.range.start)}
function Ba(K,m,k){for(var r=0,x=0;x<K.length;x++){var J=K[x].start,Z=K[x].end;J>=m&&Z<k&&(r+=Z-J)}return r}function Va(K,m,k){for(var r=0,x=0;x<K.length;x++){var J=K[x].start,Z=K[x].end;J>=m&&Z<=k&&(r+=Z-J)}return r}function Ya(K,m,k,r){r=K(r).toDate().valueOf();return r-=d(K,m,k,r)}function d(K,m,k,r){var x=0;r=K(r).toDate().valueOf();for(K=0;K<m.length;K++){var J=m[K].start,Z=m[K].end;J>=k.start&&Z<k.end&&r>=Z&&(x+=Z-J)}return x}function f(K,m,k){for(var r=0,x=0,J=m.start,Z=0;Z<K.length;Z++){var sa=
K[Z].start,bb=K[Z].end;if(sa>=m.start&&bb<m.end)if(x+=sa-J,J=bb,x>=k)break;else r+=bb-sa}return r}function l(K,m,k,r){K=q(m,K);return 1==K.hidden?0>k?1==r?K.startDate-(K.endDate-m)-1:K.startDate-1:1==r?K.endDate+(m-K.startDate)+1:K.endDate+1:m}function q(K,m){for(var k=0;k<m.length;k++){var r=m[k].start,x=m[k].end;if(K>=r&&K<x)return{hidden:!0,startDate:r,endDate:x}}return{hidden:!1,startDate:r,endDate:x}}function w(K){if("horizontal"!=K&&"vertical"!=K)throw new TypeError('Unknown direction "'.concat(K,
'". Choose "horizontal" or "vertical".'));}function z(){var K=function(){};return{on:K,off:K,destroy:K,emit:K,get:function(m){return{set:K}}}}function G(K,m){m.inputHandler=function(k){k.isFirst&&m(k)};K.on("hammer.input",m.inputHandler)}function H(K,m){m.inputHandler=function(k){k.isFinal&&m(k)};return K.on("hammer.input",m.inputHandler)}function R(K){K.getTouchAction=function(){return["pan-y"]};return K}function ha(K){this.active=!1;this.dom={container:K};this.dom.overlay=document.createElement("div");
this.dom.overlay.className="vis-overlay";this.dom.container.appendChild(this.dom.overlay);this.hammer=gb(this.dom.overlay);this.hammer.on("tap",this._onTapOverlay.bind(this));var m=this;"tap doubletap press pinch pan panstart panmove panend".split(" ").forEach(function(k){m.hammer.on(k,function(r){r.stopPropagation()})});document&&document.body&&(this.onClick=function(k){a:{for(k=k.target;k;){if(k===K){k=!0;break a}k=k.parentNode}k=!1}k||m.deactivate()},document.body.addEventListener("click",this.onClick));
void 0!==this.keycharm&&this.keycharm.destroy();this.keycharm=(0,ec["default"])();this.escListener=this.deactivate.bind(this)}function Ja(K){K.sort(function(m,k){return m.data.start-k.data.start})}function D(K){K.sort(function(m,k){return("end"in m.data?m.data.end:m.data.start)-("end"in k.data?k.data.end:k.data.start)})}function Q(K,m,k,r){if(k)for(k=0;k<K.length;k++)K[k].top=null;for(k=0;k<K.length;k++){var x=K[k];if(x.stack&&null===x.top){x.top=m.axis;var J=!1;do{for(var Z=null,sa=0,bb=K.length;sa<
bb;sa++){var Ta=K[sa];if(J=r()||!1)return!0;if(null!==Ta.top&&Ta!==x&&Ta.stack&&Hb(x,Ta,m.item,Ta.options.rtl)){Z=Ta;break}}null!=Z&&(x.top=Z.top+Z.height+m.item.vertical)}while(Z)}}return J}function oa(K,m,k){for(var r=0;r<K.length;r++)K[r].top=null;var x=k.height;for(r=0;r<K.length;r++){var J=K[r];if(J.stack&&null===J.top){J.top=J.baseTop;do{for(var Z=null,sa=0,bb=K.length;sa<bb;sa++){var Ta=K[sa];if(null!==Ta.top&&Ta!==J&&Hb(J,Ta,m.item,Ta.options.rtl)){Z=Ta;break}}null!=Z&&(J.top=Z.top+Z.height+
m.item.vertical);J.top+J.height>x&&(x=J.top+J.height)}while(Z)}}k.height=x-k.top+.5*m.item.vertical}function Fa(K,m,k,r){for(var x=0;x<K.length;x++)if(void 0==K[x].data.subgroup)K[x].top=m.item.vertical;else if(void 0!==K[x].data.subgroup&&r){var J=0,Z;for(Z in k)k.hasOwnProperty(Z)&&1==k[Z].visible&&k[Z].index<k[K[x].data.subgroup].index&&(J+=k[Z].height,k[K[x].data.subgroup].top=J);K[x].top=J+.5*m.item.vertical}r||Ga(K,m,k)}function Ga(K,m,k){for(var r in k)if(k.hasOwnProperty(r)){k[r].top=0;do{var x=
null,J;for(J in k)if(null!==k[J].top&&J!==r&&k[r].index>k[J].index&&Kb(k[r],k[J])){x=k[J];break}null!=x&&(k[r].top=x.top+x.height)}while(x)}for(r=0;r<K.length;r++)void 0!==K[r].data.subgroup&&(K[r].top=k[K[r].data.subgroup].top+.5*m.item.vertical)}function xb(K,m,k){var r=!1,x=[];for(Z in k)k[Z].hasOwnProperty("index")?x[k[Z].index]=Z:x.push(Z);for(var J=0;J<x.length;J++){var Z=x[J];if(k.hasOwnProperty(Z)){r=r||k[Z].stack;k[Z].top=0;for(var sa in k)k[sa].visible&&k[Z].index>k[sa].index&&(k[Z].top+=
k[sa].height);for(var bb=K[Z],Ta=0;Ta<bb.length;Ta++)void 0!==bb[Ta].data.subgroup&&(bb[Ta].top=k[bb[Ta].data.subgroup].top+.5*m.item.vertical,k[Z].stack&&(bb[Ta].baseTop=bb[Ta].top));r&&k[Z].stack&&oa(K[Z],m,k[Z])}}}function Hb(K,m,k,r){return r?K.right-k.horizontal+.001<m.right+m.width&&K.right+K.width+k.horizontal-.001>m.right&&K.top-k.vertical+.001<m.top+m.height&&K.top+K.height+k.vertical-.001>m.top:K.left-k.horizontal+.001<m.left+m.width&&K.left+K.width+k.horizontal-.001>m.left&&K.top-k.vertical+
.001<m.top+m.height&&K.top+K.height+k.vertical-.001>m.top}function Kb(K,m){var k=K.top<m.top+m.height&&K.top+K.height>m.top;return K.start<m.end&&K.end>m.start&&k}function Cb(K){return V.convert(K.data.start,"Date").valueOf()}function ib(K){return V.convert(void 0!=K.data.end?K.data.end:K.data.start,"Date").valueOf()}function Ib(K,m){if(!m.parent)return!1;var k=K.options.rtl?K.props.rightContainer.height:K.props.leftContainer.height,r=K.props.center.height,x=m.parent,J=x.top,Z=!0,sa=K.timeAxis.options.orientation.axis,
bb=function(){return"bottom"==sa?x.height-m.top-m.height:m.top},Ta=-1*K._getScrollTop(),Pb=J+bb(),ac=m.height;Pb<Ta?J+k<=J+bb()+ac&&(J+=bb()-K.itemSet.options.margin.item.vertical):Pb+ac>Ta+k?J+=bb()+ac-k+K.itemSet.options.margin.item.vertical:Z=!1;J=Math.min(J,r-k);return{shouldScroll:Z,scrollOffset:J,itemTop:Pb}}function Oa(K){for(var m in K)K.hasOwnProperty(m)&&(K[m].redundant=K[m].used,K[m].used=[])}function Ua(K){for(var m in K)if(K.hasOwnProperty(m)&&K[m].redundant){for(var k=0;k<K[m].redundant.length;k++)K[m].redundant[k].parentNode.removeChild(K[m].redundant[k]);
K[m].redundant=[]}}function Pa(K){Oa(K);Ua(K);Oa(K)}function ja(K,m,k){if(m.hasOwnProperty(K))if(0<m[K].redundant.length){var r=m[K].redundant[0];m[K].redundant.shift()}else r=document.createElementNS("http://www.w3.org/2000/svg",K),k.appendChild(r);else r=document.createElementNS("http://www.w3.org/2000/svg",K),m[K]={used:[],redundant:[]},k.appendChild(r);m[K].used.push(r);return r}function Qa(K,m,k,r){if(m.hasOwnProperty(K))if(0<m[K].redundant.length){var x=m[K].redundant[0];m[K].redundant.shift()}else x=
document.createElement(K),void 0!==r?k.insertBefore(x,r):k.appendChild(x);else x=document.createElement(K),m[K]={used:[],redundant:[]},void 0!==r?k.insertBefore(x,r):k.appendChild(x);m[K].used.push(x);return x}function Za(K,m,k,r,x,J){if("circle"==k.style){var Z=ja("circle",r,x);Z.setAttributeNS(null,"cx",K);Z.setAttributeNS(null,"cy",m);Z.setAttributeNS(null,"r",.5*k.size)}else Z=ja("rect",r,x),Z.setAttributeNS(null,"x",K-.5*k.size),Z.setAttributeNS(null,"y",m-.5*k.size),Z.setAttributeNS(null,"width",
k.size),Z.setAttributeNS(null,"height",k.size);void 0!==k.styles&&Z.setAttributeNS(null,"style",k.styles);Z.setAttributeNS(null,"class",k.className+" vis-point");J&&(k=ja("text",r,x),J.xOffset&&(K+=J.xOffset),J.yOffset&&(m+=J.yOffset),J.content&&(k.textContent=J.content),J.className&&k.setAttributeNS(null,"class",J.className+" vis-label"),k.setAttributeNS(null,"x",K),k.setAttributeNS(null,"y",m));return Z}function qb(K,m,k,r,x,J,Z,sa){0!=r&&(0>r&&(r*=-1,m-=r),J=ja("rect",J,Z),J.setAttributeNS(null,
"x",K-.5*k),J.setAttributeNS(null,"y",m),J.setAttributeNS(null,"width",k),J.setAttributeNS(null,"height",r),J.setAttributeNS(null,"class",x),sa&&J.setAttributeNS(null,"style",sa))}function La(K,m){}function Na(K,m){m="undefined"===typeof m?{}:m;return{style:m.style||K.options.drawPoints.style,styles:m.styles||K.options.drawPoints.styles,size:m.size||K.options.drawPoints.size,className:m.className||K.className}}function kb(K,m){}function Sa(K,m){}function vb(K,m,k,r){this.id=m;this.options=V.selectiveBridgeObject("sampling style sort yAxisOrientation barChart drawPoints shaded interpolation zIndex excludeFromStacking excludeFromLegend".split(" "),
k);this.usingDefaultStyle=void 0===K.className;this.groupsUsingDefaultStyles=r;this.zeroPosition=0;this.update(K);1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1);this.itemsData=[];this.visible=void 0===K.visible?!0:K.visible}function jb(K,m,k,r){this.body=K;this.defaultOptions={enabled:!1,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}};this.side=k;this.options=V.extend({},this.defaultOptions);this.linegraphOptions=
r;this.svgElements={};this.dom={};this.groups={};this.amountOfGroups=0;this._create();this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups};this.setOptions(m)}function nb(K,m){this.id=(0,lb.v4)();this.body=K;this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,stack:!1,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,sideBySide:!1,align:"center"},interpolation:{enabled:!0,parametrization:"centripetal",
alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{},legend:{},groups:{visibility:{}}};this.options=V.extend({},this.defaultOptions);this.dom={};this.props={};this.hammer=null;this.groups={};this.updateSVGheightOnResize=this.updateSVGheight=this.abortedGraphUpdate=!1;this.forceGraphUpdate=!0;var k=this;this.groupsData=this.itemsData=null;this.itemListeners={add:function(r,x,J){k._onAdd(x.items)},update:function(r,x,J){k._onUpdate(x.items)},remove:function(r,x,J){k._onRemove(x.items)}};
this.groupListeners={add:function(r,x,J){k._onAddGroups(x.items)},update:function(r,x,J){k._onUpdateGroups(x.items)},remove:function(r,x,J){k._onRemoveGroups(x.items)}};this.items={};this.selection=[];this.lastStart=this.body.range.start;this.touchParams={};this.svgElements={};this.setOptions(m);this.groupsUsingDefaultStyles=[0];this.body.emitter.on("rangechanged",function(){k.lastStart=k.body.range.start;k.svg.style.left=V.option.asSize(-k.props.width);k.forceGraphUpdate=!0;k.redraw.call(k)});this._create();
this.framework={svg:this.svg,svgElements:this.svgElements,options:this.options,groups:this.groups}}function sb(K,m,k,r){if(!(Array.isArray(k)||k instanceof cc.DataSet||k instanceof cc.DataView)&&k instanceof Object){var x=r;r=k;k=x}r&&r.throttleRedraw&&console.warn('Graph2d option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');var J=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:{axis:"bottom",item:"bottom"},moment:Gb,
width:null,height:null,maxHeight:null,minHeight:null};this.options=V.deepExtend({},this.defaultOptions);this._create(K);this.components=[];this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},hiddenDates:[],util:{toScreen:J._toScreen.bind(J),toGlobalScreen:J._toGlobalScreen.bind(J),toTime:J._toTime.bind(J),toGlobalTime:J._toGlobalTime.bind(J)}};this.range=new Wb(this.body);this.components.push(this.range);this.body.range=this.range;
this.timeAxis=new cb(this.body);this.components.push(this.timeAxis);this.currentTime=new Gc(this.body);this.components.push(this.currentTime);this.linegraph=new nb(this.body);this.components.push(this.linegraph);this.groupsData=this.itemsData=null;this.on("tap",function(Z){J.emit("click",J.getEventProperties(Z))});this.on("doubletap",function(Z){J.emit("doubleClick",J.getEventProperties(Z))});this.dom.root.oncontextmenu=function(Z){J.emit("contextmenu",J.getEventProperties(Z))};this.initialFitDone=
!1;this.on("changed",function(){if(null!=J.itemsData){if(!J.initialFitDone&&!J.options.rollingMode)if(J.initialFitDone=!0,void 0!=J.options.start||void 0!=J.options.end){if(void 0==J.options.start||void 0==J.options.end)var Z=J.getItemRange();J.setWindow(void 0!=J.options.start?J.options.start:Z.min,void 0!=J.options.end?J.options.end:Z.max,{animation:!1})}else J.fit({animation:!1});J.initialDrawDone||!J.initialRangeChangeDone&&(J.options.start||J.options.end)&&!J.options.rollingMode||(J.initialDrawDone=
!0,J.dom.root.style.visibility="visible",J.dom.loadingScreen.parentNode.removeChild(J.dom.loadingScreen),J.options.onInitialDrawComplete&&setTimeout(function(){return J.options.onInitialDrawComplete()},0))}});r&&this.setOptions(r);k&&this.setGroups(k);m&&this.setItems(m);this._redraw()}Object.defineProperty(wb,"__esModule",{value:!0});wb.Graph2d=sb;wb.timeline=wb.Timeline=void 0;var hc=ma(Vb(63)),Nb=function(K){if(K&&K.__esModule)return K;if(null===K||"object"!==y(K)&&"function"!==typeof K)return{"default":K};
var m=p();if(m&&m.has(K))return m.get(K);var k={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor,x;for(x in K)if(Object.prototype.hasOwnProperty.call(K,x)){var J=r?Object.getOwnPropertyDescriptor(K,x):null;J&&(J.get||J.set)?Object.defineProperty(k,x,J):k[x]=K[x]}k["default"]=K;m&&m.set(K,k);return k}(Vb(62)),cc=Vb(64),nc=ma(Vb(67)),Fc=ma(Vb(75)),oc=ma(Vb(69)),ec=ma(Vb(68)),lb=Vb(61),Gb="undefined"!==typeof window&&window.moment||hc["default"],kc=/^\/?Date\((-?\d+)/i,V=function(K){for(var m=
1;m<arguments.length;m++){var k=null!=arguments[m]?arguments[m]:{};m%2?va(k,!0).forEach(function(r){var x=k[r];r in K?Object.defineProperty(K,r,{value:x,enumerable:!0,configurable:!0,writable:!0}):K[r]=x}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(k)):va(k).forEach(function(r){Object.defineProperty(K,r,Object.getOwnPropertyDescriptor(k,r))})}return K}({},Nb,{convert:ra}),hb=function(){function K(m,k){ka(this,K);this.props=this.options=null}ca(K,[{key:"setOptions",
value:function(m){m&&V.extend(this.options,m)}},{key:"redraw",value:function(){return!1}},{key:"destroy",value:function(){}},{key:"_isResized",value:function(){var m=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;this.props._previousWidth=this.props.width;this.props._previousHeight=this.props.height;return m}}]);return K}(),Mb=Object.freeze({__proto__:null,convertHiddenOptions:qa,updateHiddenDates:ya,removeDuplicates:ia,printDates:function(K){for(var m=
0;m<K.length;m++)console.log(m,new Date(K[m].start),new Date(K[m].end),K[m].start,K[m].end,K[m].remove)},stepOverHiddenDates:ea,toScreen:Ha,toTime:aa,getHiddenDurationBetween:Ba,getHiddenDurationBeforeStart:Va,correctTimeForHidden:Ya,getHiddenDurationBefore:d,getAccumulatedHiddenDuration:f,snapAwayFromHidden:l,getIsHidden:q}),Wb=function(K){function m(k,r){ka(this,m);var x=O(this,X(m).call(this));var J=Gb().hours(0).minutes(0).seconds(0).milliseconds(0),Z=J.clone().add(-3,"days").valueOf();J=J.clone().add(3,
"days").valueOf();x.millisecondsPerPixelCache=void 0;void 0===r?(x.start=Z,x.end=J):(x.start=r.start||Z,x.end=r.end||J);x.rolling=!1;x.body=k;x.deltaDifference=0;x.scaleOffset=0;x.startToFront=!1;x.endToFront=!0;x.defaultOptions={rtl:!1,start:null,end:null,moment:Gb,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536E10,rollingMode:{follow:!1,offset:.5}};x.options=V.extend({},x.defaultOptions);x.props={touch:{}};x.animationTimer=null;x.body.emitter.on("panstart",
x._onDragStart.bind(la(x)));x.body.emitter.on("panmove",x._onDrag.bind(la(x)));x.body.emitter.on("panend",x._onDragEnd.bind(la(x)));x.body.emitter.on("mousewheel",x._onMouseWheel.bind(la(x)));x.body.emitter.on("touch",x._onTouch.bind(la(x)));x.body.emitter.on("pinch",x._onPinch.bind(la(x)));x.body.dom.rollingModeBtn.addEventListener("click",x.startRolling.bind(la(x)));x.setOptions(r);return x}ua(m,K);ca(m,[{key:"setOptions",value:function(k){k&&(V.selectiveExtend("animation direction min max zoomMin zoomMax moveable zoomable moment activate hiddenDates zoomKey zoomFriction rtl showCurrentTime rollingMode horizontalScroll".split(" "),
this.options,k),k.rollingMode&&k.rollingMode.follow&&this.startRolling(),("start"in k||"end"in k)&&this.setRange(k.start,k.end))}},{key:"startRolling",value:function(){function k(){r.stopRolling();r.rolling=!0;var x=r.end-r.start,J=V.convert(new Date,"Date").valueOf(),Z=r.options.rollingMode&&r.options.rollingMode.offset||.5;r.setRange(J-x*Z,J+x*(1-Z),{animation:!1});x=1/r.conversion(r.body.domProps.center.width).scale/10;30>x&&(x=30);1E3<x&&(x=1E3);r.body.dom.rollingModeBtn.style.visibility="hidden";
r.currentTimeTimer=setTimeout(k,x)}var r=this;k()}},{key:"stopRolling",value:function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),this.rolling=!1,this.body.dom.rollingModeBtn.style.visibility="visible")}},{key:"setRange",value:function(k,r,x,J,Z){x||(x={});!0!==x.byUser&&(x.byUser=!1);var sa=this,bb=void 0!=k?V.convert(k,"Date").valueOf():null,Ta=void 0!=r?V.convert(r,"Date").valueOf():null;this._cancelAnimation();this.millisecondsPerPixelCache=void 0;if(x.animation){var Pb=
this.start,ac=this.end,yc="object"===y(x.animation)&&"duration"in x.animation?x.animation.duration:500;k="object"===y(x.animation)&&"easingFunction"in x.animation?x.animation.easingFunction:"easeInOutQuad";var Pc=V.easingFunctions[k];if(!Pc)throw Error("Unknown easing function ".concat(JSON.stringify(k),". Choose from: ").concat(Object.keys(V.easingFunctions).join(", ")));var Bc=Date.now(),Hc=!1;return function le(){if(!sa.props.touch.dragging){var me=Date.now()-Bc,Sd=Pc(me/yc);me=me>yc;gd=sa._applyRange(me||
null===bb?bb:Pb+(bb-Pb)*Sd,me||null===Ta?Ta:ac+(Ta-ac)*Sd);ya(sa.options.moment,sa.body,sa.options.hiddenDates);Hc=Hc||gd;var yd={start:new Date(sa.start),end:new Date(sa.end),byUser:x.byUser,event:x.event};Z&&Z(Sd,gd,me);gd&&sa.body.emitter.emit("rangechange",yd);if(me){if(Hc&&(sa.body.emitter.emit("rangechanged",yd),J))return J()}else sa.animationTimer=setTimeout(le,20)}}()}var gd=this._applyRange(bb,Ta);ya(this.options.moment,this.body,this.options.hiddenDates);if(gd){var pd={start:new Date(this.start),
end:new Date(this.end),byUser:x.byUser,event:x.event};this.body.emitter.emit("rangechange",pd);clearTimeout(sa.timeoutID);sa.timeoutID=setTimeout(function(){sa.body.emitter.emit("rangechanged",pd)},200);if(J)return J()}}},{key:"getMillisecondsPerPixel",value:function(){void 0===this.millisecondsPerPixelCache&&(this.millisecondsPerPixelCache=(this.end-this.start)/this.body.dom.center.clientWidth);return this.millisecondsPerPixelCache}},{key:"_cancelAnimation",value:function(){this.animationTimer&&
(clearTimeout(this.animationTimer),this.animationTimer=null)}},{key:"_applyRange",value:function(k,r){var x=null!=k?V.convert(k,"Date").valueOf():this.start,J=null!=r?V.convert(r,"Date").valueOf():this.end,Z=null!=this.options.max?V.convert(this.options.max,"Date").valueOf():null,sa=null!=this.options.min?V.convert(this.options.min,"Date").valueOf():null;if(isNaN(x)||null===x)throw Error('Invalid start "'.concat(k,'"'));if(isNaN(J)||null===J)throw Error('Invalid end "'.concat(r,'"'));J<x&&(J=x);null!==
sa&&x<sa&&(k=sa-x,x+=k,J+=k,null!=Z&&J>Z&&(J=Z));null!==Z&&J>Z&&(k=J-Z,x-=k,J-=k,null!=sa&&x<sa&&(x=sa));null!==this.options.zoomMin&&(Z=parseFloat(this.options.zoomMin),0>Z&&(Z=0),J-x<Z&&(this.end-this.start===Z&&x>=this.start-.5&&J<=this.end?(x=this.start,J=this.end):(k=Z-(J-x),x-=k/2,J+=k/2)));null!==this.options.zoomMax&&(Z=parseFloat(this.options.zoomMax),0>Z&&(Z=0),J-x>Z&&(this.end-this.start===Z&&x<this.start&&J>this.end?(x=this.start,J=this.end):(k=J-x-Z,x+=k/2,J-=k/2)));Z=this.start!=x||
this.end!=J;x>=this.start&&x<=this.end||J>=this.start&&J<=this.end||this.start>=x&&this.start<=J||this.end>=x&&this.end<=J||this.body.emitter.emit("checkRangedItems");this.start=x;this.end=J;return Z}},{key:"getRange",value:function(){return{start:this.start,end:this.end}}},{key:"conversion",value:function(k,r){return m.conversion(this.start,this.end,k,r)}},{key:"_onDragStart",value:function(k){this.previousDelta=this.deltaDifference=0;this.options.moveable&&this._isInsideRange(k)&&this.props.touch.allowDragging&&
(this.stopRolling(),this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.dragging=!0,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))}},{key:"_onDrag",value:function(k){if(k&&this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging){var r=this.options.direction;w(r);var x="horizontal"==r?k.deltaX:k.deltaY;x-=this.deltaDifference;var J=this.props.touch.end-this.props.touch.start,Z=Ba(this.body.hiddenDates,this.start,this.end);J-=Z;r=
"horizontal"==r?this.body.domProps.center.width:this.body.domProps.center.height;r=this.options.rtl?x/r*J:-x/r*J;J=this.props.touch.start+r;r=this.props.touch.end+r;Z=l(this.body.hiddenDates,J,this.previousDelta-x,!0);var sa=l(this.body.hiddenDates,r,this.previousDelta-x,!0);Z!=J||sa!=r?(this.deltaDifference+=x,this.props.touch.start=Z,this.props.touch.end=sa,this._onDrag(k)):(this.previousDelta=x,this._applyRange(J,r),this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end),
byUser:!0,event:k}),this.body.emitter.emit("panmove"))}}},{key:"_onDragEnd",value:function(k){this.props.touch.dragging&&this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.dragging=!1,this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end),byUser:!0,event:k}))}},{key:"_onMouseWheel",value:function(k){var r=0;k.wheelDelta?r=k.wheelDelta/120:k.detail?r=-k.detail/3:k.deltaY&&(r=-k.deltaY/
3);if(!(this.options.zoomKey&&!k[this.options.zoomKey]&&this.options.zoomable||!this.options.zoomable&&this.options.moveable)&&this.options.zoomable&&this.options.moveable&&this._isInsideRange(k)&&r){var x=this.options.zoomFriction||5;x=0>r?1-r/x:1/(1+r/x);if(this.rolling)var J=this.start+(this.end-this.start)*(this.options.rollingMode&&this.options.rollingMode.offset||.5);else J=this.getPointer({x:k.clientX,y:k.clientY},this.body.dom.center),J=this._pointerToDate(J);this.zoom(x,J,r,k);k.preventDefault()}}},
{key:"_onTouch",value:function(k){this.props.touch.start=this.start;this.props.touch.end=this.end;this.props.touch.allowDragging=!0;this.props.touch.center=null;this.props.touch.centerDate=null;this.deltaDifference=this.scaleOffset=0;V.preventDefault(k)}},{key:"_onPinch",value:function(k){if(this.options.zoomable&&this.options.moveable){V.preventDefault(k);this.props.touch.allowDragging=!1;this.props.touch.center||(this.props.touch.center=this.getPointer(k.center,this.body.dom.center),this.props.touch.centerDate=
this._pointerToDate(this.props.touch.center));this.stopRolling();var r=1/(k.scale+this.scaleOffset),x=this.props.touch.centerDate,J=Ba(this.body.hiddenDates,this.start,this.end),Z=d(this.options.moment,this.body.hiddenDates,this,x);J-=Z;Z=x-Z+(this.props.touch.start-(x-Z))*r;x=x+J+(this.props.touch.end-(x+J))*r;this.startToFront=0>=1-r;this.endToFront=0>=r-1;J=l(this.body.hiddenDates,Z,1-r,!0);r=l(this.body.hiddenDates,x,r-1,!0);if(J!=Z||r!=x)this.props.touch.start=J,this.props.touch.end=r,this.scaleOffset=
1-k.scale,Z=J,x=r;this.setRange(Z,x,{animation:!1,byUser:!0,event:k});this.startToFront=!1;this.endToFront=!0}}},{key:"_isInsideRange",value:function(k){k=k.center?k.center.x:k.clientX;var r=this.body.dom.centerContainer.getBoundingClientRect();k=this.body.util.toTime(this.options.rtl?k-r.left:r.right-k);return k>=this.start&&k<=this.end}},{key:"_pointerToDate",value:function(k){var r=this.options.direction;w(r);if("horizontal"==r)return this.body.util.toTime(k.x).valueOf();r=this.conversion(this.body.domProps.center.height);
return k.y/r.scale+r.offset}},{key:"getPointer",value:function(k,r){r=r.getBoundingClientRect();return this.options.rtl?{x:r.right-k.x,y:k.y-r.top}:{x:k.x-r.left,y:k.y-r.top}}},{key:"zoom",value:function(k,r,x,J){null==r&&(r=(this.start+this.end)/2);var Z=Ba(this.body.hiddenDates,this.start,this.end),sa=d(this.options.moment,this.body.hiddenDates,this,r);Z-=sa;sa=r-sa+(this.start-(r-sa))*k;k=r+Z+(this.end-(r+Z))*k;this.startToFront=0<x?!1:!0;this.endToFront=0<-x?!1:!0;r=l(this.body.hiddenDates,sa,
x,!0);x=l(this.body.hiddenDates,k,-x,!0);if(r!=sa||x!=k)sa=r,k=x;this.setRange(sa,k,{animation:!1,byUser:!0,event:J});this.startToFront=!1;this.endToFront=!0}},{key:"move",value:function(k){var r=this.end-this.start,x=this.end+r*k;this.start+=r*k;this.end=x}},{key:"moveTo",value:function(k){k=(this.start+this.end)/2-k;this.setRange(this.start-k,this.end-k,{animation:!1,byUser:!0,event:null})}}],[{key:"conversion",value:function(k,r,x,J){void 0===J&&(J=0);return 0!=x&&0!=r-k?{offset:k,scale:x/(r-k-
J)}:{offset:0,scale:1}}}]);return m}(hb);if("undefined"!==typeof window){var Ub=window.Hammer||oc["default"];var lc=(0,Fc["default"])(Ub,{preventDefault:"mouse"})}else lc=function(){return z()};var gb=lc,xa=function(){function K(m,k,r,x,J){ka(this,K);this.moment=J&&J.moment||Gb;this.options=J?J:{};this.current=this.moment();this._start=this.moment();this._end=this.moment();this.autoScale=!0;this.scale="day";this.step=1;this.setRange(m,k,r);this.switchedYear=this.switchedMonth=this.switchedDay=!1;
Array.isArray(x)?this.hiddenDates=x:this.hiddenDates=void 0!=x?[x]:[];this.format=K.FORMAT}ca(K,[{key:"setMoment",value:function(m){this.moment=m;this.current=this.moment(this.current.valueOf());this._start=this.moment(this._start.valueOf());this._end=this.moment(this._end.valueOf())}},{key:"setFormat",value:function(m){var k=V.deepExtend({},K.FORMAT);this.format=V.deepExtend(k,m)}},{key:"setRange",value:function(m,k,r){if(!(m instanceof Date&&k instanceof Date))throw"No legal start or end date in method setRange";
this._start=void 0!=m?this.moment(m.valueOf()):Date.now();this._end=void 0!=k?this.moment(k.valueOf()):Date.now();this.autoScale&&this.setMinimumStep(r)}},{key:"start",value:function(){this.current=this._start.clone();this.roundToMinor()}},{key:"roundToMinor",value:function(){"week"==this.scale&&this.current.weekday(0);switch(this.scale){case "year":this.current.year(this.step*Math.floor(this.current.year()/this.step)),this.current.month(0);case "month":this.current.date(1);case "week":case "day":case "weekday":this.current.hours(0);
case "hour":this.current.minutes(0);case "minute":this.current.seconds(0);case "second":this.current.milliseconds(0)}if(1!=this.step){var m=this.current.clone();switch(this.scale){case "millisecond":this.current.subtract(this.current.milliseconds()%this.step,"milliseconds");break;case "second":this.current.subtract(this.current.seconds()%this.step,"seconds");break;case "minute":this.current.subtract(this.current.minutes()%this.step,"minutes");break;case "hour":this.current.subtract(this.current.hours()%
this.step,"hours");break;case "weekday":case "day":this.current.subtract((this.current.date()-1)%this.step,"day");break;case "week":this.current.subtract(this.current.week()%this.step,"week");break;case "month":this.current.subtract(this.current.month()%this.step,"month");break;case "year":this.current.subtract(this.current.year()%this.step,"year")}m.isSame(this.current)||(this.current=this.moment(l(this.hiddenDates,this.current.valueOf(),-1,!0)))}}},{key:"hasNext",value:function(){return this.current.valueOf()<=
this._end.valueOf()}},{key:"next",value:function(){var m=this.current.valueOf();switch(this.scale){case "millisecond":this.current.add(this.step,"millisecond");break;case "second":this.current.add(this.step,"second");break;case "minute":this.current.add(this.step,"minute");break;case "hour":this.current.add(this.step,"hour");6>this.current.month()?this.current.subtract(this.current.hours()%this.step,"hour"):0!==this.current.hours()%this.step&&this.current.add(this.step-this.current.hours()%this.step,
"hour");break;case "weekday":case "day":this.current.add(this.step,"day");break;case "week":if(0!==this.current.weekday())this.current.weekday(0),this.current.add(this.step,"week");else if(!1===this.options.showMajorLabels)this.current.add(this.step,"week");else{var k=this.current.clone();k.add(1,"week");k.isSame(this.current,"month")?this.current.add(this.step,"week"):(this.current.add(this.step,"week"),this.current.date(1))}break;case "month":this.current.add(this.step,"month");break;case "year":this.current.add(this.step,
"year")}if(1!=this.step)switch(this.scale){case "millisecond":0<this.current.milliseconds()&&this.current.milliseconds()<this.step&&this.current.milliseconds(0);break;case "second":0<this.current.seconds()&&this.current.seconds()<this.step&&this.current.seconds(0);break;case "minute":0<this.current.minutes()&&this.current.minutes()<this.step&&this.current.minutes(0);break;case "hour":0<this.current.hours()&&this.current.hours()<this.step&&this.current.hours(0);break;case "weekday":case "day":this.current.date()<
this.step+1&&this.current.date(1);break;case "week":this.current.week()<this.step&&this.current.week(1);break;case "month":this.current.month()<this.step&&this.current.month(0)}this.current.valueOf()==m&&(this.current=this._end.clone());this.switchedYear=this.switchedMonth=this.switchedDay=!1;ea(this.moment,this,m)}},{key:"getCurrent",value:function(){return this.current.clone()}},{key:"setScale",value:function(m){m&&"string"==typeof m.scale&&(this.scale=m.scale,this.step=0<m.step?m.step:1,this.autoScale=
!1)}},{key:"setAutoScale",value:function(m){this.autoScale=m}},{key:"setMinimumStep",value:function(m){void 0!=m&&(31104E9>m&&(this.scale="year",this.step=1E3),15552E9>m&&(this.scale="year",this.step=500),31104E8>m&&(this.scale="year",this.step=100),15552E8>m&&(this.scale="year",this.step=50),31104E7>m&&(this.scale="year",this.step=10),15552E7>m&&(this.scale="year",this.step=5),31104E6>m&&(this.scale="year",this.step=1),7776E6>m&&(this.scale="month",this.step=3),2592E6>m&&(this.scale="month",this.step=
1),6048E5>m&&this.options.showWeekScale&&(this.scale="week",this.step=1),1728E5>m&&(this.scale="day",this.step=2),864E5>m&&(this.scale="day",this.step=1),432E5>m&&(this.scale="weekday",this.step=1),144E5>m&&(this.scale="hour",this.step=4),36E5>m&&(this.scale="hour",this.step=1),9E5>m&&(this.scale="minute",this.step=15),6E5>m&&(this.scale="minute",this.step=10),3E5>m&&(this.scale="minute",this.step=5),6E4>m&&(this.scale="minute",this.step=1),15E3>m&&(this.scale="second",this.step=15),1E4>m&&(this.scale=
"second",this.step=10),5E3>m&&(this.scale="second",this.step=5),1E3>m&&(this.scale="second",this.step=1),200>m&&(this.scale="millisecond",this.step=200),100>m&&(this.scale="millisecond",this.step=100),50>m&&(this.scale="millisecond",this.step=50),10>m&&(this.scale="millisecond",this.step=10),5>m&&(this.scale="millisecond",this.step=5),1>m&&(this.scale="millisecond",this.step=1))}},{key:"isMajor",value:function(){if(1==this.switchedYear)switch(this.scale){case "year":case "month":case "week":case "weekday":case "day":case "hour":case "minute":case "second":case "millisecond":return!0;
default:return!1}else if(1==this.switchedMonth)switch(this.scale){case "week":case "weekday":case "day":case "hour":case "minute":case "second":case "millisecond":return!0;default:return!1}else if(1==this.switchedDay)switch(this.scale){case "millisecond":case "second":case "minute":case "hour":return!0;default:return!1}var m=this.moment(this.current);switch(this.scale){case "millisecond":return 0==m.milliseconds();case "second":return 0==m.seconds();case "minute":return 0==m.hours()&&0==m.minutes();
case "hour":return 0==m.hours();case "weekday":case "day":return 1==m.date();case "week":return 1==m.date();case "month":return 0==m.month();case "year":return!1;default:return!1}}},{key:"getLabelMinor",value:function(m){void 0==m&&(m=this.current);m instanceof Date&&(m=this.moment(m));if("function"===typeof this.format.minorLabels)return this.format.minorLabels(m,this.scale,this.step);var k=this.format.minorLabels[this.scale];switch(this.scale){case "week":if(1===m.date()&&0!==m.weekday())return"";
default:return k&&0<k.length?this.moment(m).format(k):""}}},{key:"getLabelMajor",value:function(m){void 0==m&&(m=this.current);m instanceof Date&&(m=this.moment(m));if("function"===typeof this.format.majorLabels)return this.format.majorLabels(m,this.scale,this.step);var k=this.format.majorLabels[this.scale];return k&&0<k.length?this.moment(m).format(k):""}},{key:"getClassName",value:function(){function m(Ta){return 0==Ta/sa%2?" vis-even":" vis-odd"}function k(Ta){return Ta.isSame(Date.now(),"day")?
" vis-today":Ta.isSame(J().add(1,"day"),"day")?" vis-tomorrow":Ta.isSame(J().add(-1,"day"),"day")?" vis-yesterday":""}function r(Ta){return Ta.isSame(Date.now(),"week")?" vis-current-week":""}function x(Ta){return Ta.isSame(Date.now(),"month")?" vis-current-month":""}var J=this.moment,Z=this.moment(this.current);Z=Z.locale?Z.locale("en"):Z.lang("en");var sa=this.step,bb=[];switch(this.scale){case "millisecond":bb.push(k(Z));bb.push(m(Z.milliseconds()));break;case "second":bb.push(k(Z));bb.push(m(Z.seconds()));
break;case "minute":bb.push(k(Z));bb.push(m(Z.minutes()));break;case "hour":bb.push("vis-h".concat(Z.hours()).concat(4==this.step?"-h"+(Z.hours()+4):""));bb.push(k(Z));bb.push(m(Z.hours()));break;case "weekday":bb.push("vis-".concat(Z.format("dddd").toLowerCase()));bb.push(k(Z));bb.push(r(Z));bb.push(m(Z.date()));break;case "day":bb.push("vis-day".concat(Z.date()));bb.push("vis-".concat(Z.format("MMMM").toLowerCase()));bb.push(k(Z));bb.push(x(Z));bb.push(2>=this.step?k(Z):"");bb.push(2>=this.step?
"vis-".concat(Z.format("dddd").toLowerCase()):"");bb.push(m(Z.date()-1));break;case "week":bb.push("vis-week".concat(Z.format("w")));bb.push(r(Z));bb.push(m(Z.week()));break;case "month":bb.push("vis-".concat(Z.format("MMMM").toLowerCase()));bb.push(x(Z));bb.push(m(Z.month()));break;case "year":bb.push("vis-year".concat(Z.year())),bb.push(Z.isSame(Date.now(),"year")?" vis-current-year":""),bb.push(m(Z.year()))}return bb.filter(String).join(" ")}}],[{key:"snap",value:function(m,k,r){m=Gb(m);if("year"==
k)k=m.year()+Math.round(m.month()/12),m.year(Math.round(k/r)*r),m.month(0),m.date(0),m.hours(0),m.minutes(0),m.seconds(0),m.milliseconds(0);else if("month"==k)15<m.date()?(m.date(1),m.add(1,"month")):m.date(1),m.hours(0),m.minutes(0),m.seconds(0),m.milliseconds(0);else if("week"==k)2<m.weekday()?(m.weekday(0),m.add(1,"week")):m.weekday(0),m.hours(0),m.minutes(0),m.seconds(0),m.milliseconds(0);else if("day"==k){switch(r){case 5:case 2:m.hours(24*Math.round(m.hours()/24));break;default:m.hours(12*Math.round(m.hours()/
12))}m.minutes(0);m.seconds(0);m.milliseconds(0)}else if("weekday"==k){switch(r){case 5:case 2:m.hours(12*Math.round(m.hours()/12));break;default:m.hours(6*Math.round(m.hours()/6))}m.minutes(0);m.seconds(0);m.milliseconds(0)}else if("hour"==k){switch(r){case 4:m.minutes(60*Math.round(m.minutes()/60));break;default:m.minutes(30*Math.round(m.minutes()/30))}m.seconds(0);m.milliseconds(0)}else if("minute"==k){switch(r){case 15:case 10:m.minutes(5*Math.round(m.minutes()/5));m.seconds(0);break;case 5:m.seconds(60*
Math.round(m.seconds()/60));break;default:m.seconds(30*Math.round(m.seconds()/30))}m.milliseconds(0)}else if("second"==k)switch(r){case 15:case 10:m.seconds(5*Math.round(m.seconds()/5));m.milliseconds(0);break;case 5:m.milliseconds(1E3*Math.round(m.milliseconds()/1E3));break;default:m.milliseconds(500*Math.round(m.milliseconds()/500))}else"millisecond"==k&&(r=5<r?r/2:1,m.milliseconds(Math.round(m.milliseconds()/r)*r));return m}}]);return K}();xa.FORMAT={minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",
hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}};var cb=function(K){function m(k,r){ka(this,m);var x=O(this,X(m).call(this));x.dom={foreground:null,lines:[],majorTexts:[],minorTexts:[],redundant:{lines:[],majorTexts:[],minorTexts:[]}};x.props={range:{start:0,end:0,minimumStep:0},lineTop:0};x.defaultOptions=
{orientation:{axis:"bottom"},showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,maxMinorChars:7,format:xa.FORMAT,moment:Gb,timeAxis:null};x.options=V.extend({},x.defaultOptions);x.body=k;x._create();x.setOptions(r);return x}ua(m,K);ca(m,[{key:"setOptions",value:function(k){k&&(V.selectiveExtend("showMinorLabels showMajorLabels showWeekScale maxMinorChars hiddenDates timeAxis moment rtl".split(" "),this.options,k),V.selectiveDeepExtend(["format"],this.options,k),"orientation"in k&&("string"===
typeof k.orientation?this.options.orientation.axis=k.orientation:"object"===y(k.orientation)&&"axis"in k.orientation&&(this.options.orientation.axis=k.orientation.axis)),"locale"in k&&("function"===typeof Gb.locale?Gb.locale(k.locale):Gb.lang(k.locale)))}},{key:"_create",value:function(){this.dom.foreground=document.createElement("div");this.dom.background=document.createElement("div");this.dom.foreground.className="vis-time-axis vis-foreground";this.dom.background.className="vis-time-axis vis-background"}},
{key:"destroy",value:function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground);this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background);this.body=null}},{key:"redraw",value:function(){var k=this.props,r=this.dom.foreground,x=this.dom.background,J="top"==this.options.orientation.axis?this.body.dom.top:this.body.dom.bottom,Z=r.parentNode!==J;this._calculateCharSize();var sa=this.options.showMajorLabels&&"none"!==
this.options.orientation.axis;k.minorLabelHeight=this.options.showMinorLabels&&"none"!==this.options.orientation.axis?k.minorCharHeight:0;k.majorLabelHeight=sa?k.majorCharHeight:0;k.height=k.minorLabelHeight+k.majorLabelHeight;k.width=r.offsetWidth;k.minorLineHeight=this.body.domProps.root.height-k.majorLabelHeight-("top"==this.options.orientation.axis?this.body.domProps.bottom.height:this.body.domProps.top.height);k.minorLineWidth=1;k.majorLineHeight=k.minorLineHeight+k.majorLabelHeight;k.majorLineWidth=
1;k=r.nextSibling;sa=x.nextSibling;r.parentNode&&r.parentNode.removeChild(r);x.parentNode&&x.parentNode.removeChild(x);r.style.height="".concat(this.props.height,"px");this._repaintLabels();k?J.insertBefore(r,k):J.appendChild(r);sa?this.body.dom.backgroundVertical.insertBefore(x,sa):this.body.dom.backgroundVertical.appendChild(x);return this._isResized()||Z}},{key:"_repaintLabels",value:function(){var k=this.options.orientation.axis,r=V.convert(this.body.range.start,"Number"),x=V.convert(this.body.range.end,
"Number"),J=this.body.util.toTime((this.props.minorCharWidth||10)*this.options.maxMinorChars).valueOf();J-=d(this.options.moment,this.body.hiddenDates,this.body.range,J);J-=this.body.util.toTime(0).valueOf();x=new xa(new Date(r),new Date(x),J,this.body.hiddenDates,this.options);x.setMoment(this.options.moment);this.options.format&&x.setFormat(this.options.format);this.options.timeAxis&&x.setScale(this.options.timeAxis);this.step=x;r=this.dom;r.redundant.lines=r.lines;r.redundant.majorTexts=r.majorTexts;
r.redundant.minorTexts=r.minorTexts;r.lines=[];r.majorTexts=[];r.minorTexts=[];var Z,sa=0;r=void 0;var bb=0;x.start();var Ta=x.getCurrent();for(Z=this.body.util.toScreen(Ta);x.hasNext()&&1E3>bb;){bb++;var Pb=x.isMajor();var ac=x.getClassName();J=Ta;var yc=Z;x.next();Ta=x.getCurrent();Z=this.body.util.toScreen(Ta);var Pc=sa;sa=Z-yc;switch(x.scale){case "week":Pc=!0;break;default:Pc=sa>=.4*Pc}if(this.options.showMinorLabels&&Pc){var Bc=this._repaintMinorText(yc,x.getLabelMinor(J),k,ac);Bc.style.width=
"".concat(sa,"px")}if(Pb&&this.options.showMajorLabels){0<yc&&(void 0==r&&(r=yc),Bc=this._repaintMajorText(yc,x.getLabelMajor(J),k,ac));var Hc=this._repaintMajorLine(yc,sa,k,ac)}else Pc?Hc=this._repaintMinorLine(yc,sa,k,ac):Hc&&(Hc.style.width="".concat(parseInt(Hc.style.width)+sa,"px"))}1E3!==bb||Ia||(console.warn("Something is wrong with the Timeline scale. Limited drawing of grid lines to ".concat(1E3," lines.")),Ia=!0);this.options.showMajorLabels&&(Hc=this.body.util.toTime(0),Hc=x.getLabelMajor(Hc),
x=Hc.length*(this.props.majorCharWidth||10)+10,(void 0==r||x<r)&&this._repaintMajorText(0,Hc,k,ac));V.forEach(this.dom.redundant,function(gd){for(;gd.length;){var pd=gd.pop();pd&&pd.parentNode&&pd.parentNode.removeChild(pd)}})}},{key:"_repaintMinorText",value:function(k,r,x,J){var Z=this.dom.redundant.minorTexts.shift();if(!Z){var sa=document.createTextNode("");Z=document.createElement("div");Z.appendChild(sa);this.dom.foreground.appendChild(Z)}this.dom.minorTexts.push(Z);Z.innerHTML=r;this._setXY(Z,
k,"top"==x?this.props.majorLabelHeight:0);Z.className="vis-text vis-minor ".concat(J);return Z}},{key:"_repaintMajorText",value:function(k,r,x,J){var Z=this.dom.redundant.majorTexts.shift();if(!Z){var sa=document.createElement("div");Z=document.createElement("div");Z.appendChild(sa);this.dom.foreground.appendChild(Z)}Z.childNodes[0].innerHTML=r;Z.className="vis-text vis-major ".concat(J);this._setXY(Z,k,"top"==x?0:this.props.minorLabelHeight);this.dom.majorTexts.push(Z);return Z}},{key:"_setXY",value:function(k,
r,x){k.style.transform="translate(".concat(this.options.rtl?-1*r:r,"px, ").concat(x,"px)")}},{key:"_repaintMinorLine",value:function(k,r,x,J){var Z=this.dom.redundant.lines.shift();Z||(Z=document.createElement("div"),this.dom.background.appendChild(Z));this.dom.lines.push(Z);var sa=this.props;Z.style.width="".concat(r,"px");Z.style.height="".concat(sa.minorLineHeight,"px");this._setXY(Z,k-sa.minorLineWidth/2,"top"==x?sa.majorLabelHeight:this.body.domProps.top.height);Z.className="vis-grid ".concat(this.options.rtl?
"vis-vertical-rtl":"vis-vertical"," vis-minor ").concat(J);return Z}},{key:"_repaintMajorLine",value:function(k,r,x,J){var Z=this.dom.redundant.lines.shift();Z||(Z=document.createElement("div"),this.dom.background.appendChild(Z));this.dom.lines.push(Z);var sa=this.props;Z.style.width="".concat(r,"px");Z.style.height="".concat(sa.majorLineHeight,"px");this._setXY(Z,k-sa.majorLineWidth/2,"top"==x?0:this.body.domProps.top.height);Z.className="vis-grid ".concat(this.options.rtl?"vis-vertical-rtl":"vis-vertical",
" vis-major ").concat(J);return Z}},{key:"_calculateCharSize",value:function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="vis-text vis-minor vis-measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor));this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight;this.props.minorCharWidth=
this.dom.measureCharMinor.clientWidth;this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="vis-text vis-major vis-measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor));this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight;this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth}}]);
return m}(hb),Ia=!1;(0,nc["default"])(ha.prototype);ha.current=null;ha.prototype.destroy=function(){this.deactivate();this.dom.overlay.parentNode.removeChild(this.dom.overlay);this.onClick&&document.body.removeEventListener("click",this.onClick);void 0!==this.keycharm&&this.keycharm.destroy();this.keycharm=null;this.hammer.destroy();this.hammer=null};ha.prototype.activate=function(){ha.current&&ha.current.deactivate();ha.current=this;this.active=!0;this.dom.overlay.style.display="none";V.addClassName(this.dom.container,
"vis-active");this.emit("change");this.emit("activate");this.keycharm.bind("esc",this.escListener)};ha.prototype.deactivate=function(){ha.current===this&&(ha.current=null);this.active=!1;this.dom.overlay.style.display="";V.removeClassName(this.dom.container,"vis-active");this.keycharm.unbind("esc",this.escListener);this.emit("change");this.emit("deactivate")};ha.prototype._onTapOverlay=function(K){this.activate();K.stopPropagation()};var mb={current:"current",time:"time",deleteSelected:"Delete selected"},
Sb={current:"attuale",time:"tempo",deleteSelected:"Cancella la selezione"},Xb={current:"huidige",time:"tijd",deleteSelected:"Selectie verwijderen"},tc={current:"Aktuelle",time:"Zeit",deleteSelected:"Lösche Auswahl"},Ec={current:"actuel",time:"heure",deleteSelected:"Effacer la selection"},dd={current:"corriente",time:"hora",deleteSelected:"Eliminar selección"},ud={current:"поточний",time:"час",deleteSelected:"Видалити обране"},Yc={current:"текущее",time:"время",deleteSelected:"Удалить выбранное"},
Id={current:"aktualny",time:"czas",deleteSelected:"Usuń wybrane"},Wd={current:"atual",time:"data",deleteSelected:"Apagar selecionado"},ge={current:"現在",time:"時刻",deleteSelected:"選択されたものを削除"},Ld={en:mb,en_EN:mb,en_US:mb,it:Sb,it_IT:Sb,it_CH:Sb,nl:Xb,nl_NL:Xb,nl_BE:Xb,de:tc,de_DE:tc,fr:Ec,fr_FR:Ec,fr_CA:Ec,fr_BE:Ec,es:dd,es_ES:dd,uk:ud,uk_UA:ud,ru:Yc,ru_RU:Yc,pl:Id,pl_PL:Id,pt:Wd,pt_BR:Wd,pt_PT:Wd,ja:ge,ja_JP:ge},Qd=function(K){function m(k,r){ka(this,m);var x=O(this,X(m).call(this));x.body=k;x.defaultOptions=
{moment:Gb,locales:Ld,locale:"en",id:void 0,title:void 0};x.options=V.extend({},x.defaultOptions);x.setOptions(r);x.options.locales=V.extend({},Ld,x.options.locales);var J=x.defaultOptions.locales[x.defaultOptions.locale];Object.keys(x.options.locales).forEach(function(Z){x.options.locales[Z]=V.extend({},J,x.options.locales[Z])});x.customTime=r&&null!=r.time?r.time:new Date;x.eventParams={};x._create();return x}ua(m,K);ca(m,[{key:"setOptions",value:function(k){k&&V.selectiveExtend("moment locale locales id title rtl snap".split(" "),
this.options,k)}},{key:"_create",value:function(){function k(J){this.body.range._onMouseWheel(J)}var r=document.createElement("div");r["custom-time"]=this;r.className="vis-custom-time ".concat(this.options.id||"");r.style.position="absolute";r.style.top="0px";r.style.height="100%";this.bar=r;var x=document.createElement("div");x.style.position="relative";x.style.top="0px";this.options.rtl?x.style.right="-10px":x.style.left="-10px";x.style.height="100%";x.style.width="20px";x.addEventListener?(x.addEventListener("mousewheel",
k.bind(this),!1),x.addEventListener("DOMMouseScroll",k.bind(this),!1)):x.attachEvent("onmousewheel",k.bind(this));r.appendChild(x);this.hammer=new gb(x);this.hammer.on("panstart",this._onDragStart.bind(this));this.hammer.on("panmove",this._onDrag.bind(this));this.hammer.on("panend",this._onDragEnd.bind(this));this.hammer.get("pan").set({threshold:5,direction:gb.DIRECTION_ALL})}},{key:"destroy",value:function(){this.hide();this.hammer.destroy();this.body=this.hammer=null}},{key:"redraw",value:function(){var k=
this.body.dom.backgroundVertical;this.bar.parentNode!=k&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),k.appendChild(this.bar));k=this.body.util.toScreen(this.customTime);var r=this.options.locales[this.options.locale];r||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),r=this.options.locales.en);var x=this.options.title;void 0===x?(x="".concat(r.time,
": ").concat(this.options.moment(this.customTime).format("dddd, MMMM Do YYYY, H:mm:ss")),x=x.charAt(0).toUpperCase()+x.substring(1)):"function"===typeof x&&(x=x.call(this,this.customTime));this.options.rtl?this.bar.style.right="".concat(k,"px"):this.bar.style.left="".concat(k,"px");this.bar.title=x;return!1}},{key:"hide",value:function(){this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar)}},{key:"setCustomTime",value:function(k){this.customTime=V.convert(k,"Date");this.redraw()}},{key:"getCustomTime",
value:function(){return new Date(this.customTime.valueOf())}},{key:"setCustomMarker",value:function(k,r){var x=document.createElement("div");x.className="vis-custom-time-marker";x.innerHTML=k;x.style.position="absolute";r&&(x.setAttribute("contenteditable","true"),x.addEventListener("pointerdown",function(){x.focus()}),x.addEventListener("input",this._onMarkerChange.bind(this)),x.title=k,x.addEventListener("blur",function(J){this.title!=J.target.innerHTML&&(this._onMarkerChanged(J),this.title=J.target.innerHTML)}.bind(this)));
this.bar.appendChild(x)}},{key:"setCustomTitle",value:function(k){this.options.title=k}},{key:"_onDragStart",value:function(k){this.eventParams.dragging=!0;this.eventParams.customTime=this.customTime;k.stopPropagation()}},{key:"_onDrag",value:function(k){if(this.eventParams.dragging){var r=this.options.rtl?-1*k.deltaX:k.deltaX;r=this.body.util.toScreen(this.eventParams.customTime)+r;r=this.body.util.toTime(r);var x=this.body.util.getScale(),J=this.body.util.getStep(),Z=this.options.snap;r=Z?Z(r,x,
J):r;this.setCustomTime(r);this.body.emitter.emit("timechange",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:k});k.stopPropagation()}}},{key:"_onDragEnd",value:function(k){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{id:this.options.id,time:new Date(this.customTime.valueOf()),event:k}),k.stopPropagation())}},{key:"_onMarkerChange",value:function(k){this.body.emitter.emit("markerchange",{id:this.options.id,title:k.target.innerHTML,event:k});k.stopPropagation()}},
{key:"_onMarkerChanged",value:function(k){this.body.emitter.emit("markerchanged",{id:this.options.id,title:k.target.innerHTML,event:k});k.stopPropagation()}}],[{key:"customTimeFromTarget",value:function(k){for(k=k.target;k;){if(k.hasOwnProperty("custom-time"))return k["custom-time"];k=k.parentNode}return null}}]);return m}(hb),Dd=function(){function K(){ka(this,K)}ca(K,[{key:"_create",value:function(m){function k(bb){this.isActive()&&this.emit("mousewheel",bb);var Ta=0,Pb=0;"detail"in bb&&(Pb=-1*
bb.detail);"wheelDelta"in bb&&(Pb=bb.wheelDelta);"wheelDeltaY"in bb&&(Pb=bb.wheelDeltaY);"wheelDeltaX"in bb&&(Ta=-1*bb.wheelDeltaX);"axis"in bb&&bb.axis===bb.HORIZONTAL_AXIS&&(Ta=-1*Pb,Pb=0);"deltaY"in bb&&(Pb=-1*bb.deltaY);"deltaX"in bb&&(Ta=bb.deltaX);bb.deltaMode&&(1===bb.deltaMode?(Ta*=40,Pb*=40):(Ta*=40,Pb*=800));if(this.options.preferZoom){if(!this.options.zoomKey||bb[this.options.zoomKey])return}else if(this.options.zoomKey&&bb[this.options.zoomKey])return;if(this.options.verticalScroll||this.options.horizontalScroll)this.options.verticalScroll&&
Math.abs(Pb)>=Math.abs(Ta)?(Ta=this.props.scrollTop,Pb=Ta+Pb,this.isActive()&&this._setScrollTop(Pb)!==Ta&&(this._redraw(),this.emit("scroll",bb),bb.preventDefault())):this.options.horizontalScroll&&(Pb=(Math.abs(Ta)>=Math.abs(Pb)?Ta:Pb)/120*(this.range.end-this.range.start)/20,this.range.setRange(this.range.start+Pb,this.range.end+Pb,{animation:!1,byUser:!0,event:bb}),bb.preventDefault())}function r(bb){J.options.verticalScroll&&(J._isProgramaticallyScrolled?J._isProgramaticallyScrolled=!1:(bb.preventDefault(),
J.isActive()&&(J._setScrollTop(-bb.target.scrollTop),J._redraw(),J.emit("scrollSide",bb))))}var x=this;this.dom={};this.dom.container=m;this.dom.container.style.position="relative";this.dom.root=document.createElement("div");this.dom.background=document.createElement("div");this.dom.backgroundVertical=document.createElement("div");this.dom.backgroundHorizontal=document.createElement("div");this.dom.centerContainer=document.createElement("div");this.dom.leftContainer=document.createElement("div");
this.dom.rightContainer=document.createElement("div");this.dom.center=document.createElement("div");this.dom.left=document.createElement("div");this.dom.right=document.createElement("div");this.dom.top=document.createElement("div");this.dom.bottom=document.createElement("div");this.dom.shadowTop=document.createElement("div");this.dom.shadowBottom=document.createElement("div");this.dom.shadowTopLeft=document.createElement("div");this.dom.shadowBottomLeft=document.createElement("div");this.dom.shadowTopRight=
document.createElement("div");this.dom.shadowBottomRight=document.createElement("div");this.dom.rollingModeBtn=document.createElement("div");this.dom.loadingScreen=document.createElement("div");this.dom.root.className="vis-timeline";this.dom.background.className="vis-panel vis-background";this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical";this.dom.backgroundHorizontal.className="vis-panel vis-background vis-horizontal";this.dom.centerContainer.className="vis-panel vis-center";
this.dom.leftContainer.className="vis-panel vis-left";this.dom.rightContainer.className="vis-panel vis-right";this.dom.top.className="vis-panel vis-top";this.dom.bottom.className="vis-panel vis-bottom";this.dom.left.className="vis-content";this.dom.center.className="vis-content";this.dom.right.className="vis-content";this.dom.shadowTop.className="vis-shadow vis-top";this.dom.shadowBottom.className="vis-shadow vis-bottom";this.dom.shadowTopLeft.className="vis-shadow vis-top";this.dom.shadowBottomLeft.className=
"vis-shadow vis-bottom";this.dom.shadowTopRight.className="vis-shadow vis-top";this.dom.shadowBottomRight.className="vis-shadow vis-bottom";this.dom.rollingModeBtn.className="vis-rolling-mode-btn";this.dom.loadingScreen.className="vis-loading-screen";this.dom.root.appendChild(this.dom.background);this.dom.root.appendChild(this.dom.backgroundVertical);this.dom.root.appendChild(this.dom.backgroundHorizontal);this.dom.root.appendChild(this.dom.centerContainer);this.dom.root.appendChild(this.dom.leftContainer);
this.dom.root.appendChild(this.dom.rightContainer);this.dom.root.appendChild(this.dom.top);this.dom.root.appendChild(this.dom.bottom);this.dom.root.appendChild(this.dom.rollingModeBtn);this.dom.centerContainer.appendChild(this.dom.center);this.dom.leftContainer.appendChild(this.dom.left);this.dom.rightContainer.appendChild(this.dom.right);this.dom.centerContainer.appendChild(this.dom.shadowTop);this.dom.centerContainer.appendChild(this.dom.shadowBottom);this.dom.leftContainer.appendChild(this.dom.shadowTopLeft);
this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft);this.dom.rightContainer.appendChild(this.dom.shadowTopRight);this.dom.rightContainer.appendChild(this.dom.shadowBottomRight);this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0};this.on("rangechange",function(){!0===x.initialDrawDone&&x._redraw()});this.on("rangechanged",function(){x.initialRangeChangeDone||(x.initialRangeChangeDone=
!0)});this.on("touch",this._onTouch.bind(this));this.on("panmove",this._onDrag.bind(this));var J=this;this._origRedraw=this._redraw.bind(this);this._redraw=V.throttle(this._origRedraw);this.on("_change",function(bb){J.itemSet&&J.itemSet.initialItemSetDrawn&&bb&&1==bb.queue?J._redraw():J._origRedraw()});this.hammer=new gb(this.dom.root);var Z=this.hammer.get("pinch").set({enable:!0});Z&&R(Z);this.hammer.get("pan").set({threshold:5,direction:gb.DIRECTION_ALL});this.timelineListeners={};"tap doubletap press pinch pan panstart panmove panend".split(" ").forEach(function(bb){var Ta=
function(Pb){J.isActive()&&J.emit(bb,Pb)};J.hammer.on(bb,Ta);J.timelineListeners[bb]=Ta});G(this.hammer,function(bb){J.emit("touch",bb)});H(this.hammer,function(bb){J.emit("release",bb)});Z="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":this.dom.centerContainer.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.top.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.bottom.addEventListener?"DOMMouseScroll":"onmousewheel";this.dom.centerContainer.addEventListener(Z,
k.bind(this),!1);this.dom.top.addEventListener(Z,k.bind(this),!1);this.dom.bottom.addEventListener(Z,k.bind(this),!1);this.dom.left.parentNode.addEventListener("scroll",r.bind(this));this.dom.right.parentNode.addEventListener("scroll",r.bind(this));var sa=!1;this.dom.center.addEventListener("dragover",function(bb){bb.preventDefault&&(J.emit("dragover",J.getEventProperties(bb)),bb.preventDefault());if(-1<bb.target.className.indexOf("timeline")&&!sa)return bb.dataTransfer.dropEffect="move",sa=!0,!1}.bind(this),
!1);this.dom.center.addEventListener("drop",function(bb){bb.preventDefault&&bb.preventDefault();bb.stopPropagation&&bb.stopPropagation();try{var Ta=JSON.parse(bb.dataTransfer.getData("text"));if(!Ta||!Ta.content)return}catch(Pb){return!1}sa=!1;bb.center={x:bb.clientX,y:bb.clientY};"item"!==Ta.target?J.itemSet._onAddItem(bb):J.itemSet._onDropObjectOnItem(bb);J.emit("drop",J.getEventProperties(bb));return!1}.bind(this),!1);this.customTimes=[];this.touch={};this.redrawCount=0;this.initialRangeChangeDone=
this.initialDrawDone=!1;if(!m)throw Error("No container provided");m.appendChild(this.dom.root);m.appendChild(this.dom.loadingScreen)}},{key:"setOptions",value:function(m){if(m){V.selectiveExtend("width height minHeight maxHeight autoResize start end clickToUse dataAttributes hiddenDates locale locales moment preferZoom rtl zoomKey horizontalScroll verticalScroll longSelectPressTime".split(" "),this.options,m);this.dom.rollingModeBtn.style.visibility="hidden";this.options.rtl&&(this.dom.container.style.direction=
"rtl",this.dom.backgroundVertical.className="vis-panel vis-background vis-vertical-rtl");this.options.verticalScroll&&(this.options.rtl?this.dom.rightContainer.className="vis-panel vis-right vis-vertical-scroll":this.dom.leftContainer.className="vis-panel vis-left vis-vertical-scroll");"object"!==y(this.options.orientation)&&(this.options.orientation={item:void 0,axis:void 0});"orientation"in m&&("string"===typeof m.orientation?this.options.orientation={item:m.orientation,axis:m.orientation}:"object"===
y(m.orientation)&&("item"in m.orientation&&(this.options.orientation.item=m.orientation.item),"axis"in m.orientation&&(this.options.orientation.axis=m.orientation.axis)));if("both"===this.options.orientation.axis){if(!this.timeAxis2){var k=this.timeAxis2=new cb(this.body);k.setOptions=function(J){J=J?V.extend({},J):{};J.orientation="top";cb.prototype.setOptions.call(k,J)};this.components.push(k)}}else if(this.timeAxis2){var r=this.components.indexOf(this.timeAxis2);-1!==r&&this.components.splice(r,
1);this.timeAxis2.destroy();this.timeAxis2=null}"function"==typeof m.drawPoints&&(m.drawPoints={onRender:m.drawPoints});"hiddenDates"in this.options&&qa(this.options.moment,this.body,this.options.hiddenDates);"clickToUse"in m&&(m.clickToUse?this.activator||(this.activator=new ha(this.dom.root)):this.activator&&(this.activator.destroy(),delete this.activator));this._initAutoResize()}this.components.forEach(function(J){return J.setOptions(m)});if("configure"in m){this.configurator||(this.configurator=
this._createConfigurator());this.configurator.setOptions(m.configure);var x=V.deepExtend({},this.options);this.components.forEach(function(J){V.deepExtend(x,J.options)});this.configurator.setModuleOptions({global:x})}this._redraw()}},{key:"isActive",value:function(){return!this.activator||this.activator.active}},{key:"destroy",value:function(){this.setItems(null);this.setGroups(null);this.off();this._stopAutoResize();this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root);this.dom=
null;this.activator&&(this.activator.destroy(),delete this.activator);for(var m in this.timelineListeners)this.timelineListeners.hasOwnProperty(m)&&delete this.timelineListeners[m];this.timelineListeners=null;this.hammer&&this.hammer.destroy();this.hammer=null;this.components.forEach(function(k){return k.destroy()});this.body=null}},{key:"setCustomTime",value:function(m,k){var r=this.customTimes.filter(function(x){return k===x.options.id});if(0===r.length)throw Error("No custom time bar found with id ".concat(JSON.stringify(k)));
0<r.length&&r[0].setCustomTime(m)}},{key:"getCustomTime",value:function(m){var k=this.customTimes.filter(function(r){return r.options.id===m});if(0===k.length)throw Error("No custom time bar found with id ".concat(JSON.stringify(m)));return k[0].getCustomTime()}},{key:"setCustomTimeMarker",value:function(m,k,r){var x=this.customTimes.filter(function(J){return J.options.id===k});if(0===x.length)throw Error("No custom time bar found with id ".concat(JSON.stringify(k)));0<x.length&&x[0].setCustomMarker(m,
r)}},{key:"setCustomTimeTitle",value:function(m,k){var r=this.customTimes.filter(function(x){return x.options.id===k});if(0===r.length)throw Error("No custom time bar found with id ".concat(JSON.stringify(k)));if(0<r.length)return r[0].setCustomTitle(m)}},{key:"getEventProperties",value:function(m){return{event:m}}},{key:"addCustomTime",value:function(m,k){m=void 0!==m?V.convert(m,"Date"):new Date;if(this.customTimes.some(function(r){return r.options.id===k}))throw Error("A custom time with id ".concat(JSON.stringify(k),
" already exists"));m=new Qd(this.body,V.extend({},this.options,{time:m,id:k,snap:this.itemSet.options.snap}));this.customTimes.push(m);this.components.push(m);this._redraw();return k}},{key:"removeCustomTime",value:function(m){var k=this,r=this.customTimes.filter(function(x){return x.options.id===m});if(0===r.length)throw Error("No custom time bar found with id ".concat(JSON.stringify(m)));r.forEach(function(x){k.customTimes.splice(k.customTimes.indexOf(x),1);k.components.splice(k.components.indexOf(x),
1);x.destroy()})}},{key:"getVisibleItems",value:function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]}},{key:"getVisibleGroups",value:function(){return this.itemSet&&this.itemSet.getVisibleGroups()||[]}},{key:"fit",value:function(m,k){var r=this.getDataRange();if(null!==r.min||null!==r.max){var x=r.max-r.min;this.range.setRange(new Date(r.min.valueOf()-.01*x),new Date(r.max.valueOf()+.01*x),{animation:m&&void 0!==m.animation?m.animation:!0},k)}}},{key:"getDataRange",value:function(){throw Error("Cannot invoke abstract method getDataRange");
}},{key:"setWindow",value:function(m,k,r,x){"function"==typeof arguments[2]&&(x=arguments[2],r={});if(1==arguments.length){var J=arguments[0];var Z=void 0!==J.animation?J.animation:!0;this.range.setRange(J.start,J.end,{animation:Z})}else 2==arguments.length&&"function"==typeof arguments[1]?(J=arguments[0],x=arguments[1],Z=void 0!==J.animation?J.animation:!0,this.range.setRange(J.start,J.end,{animation:Z},x)):(Z=r&&void 0!==r.animation?r.animation:!0,this.range.setRange(m,k,{animation:Z},x))}},{key:"moveTo",
value:function(m,k,r){"function"==typeof k&&(r=k,k={});var x=this.range.end-this.range.start;m=V.convert(m,"Date").valueOf();this.range.setRange(m-x/2,m+x/2,{animation:k&&void 0!==k.animation?k.animation:!0},r)}},{key:"getWindow",value:function(){var m=this.range.getRange();return{start:new Date(m.start),end:new Date(m.end)}}},{key:"zoomIn",value:function(m,k,r){if(!(!m||0>m||1<m)){"function"==typeof k&&(r=k,k={});var x=this.getWindow(),J=x.start.valueOf();x=x.end.valueOf();var Z=x-J;m=(Z-Z/(1+m))/
2;this.setWindow(J+m,x-m,k,r)}}},{key:"zoomOut",value:function(m,k,r){if(!(!m||0>m||1<m)){"function"==typeof k&&(r=k,k={});var x=this.getWindow(),J=x.start.valueOf();x=x.end.valueOf();var Z=x-J;this.setWindow(J-Z*m/2,x+Z*m/2,k,r)}}},{key:"redraw",value:function(){this._redraw()}},{key:"_redraw",value:function(){this.redrawCount++;var m=this.dom;if(m&&m.container&&0!=m.root.offsetWidth){var k=!1,r=this.options,x=this.props;ya(this.options.moment,this.body,this.options.hiddenDates);"top"==r.orientation?
(V.addClassName(m.root,"vis-top"),V.removeClassName(m.root,"vis-bottom")):(V.removeClassName(m.root,"vis-top"),V.addClassName(m.root,"vis-bottom"));r.rtl?(V.addClassName(m.root,"vis-rtl"),V.removeClassName(m.root,"vis-ltr")):(V.addClassName(m.root,"vis-ltr"),V.removeClassName(m.root,"vis-rtl"));m.root.style.maxHeight=V.option.asSize(r.maxHeight,"");m.root.style.minHeight=V.option.asSize(r.minHeight,"");m.root.style.width=V.option.asSize(r.width,"");var J=m.root.offsetWidth;x.border.left=1;x.border.right=
1;x.border.top=1;x.border.bottom=1;x.center.height=m.center.offsetHeight;x.left.height=m.left.offsetHeight;x.right.height=m.right.offsetHeight;x.top.height=m.top.clientHeight||-x.border.top;x.bottom.height=m.bottom.clientHeight||-x.border.bottom;m.root.style.height=V.option.asSize(r.height,"".concat(x.top.height+Math.max(x.left.height,x.center.height,x.right.height)+x.bottom.height+x.border.top+x.border.bottom,"px"));x.root.height=m.root.offsetHeight;x.background.height=x.root.height;var Z=x.root.height-
x.top.height-x.bottom.height;x.centerContainer.height=Z;x.leftContainer.height=Z;x.rightContainer.height=x.leftContainer.height;x.root.width=J;x.background.width=x.root.width;this.initialDrawDone||(x.scrollbarWidth=V.getScrollBarWidth());J=m.leftContainer.clientWidth;Z=m.rightContainer.clientWidth;r.verticalScroll?r.rtl?(x.left.width=J||-x.border.left,x.right.width=Z+x.scrollbarWidth||-x.border.right):(x.left.width=J+x.scrollbarWidth||-x.border.left,x.right.width=Z||-x.border.right):(x.left.width=
J||-x.border.left,x.right.width=Z||-x.border.right);this._setDOM();var sa=this._updateScrollTop();"top"!=r.orientation.item&&(sa+=Math.max(x.centerContainer.height-x.center.height-x.border.top-x.border.bottom,0));m.center.style.transform="translateY(".concat(sa,"px)");var bb=0==x.scrollTop?"hidden":"",Ta=x.scrollTop==x.scrollTopMin?"hidden":"";m.shadowTop.style.visibility=bb;m.shadowBottom.style.visibility=Ta;m.shadowTopLeft.style.visibility=bb;m.shadowBottomLeft.style.visibility=Ta;m.shadowTopRight.style.visibility=
bb;m.shadowBottomRight.style.visibility=Ta;r.verticalScroll&&(m.rightContainer.className="vis-panel vis-right vis-vertical-scroll",m.leftContainer.className="vis-panel vis-left vis-vertical-scroll",m.shadowTopRight.style.visibility="hidden",m.shadowBottomRight.style.visibility="hidden",m.shadowTopLeft.style.visibility="hidden",m.shadowBottomLeft.style.visibility="hidden",m.left.style.top="0px",m.right.style.top="0px");if(!r.verticalScroll||x.center.height<x.centerContainer.height)m.left.style.top=
"".concat(sa,"px"),m.right.style.top="".concat(sa,"px"),m.rightContainer.className=m.rightContainer.className.replace(/(?:^|\s)vis-vertical-scroll(?:\s|$)/," "),m.leftContainer.className=m.leftContainer.className.replace(/(?:^|\s)vis-vertical-scroll(?:\s|$)/," "),x.left.width=J||-x.border.left,x.right.width=Z||-x.border.right,this._setDOM();m=x.center.height>x.centerContainer.height;this.hammer.get("pan").set({direction:m?gb.DIRECTION_ALL:gb.DIRECTION_HORIZONTAL});this.hammer.get("press").set({time:this.options.longSelectPressTime});
this.components.forEach(function(Pb){k=Pb.redraw()||k});if(k){if(5>this.redrawCount){this.body.emitter.emit("_change");return}console.log("WARNING: infinite loop in redraw?")}else this.redrawCount=0;this.body.emitter.emit("changed")}}},{key:"_setDOM",value:function(){var m=this.props,k=this.dom;m.leftContainer.width=m.left.width;m.rightContainer.width=m.right.width;var r=m.root.width-m.left.width-m.right.width;m.center.width=r;m.centerContainer.width=r;m.top.width=r;m.bottom.width=r;k.background.style.height=
"".concat(m.background.height,"px");k.backgroundVertical.style.height="".concat(m.background.height,"px");k.backgroundHorizontal.style.height="".concat(m.centerContainer.height,"px");k.centerContainer.style.height="".concat(m.centerContainer.height,"px");k.leftContainer.style.height="".concat(m.leftContainer.height,"px");k.rightContainer.style.height="".concat(m.rightContainer.height,"px");k.background.style.width="".concat(m.background.width,"px");k.backgroundVertical.style.width="".concat(m.centerContainer.width,
"px");k.backgroundHorizontal.style.width="".concat(m.background.width,"px");k.centerContainer.style.width="".concat(m.center.width,"px");k.top.style.width="".concat(m.top.width,"px");k.bottom.style.width="".concat(m.bottom.width,"px");k.background.style.left="0";k.background.style.top="0";k.backgroundVertical.style.left="".concat(m.left.width+m.border.left,"px");k.backgroundVertical.style.top="0";k.backgroundHorizontal.style.left="0";k.backgroundHorizontal.style.top="".concat(m.top.height,"px");k.centerContainer.style.left=
"".concat(m.left.width,"px");k.centerContainer.style.top="".concat(m.top.height,"px");k.leftContainer.style.left="0";k.leftContainer.style.top="".concat(m.top.height,"px");k.rightContainer.style.left="".concat(m.left.width+m.center.width,"px");k.rightContainer.style.top="".concat(m.top.height,"px");k.top.style.left="".concat(m.left.width,"px");k.top.style.top="0";k.bottom.style.left="".concat(m.left.width,"px");k.bottom.style.top="".concat(m.top.height+m.centerContainer.height,"px");k.center.style.left=
"0";k.left.style.left="0";k.right.style.left="0"}},{key:"setCurrentTime",value:function(m){if(!this.currentTime)throw Error("Option showCurrentTime must be true");this.currentTime.setCurrentTime(m)}},{key:"getCurrentTime",value:function(){if(!this.currentTime)throw Error("Option showCurrentTime must be true");return this.currentTime.getCurrentTime()}},{key:"_toTime",value:function(m){return aa(this,m,this.props.center.width)}},{key:"_toGlobalTime",value:function(m){return aa(this,m,this.props.root.width)}},
{key:"_toScreen",value:function(m){return Ha(this,m,this.props.center.width)}},{key:"_toGlobalScreen",value:function(m){return Ha(this,m,this.props.root.width)}},{key:"_initAutoResize",value:function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()}},{key:"_startAutoResize",value:function(){var m=this;this._stopAutoResize();this._onResize=function(){if(1!=m.options.autoResize)m._stopAutoResize();else if(m.dom.root){var k=m.dom.root.offsetHeight,r=m.dom.root.offsetWidth;
if(r!=m.props.lastWidth||k!=m.props.lastHeight)m.props.lastWidth=r,m.props.lastHeight=k,m.props.scrollbarWidth=V.getScrollBarWidth(),m.body.emitter.emit("_change")}};V.addEventListener(window,"resize",this._onResize);m.dom.root&&(m.props.lastWidth=m.dom.root.offsetWidth,m.props.lastHeight=m.dom.root.offsetHeight);this.watchTimer=setInterval(this._onResize,1E3)}},{key:"_stopAutoResize",value:function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0);this._onResize&&(V.removeEventListener(window,
"resize",this._onResize),this._onResize=null)}},{key:"_onTouch",value:function(m){this.touch.allowDragging=!0;this.touch.initialScrollTop=this.props.scrollTop}},{key:"_onPinch",value:function(m){this.touch.allowDragging=!1}},{key:"_onDrag",value:function(m){if(m&&this.touch.allowDragging){var k=m.deltaY;m=this._getScrollTop();k=this._setScrollTop(this.touch.initialScrollTop+k);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=
-this.props.scrollTop);k!=m&&this.emit("verticalDrag")}}},{key:"_setScrollTop",value:function(m){this.props.scrollTop=m;this._updateScrollTop();return this.props.scrollTop}},{key:"_updateScrollTop",value:function(){var m=Math.min(this.props.centerContainer.height-this.props.center.height,0);m!=this.props.scrollTopMin&&("top"!=this.options.orientation.item&&(this.props.scrollTop+=m-this.props.scrollTopMin),this.props.scrollTopMin=m);0<this.props.scrollTop&&(this.props.scrollTop=0);this.props.scrollTop<
m&&(this.props.scrollTop=m);this.options.verticalScroll&&(this.dom.left.parentNode.scrollTop=-this.props.scrollTop,this.dom.right.parentNode.scrollTop=-this.props.scrollTop);this._isProgramaticallyScrolled=!0;return this.props.scrollTop}},{key:"_getScrollTop",value:function(){return this.props.scrollTop}},{key:"_createConfigurator",value:function(){throw Error("Cannot invoke abstract method _createConfigurator");}}]);return K}();(0,nc["default"])(Dd.prototype);var Gc=function(K){function m(k,r){ka(this,
m);var x=O(this,X(m).call(this));x.body=k;x.defaultOptions={rtl:!1,showCurrentTime:!0,alignCurrentTime:void 0,moment:Gb,locales:Ld,locale:"en"};x.options=V.extend({},x.defaultOptions);x.setOptions(r);x.options.locales=V.extend({},Ld,x.options.locales);var J=x.defaultOptions.locales[x.defaultOptions.locale];Object.keys(x.options.locales).forEach(function(Z){x.options.locales[Z]=V.extend({},J,x.options.locales[Z])});x.offset=0;x._create();return x}ua(m,K);ca(m,[{key:"_create",value:function(){var k=
document.createElement("div");k.className="vis-current-time";k.style.position="absolute";k.style.top="0px";k.style.height="100%";this.bar=k}},{key:"destroy",value:function(){this.options.showCurrentTime=!1;this.redraw();this.body=null}},{key:"setOptions",value:function(k){k&&V.selectiveExtend("rtl showCurrentTime alignCurrentTime moment locale locales".split(" "),this.options,k)}},{key:"redraw",value:function(){if(this.options.showCurrentTime){var k=this.body.dom.backgroundVertical;this.bar.parentNode!=
k&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),k.appendChild(this.bar),this.start());var r=this.options.moment(Date.now()+this.offset);this.options.alignCurrentTime&&(r=r.startOf(this.options.alignCurrentTime));k=this.body.util.toScreen(r);var x=this.options.locales[this.options.locale];x||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),x=this.options.locales.en);
r="".concat(x.current," ").concat(x.time,": ").concat(r.format("dddd, MMMM Do YYYY, H:mm:ss"));r=r.charAt(0).toUpperCase()+r.substring(1);this.bar.style.transform=this.options.rtl?"translateX(".concat(-1*k,"px)"):"translateX(".concat(k,"px)");this.bar.title=r}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1}},{key:"start",value:function(){function k(){r.stop();var x=1/r.body.range.conversion(r.body.domProps.center.width).scale/10;30>x&&(x=30);1E3<x&&(x=1E3);
r.redraw();r.body.emitter.emit("currentTimeTick");r.currentTimeTimer=setTimeout(k,x)}var r=this;k()}},{key:"stop",value:function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)}},{key:"setCurrentTime",value:function(k){k=V.convert(k,"Date").valueOf();var r=Date.now();this.offset=k-r;this.redraw()}},{key:"getCurrentTime",value:function(){return new Date(Date.now()+this.offset)}}]);return m}(hb),fb=Object.freeze({__proto__:null,orderByStart:Ja,orderByEnd:D,
stack:Q,substack:oa,nostack:Fa,stackSubgroups:Ga,stackSubgroupsWithInnerStack:xb,collision:Hb,collisionByTimes:Kb}),Db=function(){function K(m,k,r){var x=this;ka(this,K);this.groupId=m;this.subgroups={};this.subgroupStack={};this.subgroupStackAll=!1;this.subgroupVisibility={};this.shouldBailStackItems=this.doInnerStack=!1;this.subgroupIndex=0;this.subgroupOrderer=k&&k.subgroupOrder;this.itemSet=r;this.isVisible=null;this.stackDirty=!0;this._disposeCallbacks=[];k&&k.nestedGroups&&(this.nestedGroups=
k.nestedGroups,this.showNested=0==k.showNested?!1:!0);if(k&&k.subgroupStack)if("boolean"===typeof k.subgroupStack)this.subgroupStackAll=this.doInnerStack=k.subgroupStack;else for(var J in k.subgroupStack)this.subgroupStack[J]=k.subgroupStack[J],this.doInnerStack=this.doInnerStack||k.subgroupStack[J];this.heightMode=k&&k.heightMode?k.heightMode:r.options.groupHeightMode;this.nestedInGroup=null;this.dom={};this.props={label:{width:0,height:0}};this.className=null;this.items={};this.visibleItems=[];
this.itemsInRange=[];this.orderedItems={byStart:[],byEnd:[]};this.checkRangedItems=!1;var Z=function(){x.checkRangedItems=!0};this.itemSet.body.emitter.on("checkRangedItems",Z);this._disposeCallbacks.push(function(){x.itemSet.body.emitter.off("checkRangedItems",Z)});this._create();this.setData(k)}ca(K,[{key:"_create",value:function(){var m=document.createElement("div");m.className=this.itemSet.options.groupEditable.order?"vis-label draggable":"vis-label";this.dom.label=m;var k=document.createElement("div");
k.className="vis-inner";m.appendChild(k);this.dom.inner=k;m=document.createElement("div");m.className="vis-group";m["vis-group"]=this;this.dom.foreground=m;this.dom.background=document.createElement("div");this.dom.background.className="vis-group";this.dom.axis=document.createElement("div");this.dom.axis.className="vis-group";this.dom.marker=document.createElement("div");this.dom.marker.style.visibility="hidden";this.dom.marker.style.position="absolute";this.dom.marker.innerHTML="";this.dom.background.appendChild(this.dom.marker)}},
{key:"setData",value:function(m){if(!this.itemSet.groupTouchParams.isDragging){if(m&&m.subgroupVisibility)for(r in m.subgroupVisibility)this.subgroupVisibility[r]=m.subgroupVisibility[r];if(this.itemSet.options&&this.itemSet.options.groupTemplate){var k=this.itemSet.options.groupTemplate.bind(this);var r=k(m,this.dom.inner)}else r=m&&m.content;if(r instanceof Element){for(;this.dom.inner.firstChild;)this.dom.inner.removeChild(this.dom.inner.firstChild);this.dom.inner.appendChild(r)}else r instanceof
Object&&r.isReactComponent||(r instanceof Object?k(m,this.dom.inner):this.dom.inner.innerHTML=void 0!==r&&null!==r?r:this.groupId||"");this.dom.label.title=m&&m.title||"";this.dom.inner.firstChild?V.removeClassName(this.dom.inner,"vis-hidden"):V.addClassName(this.dom.inner,"vis-hidden");if(m&&m.nestedGroups){this.nestedGroups&&this.nestedGroups==m.nestedGroups||(this.nestedGroups=m.nestedGroups);if(void 0!==m.showNested||void 0===this.showNested)this.showNested=0==m.showNested?!1:!0;V.addClassName(this.dom.label,
"vis-nesting-group");this.showNested?(V.removeClassName(this.dom.label,"collapsed"),V.addClassName(this.dom.label,"expanded")):(V.removeClassName(this.dom.label,"expanded"),V.addClassName(this.dom.label,"collapsed"))}else this.nestedGroups&&(this.nestedGroups=null,V.removeClassName(this.dom.label,"collapsed"),V.removeClassName(this.dom.label,"expanded"),V.removeClassName(this.dom.label,"vis-nesting-group"));m&&(m.treeLevel||m.nestedInGroup)?(V.addClassName(this.dom.label,"vis-nested-group"),m.treeLevel?
V.addClassName(this.dom.label,"vis-group-level-"+m.treeLevel):V.addClassName(this.dom.label,"vis-group-level-unknown-but-gte1")):V.addClassName(this.dom.label,"vis-group-level-0");k=m&&m.className||null;k!=this.className&&(this.className&&(V.removeClassName(this.dom.label,this.className),V.removeClassName(this.dom.foreground,this.className),V.removeClassName(this.dom.background,this.className),V.removeClassName(this.dom.axis,this.className)),V.addClassName(this.dom.label,k),V.addClassName(this.dom.foreground,
k),V.addClassName(this.dom.background,k),V.addClassName(this.dom.axis,k),this.className=k);this.style&&(V.removeCssText(this.dom.label,this.style),this.style=null);m&&m.style&&(V.addCssText(this.dom.label,m.style),this.style=m.style)}}},{key:"getLabelWidth",value:function(){return this.props.label.width}},{key:"_didMarkerHeightChange",value:function(){var m=this.dom.marker.clientHeight;if(m!=this.lastMarkerHeight){this.lastMarkerHeight=m;var k={},r=0;V.forEach(this.items,function(J,Z){J.dirty=!0;
J.displayed&&(k[Z]=J.redraw(!0),r=k[Z].length)});if(0<r){m=function(J){V.forEach(k,function(Z){Z[J]()})};for(var x=0;x<r;x++)m(x)}return!0}return!1}},{key:"_calculateGroupSizeAndPosition",value:function(){var m=this.dom.foreground,k=m.offsetLeft,r=m.offsetWidth;this.top=m.offsetTop;this.right=k;this.width=r}},{key:"_shouldBailItemsRedraw",value:function(){var m=this,k=this.itemSet.options.onTimeout;k={relativeBailingTime:this.itemSet.itemsSettingTime,bailTimeMs:k&&k.timeoutMs,userBailFunction:k&&
k.callback,shouldBailStackItems:this.shouldBailStackItems};var r=null;if(!this.itemSet.initialDrawDone){if(k.shouldBailStackItems)return!0;Math.abs(Date.now()-new Date(k.relativeBailingTime))>k.bailTimeMs&&(k.userBailFunction&&null==this.itemSet.userContinueNotBail?k.userBailFunction(function(x){m.itemSet.userContinueNotBail=x;r=!x}):r=0==m.itemSet.userContinueNotBail?!0:!1)}return r}},{key:"_redrawItems",value:function(m,k,r,x){var J=this;if(m||this.stackDirty||this.isVisible&&!k){var Z={byEnd:this.orderedItems.byEnd.filter(function(Ta){return!Ta.isCluster}),
byStart:this.orderedItems.byStart.filter(function(Ta){return!Ta.isCluster})},sa={byEnd:Ma(new Set(this.orderedItems.byEnd.map(function(Ta){return Ta.cluster}).filter(function(Ta){return!!Ta}))),byStart:Ma(new Set(this.orderedItems.byStart.map(function(Ta){return Ta.cluster}).filter(function(Ta){return!!Ta})))};m=function(){var Ta=J._updateItemsInRange(Z,J.visibleItems.filter(function(ac){return!ac.isCluster}),x),Pb=J._updateClustersInRange(sa,J.visibleItems.filter(function(ac){return ac.isCluster}),
x);return[].concat(Ma(Ta),Ma(Pb))};k=function(Ta){var Pb={},ac=function(Pc){var Bc=J.visibleItems.filter(function(Hc){return Hc.data.subgroup===Pc});Pb[Pc]=Ta?Bc.sort(function(Hc,gd){return Ta(Hc.data,gd.data)}):Bc},yc;for(yc in J.subgroups)ac(yc);return Pb};if("function"===typeof this.itemSet.options.order){var bb=this;this.doInnerStack&&this.itemSet.options.stackSubgroups?(k=k(this.itemSet.options.order),xb(k,r,this.subgroups),this.visibleItems=m(),this._updateSubGroupHeights(r)):(this.visibleItems=
m(),this._updateSubGroupHeights(r),m=this.visibleItems.slice().filter(function(Ta){return Ta.isCluster||!Ta.isCluster&&!Ta.cluster}).sort(function(Ta,Pb){return bb.itemSet.options.order(Ta.data,Pb.data)}),this.shouldBailStackItems=Q(m,r,!0,this._shouldBailItemsRedraw.bind(this)))}else this.visibleItems=m(),this._updateSubGroupHeights(r),this.itemSet.options.stack?this.doInnerStack&&this.itemSet.options.stackSubgroups?(m=k(),xb(m,r,this.subgroups)):this.shouldBailStackItems=Q(this.visibleItems,r,!0,
this._shouldBailItemsRedraw.bind(this)):Fa(this.visibleItems,r,this.subgroups,this.itemSet.options.stackSubgroups);for(r=0;r<this.visibleItems.length;r++)this.visibleItems[r].repositionX(),void 0!==this.subgroupVisibility[this.visibleItems[r].data.subgroup]&&(this.subgroupVisibility[this.visibleItems[r].data.subgroup]||this.visibleItems[r].hide());this.itemSet.options.cluster&&V.forEach(this.items,function(Ta){Ta.cluster&&Ta.displayed&&Ta.hide()});this.shouldBailStackItems&&this.itemSet.body.emitter.emit("destroyTimeline");
this.stackDirty=!1}}},{key:"_didResize",value:function(m,k){m=V.updateProperty(this,"height",k)||m;k=this.dom.inner.clientHeight;m=V.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||m;return m=V.updateProperty(this.props.label,"height",k)||m}},{key:"_applyGroupHeight",value:function(m){this.dom.background.style.height="".concat(m,"px");this.dom.foreground.style.height="".concat(m,"px");this.dom.label.style.height="".concat(m,"px")}},{key:"_updateItemsVerticalPosition",value:function(m){for(var k=
0,r=this.visibleItems.length;k<r;k++){var x=this.visibleItems[k];x.repositionY(m);this.isVisible||"__background__"==this.groupId||x.displayed&&x.hide()}}},{key:"redraw",value:function(m,k,r,x){var J=this,Z=!1,sa=this.isVisible,bb,Ta=[function(){r=J._didMarkerHeightChange.call(J)||r},this._updateSubGroupHeights.bind(this,k),this._calculateGroupSizeAndPosition.bind(this),function(){J.isVisible=J._isGroupVisible.bind(J)(m,k)},function(){J._redrawItems.bind(J)(r,sa,k,m)},this._updateSubgroupsSizes.bind(this),
function(){bb=J._calculateHeight.bind(J)(k)},this._calculateGroupSizeAndPosition.bind(this),function(){Z=J._didResize.bind(J)(Z,bb)},function(){J._applyGroupHeight.bind(J)(bb)},function(){J._updateItemsVerticalPosition.bind(J)(k)},function(){!J.isVisible&&J.height&&(Z=!1);return Z}.bind(this)];if(x)return Ta;var Pb;Ta.forEach(function(ac){Pb=ac()});return Pb}},{key:"_updateSubGroupHeights",value:function(m){var k=this;if(0<Object.keys(this.subgroups).length){var r=this;this._resetSubgroups();V.forEach(this.visibleItems,
function(x){void 0!==x.data.subgroup&&(r.subgroups[x.data.subgroup].height=Math.max(r.subgroups[x.data.subgroup].height,x.height+m.item.vertical),r.subgroups[x.data.subgroup].visible="undefined"===typeof k.subgroupVisibility[x.data.subgroup]?!0:!!k.subgroupVisibility[x.data.subgroup])})}}},{key:"_isGroupVisible",value:function(m,k){return this.top<=m.body.domProps.centerContainer.height-m.body.domProps.scrollTop+k.axis&&this.top+this.height+k.axis>=-m.body.domProps.scrollTop}},{key:"_calculateHeight",
value:function(m){var k="fixed"===this.heightMode?V.toArray(this.items):this.visibleItems;if(0<k.length){var r=k[0].top,x=k[0].top+k[0].height;V.forEach(k,function(Z){r=Math.min(r,Z.top);x=Math.max(x,Z.top+Z.height)});if(r>m.axis){var J=r-m.axis;x-=J;V.forEach(k,function(Z){Z.top-=J})}m=Math.ceil(x+m.item.vertical/2);"fitItems"!==this.heightMode&&(m=Math.max(m,this.props.label.height))}else m=this.props.label.height;return m}},{key:"show",value:function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label);
this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground);this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background);this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)}},{key:"hide",value:function(){var m=this.dom.label;m.parentNode&&m.parentNode.removeChild(m);m=this.dom.foreground;m.parentNode&&m.parentNode.removeChild(m);m=this.dom.background;m.parentNode&&m.parentNode.removeChild(m);m=this.dom.axis;m.parentNode&&
m.parentNode.removeChild(m)}},{key:"add",value:function(m){this.items[m.id]=m;m.setParent(this);this.stackDirty=!0;void 0!==m.data.subgroup&&(this._addToSubgroup(m),this.orderSubgroups());this.visibleItems.includes(m)||this._checkIfVisible(m,this.visibleItems,this.itemSet.body.range)}},{key:"_addToSubgroup",value:function(m){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.data.subgroup;void 0!=k&&void 0===this.subgroups[k]&&(this.subgroups[k]={height:0,top:0,start:m.data.start,end:m.data.end||
m.data.start,visible:!1,index:this.subgroupIndex,items:[],stack:this.subgroupStackAll||this.subgroupStack[k]||!1},this.subgroupIndex++);new Date(m.data.start)<new Date(this.subgroups[k].start)&&(this.subgroups[k].start=m.data.start);var r=m.data.end||m.data.start;new Date(r)>new Date(this.subgroups[k].end)&&(this.subgroups[k].end=r);this.subgroups[k].items.push(m)}},{key:"_updateSubgroupsSizes",value:function(){var m=this;if(m.subgroups){var k=function(x){var J=m.subgroups[x].items[0].data.start,
Z=(m.subgroups[x].items[0].data.end||m.subgroups[x].items[0].data.start)-1;m.subgroups[x].items.forEach(function(sa){new Date(sa.data.start)<new Date(J)&&(J=sa.data.start);sa=sa.data.end||sa.data.start;new Date(sa)>new Date(Z)&&(Z=sa)});m.subgroups[x].start=J;m.subgroups[x].end=new Date(Z-1)},r;for(r in m.subgroups)k(r)}}},{key:"orderSubgroups",value:function(){if(void 0!==this.subgroupOrderer){var m=[];if("string"==typeof this.subgroupOrderer){for(var k in this.subgroups)m.push({subgroup:k,sortField:this.subgroups[k].items[0].data[this.subgroupOrderer]});
m.sort(function(x,J){return x.sortField-J.sortField})}else if("function"==typeof this.subgroupOrderer){for(var r in this.subgroups)m.push(this.subgroups[r].items[0].data);m.sort(this.subgroupOrderer)}if(0<m.length)for(k=0;k<m.length;k++)this.subgroups[m[k].subgroup].index=k}}},{key:"_resetSubgroups",value:function(){for(var m in this.subgroups)this.subgroups.hasOwnProperty(m)&&(this.subgroups[m].visible=!1,this.subgroups[m].height=0)}},{key:"remove",value:function(m){delete this.items[m.id];m.setParent(null);
this.stackDirty=!0;var k=this.visibleItems.indexOf(m);-1!=k&&this.visibleItems.splice(k,1);void 0!==m.data.subgroup&&(this._removeFromSubgroup(m),this.orderSubgroups())}},{key:"_removeFromSubgroup",value:function(m){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:m.data.subgroup;if(void 0!=k){var r=this.subgroups[k];if(r){var x=r.items.indexOf(m);0<=x&&(r.items.splice(x,1),r.items.length?this._updateSubgroupsSizes():delete this.subgroups[k])}}}},{key:"removeFromDataSet",value:function(m){this.itemSet.removeItem(m.id)}},
{key:"order",value:function(){for(var m=V.toArray(this.items),k=[],r=[],x=0;x<m.length;x++)void 0!==m[x].data.end&&r.push(m[x]),k.push(m[x]);this.orderedItems={byStart:k,byEnd:r};Ja(this.orderedItems.byStart);D(this.orderedItems.byEnd)}},{key:"_updateItemsInRange",value:function(m,k,r){var x=[],J={};if(!this.isVisible&&"__background__"!=this.groupId){for(m=0;m<k.length;m++)J=k[m],J.displayed&&J.hide();return x}var Z=(r.end-r.start)/4,sa=r.start-Z,bb=r.end+Z;Z=function(ac){var yc=ac.start;return ac.end<
sa?-1:yc<=bb?0:1};if(0<k.length)for(var Ta=0;Ta<k.length;Ta++)this._checkIfVisibleWithReference(k[Ta],x,J,r);k=V.binarySearchCustom(m.byStart,function(ac){return ac<sa?-1:ac<=bb?0:1},"data","start");this._traceVisible(k,m.byStart,x,J,function(ac){return ac.data.start<sa||ac.data.start>bb});if(1==this.checkRangedItems)for(this.checkRangedItems=!1,k=0;k<m.byEnd.length;k++)this._checkIfVisibleWithReference(m.byEnd[k],x,J,r);else k=V.binarySearchCustom(m.byEnd,Z,"data"),this._traceVisible(k,m.byEnd,x,
J,function(ac){return ac.data.end<sa||ac.data.start>bb});var Pb={};for(J=m=0;J<x.length;J++)k=x[J],k.displayed||(Pb[J]=k.redraw(!0),m=Pb[J].length);if(0<m)for(J=function(ac){V.forEach(Pb,function(yc){yc[ac]()})},k=0;k<m;k++)J(k);for(m=0;m<x.length;m++)x[m].repositionX();return x}},{key:"_traceVisible",value:function(m,k,r,x,J){if(-1!=m){for(var Z=m;0<=Z;Z--){var sa=k[Z];if(J(sa))break;else sa.isCluster&&!sa.hasItems()||sa.cluster||void 0!==x[sa.id]||(x[sa.id]=!0,r.push(sa))}for(m+=1;m<k.length&&(Z=
k[m],!J(Z));m++)Z.isCluster&&!Z.hasItems()||Z.cluster||void 0!==x[Z.id]||(x[Z.id]=!0,r.push(Z))}}},{key:"_checkIfVisible",value:function(m,k,r){m.isVisible(r)?(m.displayed||m.show(),m.repositionX(),k.push(m)):m.displayed&&m.hide()}},{key:"_checkIfVisibleWithReference",value:function(m,k,r,x){m.isVisible(x)?void 0===r[m.id]&&(r[m.id]=!0,k.push(m)):m.displayed&&m.hide()}},{key:"_updateClustersInRange",value:function(m,k,r){var x=[],J={};if(0<k.length)for(var Z=0;Z<k.length;Z++)this._checkIfVisibleWithReference(k[Z],
x,J,r);for(k=0;k<m.byStart.length;k++)this._checkIfVisibleWithReference(m.byStart[k],x,J,r);for(k=0;k<m.byEnd.length;k++)this._checkIfVisibleWithReference(m.byEnd[k],x,J,r);m={};for(J=r=0;J<x.length;J++)k=x[J],k.displayed||(m[J]=k.redraw(!0),r=m[J].length);if(0<r)for(var sa=0;sa<r;sa++)V.forEach(m,function(bb){bb[sa]()});for(m=0;m<x.length;m++)x[m].repositionX();return x}},{key:"changeSubgroup",value:function(m,k,r){this._removeFromSubgroup(m,k);this._addToSubgroup(m,r);this.orderSubgroups()}},{key:"dispose",
value:function(){this.hide();for(var m;m=this._disposeCallbacks.pop();)m()}}]);return K}(),gc=function(K){function m(k,r,x){ka(this,m);k=O(this,X(m).call(this,k,r,x));k.width=0;k.height=0;k.top=0;k.left=0;return k}ua(m,K);ca(m,[{key:"redraw",value:function(k,r,x){this.visibleItems=this._updateItemsInRange(this.orderedItems,this.visibleItems,k);this.width=this.dom.background.offsetWidth;this.dom.background.style.height="0";k=0;for(x=this.visibleItems.length;k<x;k++)this.visibleItems[k].repositionY(r);
return!1}},{key:"show",value:function(){this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background)}}]);return m}(Db),sc=function(){function K(m,k,r){var x=this;ka(this,K);this.parent=this.id=null;this.data=m;this.dom=null;this.conversion=k||{};this.defaultOptions={locales:Ld,locale:"en"};this.options=V.extend({},this.defaultOptions,r);this.options.locales=V.extend({},Ld,this.options.locales);var J=this.defaultOptions.locales[this.defaultOptions.locale];Object.keys(this.options.locales).forEach(function(Z){x.options.locales[Z]=
V.extend({},J,x.options.locales[Z])});this.displayed=this.selected=!1;this.groupShowing=!0;this.selectable=r&&r.selectable||!1;this.dirty=!0;this.height=this.width=this.left=this.right=this.top=null;this.setSelectability(m);this.editable=null;this._updateEditStatus()}ca(K,[{key:"select",value:function(){this.selectable&&(this.dirty=this.selected=!0,this.displayed&&this.redraw())}},{key:"unselect",value:function(){this.selected=!1;this.dirty=!0;this.displayed&&this.redraw()}},{key:"setData",value:function(m){void 0!=
m.group&&this.data.group!=m.group&&null!=this.parent&&this.parent.itemSet._moveToGroup(this,m.group);this.setSelectability(m);this.parent&&(this.parent.stackDirty=!0);void 0!=m.subgroup&&this.data.subgroup!=m.subgroup&&null!=this.parent&&this.parent.changeSubgroup(this,this.data.subgroup,m.subgroup);this.data=m;this._updateEditStatus();this.dirty=!0;this.displayed&&this.redraw()}},{key:"setSelectability",value:function(m){m&&(this.selectable="undefined"===typeof m.selectable?!0:!!m.selectable)}},
{key:"setParent",value:function(m){this.displayed?(this.hide(),(this.parent=m)&&this.show()):this.parent=m}},{key:"isVisible",value:function(m){return!1}},{key:"show",value:function(){return!1}},{key:"hide",value:function(){return!1}},{key:"redraw",value:function(){}},{key:"repositionX",value:function(){}},{key:"repositionY",value:function(){}},{key:"_repaintDragCenter",value:function(){if(this.selected&&this.editable.updateTime&&!this.dom.dragCenter){var m=this,k=document.createElement("div");k.className=
"vis-drag-center";k.dragCenterItem=this;this.hammerDragCenter=new gb(k);this.hammerDragCenter.on("tap",function(r){m.parent.itemSet.body.emitter.emit("click",{event:r,item:m.id})});this.hammerDragCenter.on("doubletap",function(r){r.stopPropagation();m.parent.itemSet._onUpdateItem(m);m.parent.itemSet.body.emitter.emit("doubleClick",{event:r,item:m.id})});this.hammerDragCenter.on("panstart",function(r){r.stopPropagation();m.parent.itemSet._onDragStart(r)});this.hammerDragCenter.on("panmove",m.parent.itemSet._onDrag.bind(m.parent.itemSet));
this.hammerDragCenter.on("panend",m.parent.itemSet._onDragEnd.bind(m.parent.itemSet));this.dom.box?this.dom.dragLeft?this.dom.box.insertBefore(k,this.dom.dragLeft):this.dom.box.appendChild(k):this.dom.point&&this.dom.point.appendChild(k);this.dom.dragCenter=k}else!this.selected&&this.dom.dragCenter&&(this.dom.dragCenter.parentNode&&this.dom.dragCenter.parentNode.removeChild(this.dom.dragCenter),this.dom.dragCenter=null,this.hammerDragCenter&&(this.hammerDragCenter.destroy(),this.hammerDragCenter=
null))}},{key:"_repaintDeleteButton",value:function(m){var k=(this.options.editable.overrideItems||null==this.editable)&&this.options.editable.remove||!this.options.editable.overrideItems&&null!=this.editable&&this.editable.remove;if(this.selected&&k&&!this.dom.deleteButton){var r=this;k=document.createElement("div");k.className=this.options.rtl?"vis-delete-rtl":"vis-delete";var x=this.options.locales[this.options.locale];x||(this.warned||(console.warn("WARNING: options.locales['".concat(this.options.locale,
"'] not found. See https://visjs.github.io/vis-timeline/docs/timeline/#Localization")),this.warned=!0),x=this.options.locales.en);k.title=x.deleteSelected;this.hammerDeleteButton=(new gb(k)).on("tap",function(J){J.stopPropagation();r.parent.removeFromDataSet(r)});m.appendChild(k);this.dom.deleteButton=k}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null,this.hammerDeleteButton&&
(this.hammerDeleteButton.destroy(),this.hammerDeleteButton=null))}},{key:"_repaintOnItemUpdateTimeTooltip",value:function(m){if(this.options.tooltipOnItemUpdateTime){var k=(this.options.editable.updateTime||!0===this.data.editable)&&!1!==this.data.editable;this.selected&&k&&!this.dom.onItemUpdateTimeTooltip?(k=document.createElement("div"),k.className="vis-onUpdateTime-tooltip",m.appendChild(k),this.dom.onItemUpdateTimeTooltip=k):!this.selected&&this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.parentNode&&
this.dom.onItemUpdateTimeTooltip.parentNode.removeChild(this.dom.onItemUpdateTimeTooltip),this.dom.onItemUpdateTimeTooltip=null);this.dom.onItemUpdateTimeTooltip&&(this.dom.onItemUpdateTimeTooltip.style.visibility=this.parent.itemSet.touchParams.itemIsDragging?"visible":"hidden",this.dom.onItemUpdateTimeTooltip.style.transform="translateX(-50%)",this.dom.onItemUpdateTimeTooltip.style.left="50%",("top"==this.options.orientation.item?this.top:this.parent.height-this.top-this.height)+this.parent.top-
50<-this.parent.itemSet.body.domProps.scrollTop?(this.dom.onItemUpdateTimeTooltip.style.bottom="",this.dom.onItemUpdateTimeTooltip.style.top="".concat(this.height+2,"px")):(this.dom.onItemUpdateTimeTooltip.style.top="",this.dom.onItemUpdateTimeTooltip.style.bottom="".concat(this.height+2,"px")),this.options.tooltipOnItemUpdateTime&&this.options.tooltipOnItemUpdateTime.template?(m=this.options.tooltipOnItemUpdateTime.template.bind(this),m=m(this.data)):(m="start: ".concat(Gb(this.data.start).format("MM/DD/YYYY hh:mm")),
this.data.end&&(m+="\x3cbr\x3e end: ".concat(Gb(this.data.end).format("MM/DD/YYYY hh:mm")))),this.dom.onItemUpdateTimeTooltip.innerHTML=m)}}},{key:"_getItemData",value:function(){return this.parent.itemSet.itemsData.get(this.id)}},{key:"_updateContents",value:function(m){var k=this._getItemData(),r=(this.dom.box||this.dom.point).getElementsByClassName("vis-item-visible-frame")[0];if(this.options.visibleFrameTemplate){var x=this.options.visibleFrameTemplate.bind(this);var J=x(k,r)}else J="";if(r)if(J instanceof
Object&&!(J instanceof Element))x(k,r);else if(x=this._contentToString(this.itemVisibleFrameContent)!==this._contentToString(J)){if(J instanceof Element)r.innerHTML="",r.appendChild(J);else if(void 0!=J)r.innerHTML=J;else if("background"!=this.data.type||void 0!==this.data.content)throw Error('Property "content" missing in item '.concat(this.id));this.itemVisibleFrameContent=J}if(this.options.template){var Z=this.options.template.bind(this);J=Z(k,m,this.data)}else J=this.data.content;if(J instanceof
Object&&!(J instanceof Element))Z(k,m);else if(x=this._contentToString(this.content)!==this._contentToString(J)){if(J instanceof Element)m.innerHTML="",m.appendChild(J);else if(void 0!=J)m.innerHTML=J;else if("background"!=this.data.type||void 0!==this.data.content)throw Error('Property "content" missing in item '.concat(this.id));this.content=J}}},{key:"_updateDataAttributes",value:function(m){if(this.options.dataAttributes&&0<this.options.dataAttributes.length){if(Array.isArray(this.options.dataAttributes))var k=
this.options.dataAttributes;else if("all"==this.options.dataAttributes)k=Object.keys(this.data);else return;var r=!0,x=!1,J=void 0;try{for(var Z=k[Symbol.iterator](),sa;!(r=(sa=Z.next()).done);r=!0){var bb=sa.value,Ta=this.data[bb];null!=Ta?m.setAttribute("data-".concat(bb),Ta):m.removeAttribute("data-".concat(bb))}}catch(Pb){x=!0,J=Pb}finally{try{if(!r&&null!=Z["return"])Z["return"]()}finally{if(x)throw J;}}}}},{key:"_updateStyle",value:function(m){this.style&&(V.removeCssText(m,this.style),this.style=
null);this.data.style&&(V.addCssText(m,this.data.style),this.style=this.data.style)}},{key:"_contentToString",value:function(m){return"string"===typeof m?m:m&&"outerHTML"in m?m.outerHTML:m}},{key:"_updateEditStatus",value:function(){this.options&&("boolean"===typeof this.options.editable?this.editable={updateTime:this.options.editable,updateGroup:this.options.editable,remove:this.options.editable}:"object"===y(this.options.editable)&&(this.editable={},V.selectiveExtend(["updateTime","updateGroup",
"remove"],this.editable,this.options.editable)));this.options&&this.options.editable&&!0===this.options.editable.overrideItems||!this.data||("boolean"===typeof this.data.editable?this.editable={updateTime:this.data.editable,updateGroup:this.data.editable,remove:this.data.editable}:"object"===y(this.data.editable)&&(this.editable={},V.selectiveExtend(["updateTime","updateGroup","remove"],this.editable,this.data.editable)))}},{key:"getWidthLeft",value:function(){return 0}},{key:"getWidthRight",value:function(){return 0}},
{key:"getTitle",value:function(){return this.options.tooltip&&this.options.tooltip.template?this.options.tooltip.template.bind(this)(this._getItemData(),this.data):this.data.title}}]);return K}();sc.prototype.stack=!0;var wc=function(K){function m(k,r,x){ka(this,m);r=O(this,X(m).call(this,k,r,x));r.props={dot:{width:0,height:0},line:{width:0,height:0}};if(k&&void 0==k.start)throw Error('Property "start" missing in item '.concat(k));return r}ua(m,K);ca(m,[{key:"isVisible",value:function(k){if(this.cluster)return!1;
var r=this.data.align||this.options.align,x=this.width*k.getMillisecondsPerPixel();return"right"==r?this.data.start.getTime()>k.start&&this.data.start.getTime()-x<k.end:"left"==r?this.data.start.getTime()+x>k.start&&this.data.start.getTime()<k.end:this.data.start.getTime()+x/2>k.start&&this.data.start.getTime()-x/2<k.end}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className=
"vis-item-content",this.dom.box.appendChild(this.dom.content),this.dom.line=document.createElement("DIV"),this.dom.line.className="vis-line",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-dot",this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var k=this.parent.dom.foreground;if(!k)throw Error("Cannot redraw item: parent has no foreground container element");
k.appendChild(this.dom.box)}if(!this.dom.line.parentNode){var r=this.parent.dom.background;if(!r)throw Error("Cannot redraw item: parent has no background container element");r.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){k=this.parent.dom.axis;if(!r)throw Error("Cannot redraw item: parent has no axis container element");k.appendChild(this.dom.dot)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content);this._updateDataAttributes(this.dom.box);
this._updateStyle(this.dom.box);var k=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(this.editable.updateTime||this.editable.updateGroup?" vis-editable":" vis-readonly");this.dom.box.className="vis-item vis-box".concat(k);this.dom.line.className="vis-item vis-line".concat(k);this.dom.dot.className="vis-item vis-dot".concat(k)}}},{key:"_getDomComponentsSizes",value:function(){return{previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},dot:{height:this.dom.dot.offsetHeight,
width:this.dom.dot.offsetWidth},line:{width:this.dom.line.offsetWidth},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(k){this.options.rtl?this.dom.box.style.right="0px":this.dom.box.style.left="0px";this.props.dot.height=k.dot.height;this.props.dot.width=k.dot.width;this.props.line.width=k.line.width;this.width=k.box.width;this.height=k.box.height;this.options.rtl?this.dom.box.style.right=k.previous.right:this.dom.box.style.left=
k.previous.left;this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box);this._repaintDragCenter();this._repaintDeleteButton(this.dom.box)}},{key:"redraw",value:function(k){var r=this,x,J=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){r.dirty&&(x=r._getDomComponentsSizes())},function(){r.dirty&&r._updateDomComponentsSizes.bind(r)(x)},this._repaintDomAdditionals.bind(this)];
if(k)return J;var Z;J.forEach(function(sa){Z=sa()});return Z}},{key:"show",value:function(k){if(!this.displayed)return this.redraw(k)}},{key:"hide",value:function(){if(this.displayed){var k=this.dom;k.box.remove?k.box.remove():k.box.parentNode&&k.box.parentNode.removeChild(k.box);k.line.remove?k.line.remove():k.line.parentNode&&k.line.parentNode.removeChild(k.line);k.dot.remove?k.dot.remove():k.dot.parentNode&&k.dot.parentNode.removeChild(k.dot);this.displayed=!1}}},{key:"repositionXY",value:function(){var k=
this.options.rtl,r=function(x,J,Z){if(void 0!==J||void 0!==Z){var sa=3<arguments.length&&void 0!==arguments[3]&&arguments[3]?-1*J:J;x.style.transform=void 0===Z?"translateX(".concat(sa,"px)"):void 0===J?"translateY(".concat(Z,"px)"):"translate(".concat(sa,"px, ").concat(Z,"px)")}};r(this.dom.box,this.boxX,this.boxY,k);r(this.dom.dot,this.dotX,this.dotY,k);r(this.dom.line,this.lineX,this.lineY,k)}},{key:"repositionX",value:function(){var k=this.conversion.toScreen(this.data.start),r=void 0===this.data.align?
this.options.align:this.data.align,x=this.props.line.width,J=this.props.dot.width;"right"==r?(this.boxX=k-this.width,this.lineX=k-x,this.dotX=k-x/2-J/2):"left"==r?(this.lineX=this.boxX=k,this.dotX=k+x/2-J/2):(this.boxX=k-this.width/2,this.lineX=this.options.rtl?k-x:k-x/2,this.dotX=k-J/2);this.options.rtl?this.right=this.boxX:this.left=this.boxX;this.repositionXY()}},{key:"repositionY",value:function(){var k=this.dom.line.style;if("top"==this.options.orientation.item){var r=this.parent.top+this.top+
1;this.boxY=this.top||0;k.height="".concat(r,"px");k.bottom="";k.top="0"}else r=this.parent.itemSet.props.height-this.parent.top-this.parent.height+this.top,this.boxY=this.parent.height-this.top-(this.height||0),k.height="".concat(r,"px"),k.top="",k.bottom="0";this.dotY=-this.props.dot.height/2;this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/2}}]);return m}(sc),Mc=function(K){function m(k,r,x){ka(this,m);r=O(this,
X(m).call(this,k,r,x));r.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0,marginRight:0}};if(k&&void 0==k.start)throw Error('Property "start" missing in item '.concat(k));return r}ua(m,K);ca(m,[{key:"isVisible",value:function(k){if(this.cluster)return!1;var r=this.width*k.getMillisecondsPerPixel();return this.data.start.getTime()+r>k.start&&this.data.start<k.end}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.point=document.createElement("div"),this.dom.content=
document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.point.appendChild(this.dom.content),this.dom.dot=document.createElement("div"),this.dom.point.appendChild(this.dom.dot),this.dom.point["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw Error("Cannot redraw item: no parent attached");if(!this.dom.point.parentNode){var k=this.parent.dom.foreground;if(!k)throw Error("Cannot redraw item: parent has no foreground container element");
k.appendChild(this.dom.point)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){if(this.dirty){this._updateContents(this.dom.content);this._updateDataAttributes(this.dom.point);this._updateStyle(this.dom.point);var k=(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(this.editable.updateTime||this.editable.updateGroup?" vis-editable":" vis-readonly");this.dom.point.className="vis-item vis-point".concat(k);this.dom.dot.className="vis-item vis-dot".concat(k)}}},
{key:"_getDomComponentsSizes",value:function(){return{dot:{width:this.dom.dot.offsetWidth,height:this.dom.dot.offsetHeight},content:{width:this.dom.content.offsetWidth,height:this.dom.content.offsetHeight},point:{width:this.dom.point.offsetWidth,height:this.dom.point.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(k){this.props.dot.width=k.dot.width;this.props.dot.height=k.dot.height;this.props.content.height=k.content.height;this.options.rtl?this.dom.content.style.marginRight="".concat(2*
this.props.dot.width,"px"):this.dom.content.style.marginLeft="".concat(2*this.props.dot.width,"px");this.width=k.point.width;this.height=k.point.height;this.dom.dot.style.top="".concat((this.height-this.props.dot.height)/2,"px");k=this.props.dot.width;this.dom.dot.style.transform="translateX(".concat(this.options.rtl?k/2*-1:k/2,"px");this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.point);this._repaintDragCenter();this._repaintDeleteButton(this.dom.point)}},
{key:"redraw",value:function(k){var r=this,x,J=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){r.dirty&&(x=r._getDomComponentsSizes())},function(){r.dirty&&r._updateDomComponentsSizes.bind(r)(x)},this._repaintDomAdditionals.bind(this)];if(k)return J;var Z;J.forEach(function(sa){Z=sa()});return Z}},{key:"repositionXY",value:function(){(function(k,r,x){if(void 0!==r||void 0!==x){var J=3<arguments.length&&void 0!==arguments[3]&&
arguments[3]?-1*r:r;k.style.transform=void 0===x?"translateX(".concat(J,"px)"):void 0===r?"translateY(".concat(x,"px)"):"translate(".concat(J,"px, ").concat(x,"px)")}})(this.dom.point,this.pointX,this.pointY,this.options.rtl)}},{key:"show",value:function(k){if(!this.displayed)return this.redraw(k)}},{key:"hide",value:function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.displayed=!1)}},{key:"repositionX",value:function(){var k=this.conversion.toScreen(this.data.start);
this.pointX=k;this.options.rtl?this.right=k-this.props.dot.width:this.left=k-this.props.dot.width;this.repositionXY()}},{key:"repositionY",value:function(){this.pointY="top"==this.options.orientation.item?this.top:this.parent.height-this.top-this.height;this.repositionXY()}},{key:"getWidthLeft",value:function(){return this.props.dot.width}},{key:"getWidthRight",value:function(){return this.props.dot.width}}]);return m}(sc),ic=function(K){function m(k,r,x){ka(this,m);r=O(this,X(m).call(this,k,r,x));
r.props={content:{width:0}};r.overflow=!1;if(k){if(void 0==k.start)throw Error('Property "start" missing in item '.concat(k.id));if(void 0==k.end)throw Error('Property "end" missing in item '.concat(k.id));}return r}ua(m,K);ca(m,[{key:"isVisible",value:function(k){return this.cluster?!1:this.data.start<k.end&&this.data.end>k.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className=
"vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.visibleFrame=document.createElement("div"),this.dom.visibleFrame.className="vis-item-visible-frame",this.dom.box.appendChild(this.dom.visibleFrame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw Error("Cannot redraw item: no parent attached");
if(!this.dom.box.parentNode){var k=this.parent.dom.foreground;if(!k)throw Error("Cannot redraw item: parent has no foreground container element");k.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){this.dirty&&(this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box),this.dom.box.className=this.baseClassName+((this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+(this.editable.updateTime||
this.editable.updateGroup?" vis-editable":" vis-readonly")),this.dom.content.style.maxWidth="none")}},{key:"_getDomComponentsSizes",value:function(){this.overflow="hidden"!==window.getComputedStyle(this.dom.frame).overflow;this.whiteSpace="nowrap"!==window.getComputedStyle(this.dom.content).whiteSpace;return{content:{width:this.dom.content.offsetWidth},box:{height:this.dom.box.offsetHeight}}}},{key:"_updateDomComponentsSizes",value:function(k){this.props.content.width=k.content.width;this.height=
k.box.height;this.dom.content.style.maxWidth="";this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box);this._repaintDeleteButton(this.dom.box);this._repaintDragCenter();this._repaintDragLeft();this._repaintDragRight()}},{key:"redraw",value:function(k){var r=this,x,J=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){r.dirty&&(x=r._getDomComponentsSizes.bind(r)())},function(){r.dirty&&
r._updateDomComponentsSizes.bind(r)(x)},this._repaintDomAdditionals.bind(this)];if(k)return J;var Z;J.forEach(function(sa){Z=sa()});return Z}},{key:"show",value:function(k){if(!this.displayed)return this.redraw(k)}},{key:"hide",value:function(){if(this.displayed){var k=this.dom.box;k.parentNode&&k.parentNode.removeChild(k);this.displayed=!1}}},{key:"repositionX",value:function(k){var r=this.parent.width,x=this.conversion.toScreen(this.data.start),J=this.conversion.toScreen(this.data.end),Z=void 0===
this.data.align?this.options.align:this.data.align;!1===this.data.limitSize||void 0!==k&&!0!==k||(x<-r&&(x=-r),J>2*r&&(J=2*r));r=Math.max(Math.round(1E3*(J-x))/1E3,1);this.overflow?(this.options.rtl?this.right=x:this.left=x,this.width=r+this.props.content.width,k=this.props.content.width):(this.options.rtl?this.right=x:this.left=x,this.width=r,k=Math.min(J-x,this.props.content.width));this.dom.box.style.transform=this.options.rtl?"translateX(".concat(-1*this.right,"px)"):"translateX(".concat(this.left,
"px)");this.dom.box.style.width="".concat(r,"px");this.whiteSpace&&(this.height=this.dom.box.offsetHeight);switch(Z){case "left":this.dom.content.style.transform="translateX(0)";break;case "right":this.dom.content.style.transform=this.options.rtl?"translateX(".concat(-1*Math.max(r-k,0),"px)"):"translateX(".concat(Math.max(r-k,0),"px)");break;case "center":this.dom.content.style.transform=this.options.rtl?"translateX(".concat(-1*Math.max((r-k)/2,0),"px)"):"translateX(".concat(Math.max((r-k)/2,0),"px)");
break;default:x=this.overflow?0<J?Math.max(-x,0):-k:0>x?-x:0,this.dom.content.style.transform=this.options.rtl?"translateX(".concat(-1*x,"px)"):"translateX(".concat(x,"px)")}}},{key:"repositionY",value:function(){this.dom.box.style.top="top"==this.options.orientation.item?"".concat(this.top,"px"):"".concat(this.parent.height-this.top-this.height,"px")}},{key:"_repaintDragLeft",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragLeft){var k=
document.createElement("div");k.className="vis-drag-left";k.dragLeftItem=this;this.dom.box.appendChild(k);this.dom.dragLeft=k}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragLeft||(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)}},{key:"_repaintDragRight",value:function(){if((this.selected||this.options.itemsAlwaysDraggable.range)&&this.editable.updateTime&&!this.dom.dragRight){var k=document.createElement("div");
k.className="vis-drag-right";k.dragRightItem=this;this.dom.box.appendChild(k);this.dom.dragRight=k}else this.selected||this.options.itemsAlwaysDraggable.range||!this.dom.dragRight||(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)}}]);return m}(sc);ic.prototype.baseClassName="vis-item vis-range";var zb=function(K){function m(k,r,x){ka(this,m);r=O(this,X(m).call(this,k,r,x));r.props={content:{width:0}};r.overflow=!1;if(k){if(void 0==
k.start)throw Error('Property "start" missing in item '.concat(k.id));if(void 0==k.end)throw Error('Property "end" missing in item '.concat(k.id));}return r}ua(m,K);ca(m,[{key:"isVisible",value:function(k){return this.data.start<k.end&&this.data.end>k.start}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=
document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var k=this.parent.dom.background;if(!k)throw Error("Cannot redraw item: parent has no background container element");k.appendChild(this.dom.box)}this.displayed=!0}},{key:"_updateDirtyDomComponents",value:function(){this.dirty&&
(this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.content),this._updateStyle(this.dom.box),this.dom.box.className=this.baseClassName+((this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")))}},{key:"_getDomComponentsSizes",value:function(){this.overflow="hidden"!==window.getComputedStyle(this.dom.content).overflow;return{content:{width:this.dom.content.offsetWidth}}}},{key:"_updateDomComponentsSizes",value:function(k){this.props.content.width=
k.content.width;this.height=0;this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){}},{key:"redraw",value:function(k){var r=this,x,J=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),function(){r.dirty&&(x=r._getDomComponentsSizes.bind(r)())},function(){r.dirty&&r._updateDomComponentsSizes.bind(r)(x)},this._repaintDomAdditionals.bind(this)];if(k)return J;var Z;J.forEach(function(sa){Z=sa()});return Z}},{key:"repositionY",value:function(k){k=
this.options.orientation.item;if(void 0!==this.data.subgroup){var r=this.data.subgroup;this.dom.box.style.height="".concat(this.parent.subgroups[r].height,"px");this.dom.box.style.top="top"==k?"".concat(this.parent.top+this.parent.subgroups[r].top,"px"):"".concat(this.parent.top+this.parent.height-this.parent.subgroups[r].top-this.parent.subgroups[r].height,"px");this.dom.box.style.bottom=""}else if(this.parent instanceof gc){var x=Math.max(this.parent.height,this.parent.itemSet.body.domProps.center.height,
this.parent.itemSet.body.domProps.centerContainer.height);this.dom.box.style.bottom="bottom"==k?"0":"";this.dom.box.style.top="top"==k?"0":""}else x=this.parent.height,this.dom.box.style.top="".concat(this.parent.top,"px"),this.dom.box.style.bottom="";this.dom.box.style.height="".concat(x,"px")}}]);return m}(sc);zb.prototype.baseClassName="vis-item vis-background";zb.prototype.stack=!1;zb.prototype.show=ic.prototype.show;zb.prototype.hide=ic.prototype.hide;zb.prototype.repositionX=ic.prototype.repositionX;
var fc=function(){function K(m,k){ka(this,K);this.container=m;this.overflowMethod=k||"cap";this.y=this.x=0;this.padding=5;this.hidden=!1;this.frame=document.createElement("div");this.frame.className="vis-tooltip";this.container.appendChild(this.frame)}ca(K,[{key:"setPosition",value:function(m,k){this.x=parseInt(m);this.y=parseInt(k)}},{key:"setText",value:function(m){m instanceof Element?(this.frame.innerHTML="",this.frame.appendChild(m)):this.frame.innerHTML=m}},{key:"show",value:function(m){void 0===
m&&(m=!0);if(!0===m){m=this.frame.clientHeight;var k=this.frame.clientWidth,r=this.frame.parentNode.clientHeight,x=this.frame.parentNode.clientWidth;if("flip"==this.overflowMethod||"none"==this.overflowMethod){r=!1;var J=!0;"flip"==this.overflowMethod&&(this.y-m<this.padding&&(J=!1),this.x+k>x-this.padding&&(r=!0));r=r?this.x-k:this.x;J=J?this.y-m:this.y}else J=this.y-m,J+m+this.padding>r&&(J=r-m-this.padding),J<this.padding&&(J=this.padding),r=this.x,r+k+this.padding>x&&(r=x-k-this.padding),r<this.padding&&
(r=this.padding);this.frame.style.left=r+"px";this.frame.style.top=J+"px";this.frame.style.visibility="visible";this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0;this.frame.style.left="0";this.frame.style.top="0";this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]);return K}(),dc=function(K){function m(k,r,x){ka(this,m);x=Object.assign({},{fitOnDoubleClick:!0},x,{editable:!1});r=O(this,X(m).call(this,k,
r,x));r.props={content:{width:0,height:0}};if(!k||void 0==k.uiItems)throw Error('Property "uiItems" missing in item '+k.id);r.id=(0,lb.v4)();r.group=k.group;r._setupRange();r.emitter=r.data.eventEmitter;r.range=r.data.range;r.attached=!1;r.isCluster=!0;r.data.isCluster=!0;return r}ua(m,K);ca(m,[{key:"hasItems",value:function(){return this.data.uiItems&&this.data.uiItems.length&&this.attached}},{key:"setUiItems",value:function(k){this.detach();this.data.uiItems=k;this._setupRange();this.attach()}},
{key:"isVisible",value:function(k){var r=this.data.end?this.data.end-this.data.start:0,x=this.width*k.getMillisecondsPerPixel();r=Math.max(this.data.start.getTime()+r,this.data.start.getTime()+x);return this.data.start<k.end&&r>k.start&&this.hasItems()}},{key:"getData",value:function(){return{isCluster:!0,id:this.id,items:this.data.items||[],data:this.data}}},{key:"redraw",value:function(k){var r,x=[this._createDomElement.bind(this),this._appendDomElement.bind(this),this._updateDirtyDomComponents.bind(this),
function(){this.dirty&&(r=this._getDomComponentsSizes())}.bind(this),function(){this.dirty&&this._updateDomComponentsSizes.bind(this)(r)}.bind(this),this._repaintDomAdditionals.bind(this)];if(k)return x;var J;x.forEach(function(Z){J=Z()});return J}},{key:"show",value:function(){this.displayed||this.redraw()}},{key:"hide",value:function(){if(this.displayed){var k=this.dom;k.box.parentNode&&k.box.parentNode.removeChild(k.box);this.options.showStipes&&(k.line.parentNode&&k.line.parentNode.removeChild(k.line),
k.dot.parentNode&&k.dot.parentNode.removeChild(k.dot));this.displayed=!1}}},{key:"repositionX",value:function(){var k=this.conversion.toScreen(this.data.start),r=this.data.end?this.conversion.toScreen(this.data.end):0;r?this.repositionXWithRanges(k,r):this.repositionXWithoutRanges(k,void 0===this.data.align?this.options.align:this.data.align);this.options.showStipes&&(this.dom.line.style.display=this._isStipeVisible()?"block":"none",this.dom.dot.style.display=this._isStipeVisible()?"block":"none",
this._isStipeVisible()&&this.repositionStype(k,r))}},{key:"repositionStype",value:function(k,r){this.dom.line.style.display="block";this.dom.dot.style.display="block";var x=this.dom.line.offsetWidth,J=this.dom.dot.offsetWidth;r?(k=x+k+(r-k)/2,J=k-J/2,J=this.options.rtl?-1*J:J,this.dom.line.style.transform="translateX(".concat(this.options.rtl?-1*k:k,"px)"),this.dom.dot.style.transform="translateX(".concat(J,"px)")):(J=this.options.rtl?-1*(k-J/2):k-J/2,this.dom.line.style.transform="translateX(".concat(this.options.rtl?
-1*k:k,"px)"),this.dom.dot.style.transform="translateX(".concat(J,"px)"))}},{key:"repositionXWithoutRanges",value:function(k,r){"right"==r?this.options.rtl?(this.right=k-this.width,this.dom.box.style.right=this.right+"px"):(this.left=k-this.width,this.dom.box.style.left=this.left+"px"):"left"==r?this.options.rtl?(this.right=k,this.dom.box.style.right=this.right+"px"):(this.left=k,this.dom.box.style.left=this.left+"px"):this.options.rtl?(this.right=k-this.width/2,this.dom.box.style.right=this.right+
"px"):(this.left=k-this.width/2,this.dom.box.style.left=this.left+"px")}},{key:"repositionXWithRanges",value:function(k,r){r=Math.round(Math.max(r-k+.5,1));this.options.rtl?this.right=k:this.left=k;this.width=Math.max(r,this.minWidth||0);this.options.rtl?this.dom.box.style.right=this.right+"px":this.dom.box.style.left=this.left+"px";this.dom.box.style.width=r+"px"}},{key:"repositionY",value:function(){var k=this.options.orientation.item;this.dom.box.style.top="top"==k?(this.top||0)+"px":(this.parent.height-
this.top-this.height||0)+"px";this.options.showStipes&&("top"==k?(this.dom.line.style.top="0",this.dom.line.style.height=this.parent.top+this.top+1+"px",this.dom.line.style.bottom=""):(k=this.parent.itemSet.props.height,this.dom.line.style.top=k-(k-this.parent.top-this.parent.height+this.top)+"px",this.dom.line.style.bottom="0"),this.dom.dot.style.top=-this.dom.dot.offsetHeight/2+"px")}},{key:"getWidthLeft",value:function(){return this.width/2}},{key:"getWidthRight",value:function(){return this.width/
2}},{key:"move",value:function(){this.repositionX();this.repositionY()}},{key:"attach",value:function(){var k=!0,r=!1,x=void 0;try{for(var J=this.data.uiItems[Symbol.iterator](),Z;!(k=(Z=J.next()).done);k=!0)Z.value.cluster=this}catch(sa){r=!0,x=sa}finally{try{if(!k&&null!=J["return"])J["return"]()}finally{if(r)throw x;}}this.data.items=this.data.uiItems.map(function(sa){return sa.data});this.dirty=this.attached=!0}},{key:"detach",value:function(){var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
!1;if(this.hasItems()){var r=!0,x=!1,J=void 0;try{for(var Z=this.data.uiItems[Symbol.iterator](),sa;!(r=(sa=Z.next()).done);r=!0)delete sa.value.cluster}catch(bb){x=!0,J=bb}finally{try{if(!r&&null!=Z["return"])Z["return"]()}finally{if(x)throw J;}}this.attached=!1;k&&this.group&&(this.group.remove(this),this.group=null);this.data.items=[];this.dirty=!0}}},{key:"_onDoubleClick",value:function(){this._fit()}},{key:"_setupRange",value:function(){var k=this.data.uiItems.map(function(r){return{start:r.data.start.valueOf(),
end:r.data.end?r.data.end.valueOf():r.data.start.valueOf()}});this.data.min=Math.min.apply(Math,Ma(k.map(function(r){return Math.min(r.start,r.end||r.start)})));this.data.max=Math.max.apply(Math,Ma(k.map(function(r){return Math.max(r.start,r.end||r.start)})));k=this.data.uiItems.map(function(r){return r.center}).reduce(function(r,x){return r+x},0)/this.data.uiItems.length;this.data.uiItems.some(function(r){return r.data.end})?(this.data.start=new Date(this.data.min),this.data.end=new Date(this.data.max)):
(this.data.start=new Date(k),this.data.end=null)}},{key:"_getUiItems",value:function(){var k=this;return this.data.uiItems&&this.data.uiItems.length?this.data.uiItems.filter(function(r){return r.cluster===k}):[]}},{key:"_createDomElement",value:function(){this.dom||(this.dom={},this.dom.box=document.createElement("DIV"),this.dom.content=document.createElement("DIV"),this.dom.content.className="vis-item-content",this.dom.box.appendChild(this.dom.content),this.options.showStipes&&(this.dom.line=document.createElement("DIV"),
this.dom.line.className="vis-cluster-line",this.dom.line.style.display="none",this.dom.dot=document.createElement("DIV"),this.dom.dot.className="vis-cluster-dot",this.dom.dot.style.display="none"),this.options.fitOnDoubleClick&&(this.dom.box.ondblclick=m.prototype._onDoubleClick.bind(this)),this.dom.box["vis-item"]=this,this.dirty=!0)}},{key:"_appendDomElement",value:function(){if(!this.parent)throw Error("Cannot redraw item: no parent attached");if(!this.dom.box.parentNode){var k=this.parent.dom.foreground;
if(!k)throw Error("Cannot redraw item: parent has no foreground container element");k.appendChild(this.dom.box)}k=this.parent.dom.background;if(this.options.showStipes){if(!this.dom.line.parentNode){if(!k)throw Error("Cannot redraw item: parent has no background container element");k.appendChild(this.dom.line)}if(!this.dom.dot.parentNode){var r=this.parent.dom.axis;if(!k)throw Error("Cannot redraw item: parent has no axis container element");r.appendChild(this.dom.dot)}}this.displayed=!0}},{key:"_updateDirtyDomComponents",
value:function(){this.dirty&&(this._updateContents(this.dom.content),this._updateDataAttributes(this.dom.box),this._updateStyle(this.dom.box),this.dom.box.className="vis-item "+(this.baseClassName+" "+(this.data.className?" "+this.data.className:"")+(this.selected?" vis-selected":"")+" vis-readonly"),this.options.showStipes&&(this.dom.line.className="vis-item vis-cluster-line "+(this.selected?" vis-selected":""),this.dom.dot.className="vis-item vis-cluster-dot "+(this.selected?" vis-selected":"")),
this.data.end&&(this.dom.content.style.maxWidth="none"))}},{key:"_getDomComponentsSizes",value:function(){var k={previous:{right:this.dom.box.style.right,left:this.dom.box.style.left},box:{width:this.dom.box.offsetWidth,height:this.dom.box.offsetHeight}};this.options.showStipes&&(k.dot={height:this.dom.dot.offsetHeight,width:this.dom.dot.offsetWidth},k.line={width:this.dom.line.offsetWidth});return k}},{key:"_updateDomComponentsSizes",value:function(k){this.options.rtl?this.dom.box.style.right="0px":
this.dom.box.style.left="0px";this.data.end?this.minWidth=k.box.width:this.width=k.box.width;this.height=k.box.height;this.options.rtl?this.dom.box.style.right=k.previous.right:this.dom.box.style.left=k.previous.left;this.dirty=!1}},{key:"_repaintDomAdditionals",value:function(){this._repaintOnItemUpdateTimeTooltip(this.dom.box)}},{key:"_isStipeVisible",value:function(){return this.minWidth>=this.width||!this.data.end}},{key:"_getFitRange",value:function(){var k=.05*(this.data.max-this.data.min)/
2;return{fitStart:this.data.min-k,fitEnd:this.data.max+k}}},{key:"_fit",value:function(){if(this.emitter){var k=this._getFitRange();this.emitter.emit("fit",{start:new Date(k.fitStart),end:new Date(k.fitEnd),animation:!0})}}},{key:"_getItemData",value:function(){return this.data}}]);return m}(sc);dc.prototype.baseClassName="vis-item vis-range vis-cluster";var vc=function(){function K(m){ka(this,K);this.itemSet=m;this.groups={};this.cache={};this.cache[-1]=[]}ca(K,[{key:"createClusterItem",value:function(m,
k,r){return new dc(m,k,r)}},{key:"setItems",value:function(m,k){this.items=m||[];this.dataChanged=!0;this.applyOnChangedLevel=!1;k&&k.applyOnChangedLevel&&(this.applyOnChangedLevel=k.applyOnChangedLevel)}},{key:"updateData",value:function(){this.dataChanged=!0;this.applyOnChangedLevel=!1}},{key:"getClusters",value:function(m,k,r){var x="boolean"===typeof r?{}:r,J=x.maxItems;(x=x.clusterCriteria)||(x=function(){return!0});J=J||1;var Z=-1,sa=0;if(0<k){if(1<=k)return[];Z=Math.abs(Math.round(Math.log(100/
k)/Math.log(2)));sa=Math.abs(Math.pow(2,Z))}this.dataChanged&&(k=Z!=this.cacheLevel,this.applyOnChangedLevel?k:1)&&(this._dropLevelsCache(),this._filterData());this.cacheLevel=Z;k=this.cache[Z];if(!k){k=[];for(var bb in this.groups)if(this.groups.hasOwnProperty(bb))for(var Ta=this.groups[bb],Pb=Ta.length,ac=0;ac<Pb;){for(var yc=Ta[ac],Pc=1,Bc=ac-1;0<=Bc&&yc.center-Ta[Bc].center<sa/2;)!Ta[Bc].cluster&&x(yc.data,Ta[Bc].data)&&Pc++,Bc--;for(Bc=ac+1;Bc<Ta.length&&Ta[Bc].center-yc.center<sa/2;)x(yc.data,
Ta[Bc].data)&&Pc++,Bc++;for(Bc=k.length-1;0<=Bc&&yc.center-k[Bc].center<sa;)yc.group==k[Bc].group&&x(yc.data,k[Bc].data)&&Pc++,Bc--;if(Pc>J){Pc=Pc-J+1;Bc=[];for(var Hc=ac;Bc.length<Pc&&Hc<Ta.length;)x(Ta[ac].data,Ta[Hc].data)&&Bc.push(Ta[Hc]),Hc++;yc=this.itemSet.getGroupId(yc.data);yc=this._getClusterForItems(Bc,this.itemSet.groups[yc]||this.itemSet.groups.__ungrouped__,m,r);k.push(yc);ac+=Pc}else delete yc.cluster,ac+=1}this.cache[Z]=k}return k}},{key:"_filterData",value:function(){var m={};this.groups=
m;for(var k=0,r=Object.values(this.items);k<r.length;k++){var x=r[k],J=x.parent?x.parent.groupId:"",Z=m[J];Z||(Z=[],m[J]=Z);Z.push(x);x.data.start&&(x.center=x.data.end?(x.data.start.valueOf()+x.data.end.valueOf())/2:x.data.start.valueOf())}for(var sa in m)m.hasOwnProperty(sa)&&m[sa].sort(function(bb,Ta){return bb.center-Ta.center});this.dataChanged=!1}},{key:"_getClusterForItems",value:function(m,k,r,x){r=(r||[]).map(function(yc){return{cluster:yc,itemsIds:new Set(yc.data.uiItems.map(function(Pc){return Pc.id}))}});
if(r.length){var J=!0,Z=!1,sa=void 0;try{for(var bb=function(){var yc=Pb.value;if(yc.itemsIds.size===m.length&&m.every(function(Pc){return yc.itemsIds.has(Pc.id)}))return ac=yc.cluster,"break"},Ta=r[Symbol.iterator](),Pb;!(J=(Pb=Ta.next()).done)&&"break"!==bb();J=!0);}catch(yc){Z=!0,sa=yc}finally{try{if(!J&&null!=Ta["return"])Ta["return"]()}finally{if(Z)throw sa;}}}if(ac)return ac.setUiItems(m),ac.group!==k&&(ac.group&&ac.group.remove(ac),k&&(k.add(ac),ac.group=k)),ac;Ta={toScreen:this.itemSet.body.util.toScreen,
toTime:this.itemSet.body.util.toTime};r=(x.titleTemplate||"").replace(/{count}/,m.length);J='\x3cdiv title\x3d"'+r+'"\x3e'+m.length+"\x3c/div\x3e";x=Object.assign({},x,this.itemSet.options);var ac=this.createClusterItem({content:J,title:r,group:k,uiItems:m,eventEmitter:this.itemSet.body.emitter,range:this.itemSet.body.range},Ta,x);k&&(k.add(ac),ac.group=k);ac.attach();return ac}},{key:"_dropLevelsCache",value:function(){this.cache={};this.cacheLevel=-1;this.cache[this.cacheLevel]=[]}}]);return K}(),
xc=function(K){function m(k,r){ka(this,m);var x=O(this,X(m).call(this));x.body=k;x.defaultOptions={type:null,orientation:{item:"bottom"},align:"auto",stack:!0,stackSubgroups:!0,groupOrderSwap:function(Z,sa,bb){bb=sa.order;sa.order=Z.order;Z.order=bb},groupOrder:"order",selectable:!0,multiselect:!1,longSelectPressTime:251,itemsAlwaysDraggable:{item:!1,range:!1},editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1,overrideItems:!1},groupEditable:{order:!1,add:!1,remove:!1},snap:xa.snap,onDropObjectOnItem:function(Z,
sa,bb){bb(sa)},onAdd:function(Z,sa){sa(Z)},onUpdate:function(Z,sa){sa(Z)},onMove:function(Z,sa){sa(Z)},onRemove:function(Z,sa){sa(Z)},onMoving:function(Z,sa){sa(Z)},onAddGroup:function(Z,sa){sa(Z)},onMoveGroup:function(Z,sa){sa(Z)},onRemoveGroup:function(Z,sa){sa(Z)},margin:{item:{horizontal:10,vertical:10},axis:20},showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:500},tooltipOnItemUpdateTime:!1};x.options=V.extend({},x.defaultOptions);x.options.rtl=r.rtl;x.options.onTimeout=r.onTimeout;
x.conversion={toScreen:k.util.toScreen,toTime:k.util.toTime};x.dom={};x.props={};x.hammer=null;var J=la(x);x.itemsData=null;x.groupsData=null;x.itemsSettingTime=null;x.initialItemSetDrawn=!1;x.userContinueNotBail=null;x.sequentialSelection=!1;x.itemListeners={add:function(Z,sa,bb){J._onAdd(sa.items);J.options.cluster&&J.clusterGenerator.setItems(J.items,{applyOnChangedLevel:!1});J.redraw()},update:function(Z,sa,bb){J._onUpdate(sa.items);J.options.cluster&&J.clusterGenerator.setItems(J.items,{applyOnChangedLevel:!1});
J.redraw()},remove:function(Z,sa,bb){J._onRemove(sa.items);J.options.cluster&&J.clusterGenerator.setItems(J.items,{applyOnChangedLevel:!1});J.redraw()}};x.groupListeners={add:function(Z,sa,bb){J._onAddGroups(sa.items);if(J.groupsData&&0<J.groupsData.length){var Ta=J.groupsData.getDataSet();Ta.get().forEach(function(Pb){if(Pb.nestedGroups){0!=Pb.showNested&&(Pb.showNested=!0);var ac=[];Pb.nestedGroups.forEach(function(yc){if(yc=Ta.get(yc))yc.nestedInGroup=Pb.id,0==Pb.showNested&&(yc.visible=!1),ac=
ac.concat(yc)});Ta.update(ac,bb)}})}},update:function(Z,sa,bb){J._onUpdateGroups(sa.items)},remove:function(Z,sa,bb){J._onRemoveGroups(sa.items)}};x.items={};x.groups={};x.groupIds=[];x.selection=[];x.popup=null;x.popupTimer=null;x.touchParams={};x.groupTouchParams={group:null,isDragging:!1};x._create();x.setOptions(r);x.clusters=[];return x}ua(m,K);ca(m,[{key:"_create",value:function(){var k=this,r=document.createElement("div");r.className="vis-itemset";r["vis-itemset"]=this;this.dom.frame=r;var x=
document.createElement("div");x.className="vis-background";r.appendChild(x);this.dom.background=x;x=document.createElement("div");x.className="vis-foreground";r.appendChild(x);this.dom.foreground=x;r=document.createElement("div");r.className="vis-axis";this.dom.axis=r;r=document.createElement("div");r.className="vis-labelset";this.dom.labelSet=r;this._updateUngrouped();r=new gc("__background__",null,this);r.show();this.groups.__background__=r;this.hammer=new gb(this.body.dom.centerContainer);this.hammer.on("hammer.input",
function(J){J.isFirst&&k._onTouch(J)});this.hammer.on("panstart",this._onDragStart.bind(this));this.hammer.on("panmove",this._onDrag.bind(this));this.hammer.on("panend",this._onDragEnd.bind(this));this.hammer.get("pan").set({threshold:5,direction:gb.ALL});this.hammer.on("tap",this._onSelectItem.bind(this));this.hammer.on("press",this._onMultiSelectItem.bind(this));this.hammer.on("doubletap",this._onAddItem.bind(this));this.groupHammer=this.options.rtl?new gb(this.body.dom.rightContainer):new gb(this.body.dom.leftContainer);
this.groupHammer.on("tap",this._onGroupClick.bind(this));this.groupHammer.on("panstart",this._onGroupDragStart.bind(this));this.groupHammer.on("panmove",this._onGroupDrag.bind(this));this.groupHammer.on("panend",this._onGroupDragEnd.bind(this));this.groupHammer.get("pan").set({threshold:5,direction:gb.DIRECTION_VERTICAL});this.body.dom.centerContainer.addEventListener("mouseover",this._onMouseOver.bind(this));this.body.dom.centerContainer.addEventListener("mouseout",this._onMouseOut.bind(this));this.body.dom.centerContainer.addEventListener("mousemove",
this._onMouseMove.bind(this));this.body.dom.centerContainer.addEventListener("contextmenu",this._onDragEnd.bind(this));this.body.dom.centerContainer.addEventListener("mousewheel",this._onMouseWheel.bind(this));this.show()}},{key:"setOptions",value:function(k){var r=this;k&&(V.selectiveExtend("type rtl align order stack stackSubgroups selectable multiselect sequentialSelection multiselectPerGroup longSelectPressTime groupOrder dataAttributes template groupTemplate visibleFrameTemplate hide snap groupOrderSwap showTooltips tooltip tooltipOnItemUpdateTime groupHeightMode onTimeout".split(" "),
this.options,k),"itemsAlwaysDraggable"in k&&("boolean"===typeof k.itemsAlwaysDraggable?(this.options.itemsAlwaysDraggable.item=k.itemsAlwaysDraggable,this.options.itemsAlwaysDraggable.range=!1):"object"===y(k.itemsAlwaysDraggable)&&(V.selectiveExtend(["item","range"],this.options.itemsAlwaysDraggable,k.itemsAlwaysDraggable),this.options.itemsAlwaysDraggable.item||(this.options.itemsAlwaysDraggable.range=!1))),"sequentialSelection"in k&&"boolean"===typeof k.sequentialSelection&&(this.options.sequentialSelection=
k.sequentialSelection),"orientation"in k&&("string"===typeof k.orientation?this.options.orientation.item="top"===k.orientation?"top":"bottom":"object"===y(k.orientation)&&"item"in k.orientation&&(this.options.orientation.item=k.orientation.item)),"margin"in k&&("number"===typeof k.margin?(this.options.margin.axis=k.margin,this.options.margin.item.horizontal=k.margin,this.options.margin.item.vertical=k.margin):"object"===y(k.margin)&&(V.selectiveExtend(["axis"],this.options.margin,k.margin),"item"in
k.margin&&("number"===typeof k.margin.item?(this.options.margin.item.horizontal=k.margin.item,this.options.margin.item.vertical=k.margin.item):"object"===y(k.margin.item)&&V.selectiveExtend(["horizontal","vertical"],this.options.margin.item,k.margin.item)))),["locale","locales"].forEach(function(x){x in k&&(r.options[x]=k[x])}),"editable"in k&&("boolean"===typeof k.editable?(this.options.editable.updateTime=k.editable,this.options.editable.updateGroup=k.editable,this.options.editable.add=k.editable,
this.options.editable.remove=k.editable,this.options.editable.overrideItems=!1):"object"===y(k.editable)&&V.selectiveExtend(["updateTime","updateGroup","add","remove","overrideItems"],this.options.editable,k.editable)),"groupEditable"in k&&("boolean"===typeof k.groupEditable?(this.options.groupEditable.order=k.groupEditable,this.options.groupEditable.add=k.groupEditable,this.options.groupEditable.remove=k.groupEditable):"object"===y(k.groupEditable)&&V.selectiveExtend(["order","add","remove"],this.options.groupEditable,
k.groupEditable)),"onDropObjectOnItem onAdd onUpdate onRemove onMove onMoving onAddGroup onMoveGroup onRemoveGroup".split(" ").forEach(function(x){var J=k[x];if(J){if("function"!==typeof J)throw Error("option ".concat(x," must be a function ").concat(x,"(item, callback)"));r.options[x]=J}}),k.cluster?(Object.assign(this.options,{cluster:k.cluster}),this.clusterGenerator||(this.clusterGenerator=new vc(this)),this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),this.markDirty({refreshItems:!0,
restackGroups:!0}),this.redraw()):this.clusterGenerator?(this._detachAllClusters(),this.clusters=[],this.clusterGenerator=null,this.options.cluster=void 0,this.markDirty({refreshItems:!0,restackGroups:!0}),this.redraw()):this.markDirty())}},{key:"markDirty",value:function(k){this.groupIds=[];k&&(k.refreshItems&&V.forEach(this.items,function(r){r.dirty=!0;r.displayed&&r.redraw()}),k.restackGroups&&V.forEach(this.groups,function(r,x){"__background__"!==x&&(r.stackDirty=!0)}))}},{key:"destroy",value:function(){this.clearPopupTimer();
this.hide();this.setItems(null);this.setGroups(null);this.hammer&&this.hammer.destroy();this.groupHammer&&this.groupHammer.destroy();this.conversion=this.body=this.hammer=null}},{key:"hide",value:function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame);this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis);this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)}},{key:"show",value:function(){this.dom.frame.parentNode||
this.body.dom.center.appendChild(this.dom.frame);this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis);this.dom.labelSet.parentNode||(this.options.rtl?this.body.dom.right.appendChild(this.dom.labelSet):this.body.dom.left.appendChild(this.dom.labelSet))}},{key:"setPopupTimer",value:function(k){this.clearPopupTimer();k&&(this.popupTimer=setTimeout(function(){k.show()},this.options.tooltip.delay||"number"===typeof this.options.tooltip.delay?this.options.tooltip.delay:
500))}},{key:"clearPopupTimer",value:function(){null!=this.popupTimer&&(clearTimeout(this.popupTimer),this.popupTimer=null)}},{key:"setSelection",value:function(k){void 0==k&&(k=[]);Array.isArray(k)||(k=[k]);var r=this.selection.filter(function(Pc){return-1===k.indexOf(Pc)}),x=!0,J=!1,Z=void 0;try{for(var sa=r[Symbol.iterator](),bb;!(x=(bb=sa.next()).done);x=!0){var Ta=this.getItemById(bb.value);Ta&&Ta.unselect()}}catch(Pc){J=!0,Z=Pc}finally{try{if(!x&&null!=sa["return"])sa["return"]()}finally{if(J)throw Z;
}}this.selection=Ma(k);r=!0;x=!1;J=void 0;try{for(var Pb=k[Symbol.iterator](),ac;!(r=(ac=Pb.next()).done);r=!0){var yc=this.getItemById(ac.value);yc&&yc.select()}}catch(Pc){x=!0,J=Pc}finally{try{if(!r&&null!=Pb["return"])Pb["return"]()}finally{if(x)throw J;}}}},{key:"getSelection",value:function(){return this.selection.concat([])}},{key:"getVisibleItems",value:function(){var k=this.body.range.getRange();if(this.options.rtl){var r=this.body.util.toScreen(k.start);var x=this.body.util.toScreen(k.end)}else x=
this.body.util.toScreen(k.start),r=this.body.util.toScreen(k.end);k=[];for(var J in this.groups)if(this.groups.hasOwnProperty(J)){var Z=this.groups[J];Z=Z.isVisible?Z.visibleItems:[];var sa=!0,bb=!1,Ta=void 0;try{for(var Pb=Z[Symbol.iterator](),ac;!(sa=(ac=Pb.next()).done);sa=!0){var yc=ac.value;this.options.rtl?yc.right<x&&yc.right+yc.width>r&&k.push(yc.id):yc.left<r&&yc.left+yc.width>x&&k.push(yc.id)}}catch(Pc){bb=!0,Ta=Pc}finally{try{if(!sa&&null!=Pb["return"])Pb["return"]()}finally{if(bb)throw Ta;
}}}return k}},{key:"getVisibleGroups",value:function(){var k=[],r;for(r in this.groups)this.groups.hasOwnProperty(r)&&this.groups[r].isVisible&&k.push(r);return k}},{key:"getItemById",value:function(k){return this.items[k]||this.clusters.find(function(r){return r.id===k})}},{key:"_deselect",value:function(k){for(var r=this.selection,x=0,J=r.length;x<J;x++)if(r[x]==k){r.splice(x,1);break}}},{key:"redraw",value:function(){var k=this,r=this.options.margin,x=this.body.range,J=V.option.asSize,Z=this.options,
sa=Z.orientation.item,bb=!1,Ta=this.dom.frame;this.props.top=this.body.domProps.top.height+this.body.domProps.border.top;this.options.rtl?this.props.right=this.body.domProps.right.width+this.body.domProps.border.right:this.props.left=this.body.domProps.left.width+this.body.domProps.border.left;Ta.className="vis-itemset";this.options.cluster&&this._clusterItems();bb=this._orderGroups()||bb;var Pb=x.end-x.start,ac=x.start!=this.lastRangeStart,yc=Z.stack!=this.lastStack,Pc=Z.stackSubgroups!=this.lastStackSubgroups,
Bc=Pb!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth||ac||yc||Pc;this.lastVisibleInterval=Pb;this.lastRangeStart=x.start;this.lastStack=Z.stack;this.lastStackSubgroups=Z.stackSubgroups;this.props.lastWidth=this.props.width;var Hc=this._firstGroup(),gd={item:r.item,axis:r.axis},pd={item:r.item,axis:r.item.vertical/2},cd=0,le=r.axis+r.item.vertical;this.groups.__background__.redraw(x,pd,Bc);var me={},Sd=0;V.forEach(this.groups,function(yd,Wc){"__background__"!==Wc&&(me[Wc]=yd.redraw(x,
yd==Hc?gd:pd,Bc,!0),Sd=me[Wc].length)});0<Sd&&function(){for(var yd={},Wc=function(vd){V.forEach(me,function(Fd,Td){yd[Td]=Fd[vd]()})},Md=0;Md<Sd;Md++)Wc(Md);V.forEach(k.groups,function(vd,Fd){"__background__"!==Fd&&(bb=yd[Fd]||bb,cd+=vd.height)});cd=Math.max(cd,le)}();cd=Math.max(cd,le);Ta.style.height=J(cd);this.props.width=Ta.offsetWidth;this.props.height=cd;this.dom.axis.style.top=J("top"==sa?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height);
this.options.rtl?this.dom.axis.style.right="0":this.dom.axis.style.left="0";this.hammer.get("press").set({time:this.options.longSelectPressTime});this.initialItemSetDrawn=!0;return bb=this._isResized()||bb}},{key:"_firstGroup",value:function(){return this.groups[this.groupIds["top"==this.options.orientation.item?0:this.groupIds.length-1]]||this.groups.__ungrouped__||null}},{key:"_updateUngrouped",value:function(){var k=this.groups.__ungrouped__,r;if(this.groupsData){if(k)for(r in k.dispose(),delete this.groups.__ungrouped__,
this.items)if(this.items.hasOwnProperty(r)){var x=this.items[r];x.parent&&x.parent.remove(x);k=this.getGroupId(x.data);(k=this.groups[k])&&k.add(x)||x.hide()}}else if(!k){k=new Db(null,null,this);this.groups.__ungrouped__=k;for(r in this.items)this.items.hasOwnProperty(r)&&(x=this.items[r],k.add(x));k.show()}}},{key:"getLabelSet",value:function(){return this.dom.labelSet}},{key:"setItems",value:function(k){this.itemsSettingTime=new Date;var r=this,x=this.itemsData;if(k)if(k instanceof cc.DataSet||
k instanceof cc.DataView)this.itemsData=Y(k);else throw new TypeError("Data must be an instance of DataSet or DataView");else this.itemsData=null;x&&(V.forEach(this.itemListeners,function(Z,sa){x.off(sa,Z)}),x.dispose(),k=x.getIds(),this._onRemove(k));if(this.itemsData){var J=this.id;V.forEach(this.itemListeners,function(Z,sa){r.itemsData.on(sa,Z,J)});k=this.itemsData.getIds();this._onAdd(k);this._updateUngrouped()}this.body.emitter.emit("_change",{queue:!0})}},{key:"getItems",value:function(){return null!=
this.itemsData?this.itemsData.rawDS:null}},{key:"setGroups",value:function(k){var r=this;if(this.groupsData){V.forEach(this.groupListeners,function(sa,bb){r.groupsData.off(bb,sa)});var x=this.groupsData.getIds();this.groupsData=null;this._onRemoveGroups(x)}if(k)if(k instanceof cc.DataSet||k instanceof cc.DataView)this.groupsData=k;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.groupsData=null;if(this.groupsData){var J=this.groupsData;this.groupsData instanceof
cc.DataView&&(J=this.groupsData.getDataSet());J.get().forEach(function(sa){sa.nestedGroups&&sa.nestedGroups.forEach(function(bb){bb=J.get(bb);bb.nestedInGroup=sa.id;0==sa.showNested&&(bb.visible=!1);J.update(bb)})});var Z=this.id;V.forEach(this.groupListeners,function(sa,bb){r.groupsData.on(bb,sa,Z)});x=this.groupsData.getIds();this._onAddGroups(x)}this._updateUngrouped();this._order();this.options.cluster&&(this.clusterGenerator.updateData(),this._clusterItems(),this.markDirty({refreshItems:!0,restackGroups:!0}));
this.body.emitter.emit("_change",{queue:!0})}},{key:"getGroups",value:function(){return this.groupsData}},{key:"removeItem",value:function(k){var r=this,x=this.itemsData.get(k);if(x)this.options.onRemove(x,function(J){J&&r.itemsData.remove(k)})}},{key:"_getType",value:function(k){return k.type||this.options.type||(k.end?"range":"box")}},{key:"getGroupId",value:function(k){return"background"==this._getType(k)&&void 0==k.group?"__background__":this.groupsData?k.group:"__ungrouped__"}},{key:"_onUpdate",
value:function(k){var r=this,x=this;k.forEach(function(J){var Z=x.itemsData.get(J),sa=x.items[J],bb=Z?x._getType(Z):null,Ta=m.types[bb];if(sa)if(Ta&&sa instanceof Ta)x._updateItem(sa,Z);else{var Pb=sa.selected;x._removeItem(sa);sa=null}if(!sa&&Z)if(Ta)sa=new Ta(Z,x.conversion,x.options),sa.id=J,x._addItem(sa),Pb&&(r.selection.push(J),sa.select());else throw new TypeError('Unknown item type "'.concat(bb,'"'));});this._order();this.options.cluster&&(this.clusterGenerator.setItems(this.items,{applyOnChangedLevel:!1}),
this._clusterItems());this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemove",value:function(k){var r=0,x=this;k.forEach(function(J){if(J=x.items[J])r++,x._removeItem(J)});r&&(this._order(),this.body.emitter.emit("_change",{queue:!0}))}},{key:"_order",value:function(){V.forEach(this.groups,function(k){k.order()})}},{key:"_onUpdateGroups",value:function(k){this._onAddGroups(k)}},{key:"_onAddGroups",value:function(k){var r=this;k.forEach(function(x){var J=r.groupsData.get(x),Z=r.groups[x];if(Z)Z.setData(J);
else{if("__ungrouped__"==x||"__background__"==x)throw Error("Illegal group id. ".concat(x," is a reserved id."));Z=Object.create(r.options);V.extend(Z,{height:null});Z=new Db(x,J,r);r.groups[x]=Z;for(var sa in r.items)r.items.hasOwnProperty(sa)&&(J=r.items[sa],J.data.group==x&&Z.add(J));Z.order();Z.show()}});this.body.emitter.emit("_change",{queue:!0})}},{key:"_onRemoveGroups",value:function(k){var r=this;k.forEach(function(x){var J=r.groups[x];J&&(J.dispose(),delete r.groups[x])});this.options.cluster&&
(this.clusterGenerator.updateData(),this._clusterItems());this.markDirty({restackGroups:!!this.options.cluster});this.body.emitter.emit("_change",{queue:!0})}},{key:"_orderGroups",value:function(){if(this.groupsData){var k=this.groupsData.getIds({order:this.options.groupOrder});k=this._orderNestedGroups(k);var r=!V.equalArray(k,this.groupIds);if(r){var x=this.groups;k.forEach(function(J){x[J].hide()});k.forEach(function(J){x[J].show()});this.groupIds=k}return r}return!1}},{key:"_orderNestedGroups",
value:function(k){function r(J,Z){var sa=[];Z.forEach(function(bb){sa.push(bb);if(J.groupsData.get(bb).nestedGroups){var Ta=J.groupsData.get({filter:function(Pb){return Pb.nestedInGroup==bb},order:J.options.groupOrder}).map(function(Pb){return Pb.id});sa=sa.concat(r(J,Ta))}});return sa}var x=this;k=k.filter(function(J){return!x.groupsData.get(J).nestedInGroup});return r(this,k)}},{key:"_addItem",value:function(k){this.items[k.id]=k;var r=this.getGroupId(k.data);r=this.groups[r];r?r&&r.data&&r.data.showNested&&
(k.groupShowing=!0):k.groupShowing=!1;r&&r.add(k)}},{key:"_updateItem",value:function(k,r){k.setData(r);r=this.getGroupId(k.data);r=this.groups[r];r?r&&r.data&&r.data.showNested&&(k.groupShowing=!0):k.groupShowing=!1}},{key:"_removeItem",value:function(k){k.hide();delete this.items[k.id];var r=this.selection.indexOf(k.id);-1!=r&&this.selection.splice(r,1);k.parent&&k.parent.remove(k);null!=this.popup&&this.popup.hide()}},{key:"_constructByEndArray",value:function(k){for(var r=[],x=0;x<k.length;x++)k[x]instanceof
ic&&r.push(k[x]);return r}},{key:"_onTouch",value:function(k){this.touchParams.item=this.itemFromTarget(k);this.touchParams.dragLeftItem=k.target.dragLeftItem||!1;this.touchParams.dragRightItem=k.target.dragRightItem||!1;this.touchParams.itemProps=null}},{key:"_getGroupIndex",value:function(k){for(var r=0;r<this.groupIds.length;r++)if(k==this.groupIds[r])return r}},{key:"_onDragStart",value:function(k){var r=this;if(!this.touchParams.itemIsDragging){var x=this.touchParams.item||null,J=this;if(x&&
(x.selected||this.options.itemsAlwaysDraggable.item)){if((!this.options.editable.overrideItems||this.options.editable.updateTime||this.options.editable.updateGroup)&&(null==x.editable||x.editable.updateTime||x.editable.updateGroup||this.options.editable.overrideItems)){var Z=this.touchParams.dragLeftItem,sa=this.touchParams.dragRightItem;this.touchParams.itemIsDragging=!0;this.touchParams.selectedItem=x;if(Z)x={item:Z,initialX:k.center.x,dragLeft:!0,data:this._cloneItemData(x.data)},this.touchParams.itemProps=
[x];else if(sa)x={item:sa,initialX:k.center.x,dragRight:!0,data:this._cloneItemData(x.data)},this.touchParams.itemProps=[x];else if(this.options.editable.add&&(k.srcEvent.ctrlKey||k.srcEvent.metaKey))this._onDragStartAddItem(k);else{1>this.groupIds.length&&this.redraw();var bb=this._getGroupIndex(x.data.group);x=this.options.itemsAlwaysDraggable.item&&!x.selected?[x.id]:this.getSelection();this.touchParams.itemProps=x.map(function(Ta){Ta=J.items[Ta];var Pb=J._getGroupIndex(Ta.data.group);return{item:Ta,
initialX:k.center.x,groupOffset:bb-Pb,data:r._cloneItemData(Ta.data)}})}k.stopPropagation()}}else this.options.editable.add&&(k.srcEvent.ctrlKey||k.srcEvent.metaKey)&&this._onDragStartAddItem(k)}}},{key:"_onDragStartAddItem",value:function(k){var r=this.options.snap||null,x=this.dom.frame.getBoundingClientRect();x=this.body.util.toTime(this.options.rtl?x.right-k.center.x+10:k.center.x-x.left-10);var J=this.body.util.getScale(),Z=this.body.util.getStep();r=r?r(x,J,Z):x;r={type:"range",start:r,end:r,
content:"new item"};x=(0,lb.v4)();r[this.itemsData.idProp]=x;if(J=this.groupFromTarget(k))r.group=J.groupId;J=new ic(r,this.conversion,this.options);J.id=x;J.data=this._cloneItemData(r);this._addItem(J);this.touchParams.selectedItem=J;r={item:J,initialX:k.center.x,data:J.data};this.options.rtl?r.dragLeft=!0:r.dragRight=!0;this.touchParams.itemProps=[r];k.stopPropagation()}},{key:"_onDrag",value:function(k){var r=this;if(null!=this.popup&&this.options.showTooltips&&!this.popup.hidden){var x=this.body.dom.centerContainer,
J=x.getBoundingClientRect();this.popup.setPosition(k.center.x-J.left+x.offsetLeft,k.center.y-J.top+x.offsetTop);this.popup.show()}if(this.touchParams.itemProps){k.stopPropagation();var Z=this,sa=this.options.snap||null;x=this.body.dom.root.offsetLeft;var bb=this.options.rtl?x+this.body.domProps.right.width:x+this.body.domProps.left.width,Ta=this.body.util.getScale(),Pb=this.body.util.getStep(),ac=this.touchParams.selectedItem,yc=(this.options.editable.overrideItems||null==ac.editable)&&this.options.editable.updateGroup||
!this.options.editable.overrideItems&&null!=ac.editable&&ac.editable.updateGroup,Pc=null;yc&&ac&&void 0!=ac.data.group&&(x=Z.groupFromTarget(k))&&(Pc=this._getGroupIndex(x.groupId));this.touchParams.itemProps.forEach(function(Bc){var Hc=Z.body.util.toTime(k.center.x-bb),gd=Z.body.util.toTime(Bc.initialX-bb);var pd=r.options.rtl?-(Hc-gd):Hc-gd;Hc=r._cloneItemData(Bc.item.data);if(null==Bc.item.editable||Bc.item.editable.updateTime||Bc.item.editable.updateGroup||Z.options.editable.overrideItems){if((r.options.editable.overrideItems||
null==ac.editable)&&r.options.editable.updateTime||!r.options.editable.overrideItems&&null!=ac.editable&&ac.editable.updateTime)if(Bc.dragLeft)if(r.options.rtl){if(void 0!=Hc.end){var cd=V.convert(Bc.data.end,"Date");gd=new Date(cd.valueOf()+pd);Hc.end=sa?sa(gd,Ta,Pb):gd}}else void 0!=Hc.start&&(gd=V.convert(Bc.data.start,"Date"),pd=new Date(gd.valueOf()+pd),Hc.start=sa?sa(pd,Ta,Pb):pd);else Bc.dragRight?r.options.rtl?void 0!=Hc.start&&(gd=V.convert(Bc.data.start,"Date"),pd=new Date(gd.valueOf()+
pd),Hc.start=sa?sa(pd,Ta,Pb):pd):void 0!=Hc.end&&(cd=V.convert(Bc.data.end,"Date"),gd=new Date(cd.valueOf()+pd),Hc.end=sa?sa(gd,Ta,Pb):gd):void 0!=Hc.start&&(gd=V.convert(Bc.data.start,"Date").valueOf(),pd=new Date(gd+pd),void 0!=Hc.end?(cd=V.convert(Bc.data.end,"Date"),gd=cd.valueOf()-gd.valueOf(),Hc.start=sa?sa(pd,Ta,Pb):pd,Hc.end=new Date(Hc.start.valueOf()+gd)):Hc.start=sa?sa(pd,Ta,Pb):pd);!yc||Bc.dragLeft||Bc.dragRight||null==Pc||void 0==Hc.group||(gd=Pc-Bc.groupOffset,gd=Math.max(0,gd),gd=Math.min(Z.groupIds.length-
1,gd),Hc.group=Z.groupIds[gd]);Hc=r._cloneItemData(Hc);Z.options.onMoving(Hc,function(le){le&&Bc.item.setData(r._cloneItemData(le,"Date"))})}});this.body.emitter.emit("_change")}}},{key:"_moveToGroup",value:function(k,r){if((r=this.groups[r])&&r.groupId!=k.data.group){var x=k.parent;x.remove(k);x.order();k.data.group=r.groupId;r.add(k);r.order()}}},{key:"_onDragEnd",value:function(k){var r=this;this.touchParams.itemIsDragging=!1;if(this.touchParams.itemProps){k.stopPropagation();var x=this;k=this.touchParams.itemProps;
this.touchParams.itemProps=null;k.forEach(function(J){var Z=J.item.id;if(null==x.itemsData.get(Z))x.options.onAdd(J.item.data,function(bb){x._removeItem(J.item);bb&&x.itemsData.add(bb);x.body.emitter.emit("_change")});else{var sa=r._cloneItemData(J.item.data);x.options.onMove(sa,function(bb){bb?(bb[r.itemsData.idProp]=Z,r.itemsData.update(bb)):(J.item.setData(J.data),x.body.emitter.emit("_change"))})}})}}},{key:"_onGroupClick",value:function(k){var r=this,x=this.groupFromTarget(k);setTimeout(function(){r.toggleGroupShowNested(x)},
1)}},{key:"toggleGroupShowNested",value:function(k){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;if(k&&k.nestedGroups){var x=this.groupsData.getDataSet();k.showNested=void 0!=r?!!r:!k.showNested;var J=x.get(k.groupId);J.showNested=k.showNested;for(var Z=r=k.nestedGroups;0<Z.length;){var sa=Z;Z=[];for(var bb=0;bb<sa.length;bb++){var Ta=x.get(sa[bb]);Ta.nestedGroups&&(Z=Z.concat(Ta.nestedGroups))}0<Z.length&&(r=r.concat(Z))}r=x.get(r).map(function(Pb){void 0==Pb.visible&&(Pb.visible=
!0);Pb.visible=!!J.showNested;return Pb});x.update(r.concat(J));J.showNested?(V.removeClassName(k.dom.label,"collapsed"),V.addClassName(k.dom.label,"expanded")):(V.removeClassName(k.dom.label,"expanded"),V.addClassName(k.dom.label,"collapsed"))}}},{key:"toggleGroupDragClassName",value:function(k){k.dom.label.classList.toggle("vis-group-is-dragging");k.dom.foreground.classList.toggle("vis-group-is-dragging")}},{key:"_onGroupDragStart",value:function(k){!this.groupTouchParams.isDragging&&this.options.groupEditable.order&&
(this.groupTouchParams.group=this.groupFromTarget(k),this.groupTouchParams.group&&(k.stopPropagation(),this.groupTouchParams.isDragging=!0,this.toggleGroupDragClassName(this.groupTouchParams.group),this.groupTouchParams.originalOrder=this.groupsData.getIds({order:this.options.groupOrder})))}},{key:"_onGroupDrag",value:function(k){if(this.options.groupEditable.order&&this.groupTouchParams.group){k.stopPropagation();var r=this.groupsData;this.groupsData instanceof cc.DataView&&(r=this.groupsData.getDataSet());
var x=this.groupFromTarget(k);if(x&&x.height!=this.groupTouchParams.group.height){var J=x.top<this.groupTouchParams.group.top;k=k.center?k.center.y:k.clientY;var Z=x.dom.foreground.getBoundingClientRect(),sa=this.groupTouchParams.group.height;if(J){if(Z.top+sa<k)return}else if(Z.top+x.height-sa>k)return}if(x&&x!=this.groupTouchParams.group&&(x=r.get(x.groupId),(J=r.get(this.groupTouchParams.group.groupId))&&x&&(this.options.groupOrderSwap(J,x,r),r.update(J),r.update(x)),x=r.getIds({order:this.options.groupOrder}),
!V.equalArray(x,this.groupTouchParams.originalOrder))){J=this.groupTouchParams.originalOrder;k=this.groupTouchParams.group.groupId;Z=Math.min(J.length,x.length);for(var bb=sa=0,Ta=0;sa<Z;){for(;sa+bb<Z&&sa+Ta<Z&&x[sa+bb]==J[sa+Ta];)sa++;if(sa+bb>=Z)break;if(x[sa+bb]==k)bb=1;else if(J[sa+Ta]==k)Ta=1;else{var Pb=x.indexOf(J[sa+Ta]),ac=r.get(x[sa+bb]),yc=r.get(J[sa+Ta]);this.options.groupOrderSwap(ac,yc,r);r.update(ac);r.update(yc);ac=x[sa+bb];x[sa+bb]=J[sa+Ta];x[Pb]=ac;sa++}}}}}},{key:"_onGroupDragEnd",
value:function(k){this.groupTouchParams.isDragging=!1;if(this.options.groupEditable.order&&this.groupTouchParams.group){k.stopPropagation();var r=this,x=r.groupTouchParams.group.groupId,J=r.groupsData.getDataSet();k=V.extend({},J.get(x));r.options.onMoveGroup(k,function(Z){if(Z)Z[J._idProp]=x,J.update(Z);else if(Z=J.getIds({order:r.options.groupOrder}),!V.equalArray(Z,r.groupTouchParams.originalOrder))for(var sa=r.groupTouchParams.originalOrder,bb=Math.min(sa.length,Z.length),Ta=0;Ta<bb;){for(;Ta<
bb&&Z[Ta]==sa[Ta];)Ta++;if(Ta>=bb)break;var Pb=Z.indexOf(sa[Ta]),ac=J.get(Z[Ta]),yc=J.get(sa[Ta]);r.options.groupOrderSwap(ac,yc,J);J.update(ac);J.update(yc);ac=Z[Ta];Z[Ta]=sa[Ta];Z[Pb]=ac;Ta++}});r.body.emitter.emit("groupDragged",{groupId:x});this.toggleGroupDragClassName(this.groupTouchParams.group);this.groupTouchParams.group=null}}},{key:"_onSelectItem",value:function(k){if(this.options.selectable){var r=k.srcEvent&&k.srcEvent.shiftKey;if(k.srcEvent&&(k.srcEvent.ctrlKey||k.srcEvent.metaKey)||
r)this._onMultiSelectItem(k);else{r=this.getSelection();var x=this.itemFromTarget(k);this.setSelection(x&&x.selectable?[x.id]:[]);x=this.getSelection();(0<x.length||0<r.length)&&this.body.emitter.emit("select",{items:x,event:k})}}}},{key:"_onMouseOver",value:function(k){var r=this.itemFromTarget(k);if(r){var x=this.itemFromRelatedTarget(k);if(r!==x){x=r.getTitle();if(this.options.showTooltips&&x){null==this.popup&&(this.popup=new fc(this.body.dom.root,this.options.tooltip.overflowMethod||"flip"));
this.popup.setText(x);x=this.body.dom.centerContainer;var J=x.getBoundingClientRect();this.popup.setPosition(k.clientX-J.left+x.offsetLeft,k.clientY-J.top+x.offsetTop);this.setPopupTimer(this.popup)}else this.clearPopupTimer(),null!=this.popup&&this.popup.hide();this.body.emitter.emit("itemover",{item:r.id,event:k})}}}},{key:"_onMouseOut",value:function(k){var r=this.itemFromTarget(k);if(r){var x=this.itemFromRelatedTarget(k);r!==x&&(this.clearPopupTimer(),null!=this.popup&&this.popup.hide(),this.body.emitter.emit("itemout",
{item:r.id,event:k}))}}},{key:"_onMouseMove",value:function(k){if(this.itemFromTarget(k)&&(null!=this.popupTimer&&this.setPopupTimer(this.popup),this.options.showTooltips&&this.options.tooltip.followMouse&&this.popup&&!this.popup.hidden)){var r=this.body.dom.centerContainer,x=r.getBoundingClientRect();this.popup.setPosition(k.clientX-x.left+r.offsetLeft,k.clientY-x.top+r.offsetTop);this.popup.show()}}},{key:"_onMouseWheel",value:function(k){this.touchParams.itemIsDragging&&this._onDragEnd(k)}},{key:"_onUpdateItem",
value:function(k){if(this.options.selectable&&(this.options.editable.updateTime||this.options.editable.updateGroup)){var r=this;k&&(k=r.itemsData.get(k.id),this.options.onUpdate(k,function(x){x&&r.itemsData.update(x)}))}}},{key:"_onDropObjectOnItem",value:function(k){var r=this.itemFromTarget(k);k=JSON.parse(k.dataTransfer.getData("text"));this.options.onDropObjectOnItem(k,r)}},{key:"_onAddItem",value:function(k){if(this.options.selectable&&this.options.editable.add){var r=this,x=this.options.snap||
null,J=this.dom.frame.getBoundingClientRect(),Z=this.options.rtl?J.right-k.center.x:k.center.x-J.left,sa=this.body.util.toTime(Z),bb=this.body.util.getScale(),Ta=this.body.util.getStep();"drop"==k.type?(J=JSON.parse(k.dataTransfer.getData("text")),J.content=J.content?J.content:"new item",J.start=J.start?J.start:x?x(sa,bb,Ta):sa,J.type=J.type||"box",J[this.itemsData.idProp]=J.id||(0,lb.v4)(),"range"!=J.type||J.end||(Z=this.body.util.toTime(Z+this.props.width/5),J.end=x?x(Z,bb,Ta):Z)):(J={start:x?x(sa,
bb,Ta):sa,content:"new item"},J[this.itemsData.idProp]=(0,lb.v4)(),"range"===this.options.type&&(Z=this.body.util.toTime(Z+this.props.width/5),J.end=x?x(Z,bb,Ta):Z));if(x=this.groupFromTarget(k))J.group=x.groupId;J=this._cloneItemData(J);this.options.onAdd(J,function(Pb){Pb&&(r.itemsData.add(Pb),"drop"==k.type&&r.setSelection([Pb.id]))})}}},{key:"_onMultiSelectItem",value:function(k){var r=this;if(this.options.selectable){var x=this.itemFromTarget(k);if(x){var J=this.options.multiselect?this.getSelection():
[];if((k.srcEvent&&k.srcEvent.shiftKey||this.options.sequentialSelection)&&this.options.multiselect){var Z=this.itemsData.get(x.id).group,sa=void 0;this.options.multiselectPerGroup&&0<J.length&&(sa=this.itemsData.get(J[0]).group);this.options.multiselectPerGroup&&void 0!=sa&&sa!=Z||J.push(x.id);x=m._getItemRange(this.itemsData.get(J));if(!this.options.multiselectPerGroup||sa==Z){J=[];for(var bb in this.items)if(this.items.hasOwnProperty(bb)){Z=this.items[bb];var Ta=Z.data.start,Pb=void 0!==Z.data.end?
Z.data.end:Ta;!(Ta>=x.min&&Pb<=x.max)||this.options.multiselectPerGroup&&sa!=this.itemsData.get(Z.id).group||Z instanceof zb||J.push(Z.id)}}}else sa=J.indexOf(x.id),-1==sa?J.push(x.id):J.splice(sa,1);J=J.filter(function(ac){return r.getItemById(ac).selectable});this.setSelection(J);this.body.emitter.emit("select",{items:this.getSelection(),event:k})}}}},{key:"itemFromElement",value:function(k){for(;k;){if(k.hasOwnProperty("vis-item"))return k["vis-item"];k=k.parentNode}return null}},{key:"itemFromTarget",
value:function(k){return this.itemFromElement(k.target)}},{key:"itemFromRelatedTarget",value:function(k){return this.itemFromElement(k.relatedTarget)}},{key:"groupFromTarget",value:function(k){k=k.center?k.center.y:k.clientY;var r=this.groupIds;0>=r.length&&this.groupsData&&(r=this.groupsData.getIds({order:this.options.groupOrder}));for(var x=0;x<r.length;x++){var J=this.groups[r[x]],Z=J.dom.foreground,sa=Z.getBoundingClientRect();if(k>=sa.top&&k<sa.top+Z.offsetHeight)return J;if("top"===this.options.orientation.item){if(x===
this.groupIds.length-1&&k>sa.top)return J}else if(0===x&&k<sa.top+Z.offset)return J}return null}},{key:"_cloneItemData",value:function(k,r){k=V.extend({},k);r||(r=this.itemsData.type);void 0!=k.start&&(k.start=V.convert(k.start,r&&r.start||"Date"));void 0!=k.end&&(k.end=V.convert(k.end,r&&r.end||"Date"));return k}},{key:"_clusterItems",value:function(){if(this.options.cluster){var k=this.body.range.conversion(this.body.domProps.center.width).scale;k=this.clusterGenerator.getClusters(this.clusters,
k,this.options.cluster);if(this.clusters!=k){this._detachAllClusters();if(k){var r=!0,x=!1,J=void 0;try{for(var Z=k[Symbol.iterator](),sa;!(r=(sa=Z.next()).done);r=!0)sa.value.attach()}catch(bb){x=!0,J=bb}finally{try{if(!r&&null!=Z["return"])Z["return"]()}finally{if(x)throw J;}}this.clusters=k}this._updateClusters(k)}}}},{key:"_detachAllClusters",value:function(){if(this.options.cluster&&this.clusters&&this.clusters.length){var k=!0,r=!1,x=void 0;try{for(var J=this.clusters[Symbol.iterator](),Z;!(k=
(Z=J.next()).done);k=!0)Z.value.detach()}catch(sa){r=!0,x=sa}finally{try{if(!k&&null!=J["return"])J["return"]()}finally{if(r)throw x;}}}}},{key:"_updateClusters",value:function(k){if(this.clusters&&this.clusters.length){var r=new Set(k.map(function(Pc){return Pc.id})),x=this.clusters.filter(function(Pc){return!r.has(Pc.id)}),J=!1,Z=!0,sa=!1,bb=void 0;try{for(var Ta=x[Symbol.iterator](),Pb;!(Z=(Pb=Ta.next()).done);Z=!0){var ac=Pb.value,yc=this.selection.indexOf(ac.id);-1!==yc&&(ac.unselect(),this.selection.splice(yc,
1),J=!0)}}catch(Pc){sa=!0,bb=Pc}finally{try{if(!Z&&null!=Ta["return"])Ta["return"]()}finally{if(sa)throw bb;}}J&&(x=this.getSelection(),this.body.emitter.emit("select",{items:x,event:event}))}this.clusters=k||[]}}],[{key:"_getItemRange",value:function(k){var r=null,x=null;k.forEach(function(J){if(null==x||J.start<x)x=J.start;if(void 0!=J.end){if(null==r||J.end>r)r=J.end}else if(null==r||J.start>r)r=J.start});return{min:x,max:r}}},{key:"itemSetFromTarget",value:function(k){for(k=k.target;k;){if(k.hasOwnProperty("vis-itemset"))return k["vis-itemset"];
k=k.parentNode}return null}}]);return m}(hb);xc.types={background:zb,box:wc,range:ic,point:Mc};xc.prototype._onAdd=xc.prototype._onUpdate;var Vc=!1,bd,Uc=function(){function K(){ka(this,K)}ca(K,null,[{key:"validate",value:function(m,k,r){Vc=!1;var x=bd=k;void 0!==r&&(x=k[r]);K.parse(m,x,[]);return Vc}},{key:"parse",value:function(m,k,r){for(var x in m)m.hasOwnProperty(x)&&K.check(x,m,k,r)}},{key:"check",value:function(m,k,r,x){if(void 0===r[m]&&void 0===r.__any__)K.getSuggestion(m,r,x);else{var J=
m,Z=!0;void 0===r[m]&&void 0!==r.__any__&&(J="__any__",Z="object"===K.getType(k[m]));var sa=r[J];Z&&void 0!==sa.__type__&&(sa=sa.__type__);K.checkFields(m,k,r,J,sa,x)}}},{key:"checkFields",value:function(m,k,r,x,J,Z){var sa=function(Pb){console.log("%c"+Pb+K.printLocation(Z,m),"background: #FFeeee; color: #dd0000")},bb=K.getType(k[m]),Ta=J[bb];void 0!==Ta?"array"===K.getType(Ta)&&-1===Ta.indexOf(k[m])?(sa('Invalid option detected in "'+m+'". Allowed values are:'+K.print(Ta)+' not "'+k[m]+'". '),Vc=
!0):"object"===bb&&"__any__"!==x&&(Z=V.copyAndExtendArray(Z,m),K.parse(k[m],r[x],Z)):void 0===J.any&&(sa('Invalid type received for "'+m+'". Expected: '+K.print(Object.keys(J))+". Received ["+bb+'] "'+k[m]+'"'),Vc=!0)}},{key:"getType",value:function(m){var k=y(m);return"object"===k?null===m?"null":m instanceof Boolean?"boolean":m instanceof Number?"number":m instanceof String?"string":Array.isArray(m)?"array":m instanceof Date?"date":void 0!==m.nodeType?"dom":!0===m._isAMomentObject?"moment":"object":
"number"===k?"number":"boolean"===k?"boolean":"string"===k?"string":void 0===k?"undefined":k}},{key:"getSuggestion",value:function(m,k,r){var x=K.findInOptions(m,k,r,!1),J=K.findInOptions(m,bd,[],!0);k=void 0!==x.indexMatch?" in "+K.printLocation(x.path,m,"")+'Perhaps it was incomplete? Did you mean: "'+x.indexMatch+'"?\n\n':4>=J.distance&&x.distance>J.distance?" in "+K.printLocation(x.path,m,"")+"Perhaps it was misplaced? Matching option found at: "+K.printLocation(J.path,J.closestMatch,""):8>=x.distance?
'. Did you mean "'+x.closestMatch+'"?'+K.printLocation(x.path,m):". Did you mean one of these: "+K.print(Object.keys(k))+K.printLocation(r,m);console.log('%cUnknown option detected: "'+m+'"'+k,"background: #FFeeee; color: #dd0000");Vc=!0}},{key:"findInOptions",value:function(m,k,r){var x=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,J=1E9,Z="",sa=[],bb=m.toLowerCase(),Ta=void 0,Pb;for(Pb in k)if(void 0!==k[Pb].__type__&&!0===x){var ac=K.findInOptions(m,k[Pb],V.copyAndExtendArray(r,Pb));
J>ac.distance&&(Z=ac.closestMatch,sa=ac.path,J=ac.distance,Ta=ac.indexMatch)}else-1!==Pb.toLowerCase().indexOf(bb)&&(Ta=Pb),ac=K.levenshteinDistance(m,Pb),J>ac&&(Z=Pb,sa=V.copyArray(r),J=ac);return{closestMatch:Z,path:sa,distance:J,indexMatch:Ta}}},{key:"printLocation",value:function(m,k){for(var r="\n\n"+(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options \x3d {\n",x=0;x<m.length;x++){for(var J=0;J<x+1;J++)r+="  ";r+=m[x]+": {\n"}for(x=0;x<m.length+1;x++)r+=
"  ";r+=k+"\n";for(x=0;x<m.length+1;x++){for(J=0;J<m.length-x;J++)r+="  ";r+="}\n"}return r+"\n\n"}},{key:"print",value:function(m){return JSON.stringify(m).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(m,k){if(0===m.length)return k.length;if(0===k.length)return m.length;var r=[],x;for(x=0;x<=k.length;x++)r[x]=[x];var J;for(J=0;J<=m.length;J++)r[0][J]=J;for(x=1;x<=k.length;x++)for(J=1;J<=m.length;J++)k.charAt(x-1)==m.charAt(J-1)?r[x][J]=
r[x-1][J-1]:r[x][J]=Math.min(r[x-1][J-1]+1,Math.min(r[x][J-1]+1,r[x-1][J]+1));return r[k.length][m.length]}}]);return K}(),F={configure:{enabled:{"boolean":"boolean"},filter:{"boolean":"boolean","function":"function"},container:{dom:"dom"},__type__:{object:"object","boolean":"boolean","function":"function"}},align:{string:"string"},alignCurrentTime:{string:"string",undefined:"undefined"},rtl:{"boolean":"boolean",undefined:"undefined"},rollingMode:{follow:{"boolean":"boolean"},offset:{number:"number",
undefined:"undefined"},__type__:{object:"object"}},onTimeout:{timeoutMs:{number:"number"},callback:{"function":"function"},__type__:{object:"object"}},verticalScroll:{"boolean":"boolean",undefined:"undefined"},horizontalScroll:{"boolean":"boolean",undefined:"undefined"},autoResize:{"boolean":"boolean"},throttleRedraw:{number:"number"},clickToUse:{"boolean":"boolean"},dataAttributes:{string:"string",array:"array"},editable:{add:{"boolean":"boolean",undefined:"undefined"},remove:{"boolean":"boolean",
undefined:"undefined"},updateGroup:{"boolean":"boolean",undefined:"undefined"},updateTime:{"boolean":"boolean",undefined:"undefined"},overrideItems:{"boolean":"boolean",undefined:"undefined"},__type__:{"boolean":"boolean",object:"object"}},end:{number:"number",date:"date",string:"string",moment:"moment"},format:{minorLabels:{millisecond:{string:"string",undefined:"undefined"},second:{string:"string",undefined:"undefined"},minute:{string:"string",undefined:"undefined"},hour:{string:"string",undefined:"undefined"},
weekday:{string:"string",undefined:"undefined"},day:{string:"string",undefined:"undefined"},week:{string:"string",undefined:"undefined"},month:{string:"string",undefined:"undefined"},year:{string:"string",undefined:"undefined"},__type__:{object:"object","function":"function"}},majorLabels:{millisecond:{string:"string",undefined:"undefined"},second:{string:"string",undefined:"undefined"},minute:{string:"string",undefined:"undefined"},hour:{string:"string",undefined:"undefined"},weekday:{string:"string",
undefined:"undefined"},day:{string:"string",undefined:"undefined"},week:{string:"string",undefined:"undefined"},month:{string:"string",undefined:"undefined"},year:{string:"string",undefined:"undefined"},__type__:{object:"object","function":"function"}},__type__:{object:"object"}},moment:{"function":"function"},groupHeightMode:{string:"string"},groupOrder:{string:"string","function":"function"},groupEditable:{add:{"boolean":"boolean",undefined:"undefined"},remove:{"boolean":"boolean",undefined:"undefined"},
order:{"boolean":"boolean",undefined:"undefined"},__type__:{"boolean":"boolean",object:"object"}},groupOrderSwap:{"function":"function"},height:{string:"string",number:"number"},hiddenDates:{start:{date:"date",number:"number",string:"string",moment:"moment"},end:{date:"date",number:"number",string:"string",moment:"moment"},repeat:{string:"string"},__type__:{object:"object",array:"array"}},itemsAlwaysDraggable:{item:{"boolean":"boolean",undefined:"undefined"},range:{"boolean":"boolean",undefined:"undefined"},
__type__:{"boolean":"boolean",object:"object"}},limitSize:{"boolean":"boolean"},locale:{string:"string"},locales:{__any__:{any:"any"},__type__:{object:"object"}},longSelectPressTime:{number:"number"},margin:{axis:{number:"number"},item:{horizontal:{number:"number",undefined:"undefined"},vertical:{number:"number",undefined:"undefined"},__type__:{object:"object",number:"number"}},__type__:{object:"object",number:"number"}},max:{date:"date",number:"number",string:"string",moment:"moment"},maxHeight:{number:"number",
string:"string"},maxMinorChars:{number:"number"},min:{date:"date",number:"number",string:"string",moment:"moment"},minHeight:{number:"number",string:"string"},moveable:{"boolean":"boolean"},multiselect:{"boolean":"boolean"},multiselectPerGroup:{"boolean":"boolean"},onAdd:{"function":"function"},onDropObjectOnItem:{"function":"function"},onUpdate:{"function":"function"},onMove:{"function":"function"},onMoving:{"function":"function"},onRemove:{"function":"function"},onAddGroup:{"function":"function"},
onMoveGroup:{"function":"function"},onRemoveGroup:{"function":"function"},onInitialDrawComplete:{"function":"function"},order:{"function":"function"},orientation:{axis:{string:"string",undefined:"undefined"},item:{string:"string",undefined:"undefined"},__type__:{string:"string",object:"object"}},selectable:{"boolean":"boolean"},sequentialSelection:{"boolean":"boolean"},showCurrentTime:{"boolean":"boolean"},showMajorLabels:{"boolean":"boolean"},showMinorLabels:{"boolean":"boolean"},showWeekScale:{"boolean":"boolean"},
stack:{"boolean":"boolean"},stackSubgroups:{"boolean":"boolean"},cluster:{maxItems:{number:"number",undefined:"undefined"},titleTemplate:{string:"string",undefined:"undefined"},clusterCriteria:{"function":"function",undefined:"undefined"},showStipes:{"boolean":"boolean",undefined:"undefined"},fitOnDoubleClick:{"boolean":"boolean",undefined:"undefined"},__type__:{"boolean":"boolean",object:"object"}},snap:{"function":"function","null":"null"},start:{date:"date",number:"number",string:"string",moment:"moment"},
template:{"function":"function"},loadingScreenTemplate:{"function":"function"},groupTemplate:{"function":"function"},visibleFrameTemplate:{string:"string","function":"function"},showTooltips:{"boolean":"boolean"},tooltip:{followMouse:{"boolean":"boolean"},overflowMethod:{string:["cap","flip","none"]},delay:{number:"number"},template:{"function":"function"},__type__:{object:"object"}},tooltipOnItemUpdateTime:{template:{"function":"function"},__type__:{"boolean":"boolean",object:"object"}},timeAxis:{scale:{string:"string",
undefined:"undefined"},step:{number:"number",undefined:"undefined"},__type__:{object:"object"}},type:{string:"string"},width:{string:"string",number:"number"},preferZoom:{"boolean":"boolean"},zoomable:{"boolean":"boolean"},zoomKey:{string:["ctrlKey","altKey","shiftKey","metaKey",""]},zoomFriction:{number:"number"},zoomMax:{number:"number"},zoomMin:{number:"number"},__type__:{object:"object"}},M={global:{align:["center","left","right"],alignCurrentTime:"none year month quarter week isoWeek day date hour minute second".split(" "),
direction:!1,autoResize:!0,clickToUse:!1,editable:{add:!1,remove:!1,updateGroup:!1,updateTime:!1},end:"",format:{minorLabels:{millisecond:"SSS",second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",year:""}},groupHeightMode:["auto","fixed","fitItems"],groupsDraggable:!1,height:"",locale:"",longSelectPressTime:251,
margin:{axis:[20,0,100,1],item:{horizontal:[10,0,100,1],vertical:[10,0,100,1]}},max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!1,multiselect:!1,multiselectPerGroup:!1,orientation:{axis:["both","bottom","top"],item:["bottom","top"]},preferZoom:!1,selectable:!0,showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,stack:!0,stackSubgroups:!0,cluster:!1,start:"",showTooltips:!0,tooltip:{followMouse:!1,overflowMethod:"flip",delay:[500,0,99999,100]},tooltipOnItemUpdateTime:!1,
type:["box","point","range","background"],width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","shiftKey","metaKey",""],zoomMax:[31536E10,10,31536E10,1],zoomMin:[10,10,31536E10,1]}},da={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",
dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",
lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",
lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",
palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",
orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Aa=function(){function K(){var m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;ka(this,
K);this.pixelRatio=m;this.generated=!1;this.centerCoordinates={x:144.5,y:144.5};this.r=289*.49;this.color={r:255,g:255,b:255,a:1};this.hueCircle=void 0;this.initialColor={r:255,g:255,b:255,a:1};this.previousColor=void 0;this.applied=!1;this.updateCallback=function(){};this.closeCallback=function(){};this._create()}ca(K,[{key:"insertTo",value:function(m){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0);this.container=m;this.container.appendChild(this.frame);this._bindHammer();this._setSize()}},
{key:"setUpdateCallback",value:function(m){if("function"===typeof m)this.updateCallback=m;else throw Error("Function attempted to set as colorPicker update callback is not a function.");}},{key:"setCloseCallback",value:function(m){if("function"===typeof m)this.closeCallback=m;else throw Error("Function attempted to set as colorPicker closing callback is not a function.");}},{key:"_isColorString",value:function(m){if("string"===typeof m)return da[m]}},{key:"setColor",value:function(m){var k=1<arguments.length&&
void 0!==arguments[1]?arguments[1]:!0;if("none"!==m){var r=this._isColorString(m);void 0!==r&&(m=r);if(!0===V.isString(m))if(!0===V.isValidRGB(m)){var x=m.substr(4).substr(0,m.length-5).split(",");x={r:x[0],g:x[1],b:x[2],a:1}}else!0===V.isValidRGBA(m)?(x=m.substr(5).substr(0,m.length-6).split(","),x={r:x[0],g:x[1],b:x[2],a:x[3]}):!0===V.isValidHex(m)&&(x=V.hexToRGB(m),x={r:x.r,g:x.g,b:x.b,a:1});else m instanceof Object&&void 0!==m.r&&void 0!==m.g&&void 0!==m.b&&(x={r:m.r,g:m.g,b:m.b,a:void 0!==m.a?
m.a:"1.0"});if(void 0===x)throw Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+JSON.stringify(m));this._setColor(x,k)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0);this.applied=!1;this.frame.style.display="block";this._generateHueCircle()}},{key:"_hide",value:function(){var m=this;!0===(0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0)&&(this.previousColor=
V.extend({},this.color));!0===this.applied&&this.updateCallback(this.initialColor);this.frame.style.display="none";setTimeout(function(){void 0!==m.closeCallback&&(m.closeCallback(),m.closeCallback=void 0)},0)}},{key:"_save",value:function(){this.updateCallback(this.color);this.applied=!1;this._hide()}},{key:"_apply",value:function(){this.applied=!0;this.updateCallback(this.color);this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,
!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(m){!0===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0)&&(this.initialColor=V.extend({},m));this.color=m;var k=V.RGBToHSV(m.r,m.g,m.b),r=2*Math.PI,x=this.r*k.s,J=this.centerCoordinates.y+x*Math.cos(r*k.h);this.colorPickerSelector.style.left=this.centerCoordinates.x+x*Math.sin(r*k.h)-.5*this.colorPickerSelector.clientWidth+"px";this.colorPickerSelector.style.top=J-.5*this.colorPickerSelector.clientHeight+"px";
this._updatePicker(m)}},{key:"_setOpacity",value:function(m){this.color.a=m/100;this._updatePicker(this.color)}},{key:"_setBrightness",value:function(m){var k=V.RGBToHSV(this.color.r,this.color.g,this.color.b);k.v=m/100;m=V.HSVToRGB(k.h,k.s,k.v);m.a=this.color.a;this.color=m;this._updatePicker()}},{key:"_updatePicker",value:function(){var m=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.color,k=V.RGBToHSV(m.r,m.g,m.b),r=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&
(this.pixelRatio=(window.devicePixelRatio||1)/(r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1));r.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);r.clearRect(0,0,this.colorPickerCanvas.clientWidth,this.colorPickerCanvas.clientHeight);r.putImageData(this.hueCircle,0,0);r.fillStyle="rgba(0,0,0,"+(1-k.v)+")";r.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);r.fill();this.brightnessRange.value=
100*k.v;this.opacityRange.value=100*m.a;this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")";this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%";this.colorPickerCanvas.style.height="100%";this.colorPickerCanvas.width=289*this.pixelRatio;this.colorPickerCanvas.height=
289*this.pixelRatio}},{key:"_create",value:function(){this.frame=document.createElement("div");this.frame.className="vis-color-picker";this.colorPickerDiv=document.createElement("div");this.colorPickerSelector=document.createElement("div");this.colorPickerSelector.className="vis-selector";this.colorPickerDiv.appendChild(this.colorPickerSelector);this.colorPickerCanvas=document.createElement("canvas");this.colorPickerDiv.appendChild(this.colorPickerCanvas);if(this.colorPickerCanvas.getContext){var m=
this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1);this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else m=document.createElement("DIV"),m.style.color="red",m.style.fontWeight="bold",m.style.padding="10px",m.innerHTML="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(m);
this.colorPickerDiv.className="vis-color";this.opacityDiv=document.createElement("div");this.opacityDiv.className="vis-opacity";this.brightnessDiv=document.createElement("div");this.brightnessDiv.className="vis-brightness";this.arrowDiv=document.createElement("div");this.arrowDiv.className="vis-arrow";this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(r){}this.opacityRange.value="100";this.opacityRange.className=
"vis-range";this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(r){}this.brightnessRange.value="100";this.brightnessRange.className="vis-range";this.opacityDiv.appendChild(this.opacityRange);this.brightnessDiv.appendChild(this.brightnessRange);var k=this;this.opacityRange.onchange=function(){k._setOpacity(this.value)};this.opacityRange.oninput=function(){k._setOpacity(this.value)};this.brightnessRange.onchange=
function(){k._setBrightness(this.value)};this.brightnessRange.oninput=function(){k._setBrightness(this.value)};this.brightnessLabel=document.createElement("div");this.brightnessLabel.className="vis-label vis-brightness";this.brightnessLabel.innerHTML="brightness:";this.opacityLabel=document.createElement("div");this.opacityLabel.className="vis-label vis-opacity";this.opacityLabel.innerHTML="opacity:";this.newColorDiv=document.createElement("div");this.newColorDiv.className="vis-new-color";this.newColorDiv.innerHTML=
"new";this.initialColorDiv=document.createElement("div");this.initialColorDiv.className="vis-initial-color";this.initialColorDiv.innerHTML="initial";this.cancelButton=document.createElement("div");this.cancelButton.className="vis-button vis-cancel";this.cancelButton.innerHTML="cancel";this.cancelButton.onclick=this._hide.bind(this,!1);this.applyButton=document.createElement("div");this.applyButton.className="vis-button vis-apply";this.applyButton.innerHTML="apply";this.applyButton.onclick=this._apply.bind(this);
this.saveButton=document.createElement("div");this.saveButton.className="vis-button vis-save";this.saveButton.innerHTML="save";this.saveButton.onclick=this._save.bind(this);this.loadButton=document.createElement("div");this.loadButton.className="vis-button vis-load";this.loadButton.innerHTML="load last";this.loadButton.onclick=this._loadLast.bind(this);this.frame.appendChild(this.colorPickerDiv);this.frame.appendChild(this.arrowDiv);this.frame.appendChild(this.brightnessLabel);this.frame.appendChild(this.brightnessDiv);
this.frame.appendChild(this.opacityLabel);this.frame.appendChild(this.opacityDiv);this.frame.appendChild(this.newColorDiv);this.frame.appendChild(this.initialColorDiv);this.frame.appendChild(this.cancelButton);this.frame.appendChild(this.applyButton);this.frame.appendChild(this.saveButton);this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var m=this;this.drag={};this.pinch={};this.hammer=new gb(this.colorPickerCanvas);this.hammer.get("pinch").set({enable:!0});G(this.hammer,
function(k){m._moveSelector(k)});this.hammer.on("tap",function(k){m._moveSelector(k)});this.hammer.on("panstart",function(k){m._moveSelector(k)});this.hammer.on("panmove",function(k){m._moveSelector(k)});this.hammer.on("panend",function(k){m._moveSelector(k)})}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var m=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||
m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1));m.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var k=this.colorPickerCanvas.clientWidth,r=this.colorPickerCanvas.clientHeight;m.clearRect(0,0,k,r);var x,J;this.centerCoordinates={x:.5*k,y:.5*r};this.r=.49*k;var Z=2*Math.PI/360,sa=1/360,bb=1/this.r;for(x=0;360>x;x++)for(J=0;J<this.r;J++){var Ta=this.centerCoordinates.x+J*Math.sin(Z*x);var Pb=this.centerCoordinates.y+J*Math.cos(Z*x);var ac=V.HSVToRGB(x*sa,
J*bb,1);m.fillStyle="rgb("+ac.r+","+ac.g+","+ac.b+")";m.fillRect(Ta-.5,Pb-.5,2,2)}m.strokeStyle="rgba(0,0,0,1)";m.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r);m.stroke();this.hueCircle=m.getImageData(0,0,k,r)}this.generated=!0}},{key:"_moveSelector",value:function(m){var k=this.colorPickerDiv.getBoundingClientRect(),r=.5*this.colorPickerDiv.clientHeight,x=.5*this.colorPickerDiv.clientWidth,J=m.center.x-k.left-x;k=m.center.y-k.top-r;m=Math.atan2(J,k);J=.98*Math.min(Math.sqrt(J*
J+k*k),x);x=Math.sin(m)*J+x;this.colorPickerSelector.style.top=Math.cos(m)*J+r-.5*this.colorPickerSelector.clientHeight+"px";this.colorPickerSelector.style.left=x-.5*this.colorPickerSelector.clientWidth+"px";r=m/(2*Math.PI);r=0>r?r+1:r;x=J/this.r;J=V.RGBToHSV(this.color.r,this.color.g,this.color.b);J.h=r;J.s=x;r=V.HSVToRGB(J.h,J.s,J.v);r.a=this.color.a;this.color=r;this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+
")";this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]);return K}(),Wa=function(){function K(m,k,r){var x=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;ka(this,K);this.parent=m;this.changedOptions=[];this.container=k;this.allowCreation=!1;this.options={};this.initialized=!1;this.popupCounter=0;this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0};V.extend(this.options,this.defaultOptions);this.configureOptions=
r;this.moduleOptions={};this.domElements=[];this.popupDiv={};this.popupLimit=5;this.popupHistory={};this.colorPicker=new Aa(x);this.wrapper=void 0}ca(K,[{key:"setOptions",value:function(m){if(void 0!==m){this.popupHistory={};this._removePopup();var k=!0;if("string"===typeof m)this.options.filter=m;else if(m instanceof Array)this.options.filter=m.join();else if("object"===y(m)){if(null==m)throw new TypeError("options cannot be null");void 0!==m.container&&(this.options.container=m.container);void 0!==
m.filter&&(this.options.filter=m.filter);void 0!==m.showButton&&(this.options.showButton=m.showButton);void 0!==m.enabled&&(k=m.enabled)}else"boolean"===typeof m?(this.options.filter=!0,k=m):"function"===typeof m&&(this.options.filter=m,k=!0);!1===this.options.filter&&(k=!1);this.options.enabled=k}this._clean()}},{key:"setModuleOptions",value:function(m){this.moduleOptions=m;!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},
{key:"_create",value:function(){this._clean();this.changedOptions=[];var m=this.options.filter,k=0,r;for(r in this.configureOptions)if(this.configureOptions.hasOwnProperty(r)){var x=this.allowCreation=!1;if("function"===typeof m)x=(x=m(r,[]))||this._handleObject(this.configureOptions[r],[r],!0);else if(!0===m||-1!==m.indexOf(r))x=!0;!1!==x&&(this.allowCreation=!0,0<k&&this._makeItem([]),this._makeHeader(r),this._handleObject(this.configureOptions[r],[r]));k++}this._makeButton();this._push()}},{key:"_push",
value:function(){this.wrapper=document.createElement("div");this.wrapper.className="vis-configuration-wrapper";this.container.appendChild(this.wrapper);for(var m=0;m<this.domElements.length;m++)this.wrapper.appendChild(this.domElements[m]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var m=0;m<this.domElements.length;m++)this.wrapper.removeChild(this.domElements[m]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0);this.domElements=[];this._removePopup()}},
{key:"_getValue",value:function(m){for(var k=this.moduleOptions,r=0;r<m.length;r++)if(void 0!==k[m[r]])k=k[m[r]];else{k=void 0;break}return k}},{key:"_makeItem",value:function(m){if(!0===this.allowCreation){var k=document.createElement("div");k.className="vis-configuration vis-config-item vis-config-s"+m.length;for(var r=arguments.length,x=Array(1<r?r-1:0),J=1;J<r;J++)x[J-1]=arguments[J];x.forEach(function(Z){k.appendChild(Z)});this.domElements.push(k);return this.domElements.length}return 0}},{key:"_makeHeader",
value:function(m){var k=document.createElement("div");k.className="vis-configuration vis-config-header";k.innerHTML=m;this._makeItem([],k)}},{key:"_makeLabel",value:function(m,k){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,x=document.createElement("div");x.className="vis-configuration vis-config-label vis-config-s"+k.length;x.innerHTML=!0===r?"\x3ci\x3e\x3cb\x3e"+m+":\x3c/b\x3e\x3c/i\x3e":m+":";return x}},{key:"_makeDropdown",value:function(m,k,r){var x=document.createElement("select");
x.className="vis-configuration vis-config-select";var J=0;void 0!==k&&-1!==m.indexOf(k)&&(J=m.indexOf(k));for(k=0;k<m.length;k++){var Z=document.createElement("option");Z.value=m[k];k===J&&(Z.selected="selected");Z.innerHTML=m[k];x.appendChild(Z)}var sa=this;x.onchange=function(){sa._update(this.value,r)};m=this._makeLabel(r[r.length-1],r);this._makeItem(r,m,x)}},{key:"_makeRange",value:function(m,k,r){var x=m[0],J=m[1],Z=m[2],sa=m[3];m=document.createElement("input");m.className="vis-configuration vis-config-range";
try{m.type="range",m.min=J,m.max=Z}catch(ac){}m.step=sa;sa="";var bb=0;void 0!==k?(0>k&&1.2*k<J?(m.min=Math.ceil(1.2*k),bb=m.min,sa="range increased"):k/1.2<J&&(m.min=Math.ceil(k/1.2),bb=m.min,sa="range increased"),1.2*k>Z&&1!==Z&&(m.max=Math.ceil(1.2*k),bb=m.max,sa="range increased"),m.value=k):m.value=x;var Ta=document.createElement("input");Ta.className="vis-configuration vis-config-rangeinput";Ta.value=Number(m.value);var Pb=this;m.onchange=function(){Ta.value=this.value;Pb._update(Number(this.value),
r)};m.oninput=function(){Ta.value=this.value};k=this._makeLabel(r[r.length-1],r);k=this._makeItem(r,k,m,Ta);""!==sa&&this.popupHistory[k]!==bb&&(this.popupHistory[k]=bb,this._setupPopup(sa,k))}},{key:"_makeButton",value:function(){var m=this;if(!0===this.options.showButton){var k=document.createElement("div");k.className="vis-configuration vis-config-button";k.innerHTML="generate options";k.onclick=function(){m._printOptions()};k.onmouseover=function(){k.className="vis-configuration vis-config-button hover"};
k.onmouseout=function(){k.className="vis-configuration vis-config-button"};this.optionsContainer=document.createElement("div");this.optionsContainer.className="vis-configuration vis-config-option-container";this.domElements.push(this.optionsContainer);this.domElements.push(k)}}},{key:"_setupPopup",value:function(m,k){var r=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var x=document.createElement("div");x.id="vis-configuration-popup";x.className="vis-configuration-popup";
x.innerHTML=m;x.onclick=function(){r._removePopup()};this.popupCounter+=1;this.popupDiv={html:x,index:k}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var m=this;if(void 0!==this.popupDiv.html){var k=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=
k.left+"px";this.popupDiv.html.style.top=k.top-30+"px";document.body.appendChild(this.popupDiv.html);this.popupDiv.hideTimeout=setTimeout(function(){m.popupDiv.html.style.opacity=0},1500);this.popupDiv.deleteTimeout=setTimeout(function(){m._removePopup()},1800)}}},{key:"_makeCheckbox",value:function(m,k,r){var x=document.createElement("input");x.type="checkbox";x.className="vis-configuration vis-config-checkbox";x.checked=m;void 0!==k&&(x.checked=k,k!==m&&("object"===y(m)?k!==m.enabled&&this.changedOptions.push({path:r,
value:k}):this.changedOptions.push({path:r,value:k})));var J=this;x.onchange=function(){J._update(this.checked,r)};m=this._makeLabel(r[r.length-1],r);this._makeItem(r,m,x)}},{key:"_makeTextInput",value:function(m,k,r){var x=document.createElement("input");x.type="text";x.className="vis-configuration vis-config-text";x.value=k;k!==m&&this.changedOptions.push({path:r,value:k});var J=this;x.onchange=function(){J._update(this.value,r)};m=this._makeLabel(r[r.length-1],r);this._makeItem(r,m,x)}},{key:"_makeColorField",
value:function(m,k,r){var x=this;m=m[1];var J=document.createElement("div");k=void 0===k?m:k;"none"!==k?(J.className="vis-configuration vis-config-colorBlock",J.style.backgroundColor=k):J.className="vis-configuration vis-config-colorBlock none";k=void 0===k?m:k;J.onclick=function(){x._showColorPicker(k,J,r)};m=this._makeLabel(r[r.length-1],r);this._makeItem(r,m,J)}},{key:"_showColorPicker",value:function(m,k,r){var x=this;k.onclick=function(){};this.colorPicker.insertTo(k);this.colorPicker.show();
this.colorPicker.setColor(m);this.colorPicker.setUpdateCallback(function(J){J="rgba("+J.r+","+J.g+","+J.b+","+J.a+")";k.style.backgroundColor=J;x._update(J,r)});this.colorPicker.setCloseCallback(function(){k.onclick=function(){x._showColorPicker(m,k,r)}})}},{key:"_handleObject",value:function(m){var k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!1,x=this.options.filter,J=!1,Z;for(Z in m)if(m.hasOwnProperty(Z)){var sa=!0;var bb=
m[Z],Ta=V.copyAndExtendArray(k,Z);"function"===typeof x&&(sa=x(Z,k),!1===sa&&!(bb instanceof Array)&&"string"!==typeof bb&&"boolean"!==typeof bb&&bb instanceof Object&&(this.allowCreation=!1,sa=this._handleObject(bb,Ta,!0),this.allowCreation=!1===r));!1!==sa&&(J=!0,sa=this._getValue(Ta),bb instanceof Array?this._handleArray(bb,sa,Ta):"string"===typeof bb?this._makeTextInput(bb,sa,Ta):"boolean"===typeof bb?this._makeCheckbox(bb,sa,Ta):bb instanceof Object?(sa=!0,-1!==k.indexOf("physics")&&this.moduleOptions.physics.solver!==
Z&&(sa=!1),!0===sa&&(void 0!==bb.enabled?(sa=V.copyAndExtendArray(Ta,"enabled"),sa=this._getValue(sa),!0===sa?(sa=this._makeLabel(Z,Ta,!0),this._makeItem(Ta,sa),J=this._handleObject(bb,Ta)||J):this._makeCheckbox(bb,sa,Ta)):(sa=this._makeLabel(Z,Ta,!0),this._makeItem(Ta,sa),J=this._handleObject(bb,Ta)||J))):console.error("dont know how to handle",bb,Z,Ta))}return J}},{key:"_handleArray",value:function(m,k,r){"string"===typeof m[0]&&"color"===m[0]?(this._makeColorField(m,k,r),m[1]!==k&&this.changedOptions.push({path:r,
value:k})):"string"===typeof m[0]?(this._makeDropdown(m,k,r),m[0]!==k&&this.changedOptions.push({path:r,value:k})):"number"===typeof m[0]&&(this._makeRange(m,k,r),m[0]!==k&&this.changedOptions.push({path:r,value:Number(k)}))}},{key:"_update",value:function(m,k){m=this._constructOptions(m,k);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",m);this.initialized=!0;this.parent.setOptions(m)}},{key:"_constructOptions",value:function(m,
k){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},x=r;m="true"===m?!0:m;m="false"===m?!1:m;for(var J=0;J<k.length;J++)"global"!==k[J]&&(void 0===x[k[J]]&&(x[k[J]]={}),J!==k.length-1?x=x[k[J]]:x[k[J]]=m);return r}},{key:"_printOptions",value:function(){var m=this.getOptions();this.optionsContainer.innerHTML="\x3cpre\x3evar options \x3d "+JSON.stringify(m,null,2)+"\x3c/pre\x3e"}},{key:"getOptions",value:function(){for(var m={},k=0;k<this.changedOptions.length;k++)this._constructOptions(this.changedOptions[k].value,
this.changedOptions[k].path,m);return m}}]);return K}(),Ra=function(K){function m(k,r,x,J){function Z(ac,yc){Ta.hasListeners(ac)&&Ta.emit(ac,Ta.getEventProperties(yc))}ka(this,m);var sa=O(this,X(m).call(this));sa.initTime=new Date;sa.itemsDone=!1;if(!(la(sa)instanceof m))throw new SyntaxError("Constructor must be called with the new operator");if(!(Array.isArray(x)||x instanceof cc.DataSet||x instanceof cc.DataView)&&x instanceof Object){var bb=J;J=x;x=bb}J&&J.throttleRedraw&&console.warn('Timeline option "throttleRedraw" is DEPRICATED and no longer supported. It will be removed in the next MAJOR release.');
var Ta=la(sa);sa.defaultOptions={autoResize:!0,longSelectPressTime:251,orientation:{axis:"bottom",item:"bottom"},moment:Gb};sa.options=V.deepExtend({},sa.defaultOptions);sa._create(k);if(!J||J&&"undefined"==typeof J.rtl){sa.dom.root.style.visibility="hidden";for(k=sa.dom.root;!Pb&&k;){var Pb=window.getComputedStyle(k,null).direction;k=k.parentElement}sa.options.rtl=Pb&&"rtl"==Pb.toLowerCase()}else sa.options.rtl=J.rtl;J&&(J.rollingMode&&(sa.options.rollingMode=J.rollingMode),J.onInitialDrawComplete&&
(sa.options.onInitialDrawComplete=J.onInitialDrawComplete),J.onTimeout&&(sa.options.onTimeout=J.onTimeout),J.loadingScreenTemplate&&(sa.options.loadingScreenTemplate=J.loadingScreenTemplate));Pb=document.createElement("div");sa.options.loadingScreenTemplate&&(k=sa.options.loadingScreenTemplate.bind(la(sa)),bb=k(sa.dom.loadingScreen),bb instanceof Object&&!(bb instanceof Element)?k(Pb):bb instanceof Element?(Pb.innerHTML="",Pb.appendChild(bb)):void 0!=bb&&(Pb.innerHTML=bb));sa.dom.loadingScreen.appendChild(Pb);
sa.components=[];sa.body={dom:sa.dom,domProps:sa.props,emitter:{on:sa.on.bind(la(sa)),off:sa.off.bind(la(sa)),emit:sa.emit.bind(la(sa))},hiddenDates:[],util:{getScale:function(){return Ta.timeAxis.step.scale},getStep:function(){return Ta.timeAxis.step.step},toScreen:Ta._toScreen.bind(Ta),toGlobalScreen:Ta._toGlobalScreen.bind(Ta),toTime:Ta._toTime.bind(Ta),toGlobalTime:Ta._toGlobalTime.bind(Ta)}};sa.range=new Wb(sa.body,sa.options);sa.components.push(sa.range);sa.body.range=sa.range;sa.timeAxis=new cb(sa.body,
sa.options);sa.timeAxis2=null;sa.components.push(sa.timeAxis);sa.currentTime=new Gc(sa.body,sa.options);sa.components.push(sa.currentTime);sa.itemSet=new xc(sa.body,sa.options);sa.components.push(sa.itemSet);sa.itemsData=null;sa.groupsData=null;sa.dom.root.onclick=function(ac){Z("click",ac)};sa.dom.root.ondblclick=function(ac){Z("doubleClick",ac)};sa.dom.root.oncontextmenu=function(ac){Z("contextmenu",ac)};sa.dom.root.onmouseover=function(ac){Z("mouseOver",ac)};window.PointerEvent?(sa.dom.root.onpointerdown=
function(ac){Z("mouseDown",ac)},sa.dom.root.onpointermove=function(ac){Z("mouseMove",ac)},sa.dom.root.onpointerup=function(ac){Z("mouseUp",ac)}):(sa.dom.root.onmousemove=function(ac){Z("mouseMove",ac)},sa.dom.root.onmousedown=function(ac){Z("mouseDown",ac)},sa.dom.root.onmouseup=function(ac){Z("mouseUp",ac)});sa.initialFitDone=!1;sa.on("changed",function(){if(null!=Ta.itemsData){if(!Ta.initialFitDone&&!Ta.options.rollingMode)if(Ta.initialFitDone=!0,void 0!=Ta.options.start||void 0!=Ta.options.end){if(void 0==
Ta.options.start||void 0==Ta.options.end)var ac=Ta.getItemRange();Ta.setWindow(void 0!=Ta.options.start?Ta.options.start:ac.min,void 0!=Ta.options.end?Ta.options.end:ac.max,{animation:!1})}else Ta.fit({animation:!1});Ta.initialDrawDone||!Ta.initialRangeChangeDone&&(Ta.options.start||Ta.options.end)&&!Ta.options.rollingMode||(Ta.initialDrawDone=!0,Ta.itemSet.initialDrawDone=!0,Ta.dom.root.style.visibility="visible",Ta.dom.loadingScreen.parentNode.removeChild(Ta.dom.loadingScreen),Ta.options.onInitialDrawComplete&&
setTimeout(function(){return Ta.options.onInitialDrawComplete()},0))}});sa.on("destroyTimeline",function(){Ta.destroy()});J&&sa.setOptions(J);sa.body.emitter.on("fit",function(ac){sa._onFit(ac);sa.redraw()});x&&sa.setGroups(x);r&&sa.setItems(r);sa._redraw();return sa}ua(m,K);ca(m,[{key:"_createConfigurator",value:function(){return new Wa(this,this.dom.container,M)}},{key:"redraw",value:function(){this.itemSet&&this.itemSet.markDirty({refreshItems:!0});this._redraw()}},{key:"setOptions",value:function(k){!0===
Uc.validate(k,F)&&console.log("%cErrors have been found in the supplied options object.","background: #FFeeee; color: #dd0000");Dd.prototype.setOptions.call(this,k);if("type"in k&&k.type!==this.options.type&&(this.options.type=k.type,k=this.itemsData)){var r=this.getSelection();this.setItems(null);this.setItems(k.rawDS);this.setSelection(r)}}},{key:"setItems",value:function(k){this.itemsDone=!1;k=k?k instanceof cc.DataSet||k instanceof cc.DataView?Y(k):Y(new cc.DataSet(k)):null;this.itemsData&&this.itemsData.dispose();
this.itemsData=k;this.itemSet&&this.itemSet.setItems(null!=k?k.rawDS:null)}},{key:"setGroups",value:function(k){if(k){var r=function(x){return!1!==x.visible};k=k instanceof cc.DataSet||k instanceof cc.DataView?new cc.DataView(k,{filter:r}):new cc.DataSet(k.filter(r))}else k=null;this.groupsData instanceof cc.DataView&&this.groupsData.setData(null);this.groupsData=k;this.itemSet.setGroups(k)}},{key:"setData",value:function(k){k&&k.groups&&this.setGroups(k.groups);k&&k.items&&this.setItems(k.items)}},
{key:"setSelection",value:function(k,r){this.itemSet&&this.itemSet.setSelection(k);r&&r.focus&&this.focus(k,r)}},{key:"getSelection",value:function(){return this.itemSet&&this.itemSet.getSelection()||[]}},{key:"focus",value:function(k,r){if(this.itemsData&&void 0!=k){k=Array.isArray(k)?k:[k];var x=null,J=null;this.itemsData.get(k).forEach(function(yc){var Pc=yc.start.valueOf();yc="end"in yc?yc.end.valueOf():yc.start.valueOf();if(null===x||Pc<x)x=Pc;if(null===J||yc>J)J=yc});if(null!==x&&null!==J){var Z=
this,sa=this.itemSet.items[k[0]],bb=-1*this._getScrollTop(),Ta=null,Pb=function(){var yc=Ib(Z,sa);yc.shouldScroll&&yc.itemTop!=Ta.itemTop&&(Z._setScrollTop(-yc.scrollOffset),Z._redraw())};k=(x+J)/2;var ac=(r&&void 0!==r.zoom?r.zoom:1)?1.1*(J-x):Math.max(this.range.end-this.range.start,1.1*(J-x));(r=r&&void 0!==r.animation?r.animation:!0)||(Ta={shouldScroll:!1,scrollOffset:-1,itemTop:-1});this.range.setRange(k-ac/2,k+ac/2,{animation:r},function(){Pb();setTimeout(Pb,100)},function(yc,Pc,Bc){var Hc=
Ib(Z,sa);if(!1!==Hc&&(Ta||(Ta=Hc),Ta.itemTop!=Hc.itemTop||Ta.shouldScroll)){Ta.itemTop!=Hc.itemTop&&Hc.shouldScroll&&(Ta=Hc,bb=-1*Z._getScrollTop());Hc=bb;var gd=Ta.scrollOffset;Z._setScrollTop(-(Bc?gd:Hc+(gd-Hc)*yc));Pc||Z._redraw()}})}}}},{key:"fit",value:function(k,r){k=k&&void 0!==k.animation?k.animation:!0;if(1===this.itemsData.length&&void 0===this.itemsData.get()[0].end){var x=this.getDataRange();this.moveTo(x.min.valueOf(),{animation:k},r)}else x=this.getItemRange(),this.range.setRange(x.min,
x.max,{animation:k},r)}},{key:"getItemRange",value:function(){var k=this,r=this.getDataRange(),x=null!==r.min?r.min.valueOf():null,J=null!==r.max?r.max.valueOf():null,Z=null,sa=null;if(null!=x&&null!=J){r=J-x;0>=r&&(r=10);var bb=r/this.props.center.width,Ta={},Pb=0;V.forEach(this.itemSet.items,function(Bc,Hc){Bc.groupShowing&&(Ta[Hc]=Bc.redraw(!0),Pb=Ta[Hc].length)});if(0<Pb)for(var ac=function(Bc){V.forEach(Ta,function(Hc){Hc[Bc]()})},yc=0;yc<Pb;yc++)ac(yc);V.forEach(this.itemSet.items,function(Bc){var Hc=
Cb(Bc),gd=ib(Bc);k.options.rtl?(Hc-=(Bc.getWidthRight()+10)*bb,gd+=(Bc.getWidthLeft()+10)*bb):(Hc-=(Bc.getWidthLeft()+10)*bb,gd+=(Bc.getWidthRight()+10)*bb);Hc<x&&(x=Hc,Z=Bc);gd>J&&(J=gd,sa=Bc)});if(Z&&sa){ac=Z.getWidthLeft()+10;yc=sa.getWidthRight()+10;var Pc=this.props.center.width-ac-yc;0<Pc&&(this.options.rtl?(x=Cb(Z)-yc*r/Pc,J=ib(sa)+ac*r/Pc):(x=Cb(Z)-ac*r/Pc,J=ib(sa)+yc*r/Pc))}}return{min:null!=x?new Date(x):null,max:null!=J?new Date(J):null}}},{key:"getDataRange",value:function(){var k=null,
r=null;this.itemsData&&this.itemsData.forEach(function(x){var J=V.convert(x.start,"Date").valueOf();x=V.convert(void 0!=x.end?x.end:x.start,"Date").valueOf();if(null===k||J<k)k=J;if(null===r||x>r)r=x});return{min:null!=k?new Date(k):null,max:null!=r?new Date(r):null}}},{key:"getEventProperties",value:function(k){var r=k.center?k.center.x:k.clientX,x=k.center?k.center.y:k.clientY,J=this.dom.centerContainer.getBoundingClientRect();r=this.options.rtl?J.right-r:r-J.left;x-=J.top;J=this.itemSet.itemFromTarget(k);
var Z=this.itemSet.groupFromTarget(k),sa=Qd.customTimeFromTarget(k),bb=this.itemSet.options.snap||null,Ta=this.body.util.getScale(),Pb=this.body.util.getStep(),ac=this._toTime(r);bb=bb?bb(ac,Ta,Pb):ac;Ta=V.getTarget(k);Pb=null;null!=J?Pb="item":null!=sa?Pb="custom-time":V.hasParent(Ta,this.timeAxis.dom.foreground)?Pb="axis":this.timeAxis2&&V.hasParent(Ta,this.timeAxis2.dom.foreground)?Pb="axis":V.hasParent(Ta,this.itemSet.dom.labelSet)?Pb="group-label":V.hasParent(Ta,this.currentTime.bar)?Pb="current-time":
V.hasParent(Ta,this.dom.center)&&(Pb="background");return{event:k,item:J?J.id:null,isCluster:J?!!J.isCluster:!1,items:J?J.items||[]:null,group:Z?Z.groupId:null,customTime:sa?sa.options.id:null,what:Pb,pageX:k.srcEvent?k.srcEvent.pageX:k.pageX,pageY:k.srcEvent?k.srcEvent.pageY:k.pageY,x:r,y:x,time:ac,snappedTime:bb}}},{key:"toggleRollingMode",value:function(){this.range.rolling?this.range.stopRolling():(void 0==this.options.rollingMode&&this.setOptions(this.options),this.range.startRolling())}},{key:"_redraw",
value:function(){Dd.prototype._redraw.call(this)}},{key:"_onFit",value:function(k){var r=k.start,x=k.end;k=k.animation;x?this.range.setRange(r,x,{animation:k}):this.moveTo(r.valueOf(),{animation:k})}}]);return m}(Dd);wb.Timeline=Ra;var Bb=function(){function K(m,k,r,x,J,Z){var sa=6<arguments.length&&void 0!==arguments[6]?arguments[6]:!1,bb=7<arguments.length&&void 0!==arguments[7]?arguments[7]:!1;ka(this,K);this.majorSteps=[1,2,5,10];this.minorSteps=[.25,.5,1,2];this.customLines=null;this.containerHeight=
J;this.majorCharHeight=Z;this._start=m;this._end=k;this.scale=1;this.minorStepIdx=-1;this.magnitudefactor=1;this.determineScale();this.zeroAlign=sa;this.autoScaleStart=r;this.autoScaleEnd=x;this.formattingFunction=bb;if(r||x){var Ta=this;sa=function(Pb){var ac=Pb-Pb%(Ta.magnitudefactor*Ta.minorSteps[Ta.minorStepIdx]);return Pb%(Ta.magnitudefactor*Ta.minorSteps[Ta.minorStepIdx])>.5*Ta.magnitudefactor*Ta.minorSteps[Ta.minorStepIdx]?ac+Ta.magnitudefactor*Ta.minorSteps[Ta.minorStepIdx]:ac};r&&(this._start-=
2*this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._start=sa(this._start));x&&(this._end+=this.magnitudefactor*this.minorSteps[this.minorStepIdx],this._end=sa(this._end));this.determineScale()}}ca(K,[{key:"setCharHeight",value:function(m){this.majorCharHeight=m}},{key:"setHeight",value:function(m){this.containerHeight=m}},{key:"determineScale",value:function(){var m=this._end-this._start;this.scale=this.containerHeight/m;var k=this.majorCharHeight/this.scale;m=0<m?Math.round(Math.log(m)/
Math.LN10):0;this.minorStepIdx=-1;this.magnitudefactor=Math.pow(10,m);var r=0;0>m&&(r=m);for(var x=!1;Math.abs(r)<=Math.abs(m);r++){this.magnitudefactor=Math.pow(10,r);for(var J=0;J<this.minorSteps.length;J++)if(this.magnitudefactor*this.minorSteps[J]>=k){x=!0;this.minorStepIdx=J;break}if(!0===x)break}}},{key:"is_major",value:function(m){return 0===m%(this.magnitudefactor*this.majorSteps[this.minorStepIdx])}},{key:"getStep",value:function(){return this.magnitudefactor*this.minorSteps[this.minorStepIdx]}},
{key:"getFirstMajor",value:function(){var m=this.magnitudefactor*this.majorSteps[this.minorStepIdx];return this.convertValue(this._start+(m-this._start%m)%m)}},{key:"formatValue",value:function(m){var k=m.toPrecision(5);"function"===typeof this.formattingFunction&&(k=this.formattingFunction(m));return"number"===typeof k?"".concat(k):"string"===typeof k?k:m.toPrecision(5)}},{key:"getLines",value:function(){for(var m=[],k=this.getStep(),r=this._start+(k-this._start%k)%k;1E-5<this._end-r;r+=k)r!=this._start&&
m.push({major:this.is_major(r),y:this.convertValue(r),val:this.formatValue(r)});return m}},{key:"followScale",value:function(m){var k=this.minorStepIdx,r=this._start,x=this._end;1>=m.minorStepIdx&&1>=this.minorStepIdx||1<m.minorStepIdx&&1<this.minorStepIdx||(m.minorStepIdx<this.minorStepIdx?(this.minorStepIdx=1,2!=k&&(this.magnitudefactor*=2),this.magnitudefactor*=2):(this.minorStepIdx=2,1!=k&&(this.magnitudefactor/=2),this.magnitudefactor/=2));k=m.convertValue(0);for(var J=m.getStep()*m.scale,Z=
!1,sa=0;!Z&&5>sa++;){this.scale=J/(this.minorSteps[this.minorStepIdx]*this.magnitudefactor);Z=this.containerHeight/this.scale;this._start=r;this._end=this._start+Z;var bb=this._end*this.scale,Ta=this.magnitudefactor*this.majorSteps[this.minorStepIdx],Pb=this.getFirstMajor()-m.getFirstMajor();this.zeroAlign?(this._end+=(k-bb)/this.scale,this._start=this._end-Z):(this._start=this.autoScaleStart?this._start-Pb/this.scale:this._start+(Ta-Pb/this.scale),this._end=this._start+Z);if(!this.autoScaleEnd&&
this._end>x+1E-5)this.magnitudefactor/=2,Z=!1;else{if(!this.autoScaleStart&&this._start<r-1E-5)if(this.zeroAlign&&0<=r)console.warn("Can't adhere to given 'min' range, due to zeroalign");else{this.magnitudefactor/=2;Z=!1;continue}this.autoScaleStart&&this.autoScaleEnd&&Z<x-r?(this.magnitudefactor*=2,Z=!1):Z=!0}}}},{key:"convertValue",value:function(m){return this.containerHeight-(m-this._start)*this.scale}},{key:"screenToValue",value:function(m){return(this.containerHeight-m)/this.scale+this._start}}]);
return K}(),Ob=function(K){function m(k,r,x,J){ka(this,m);var Z=O(this,X(m).call(this));Z.id=(0,lb.v4)();Z.body=k;Z.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0,alignZeros:!0,left:{range:{min:void 0,max:void 0},format:function(bb){return"".concat(parseFloat(bb.toPrecision(3)))},title:{text:void 0,style:void 0}},right:{range:{min:void 0,max:void 0},
format:function(bb){return"".concat(parseFloat(bb.toPrecision(3)))},title:{text:void 0,style:void 0}}};Z.linegraphOptions=J;Z.linegraphSVG=x;Z.props={};Z.DOMelements={lines:{},labels:{},title:{}};Z.dom={};Z.scale=void 0;Z.range={start:0,end:0};Z.options=V.extend({},Z.defaultOptions);Z.conversionFactor=1;Z.setOptions(r);Z.width=Number("".concat(Z.options.width).replace("px",""));Z.minWidth=Z.width;Z.height=Z.linegraphSVG.getBoundingClientRect().height;Z.hidden=!1;Z.stepPixels=25;Z.zeroCrossing=-1;
Z.amountOfSteps=-1;Z.lineOffset=0;Z.master=!0;Z.masterAxis=null;Z.svgElements={};Z.iconsRemoved=!1;Z.groups={};Z.amountOfGroups=0;Z._create();void 0==Z.scale&&Z._redrawLabels();Z.framework={svg:Z.svg,svgElements:Z.svgElements,options:Z.options,groups:Z.groups};var sa=la(Z);Z.body.emitter.on("verticalDrag",function(){sa.dom.lineContainer.style.top="".concat(sa.body.domProps.scrollTop,"px")});return Z}ua(m,K);ca(m,[{key:"addGroup",value:function(k,r){this.groups.hasOwnProperty(k)||(this.groups[k]=r);
this.amountOfGroups+=1}},{key:"updateGroup",value:function(k,r){this.groups.hasOwnProperty(k)||(this.amountOfGroups+=1);this.groups[k]=r}},{key:"removeGroup",value:function(k){this.groups.hasOwnProperty(k)&&(delete this.groups[k],--this.amountOfGroups)}},{key:"setOptions",value:function(k){if(k){var r=!1;this.options.orientation!=k.orientation&&void 0!==k.orientation&&(r=!0);V.selectiveDeepExtend("orientation showMinorLabels showMajorLabels icons majorLinesOffset minorLinesOffset labelOffsetX labelOffsetY iconWidth width visible left right alignZeros".split(" "),
this.options,k);this.minWidth=Number("".concat(this.options.width).replace("px",""));!0===r&&this.dom.frame&&(this.hide(),this.show())}}},{key:"_create",value:function(){this.dom.frame=document.createElement("div");this.dom.frame.style.width=this.options.width;this.dom.frame.style.height=this.height;this.dom.lineContainer=document.createElement("div");this.dom.lineContainer.style.width="100%";this.dom.lineContainer.style.height=this.height;this.dom.lineContainer.style.position="relative";this.dom.lineContainer.style.visibility=
"visible";this.dom.lineContainer.style.display="block";this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top="0px";this.svg.style.height="100%";this.svg.style.width="100%";this.svg.style.display="block";this.dom.frame.appendChild(this.svg)}},{key:"_redrawGroupIcons",value:function(){Oa(this.svgElements);var k=this.options.iconWidth,r=11.5;var x="left"===this.options.orientation?4:this.width-k-4;var J=Object.keys(this.groups);J.sort(function(bb,
Ta){return bb<Ta?-1:1});for(var Z=0;Z<J.length;Z++){var sa=J[Z];!0!==this.groups[sa].visible||void 0!==this.linegraphOptions.visibility[sa]&&!0!==this.linegraphOptions.visibility[sa]||(this.groups[sa].getLegend(k,15,this.framework,x,r),r+=19)}Ua(this.svgElements);this.iconsRemoved=!1}},{key:"_cleanupIcons",value:function(){!1===this.iconsRemoved&&(Oa(this.svgElements),Ua(this.svgElements),this.iconsRemoved=!0)}},{key:"show",value:function(){this.hidden=!1;this.dom.frame.parentNode||("left"===this.options.orientation?
this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame));this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer);this.dom.lineContainer.style.display="block"}},{key:"hide",value:function(){this.hidden=!0;this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame);this.dom.lineContainer.style.display="none"}},{key:"setRange",value:function(k,r){this.range.start=k;this.range.end=r}},{key:"redraw",
value:function(){var k=!1,r=0;this.dom.lineContainer.style.top="".concat(this.body.domProps.scrollTop,"px");for(var x in this.groups)this.groups.hasOwnProperty(x)&&(!0!==this.groups[x].visible||void 0!==this.linegraphOptions.visibility[x]&&!0!==this.linegraphOptions.visibility[x]||r++);if(0===this.amountOfGroups||0===r)this.hide();else{this.show();this.height=Number(this.linegraphSVG.style.height.replace("px",""));this.dom.lineContainer.style.height="".concat(this.height,"px");this.width=!0===this.options.visible?
Number("".concat(this.options.width).replace("px","")):0;k=this.props;x=this.dom.frame;x.className="vis-data-axis";this._calculateCharSize();r=this.options.orientation;var J=this.options.showMajorLabels,Z=this.body.dom.backgroundHorizontal.offsetWidth;k.minorLabelHeight=this.options.showMinorLabels?k.minorCharHeight:0;k.majorLabelHeight=J?k.majorCharHeight:0;k.minorLineWidth=Z-this.lineOffset-this.width+2*this.options.minorLinesOffset;k.minorLineHeight=1;k.majorLineWidth=Z-this.lineOffset-this.width+
2*this.options.majorLinesOffset;k.majorLineHeight=1;"left"===r?(x.style.top="0",x.style.left="0",x.style.bottom="",x.style.width="".concat(this.width,"px"),x.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.left.width,this.props.height=this.body.domProps.left.height):(x.style.top="",x.style.bottom="0",x.style.left="0",x.style.width="".concat(this.width,"px"),x.style.height="".concat(this.height,"px"),this.props.width=this.body.domProps.right.width,this.props.height=this.body.domProps.right.height);
k=this._redrawLabels();k=this._isResized()||k;!0===this.options.icons?this._redrawGroupIcons():this._cleanupIcons();this._redrawTitle(r)}return k}},{key:"_redrawLabels",value:function(){var k=this,r=!1;Oa(this.DOMelements.lines);Oa(this.DOMelements.labels);var x=this.options.orientation;r=void 0!=this.options[x].range?this.options[x].range:{};var J=!0;void 0!=r.max&&(this.range.end=r.max,J=!1);var Z=!0;void 0!=r.min&&(this.range.start=r.min,Z=!1);this.scale=new Bb(this.range.start,this.range.end,
Z,J,this.dom.frame.offsetHeight,this.props.majorCharHeight,this.options.alignZeros,this.options[x].format);!1===this.master&&void 0!=this.masterAxis?(this.scale.followScale(this.masterAxis.scale),this.dom.lineContainer.style.display="none"):this.dom.lineContainer.style.display="block";this.maxLabelSize=0;this.scale.getLines().forEach(function(sa){var bb=sa.y,Ta=sa.major;k.options.showMinorLabels&&!1===Ta&&k._redrawLabel(bb-2,sa.val,x,"vis-y-axis vis-minor",k.props.minorCharHeight);Ta&&0<=bb&&k._redrawLabel(bb-
2,sa.val,x,"vis-y-axis vis-major",k.props.majorCharHeight);!0===k.master&&(Ta?k._redrawLine(bb,x,"vis-grid vis-horizontal vis-major",k.options.majorLinesOffset,k.props.majorLineWidth):k._redrawLine(bb,x,"vis-grid vis-horizontal vis-minor",k.options.minorLinesOffset,k.props.minorLineWidth))});r=0;void 0!==this.options[x].title&&void 0!==this.options[x].title.text&&(r=this.props.titleCharHeight);r=!0===this.options.icons?Math.max(this.options.iconWidth,r)+this.options.labelOffsetX+15:r+this.options.labelOffsetX+
15;this.maxLabelSize>this.width-r&&!0===this.options.visible?(this.width=this.maxLabelSize+r,this.options.width="".concat(this.width,"px"),Ua(this.DOMelements.lines),Ua(this.DOMelements.labels),this.redraw(),r=!0):this.maxLabelSize<this.width-r&&!0===this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+r),this.options.width="".concat(this.width,"px"),Ua(this.DOMelements.lines),Ua(this.DOMelements.labels),this.redraw(),r=!0):(Ua(this.DOMelements.lines),
Ua(this.DOMelements.labels),r=!1);return r}},{key:"convertValue",value:function(k){return this.scale.convertValue(k)}},{key:"screenToValue",value:function(k){return this.scale.screenToValue(k)}},{key:"_redrawLabel",value:function(k,r,x,J,Z){var sa=Qa("div",this.DOMelements.labels,this.dom.frame);sa.className=J;sa.innerHTML=r;"left"===x?(sa.style.left="-".concat(this.options.labelOffsetX,"px"),sa.style.textAlign="right"):(sa.style.right="-".concat(this.options.labelOffsetX,"px"),sa.style.textAlign=
"left");sa.style.top="".concat(k-.5*Z+this.options.labelOffsetY,"px");r+="";k=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<r.length*k&&(this.maxLabelSize=r.length*k)}},{key:"_redrawLine",value:function(k,r,x,J,Z){if(!0===this.master){var sa=Qa("div",this.DOMelements.lines,this.dom.lineContainer);sa.className=x;sa.innerHTML="";"left"===r?sa.style.left="".concat(this.width-J,"px"):sa.style.right="".concat(this.width-J,"px");sa.style.width="".concat(Z,"px");sa.style.top=
"".concat(k,"px")}}},{key:"_redrawTitle",value:function(k){Oa(this.DOMelements.title);if(void 0!==this.options[k].title&&void 0!==this.options[k].title.text){var r=Qa("div",this.DOMelements.title,this.dom.frame);r.className="vis-y-axis vis-title vis-".concat(k);r.innerHTML=this.options[k].title.text;void 0!==this.options[k].title.style&&V.addCssText(r,this.options[k].title.style);"left"===k?r.style.left="".concat(this.props.titleCharHeight,"px"):r.style.right="".concat(this.props.titleCharHeight,
"px");r.style.width="".concat(this.height,"px")}Ua(this.DOMelements.title)}},{key:"_calculateCharSize",value:function(){if(!("minorCharHeight"in this.props)){var k=document.createTextNode("0"),r=document.createElement("div");r.className="vis-y-axis vis-minor vis-measure";r.appendChild(k);this.dom.frame.appendChild(r);this.props.minorCharHeight=r.clientHeight;this.props.minorCharWidth=r.clientWidth;this.dom.frame.removeChild(r)}"majorCharHeight"in this.props||(k=document.createTextNode("0"),r=document.createElement("div"),
r.className="vis-y-axis vis-major vis-measure",r.appendChild(k),this.dom.frame.appendChild(r),this.props.majorCharHeight=r.clientHeight,this.props.majorCharWidth=r.clientWidth,this.dom.frame.removeChild(r));"titleCharHeight"in this.props||(k=document.createTextNode("0"),r=document.createElement("div"),r.className="vis-y-axis vis-title vis-measure",r.appendChild(k),this.dom.frame.appendChild(r),this.props.titleCharHeight=r.clientHeight,this.props.titleCharWidth=r.clientWidth,this.dom.frame.removeChild(r))}}]);
return m}(hb);La.draw=function(K,m,k,r){r=r||0;var x=void 0;k.options&&k.options.drawPoints&&k.options.drawPoints.onRender&&"function"==typeof k.options.drawPoints.onRender&&(x=k.options.drawPoints.onRender);m.group.options&&m.group.options.drawPoints&&m.group.options.drawPoints.onRender&&"function"==typeof m.group.options.drawPoints.onRender&&(x=m.group.options.drawPoints.onRender);for(var J=0;J<K.length;J++)if(x){var Z=x(K[J],m);!0!==Z&&"object"!==y(Z)||Za(K[J].screen_x+r,K[J].screen_y,Na(m,Z),
k.svgElements,k.svg,K[J].label)}else Za(K[J].screen_x+r,K[J].screen_y,Na(m),k.svgElements,k.svg,K[J].label)};La.drawIcon=function(K,m,k,r,x,J){x*=.5;var Z=ja("rect",J.svgElements,J.svg);Z.setAttributeNS(null,"x",m);Z.setAttributeNS(null,"y",k-x);Z.setAttributeNS(null,"width",r);Z.setAttributeNS(null,"height",2*x);Z.setAttributeNS(null,"class","vis-outline");Za(m+.5*r,k,Na(K),J.svgElements,J.svg)};kb.drawIcon=function(K,m,k,r,x,J){var Z=.5*x,sa=ja("rect",J.svgElements,J.svg);sa.setAttributeNS(null,
"x",m);sa.setAttributeNS(null,"y",k-Z);sa.setAttributeNS(null,"width",r);sa.setAttributeNS(null,"height",2*Z);sa.setAttributeNS(null,"class","vis-outline");sa=Math.round(.3*r);var bb=K.options.barChart.width/sa,Ta=Math.round(.4*x);x=Math.round(.75*x);r=Math.round((r-2*sa)/3);qb(m+.5*sa+r,k+Z-Ta-1,sa,Ta,K.className+" vis-bar",J.svgElements,J.svg,K.style);qb(m+1.5*sa+r+2,k+Z-x-1,sa,x,K.className+" vis-bar",J.svgElements,J.svg,K.style);1==K.options.drawPoints.enabled&&(K={style:K.options.drawPoints.style,
styles:K.options.drawPoints.styles,size:K.options.drawPoints.size/bb,className:K.className},Za(m+.5*sa+r,k+Z-Ta-1,K,J.svgElements,J.svg),Za(m+1.5*sa+r+2,k+Z-x-1,K,J.svgElements,J.svg))};kb.draw=function(K,m,k){var r=[],x={},J,Z,sa;for(sa=Z=0;sa<K.length;sa++){var bb=k.groups[K[sa]];if("bar"===bb.options.style&&!0===bb.visible&&(void 0===k.options.groups.visibility[K[sa]]||!0===k.options.groups.visibility[K[sa]]))for(bb=0;bb<m[K[sa]].length;bb++)r.push({screen_x:m[K[sa]][bb].screen_x,screen_end:m[K[sa]][bb].screen_end,
screen_y:m[K[sa]][bb].screen_y,x:m[K[sa]][bb].x,end:m[K[sa]][bb].end,y:m[K[sa]][bb].y,groupId:K[sa],label:m[K[sa]][bb].label}),Z+=1}if(0!==Z)for(r.sort(function(Pb,ac){return Pb.screen_x===ac.screen_x?Pb.groupId<ac.groupId?-1:1:Pb.screen_x-ac.screen_x}),kb._getDataIntersections(x,r),sa=0;sa<r.length;sa++){bb=k.groups[r[sa].groupId];Z=void 0!=bb.options.barChart.minWidth?bb.options.barChart.minWidth:.1*bb.options.barChart.width;m=r[sa].screen_x;K=0;if(void 0===x[m])sa+1<r.length&&(J=Math.abs(r[sa+
1].screen_x-m)),Z=kb._getSafeDrawData(J,bb,Z);else{var Ta=sa+(x[m].amount-x[m].resolved);Ta<r.length&&(J=Math.abs(r[Ta].screen_x-m));Z=kb._getSafeDrawData(J,bb,Z);x[m].resolved+=1;!0===bb.options.stack&&!0!==bb.options.excludeFromStacking?r[sa].screen_y<bb.zeroPosition?(K=x[m].accumulatedNegative,x[m].accumulatedNegative+=bb.zeroPosition-r[sa].screen_y):(K=x[m].accumulatedPositive,x[m].accumulatedPositive+=bb.zeroPosition-r[sa].screen_y):!0===bb.options.barChart.sideBySide&&(Z.width/=x[m].amount,
Z.offset+=x[m].resolved*Z.width-.5*Z.width*(x[m].amount+1))}m=Z.width;Ta=r[sa].screen_x;void 0!=r[sa].screen_end?(m=r[sa].screen_end-r[sa].screen_x,Ta+=.5*m):Ta+=Z.offset;qb(Ta,r[sa].screen_y-K,m,bb.zeroPosition-r[sa].screen_y,bb.className+" vis-bar",k.svgElements,k.svg,bb.style);!0===bb.options.drawPoints.enabled&&La.draw([{screen_x:r[sa].screen_x,screen_y:r[sa].screen_y-K,x:r[sa].x,y:r[sa].y,groupId:r[sa].groupId,label:r[sa].label}],bb,k,Z.offset)}};kb._getDataIntersections=function(K,m){for(var k,
r=0;r<m.length;r++)r+1<m.length&&(k=Math.abs(m[r+1].screen_x-m[r].screen_x)),0<r&&(k=Math.min(k,Math.abs(m[r-1].screen_x-m[r].screen_x))),0===k&&(void 0===K[m[r].screen_x]&&(K[m[r].screen_x]={amount:0,resolved:0,accumulatedPositive:0,accumulatedNegative:0}),K[m[r].screen_x].amount+=1)};kb._getSafeDrawData=function(K,m,k){if(K<m.options.barChart.width&&0<K){k=K<k?k:K;var r=0;"left"===m.options.barChart.align?r-=.5*K:"right"===m.options.barChart.align&&(r+=.5*K)}else k=m.options.barChart.width,r=0,
"left"===m.options.barChart.align?r-=.5*m.options.barChart.width:"right"===m.options.barChart.align&&(r+=.5*m.options.barChart.width);return{width:k,offset:r}};kb.getStackedYRange=function(K,m,k,r,x){if(0<K.length){K.sort(function(Z,sa){return Z.screen_x===sa.screen_x?Z.groupId<sa.groupId?-1:1:Z.screen_x-sa.screen_x});var J={};kb._getDataIntersections(J,K);m[r]=kb._getStackedYRange(J,K);m[r].yAxisOrientation=x;k.push(r)}};kb._getStackedYRange=function(K,m){for(var k,r=m[0].screen_y,x=m[0].screen_y,
J=0;J<m.length;J++)k=m[J].screen_x,void 0===K[k]?(r=r>m[J].screen_y?m[J].screen_y:r,x=x<m[J].screen_y?m[J].screen_y:x):0>m[J].screen_y?K[k].accumulatedNegative+=m[J].screen_y:K[k].accumulatedPositive+=m[J].screen_y;for(var Z in K)K.hasOwnProperty(Z)&&(r=r>K[Z].accumulatedNegative?K[Z].accumulatedNegative:r,r=r>K[Z].accumulatedPositive?K[Z].accumulatedPositive:r,x=x<K[Z].accumulatedNegative?K[Z].accumulatedNegative:x,x=x<K[Z].accumulatedPositive?K[Z].accumulatedPositive:x);return{min:r,max:x}};Sa.calcPath=
function(K,m){if(null!=K&&0<K.length)return 1==m.options.interpolation.enabled?Sa._catmullRom(K,m):Sa._linear(K)};Sa.drawIcon=function(K,m,k,r,x,J){x*=.5;var Z=ja("rect",J.svgElements,J.svg);Z.setAttributeNS(null,"x",m);Z.setAttributeNS(null,"y",k-x);Z.setAttributeNS(null,"width",r);Z.setAttributeNS(null,"height",2*x);Z.setAttributeNS(null,"class","vis-outline");Z=ja("path",J.svgElements,J.svg);Z.setAttributeNS(null,"class",K.className);void 0!==K.style&&Z.setAttributeNS(null,"style",K.style);Z.setAttributeNS(null,
"d","M"+m+","+k+" L"+(m+r)+","+k);1==K.options.shaded.enabled&&(Z=ja("path",J.svgElements,J.svg),"top"==K.options.shaded.orientation?Z.setAttributeNS(null,"d","M"+m+", "+(k-x)+"L"+m+","+k+" L"+(m+r)+","+k+" L"+(m+r)+","+(k-x)):Z.setAttributeNS(null,"d","M"+m+","+k+" L"+m+","+(k+x)+" L"+(m+r)+","+(k+x)+"L"+(m+r)+","+k),Z.setAttributeNS(null,"class",K.className+" vis-icon-fill"),void 0!==K.options.shaded.style&&""!==K.options.shaded.style&&Z.setAttributeNS(null,"style",K.options.shaded.style));1==K.options.drawPoints.enabled&&
Za(m+.5*r,k,{style:K.options.drawPoints.style,styles:K.options.drawPoints.styles,size:K.options.drawPoints.size,className:K.className},J.svgElements,J.svg)};Sa.drawShading=function(K,m,k,r){if(1==m.options.shaded.enabled){var x=Number(r.svg.style.height.replace("px",""));r=ja("path",r.svgElements,r.svg);var J="L";1==m.options.interpolation.enabled&&(J="C");x="top"==m.options.shaded.orientation?0:"bottom"==m.options.shaded.orientation?x:Math.min(Math.max(0,m.zeroPosition),x);K="group"==m.options.shaded.orientation&&
null!=k&&void 0!=k?"M"+K[0][0]+","+K[0][1]+" "+this.serializePath(K,J,!1)+" L"+k[k.length-1][0]+","+k[k.length-1][1]+" "+this.serializePath(k,J,!0)+k[0][0]+","+k[0][1]+" Z":"M"+K[0][0]+","+K[0][1]+" "+this.serializePath(K,J,!1)+" V"+x+" H"+K[0][0]+" Z";r.setAttributeNS(null,"class",m.className+" vis-fill");void 0!==m.options.shaded.style&&r.setAttributeNS(null,"style",m.options.shaded.style);r.setAttributeNS(null,"d",K)}};Sa.draw=function(K,m,k){if(null!=K&&void 0!=K){k=ja("path",k.svgElements,k.svg);
k.setAttributeNS(null,"class",m.className);void 0!==m.style&&k.setAttributeNS(null,"style",m.style);var r="L";1==m.options.interpolation.enabled&&(r="C");k.setAttributeNS(null,"d","M"+K[0][0]+","+K[0][1]+" "+this.serializePath(K,r,!1))}};Sa.serializePath=function(K,m,k){if(2>K.length)return"";if(k)for(k=K.length-2;0<k;k--)m+=K[k][0]+","+K[k][1]+" ";else for(k=1;k<K.length;k++)m+=K[k][0]+","+K[k][1]+" ";return m};Sa._catmullRomUniform=function(K){var m=[];m.push([Math.round(K[0].screen_x),Math.round(K[0].screen_y)]);
for(var k=1/6,r=K.length,x=0;x<r-1;x++){var J=0==x?K[0]:K[x-1];var Z=K[x];var sa=K[x+1];var bb=x+2<r?K[x+2]:sa;var Ta=(-J.screen_x+6*Z.screen_x+sa.screen_x)*k;var Pb=(-J.screen_y+6*Z.screen_y+sa.screen_y)*k;J=(Z.screen_x+6*sa.screen_x-bb.screen_x)*k;Z=(Z.screen_y+6*sa.screen_y-bb.screen_y)*k;m.push([Ta,Pb]);m.push([J,Z]);m.push([sa.screen_x,sa.screen_y])}return m};Sa._catmullRom=function(K,m){m=m.options.interpolation.alpha;if(0==m||void 0===m)return this._catmullRomUniform(K);var k=[];k.push([Math.round(K[0].screen_x),
Math.round(K[0].screen_y)]);for(var r=K.length,x=0;x<r-1;x++){var J=0==x?K[0]:K[x-1];var Z=K[x];var sa=K[x+1];var bb=x+2<r?K[x+2]:sa;var Ta=Math.sqrt(Math.pow(J.screen_x-Z.screen_x,2)+Math.pow(J.screen_y-Z.screen_y,2));var Pb=Math.sqrt(Math.pow(Z.screen_x-sa.screen_x,2)+Math.pow(Z.screen_y-sa.screen_y,2));var ac=Math.sqrt(Math.pow(sa.screen_x-bb.screen_x,2)+Math.pow(sa.screen_y-bb.screen_y,2));var yc=Math.pow(ac,m);ac=Math.pow(ac,2*m);var Pc=Math.pow(Pb,m);Pb=Math.pow(Pb,2*m);var Bc=Math.pow(Ta,m);
var Hc=Math.pow(Ta,2*m);var gd=2*Hc+3*Bc*Pc+Pb;Ta=2*ac+3*yc*Pc+Pb;Bc=3*Bc*(Bc+Pc);0<Bc&&(Bc=1/Bc);yc=3*yc*(yc+Pc);0<yc&&(yc=1/yc);J={screen_x:(-Pb*J.screen_x+gd*Z.screen_x+Hc*sa.screen_x)*Bc,screen_y:(-Pb*J.screen_y+gd*Z.screen_y+Hc*sa.screen_y)*Bc};bb={screen_x:(ac*Z.screen_x+Ta*sa.screen_x-Pb*bb.screen_x)*yc,screen_y:(ac*Z.screen_y+Ta*sa.screen_y-Pb*bb.screen_y)*yc};0==J.screen_x&&0==J.screen_y&&(J=Z);0==bb.screen_x&&0==bb.screen_y&&(bb=sa);k.push([J.screen_x,J.screen_y]);k.push([bb.screen_x,bb.screen_y]);
k.push([sa.screen_x,sa.screen_y])}return k};Sa._linear=function(K){for(var m=[],k=0;k<K.length;k++)m.push([K[k].screen_x,K[k].screen_y]);return m};vb.prototype.setItems=function(K){null!=K?(this.itemsData=K,1==this.options.sort&&V.insertSort(this.itemsData,function(m,k){return m.x>k.x?1:-1})):this.itemsData=[]};vb.prototype.getItems=function(){return this.itemsData};vb.prototype.setZeroPosition=function(K){this.zeroPosition=K};vb.prototype.setOptions=function(K){void 0!==K&&(V.selectiveDeepExtend("sampling style sort yAxisOrientation barChart zIndex excludeFromStacking excludeFromLegend".split(" "),
this.options,K),"function"==typeof K.drawPoints&&(K.drawPoints={onRender:K.drawPoints}),V.mergeOptions(this.options,K,"interpolation"),V.mergeOptions(this.options,K,"drawPoints"),V.mergeOptions(this.options,K,"shaded"),K.interpolation&&"object"==y(K.interpolation)&&K.interpolation.parametrization&&("uniform"==K.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==K.interpolation.parametrization?this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",
this.options.interpolation.alpha=.5)))};vb.prototype.update=function(K){this.group=K;this.content=K.content||"graph";this.className=K.className||this.className||"vis-graph-group"+this.groupsUsingDefaultStyles[0]%10;this.visible=void 0===K.visible?!0:K.visible;this.style=K.style;this.setOptions(K.options)};vb.prototype.getLegend=function(K,m,k,r,x){if(void 0==k||null==k)k={svg:document.createElementNS("http://www.w3.org/2000/svg","svg"),svgElements:{},options:this.options,groups:[this]};if(void 0==
r||null==r)r=0;if(void 0==x||null==x)x=.5*m;switch(this.options.style){case "line":Sa.drawIcon(this,r,x,K,m,k);break;case "points":case "point":La.drawIcon(this,r,x,K,m,k);break;case "bar":kb.drawIcon(this,r,x,K,m,k)}return{icon:k.svg,label:this.content,orientation:this.options.yAxisOrientation}};vb.prototype.getYRange=function(K){for(var m=K[0].y,k=K[0].y,r=0;r<K.length;r++)m=m>K[r].y?K[r].y:m,k=k<K[r].y?K[r].y:k;return{min:m,max:k,yAxisOrientation:this.options.yAxisOrientation}};jb.prototype=new hb;
jb.prototype.clear=function(){this.groups={};this.amountOfGroups=0};jb.prototype.addGroup=function(K,m){1!=m.options.excludeFromLegend&&(this.groups.hasOwnProperty(K)||(this.groups[K]=m),this.amountOfGroups+=1)};jb.prototype.updateGroup=function(K,m){this.groups[K]=m};jb.prototype.removeGroup=function(K){this.groups.hasOwnProperty(K)&&(delete this.groups[K],--this.amountOfGroups)};jb.prototype._create=function(){this.dom.frame=document.createElement("div");this.dom.frame.className="vis-legend";this.dom.frame.style.position=
"absolute";this.dom.frame.style.top="10px";this.dom.frame.style.display="block";this.dom.textArea=document.createElement("div");this.dom.textArea.className="vis-legend-text";this.dom.textArea.style.position="relative";this.dom.textArea.style.top="0px";this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="absolute";this.svg.style.top="0px";this.svg.style.width=this.options.iconSize+5+"px";this.svg.style.height="100%";this.dom.frame.appendChild(this.svg);this.dom.frame.appendChild(this.dom.textArea)};
jb.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};jb.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};jb.prototype.setOptions=function(K){V.selectiveDeepExtend(["enabled","orientation","icons","left","right"],this.options,K)};jb.prototype.redraw=function(){var K=0,m=Object.keys(this.groups);m.sort(function(x,J){return x<J?-1:1});for(var k=0;k<m.length;k++){var r=m[k];1!=this.groups[r].visible||
void 0!==this.linegraphOptions.visibility[r]&&1!=this.linegraphOptions.visibility[r]||K++}if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled||0==K)this.hide();else{this.show();"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right=
"",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left="");"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position?(this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom=
""):(this.dom.frame.style.bottom=4+(this.body.domProps.center.height-this.body.domProps.centerContainer.height)+Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top="");0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());K="";
for(k=0;k<m.length;k++)r=m[k],1!=this.groups[r].visible||void 0!==this.linegraphOptions.visibility[r]&&1!=this.linegraphOptions.visibility[r]||(K+=this.groups[r].content+"\x3cbr /\x3e");this.dom.textArea.innerHTML=K;this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}};jb.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){var K=Object.keys(this.groups);K.sort(function(sa,bb){return sa<bb?-1:1});Pa(this.svgElements);var m=window.getComputedStyle(this.dom.frame).paddingTop;
m=Number(m.replace("px",""));var k=this.options.iconSize,r=.75*this.options.iconSize,x=m+.5*r+3;this.svg.style.width=k+5+m+"px";for(var J=0;J<K.length;J++){var Z=K[J];1!=this.groups[Z].visible||void 0!==this.linegraphOptions.visibility[Z]&&1!=this.linegraphOptions.visibility[Z]||(this.groups[Z].getLegend(k,r,this.framework,m,x),x+=r+this.options.iconSpacing)}}};nb.prototype=new hb;nb.prototype._create=function(){var K=document.createElement("div");K.className="vis-line-graph";this.dom.frame=K;this.svg=
document.createElementNS("http://www.w3.org/2000/svg","svg");this.svg.style.position="relative";this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px";this.svg.style.display="block";K.appendChild(this.svg);this.options.dataAxis.orientation="left";this.yAxisLeft=new Ob(this.body,this.options.dataAxis,this.svg,this.options.groups);this.options.dataAxis.orientation="right";this.yAxisRight=new Ob(this.body,this.options.dataAxis,this.svg,this.options.groups);delete this.options.dataAxis.orientation;
this.legendLeft=new jb(this.body,this.options.legend,"left",this.options.groups);this.legendRight=new jb(this.body,this.options.legend,"right",this.options.groups);this.show()};nb.prototype.setOptions=function(K){K&&(void 0===K.graphHeight&&void 0!==K.height?this.updateSVGheightOnResize=this.updateSVGheight=!0:void 0!==this.body.domProps.centerContainer.height&&void 0!==K.graphHeight&&parseInt((K.graphHeight+"").replace("px",""))<this.body.domProps.centerContainer.height&&(this.updateSVGheight=!0),
V.selectiveDeepExtend("sampling defaultGroup stack height graphHeight yAxisOrientation style barChart dataAxis sort groups".split(" "),this.options,K),V.mergeOptions(this.options,K,"interpolation"),V.mergeOptions(this.options,K,"drawPoints"),V.mergeOptions(this.options,K,"shaded"),V.mergeOptions(this.options,K,"legend"),K.interpolation&&"object"==y(K.interpolation)&&K.interpolation.parametrization&&("uniform"==K.interpolation.parametrization?this.options.interpolation.alpha=0:"chordal"==K.interpolation.parametrization?
this.options.interpolation.alpha=1:(this.options.interpolation.parametrization="centripetal",this.options.interpolation.alpha=.5)),this.yAxisLeft&&void 0!==K.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==K.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty("__ungrouped__")&&this.groups.__ungrouped__.setOptions(K));this.dom.frame&&
(this.forceGraphUpdate=!0,this.body.emitter.emit("_change",{queue:!0}))};nb.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)};nb.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)};nb.prototype.setItems=function(K){var m=this,k=this.itemsData;if(K)if(K instanceof cc.DataSet||K instanceof cc.DataView)this.itemsData=Y(K);else throw new TypeError("Data must be an instance of DataSet or DataView");
else this.itemsData=null;k&&(V.forEach(this.itemListeners,function(x,J){k.off(J,x)}),k.dispose(),K=k.getIds(),this._onRemove(K));if(this.itemsData){var r=this.id;V.forEach(this.itemListeners,function(x,J){m.itemsData.on(J,x,r)});K=this.itemsData.getIds();this._onAdd(K)}};nb.prototype.setGroups=function(K){var m=this;if(this.groupsData){V.forEach(this.groupListeners,function(J,Z){m.groupsData.off(Z,J)});var k=this.groupsData.getIds();this.groupsData=null;for(var r=0;r<k.length;r++)this._removeGroup(k[r])}if(K)if(K instanceof
cc.DataSet||K instanceof cc.DataView)this.groupsData=K;else throw new TypeError("Data must be an instance of DataSet or DataView");else this.groupsData=null;if(this.groupsData){var x=this.id;V.forEach(this.groupListeners,function(J,Z){m.groupsData.on(Z,J,x)});k=this.groupsData.getIds();this._onAddGroups(k)}};nb.prototype._onUpdate=function(K){this._updateAllGroupData(K)};nb.prototype._onAdd=function(K){this._onUpdate(K)};nb.prototype._onRemove=function(K){this._onUpdate(K)};nb.prototype._onUpdateGroups=
function(K){this._updateAllGroupData(null,K)};nb.prototype._onAddGroups=function(K){this._onUpdateGroups(K)};nb.prototype._onRemoveGroups=function(K){for(var m=0;m<K.length;m++)this._removeGroup(K[m]);this.forceGraphUpdate=!0;this.body.emitter.emit("_change",{queue:!0})};nb.prototype._removeGroup=function(K){this.groups.hasOwnProperty(K)&&("right"==this.groups[K].options.yAxisOrientation?(this.yAxisRight.removeGroup(K),this.legendRight.removeGroup(K),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(K),
this.legendLeft.removeGroup(K),this.legendLeft.redraw()),delete this.groups[K])};nb.prototype._updateGroup=function(K,m){this.groups.hasOwnProperty(m)?(this.groups[m].update(K),"right"==this.groups[m].options.yAxisOrientation?(this.yAxisRight.updateGroup(m,this.groups[m]),this.legendRight.updateGroup(m,this.groups[m]),this.yAxisLeft.removeGroup(m),this.legendLeft.removeGroup(m)):(this.yAxisLeft.updateGroup(m,this.groups[m]),this.legendLeft.updateGroup(m,this.groups[m]),this.yAxisRight.removeGroup(m),
this.legendRight.removeGroup(m))):(this.groups[m]=new vb(K,m,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[m].options.yAxisOrientation?(this.yAxisRight.addGroup(m,this.groups[m]),this.legendRight.addGroup(m,this.groups[m])):(this.yAxisLeft.addGroup(m,this.groups[m]),this.legendLeft.addGroup(m,this.groups[m])));this.legendLeft.redraw();this.legendRight.redraw()};nb.prototype._updateAllGroupData=function(K,m){if(null!=this.itemsData){var k={},r=this.itemsData.get(),x=this.itemsData.idProp,
J={};K&&K.map(function(yc){J[yc]=yc});for(var Z={},sa=0;sa<r.length;sa++){var bb=r[sa],Ta=bb.group;if(null===Ta||void 0===Ta)Ta="__ungrouped__";Z.hasOwnProperty(Ta)?Z[Ta]++:Z[Ta]=1}var Pb={};if(!m&&K)for(Ta in this.groups)this.groups.hasOwnProperty(Ta)&&(sa=this.groups[Ta],sa=sa.getItems(),k[Ta]=sa.filter(function(yc){Pb[yc[x]]=yc[x];return yc[x]!==J[yc[x]]}),sa=Z[Ta],Z[Ta]-=k[Ta].length,k[Ta].length<sa&&(k[Ta][sa-1]={}));for(sa=0;sa<r.length;sa++){bb=r[sa];Ta=bb.group;if(null===Ta||void 0===Ta)Ta=
"__ungrouped__";if(m||!K||bb[x]===J[bb[x]]||!Pb.hasOwnProperty(bb[x])){k.hasOwnProperty(Ta)||(k[Ta]=Array(Z[Ta]));var ac=V.bridgeObject(bb);ac.x=V.convert(bb.x,"Date");ac.end=V.convert(bb.end,"Date");ac.orginalY=bb.y;ac.y=Number(bb.y);ac[x]=bb[x];bb=k[Ta].length-Z[Ta]--;k[Ta][bb]=ac}}for(Ta in this.groups)this.groups.hasOwnProperty(Ta)&&(k.hasOwnProperty(Ta)||(k[Ta]=[]));for(Ta in k)k.hasOwnProperty(Ta)&&(0==k[Ta].length?this.groups.hasOwnProperty(Ta)&&this._removeGroup(Ta):(sa=void 0,void 0!=this.groupsData&&
(sa=this.groupsData.get(Ta)),void 0==sa&&(sa={id:Ta,content:this.options.defaultGroup+Ta}),this._updateGroup(sa,Ta),this.groups[Ta].setItems(k[Ta])));this.forceGraphUpdate=!0;this.body.emitter.emit("_change",{queue:!0})}};nb.prototype.redraw=function(){var K=!1;this.props.width=this.dom.frame.offsetWidth;this.props.height=this.body.domProps.centerContainer.height-this.body.domProps.border.top-this.body.domProps.border.bottom;K=this._isResized()||K;var m=this.body.range.end-this.body.range.start,k=
m!=this.lastVisibleInterval;this.lastVisibleInterval=m;1==K&&(this.svg.style.width=V.option.asSize(3*this.props.width),this.svg.style.left=V.option.asSize(-this.props.width),-1!=(this.options.height+"").indexOf("%")||1==this.updateSVGheightOnResize)&&(this.updateSVGheight=!0);1==this.updateSVGheight?(this.options.graphHeight!=this.props.height+"px"&&(this.options.graphHeight=this.props.height+"px",this.svg.style.height=this.props.height+"px"),this.updateSVGheight=!1):this.svg.style.height=(""+this.options.graphHeight).replace("px",
"")+"px";1==K||1==k||1==this.abortedGraphUpdate||1==this.forceGraphUpdate?(K=this._updateGraph()||K,this.forceGraphUpdate=!1):0!=this.lastStart&&(m=this.body.range.start-this.lastStart,k=this.body.range.end-this.body.range.start,0!=this.props.width&&(this.svg.style.left=-this.props.width-this.props.width/k*m+"px"));this.legendLeft.redraw();this.legendRight.redraw();return K};nb.prototype._getSortedGroupIds=function(){var K=[];for(k in this.groups)if(this.groups.hasOwnProperty(k)){var m=this.groups[k];
1!=m.visible||void 0!==this.options.groups.visibility[k]&&1!=this.options.groups.visibility[k]||K.push({id:k,zIndex:m.options.zIndex})}V.insertSort(K,function(r,x){r=r.zIndex;x=x.zIndex;void 0===r&&(r=0);void 0===x&&(x=0);return r==x?0:r<x?-1:1});var k=Array(K.length);for(m=0;m<K.length;m++)k[m]=K[m].id;return k};nb.prototype._updateGraph=function(){Oa(this.svgElements);if(0!=this.props.width&&null!=this.itemsData){var K={};var m=this.body.util.toGlobalTime(-this.body.domProps.root.width);var k=this.body.util.toGlobalTime(2*
this.body.domProps.root.width),r=this._getSortedGroupIds();if(0<r.length){var x={};this._getRelevantData(r,x,m,k);this._applySampling(r,x);for(m=0;m<r.length;m++)this._convertXcoordinates(x[r[m]]);this._getYRanges(r,x,K);m=this._updateYAxis(r,K);if(1==m)return Ua(this.svgElements),this.abortedGraphUpdate=!0;this.abortedGraphUpdate=!1;k=void 0;for(m=0;m<r.length;m++)K=this.groups[r[m]],!0!==this.options.stack||"line"!==this.options.style||void 0!=K.options.excludeFromStacking&&K.options.excludeFromStacking||
(void 0!=k&&(this._stack(x[K.id],x[k.id]),1==K.options.shaded.enabled&&"group"!==K.options.shaded.orientation&&("top"==K.options.shaded.orientation&&"group"!==k.options.shaded.orientation?(k.options.shaded.orientation="group",k.options.shaded.groupId=K.id):(K.options.shaded.orientation="group",K.options.shaded.groupId=k.id))),k=K),this._convertYcoordinates(x[r[m]],K);k={};for(m=0;m<r.length;m++)if(K=this.groups[r[m]],"line"===K.options.style&&1==K.options.shaded.enabled){var J=x[r[m]];null!=J&&0!=
J.length&&(k.hasOwnProperty(r[m])||(k[r[m]]=Sa.calcPath(J,K)),"group"===K.options.shaded.orientation?(J=K.options.shaded.groupId,-1===r.indexOf(J)?console.log(K.id+": Unknown shading group target given:"+J):(k.hasOwnProperty(J)||(k[J]=Sa.calcPath(x[J],this.groups[J])),Sa.drawShading(k[r[m]],K,k[J],this.framework))):Sa.drawShading(k[r[m]],K,void 0,this.framework))}kb.draw(r,x,this.framework);for(m=0;m<r.length;m++)if(K=this.groups[r[m]],0<x[r[m]].length)switch(K.options.style){case "line":k.hasOwnProperty(r[m])||
(k[r[m]]=Sa.calcPath(x[r[m]],K)),Sa.draw(k[r[m]],K,this.framework);case "point":case "points":"point"!=K.options.style&&"points"!=K.options.style&&1!=K.options.drawPoints.enabled||La.draw(x[r[m]],K,this.framework)}}}Ua(this.svgElements);return!1};nb.prototype._stack=function(K,m){for(var k,r,x,J,Z,sa=k=0;sa<K.length;sa++){Z=J=void 0;for(r=k;r<m.length;r++)if(m[r].x===K[sa].x){J=m[r];Z=m[r];k=r;break}else if(m[r].x>K[sa].x){Z=m[r];J=0==r?Z:m[r-1];k=r;break}void 0===Z&&(J=m[m.length-1],Z=m[m.length-
1]);r=Z.x-J.x;x=Z.y-J.y;K[sa].y=0==r?K[sa].orginalY+Z.y:K[sa].orginalY+x/r*(K[sa].x-J.x)+J.y}};nb.prototype._getRelevantData=function(K,m,k,r){var x;if(0<K.length)for(x=0;x<K.length;x++){var J=this.groups[K[x]];var Z=J.getItems();if(1==J.options.sort){var sa=function(ac,yc){return ac.getTime()==yc.getTime()?0:ac<yc?-1:1},bb=Math.max(0,V.binarySearchValue(Z,k,"x","before",sa));sa=Math.min(Z.length,V.binarySearchValue(Z,r,"x","after",sa)+1);0>=sa&&(sa=Z.length);var Ta=Array(sa-bb);for(Z=bb;Z<sa;Z++){var Pb=
J.itemsData[Z];Ta[Z-bb]=Pb}m[K[x]]=Ta}else m[K[x]]=J.itemsData}};nb.prototype._applySampling=function(K,m){if(0<K.length)for(var k=0;k<K.length;k++){var r=this.groups[K[k]];if(1==r.options.sampling&&(r=m[K[k]],0<r.length)){var x=r.length;var J=this.body.util.toGlobalScreen(r[r.length-1].x)-this.body.util.toGlobalScreen(r[0].x);J=Math.min(Math.ceil(.2*x),Math.max(1,Math.round(x/J)));for(var Z=Array(x),sa=0;sa<x;sa+=J)Z[Math.round(sa/J)]=r[sa];m[K[k]]=Z.splice(0,Math.round(x/J))}}};nb.prototype._getYRanges=
function(K,m,k){var r,x=[],J=[];if(0<K.length){for(r=0;r<K.length;r++){var Z=m[K[r]];var sa=this.groups[K[r]].options;if(0<Z.length){var bb=this.groups[K[r]];!0===sa.stack&&"bar"===sa.style?"left"===sa.yAxisOrientation?x=x.concat(Z):J=J.concat(Z):k[K[r]]=bb.getYRange(Z,K[r])}}kb.getStackedYRange(x,k,K,"__barStackLeft","left");kb.getStackedYRange(J,k,K,"__barStackRight","right")}};nb.prototype._updateYAxis=function(K,m){var k=!1,r=!1,x=!1,J=1E9,Z=1E9,sa=-1E9,bb=-1E9,Ta;if(0<K.length){for(var Pb=0;Pb<
K.length;Pb++)(Ta=this.groups[K[Pb]])&&"right"!=Ta.options.yAxisOrientation?(r=!0,J=1E9,sa=-1E9):Ta&&Ta.options.yAxisOrientation&&(x=!0,Z=1E9,bb=-1E9);for(Pb=0;Pb<K.length;Pb++)if(m.hasOwnProperty(K[Pb])&&!0!==m[K[Pb]].ignore){Ta=m[K[Pb]].min;var ac=m[K[Pb]].max;"right"!=m[K[Pb]].yAxisOrientation?(r=!0,J=J>Ta?Ta:J,sa=sa<ac?ac:sa):(x=!0,Z=Z>Ta?Ta:Z,bb=bb<ac?ac:bb)}1==r&&this.yAxisLeft.setRange(J,sa);1==x&&this.yAxisRight.setRange(Z,bb)}k=this._toggleAxisVisiblity(r,this.yAxisLeft)||k;k=this._toggleAxisVisiblity(x,
this.yAxisRight)||k;1==x&&1==r?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1);this.yAxisRight.master=!r;this.yAxisRight.masterAxis=this.yAxisLeft;0==this.yAxisRight.master&&(this.yAxisLeft.lineOffset=1==x?this.yAxisRight.width:0,k=this.yAxisLeft.redraw()||k);k=this.yAxisRight.redraw()||k;m=["__barStackLeft","__barStackRight","__lineStackLeft","__lineStackRight"];for(Pb=0;Pb<m.length;Pb++)-1!=K.indexOf(m[Pb])&&K.splice(K.indexOf(m[Pb]),
1);return k};nb.prototype._toggleAxisVisiblity=function(K,m){var k=!1;0==K?m.dom.frame.parentNode&&0==m.hidden&&(m.hide(),k=!0):m.dom.frame.parentNode||1!=m.hidden||(m.show(),k=!0);return k};nb.prototype._convertXcoordinates=function(K){for(var m=this.body.util.toScreen,k=0;k<K.length;k++)K[k].screen_x=m(K[k].x)+this.props.width,K[k].screen_y=K[k].y,K[k].screen_end=void 0!=K[k].end?m(K[k].end)+this.props.width:void 0};nb.prototype._convertYcoordinates=function(K,m){var k=this.yAxisLeft,r=Number(this.svg.style.height.replace("px",
""));"right"==m.options.yAxisOrientation&&(k=this.yAxisRight);for(var x=0;x<K.length;x++)K[x].screen_y=Math.round(k.convertValue(K[x].y));m.setZeroPosition(Math.min(r,k.convertValue(0)))};var tb={configure:{enabled:{"boolean":"boolean"},filter:{"boolean":"boolean","function":"function"},container:{dom:"dom"},__type__:{object:"object","boolean":"boolean","function":"function"}},alignCurrentTime:{string:"string",undefined:"undefined"},yAxisOrientation:{string:["left","right"]},defaultGroup:{string:"string"},
sort:{"boolean":"boolean"},sampling:{"boolean":"boolean"},stack:{"boolean":"boolean"},graphHeight:{string:"string",number:"number"},shaded:{enabled:{"boolean":"boolean"},orientation:{string:["bottom","top","zero","group"]},groupId:{object:"object"},__type__:{"boolean":"boolean",object:"object"}},style:{string:["line","bar","points"]},barChart:{width:{number:"number"},minWidth:{number:"number"},sideBySide:{"boolean":"boolean"},align:{string:["left","center","right"]},__type__:{object:"object"}},interpolation:{enabled:{"boolean":"boolean"},
parametrization:{string:["centripetal","chordal","uniform"]},alpha:{number:"number"},__type__:{object:"object","boolean":"boolean"}},drawPoints:{enabled:{"boolean":"boolean"},onRender:{"function":"function"},size:{number:"number"},style:{string:["square","circle"]},__type__:{object:"object","boolean":"boolean","function":"function"}},dataAxis:{showMinorLabels:{"boolean":"boolean"},showMajorLabels:{"boolean":"boolean"},showWeekScale:{"boolean":"boolean"},icons:{"boolean":"boolean"},width:{string:"string",
number:"number"},visible:{"boolean":"boolean"},alignZeros:{"boolean":"boolean"},left:{range:{min:{number:"number",undefined:"undefined"},max:{number:"number",undefined:"undefined"},__type__:{object:"object"}},format:{"function":"function"},title:{text:{string:"string",number:"number",undefined:"undefined"},style:{string:"string",undefined:"undefined"},__type__:{object:"object"}},__type__:{object:"object"}},right:{range:{min:{number:"number",undefined:"undefined"},max:{number:"number",undefined:"undefined"},
__type__:{object:"object"}},format:{"function":"function"},title:{text:{string:"string",number:"number",undefined:"undefined"},style:{string:"string",undefined:"undefined"},__type__:{object:"object"}},__type__:{object:"object"}},__type__:{object:"object"}},legend:{enabled:{"boolean":"boolean"},icons:{"boolean":"boolean"},left:{visible:{"boolean":"boolean"},position:{string:["top-right","bottom-right","top-left","bottom-left"]},__type__:{object:"object"}},right:{visible:{"boolean":"boolean"},position:{string:["top-right",
"bottom-right","top-left","bottom-left"]},__type__:{object:"object"}},__type__:{object:"object","boolean":"boolean"}},groups:{visibility:{any:"any"},__type__:{object:"object"}},autoResize:{"boolean":"boolean"},throttleRedraw:{number:"number"},clickToUse:{"boolean":"boolean"},end:{number:"number",date:"date",string:"string",moment:"moment"},format:{minorLabels:{millisecond:{string:"string",undefined:"undefined"},second:{string:"string",undefined:"undefined"},minute:{string:"string",undefined:"undefined"},
hour:{string:"string",undefined:"undefined"},weekday:{string:"string",undefined:"undefined"},day:{string:"string",undefined:"undefined"},week:{string:"string",undefined:"undefined"},month:{string:"string",undefined:"undefined"},quarter:{string:"string",undefined:"undefined"},year:{string:"string",undefined:"undefined"},__type__:{object:"object"}},majorLabels:{millisecond:{string:"string",undefined:"undefined"},second:{string:"string",undefined:"undefined"},minute:{string:"string",undefined:"undefined"},
hour:{string:"string",undefined:"undefined"},weekday:{string:"string",undefined:"undefined"},day:{string:"string",undefined:"undefined"},week:{string:"string",undefined:"undefined"},month:{string:"string",undefined:"undefined"},quarter:{string:"string",undefined:"undefined"},year:{string:"string",undefined:"undefined"},__type__:{object:"object"}},__type__:{object:"object"}},moment:{"function":"function"},height:{string:"string",number:"number"},hiddenDates:{start:{date:"date",number:"number",string:"string",
moment:"moment"},end:{date:"date",number:"number",string:"string",moment:"moment"},repeat:{string:"string"},__type__:{object:"object",array:"array"}},locale:{string:"string"},locales:{__any__:{any:"any"},__type__:{object:"object"}},max:{date:"date",number:"number",string:"string",moment:"moment"},maxHeight:{number:"number",string:"string"},maxMinorChars:{number:"number"},min:{date:"date",number:"number",string:"string",moment:"moment"},minHeight:{number:"number",string:"string"},moveable:{"boolean":"boolean"},
multiselect:{"boolean":"boolean"},orientation:{string:"string"},showCurrentTime:{"boolean":"boolean"},showMajorLabels:{"boolean":"boolean"},showMinorLabels:{"boolean":"boolean"},showWeekScale:{"boolean":"boolean"},start:{date:"date",number:"number",string:"string",moment:"moment"},timeAxis:{scale:{string:"string",undefined:"undefined"},step:{number:"number",undefined:"undefined"},__type__:{object:"object"}},width:{string:"string",number:"number"},zoomable:{"boolean":"boolean"},zoomKey:{string:["ctrlKey",
"altKey","metaKey",""]},zoomMax:{number:"number"},zoomMin:{number:"number"},zIndex:{number:"number"},__type__:{object:"object"}},Tb={global:{alignCurrentTime:"none year month quarter week isoWeek day date hour minute second".split(" "),sort:!0,sampling:!0,stack:!1,shaded:{enabled:!1,orientation:["zero","top","bottom","group"]},style:["line","bar","points"],barChart:{width:[50,5,100,5],minWidth:[50,5,100,5],sideBySide:!1,align:["left","center","right"]},interpolation:{enabled:!0,parametrization:["centripetal",
"chordal","uniform"]},drawPoints:{enabled:!0,size:[6,2,30,1],style:["square","circle"]},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,showWeekScale:!1,icons:!1,width:[40,0,200,1],visible:!0,alignZeros:!0,left:{title:{text:"",style:""}},right:{title:{text:"",style:""}}},legend:{enabled:!1,icons:!0,left:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]},right:{visible:!0,position:["top-right","bottom-right","top-left","bottom-left"]}},autoResize:!0,clickToUse:!1,end:"",format:{minorLabels:{millisecond:"SSS",
second:"s",minute:"HH:mm",hour:"HH:mm",weekday:"ddd D",day:"D",week:"w",month:"MMM",quarter:"[Q]Q",year:"YYYY"},majorLabels:{millisecond:"HH:mm:ss",second:"D MMMM HH:mm",minute:"ddd D MMMM",hour:"ddd D MMMM",weekday:"MMMM YYYY",day:"MMMM YYYY",week:"MMMM YYYY",month:"YYYY",quarter:"YYYY",year:""}},height:"",locale:"",max:"",maxHeight:"",maxMinorChars:[7,0,20,1],min:"",minHeight:"",moveable:!0,orientation:["both","bottom","top"],showCurrentTime:!1,showMajorLabels:!0,showMinorLabels:!0,showWeekScale:!1,
start:"",width:"100%",zoomable:!0,zoomKey:["ctrlKey","altKey","metaKey",""],zoomMax:[31536E10,10,31536E10,1],zoomMin:[10,10,31536E10,1],zIndex:0}};sb.prototype=new Dd;sb.prototype.setOptions=function(K){!0===Uc.validate(K,tb)&&console.log("%cErrors have been found in the supplied options object.","background: #FFeeee; color: #dd0000");Dd.prototype.setOptions.call(this,K)};sb.prototype.setItems=function(K){var m=null==this.itemsData;K=K?K instanceof cc.DataSet||K instanceof cc.DataView?Y(K):Y(new cc.DataSet(K)):
null;this.itemsData&&this.itemsData.dispose();this.itemsData=K;this.linegraph&&this.linegraph.setItems(null!=K?K.rawDS:null);m&&(void 0!=this.options.start||void 0!=this.options.end?this.setWindow(void 0!=this.options.start?this.options.start:null,void 0!=this.options.end?this.options.end:null,{animation:!1}):this.fit({animation:!1}))};sb.prototype.setGroups=function(K){this.groupsData=K=K?K instanceof cc.DataSet||K instanceof cc.DataView?K:new cc.DataSet(K):null;this.linegraph.setGroups(K)};sb.prototype.getLegend=
function(K,m,k){void 0===m&&(m=15);void 0===k&&(k=15);return void 0!==this.linegraph.groups[K]?this.linegraph.groups[K].getLegend(m,k):"cannot find group:'"+K+"'"};sb.prototype.isGroupVisible=function(K){return void 0!==this.linegraph.groups[K]?this.linegraph.groups[K].visible&&(void 0===this.linegraph.options.groups.visibility[K]||1==this.linegraph.options.groups.visibility[K]):!1};sb.prototype.getDataRange=function(){var K=null,m=null,k;for(k in this.linegraph.groups)if(this.linegraph.groups.hasOwnProperty(k)&&
1==this.linegraph.groups[k].visible)for(var r=0;r<this.linegraph.groups[k].itemsData.length;r++){var x=V.convert(this.linegraph.groups[k].itemsData[r].x,"Date").valueOf();K=null==K?x:K>x?x:K;m=null==m?x:m<x?x:m}return{min:null!=K?new Date(K):null,max:null!=m?new Date(m):null}};sb.prototype.getEventProperties=function(K){var m=K.center?K.center.y:K.clientY,k=(K.center?K.center.x:K.clientX)-V.getAbsoluteLeft(this.dom.centerContainer);m-=V.getAbsoluteTop(this.dom.centerContainer);var r=this._toTime(k),
x=Qd.customTimeFromTarget(K),J=V.getTarget(K),Z=null;V.hasParent(J,this.timeAxis.dom.foreground)?Z="axis":this.timeAxis2&&V.hasParent(J,this.timeAxis2.dom.foreground)?Z="axis":V.hasParent(J,this.linegraph.yAxisLeft.dom.frame)?Z="data-axis":V.hasParent(J,this.linegraph.yAxisRight.dom.frame)?Z="data-axis":V.hasParent(J,this.linegraph.legendLeft.dom.frame)?Z="legend":V.hasParent(J,this.linegraph.legendRight.dom.frame)?Z="legend":null!=x?Z="custom-time":V.hasParent(J,this.currentTime.bar)?Z="current-time":
V.hasParent(J,this.dom.center)&&(Z="background");J=[];var sa=this.linegraph.yAxisLeft,bb=this.linegraph.yAxisRight;!sa.hidden&&0<this.itemsData.length&&J.push(sa.screenToValue(m));!bb.hidden&&0<this.itemsData.length&&J.push(bb.screenToValue(m));return{event:K,customTime:x?x.options.id:null,what:Z,pageX:K.srcEvent?K.srcEvent.pageX:K.pageX,pageY:K.srcEvent?K.srcEvent.pageY:K.pageY,x:k,y:m,time:r,value:J}};sb.prototype._createConfigurator=function(){return new Wa(this,this.dom.container,Tb)};try{var mc=
navigator?navigator.languages&&navigator.languages.length?navigator.languages:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en":"en"}catch(K){mc="en"}hc["default"].locale(mc);wb.timeline={Core:Dd,DateUtil:Mb,Range:Wb,stack:fb,TimeStep:xa,components:{items:{Item:sc,BackgroundItem:zb,BoxItem:wc,PointItem:Mc,RangeItem:ic},BackgroundGroup:gc,Component:hb,CurrentTime:Gc,CustomTime:Qd,DataAxis:Ob,DataScale:Bb,GraphGroup:vb,Group:Db,ItemSet:xc,Legend:jb,LineGraph:nb,TimeAxis:cb}}}
goog.provide("module$node_modules$vis_timeline$esnext$esm$vis_timeline_graph2d");
goog.global. module$node_modules$vis_timeline$esnext$esm$vis_timeline_graph2d=shadow.js.require(76, {});
